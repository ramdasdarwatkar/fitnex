(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Pf={exports:{}},So={};var Gg;function v0(){if(Gg)return So;Gg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(s,o,c){var p=null;if(c!==void 0&&(p=""+c),o.key!==void 0&&(p=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:a,type:s,key:p,ref:o!==void 0?o:null,props:c}}return So.Fragment=n,So.jsx=i,So.jsxs=i,So}var Ig;function b0(){return Ig||(Ig=1,Pf.exports=v0()),Pf.exports}var f=b0(),$f={exports:{}},Ge={};var Vg;function x0(){if(Vg)return Ge;Vg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),T=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,V={};function ae(H,le,we){this.props=H,this.context=le,this.refs=V,this.updater=we||B}ae.prototype.isReactComponent={},ae.prototype.setState=function(H,le){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,le,"setState")},ae.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function K(){}K.prototype=ae.prototype;function Y(H,le,we){this.props=H,this.context=le,this.refs=V,this.updater=we||B}var de=Y.prototype=new K;de.constructor=Y,I(de,ae.prototype),de.isPureReactComponent=!0;var Ee=Array.isArray;function ue(){}var te={H:null,A:null,T:null,S:null},Ne=Object.prototype.hasOwnProperty;function Le(H,le,we){var ke=we.ref;return{$$typeof:a,type:H,key:le,ref:ke!==void 0?ke:null,props:we}}function yt(H,le){return Le(H.type,le,H.props)}function Nt(H){return typeof H=="object"&&H!==null&&H.$$typeof===a}function zt(H){var le={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(we){return le[we]})}var qe=/\/+/g;function dt(H,le){return typeof H=="object"&&H!==null&&H.key!=null?zt(""+H.key):le.toString(36)}function Pt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(ue,ue):(H.status="pending",H.then(function(le){H.status==="pending"&&(H.status="fulfilled",H.value=le)},function(le){H.status==="pending"&&(H.status="rejected",H.reason=le)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function re(H,le,we,ke,He){var Ie=typeof H;(Ie==="undefined"||Ie==="boolean")&&(H=null);var Fe=!1;if(H===null)Fe=!0;else switch(Ie){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(H.$$typeof){case a:case n:Fe=!0;break;case S:return Fe=H._init,re(Fe(H._payload),le,we,ke,He)}}if(Fe)return He=He(H),Fe=ke===""?"."+dt(H,0):ke,Ee(He)?(we="",Fe!=null&&(we=Fe.replace(qe,"$&/")+"/"),re(He,le,we,"",function(Ae){return Ae})):He!=null&&(Nt(He)&&(He=yt(He,we+(He.key==null||H&&H.key===He.key?"":(""+He.key).replace(qe,"$&/")+"/")+Fe)),le.push(He)),1;Fe=0;var en=ke===""?".":ke+":";if(Ee(H))for(var Mt=0;Mt<H.length;Mt++)ke=H[Mt],Ie=en+dt(ke,Mt),Fe+=re(ke,le,we,Ie,He);else if(Mt=A(H),typeof Mt=="function")for(H=Mt.call(H),Mt=0;!(ke=H.next()).done;)ke=ke.value,Ie=en+dt(ke,Mt++),Fe+=re(ke,le,we,Ie,He);else if(Ie==="object"){if(typeof H.then=="function")return re(Pt(H),le,we,ke,He);throw le=String(H),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function xe(H,le,we){if(H==null)return H;var ke=[],He=0;return re(H,ke,"","",function(Ie){return le.call(we,Ie,He++)}),ke}function De(H){if(H._status===-1){var le=H._result;le=le(),le.then(function(we){(H._status===0||H._status===-1)&&(H._status=1,H._result=we)},function(we){(H._status===0||H._status===-1)&&(H._status=2,H._result=we)}),H._status===-1&&(H._status=0,H._result=le)}if(H._status===1)return H._result.default;throw H._result}var at=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Je={map:xe,forEach:function(H,le,we){xe(H,function(){le.apply(this,arguments)},we)},count:function(H){var le=0;return xe(H,function(){le++}),le},toArray:function(H){return xe(H,function(le){return le})||[]},only:function(H){if(!Nt(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ge.Activity=j,Ge.Children=Je,Ge.Component=ae,Ge.Fragment=i,Ge.Profiler=o,Ge.PureComponent=Y,Ge.StrictMode=s,Ge.Suspense=v,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(H){return te.H.useMemoCache(H)}},Ge.cache=function(H){return function(){return H.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(H,le,we){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ke=I({},H.props),He=H.key;if(le!=null)for(Ie in le.key!==void 0&&(He=""+le.key),le)!Ne.call(le,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&le.ref===void 0||(ke[Ie]=le[Ie]);var Ie=arguments.length-2;if(Ie===1)ke.children=we;else if(1<Ie){for(var Fe=Array(Ie),en=0;en<Ie;en++)Fe[en]=arguments[en+2];ke.children=Fe}return Le(H.type,He,ke)},Ge.createContext=function(H){return H={$$typeof:p,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:c,_context:H},H},Ge.createElement=function(H,le,we){var ke,He={},Ie=null;if(le!=null)for(ke in le.key!==void 0&&(Ie=""+le.key),le)Ne.call(le,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(He[ke]=le[ke]);var Fe=arguments.length-2;if(Fe===1)He.children=we;else if(1<Fe){for(var en=Array(Fe),Mt=0;Mt<Fe;Mt++)en[Mt]=arguments[Mt+2];He.children=en}if(H&&H.defaultProps)for(ke in Fe=H.defaultProps,Fe)He[ke]===void 0&&(He[ke]=Fe[ke]);return Le(H,Ie,He)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(H){return{$$typeof:g,render:H}},Ge.isValidElement=Nt,Ge.lazy=function(H){return{$$typeof:S,_payload:{_status:-1,_result:H},_init:De}},Ge.memo=function(H,le){return{$$typeof:b,type:H,compare:le===void 0?null:le}},Ge.startTransition=function(H){var le=te.T,we={};te.T=we;try{var ke=H(),He=te.S;He!==null&&He(we,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(ue,at)}catch(Ie){at(Ie)}finally{le!==null&&we.types!==null&&(le.types=we.types),te.T=le}},Ge.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Ge.use=function(H){return te.H.use(H)},Ge.useActionState=function(H,le,we){return te.H.useActionState(H,le,we)},Ge.useCallback=function(H,le){return te.H.useCallback(H,le)},Ge.useContext=function(H){return te.H.useContext(H)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(H,le){return te.H.useDeferredValue(H,le)},Ge.useEffect=function(H,le){return te.H.useEffect(H,le)},Ge.useEffectEvent=function(H){return te.H.useEffectEvent(H)},Ge.useId=function(){return te.H.useId()},Ge.useImperativeHandle=function(H,le,we){return te.H.useImperativeHandle(H,le,we)},Ge.useInsertionEffect=function(H,le){return te.H.useInsertionEffect(H,le)},Ge.useLayoutEffect=function(H,le){return te.H.useLayoutEffect(H,le)},Ge.useMemo=function(H,le){return te.H.useMemo(H,le)},Ge.useOptimistic=function(H,le){return te.H.useOptimistic(H,le)},Ge.useReducer=function(H,le,we){return te.H.useReducer(H,le,we)},Ge.useRef=function(H){return te.H.useRef(H)},Ge.useState=function(H){return te.H.useState(H)},Ge.useSyncExternalStore=function(H,le,we){return te.H.useSyncExternalStore(H,le,we)},Ge.useTransition=function(){return te.H.useTransition()},Ge.version="19.2.4",Ge}var Yg;function kh(){return Yg||(Yg=1,$f.exports=x0()),$f.exports}var C=kh();const nl=jh(C);var Hf={exports:{}},jo={},Kf={exports:{}},Gf={};var Qg;function w0(){return Qg||(Qg=1,(function(a){function n(re,xe){var De=re.length;re.push(xe);e:for(;0<De;){var at=De-1>>>1,Je=re[at];if(0<o(Je,xe))re[at]=xe,re[De]=Je,De=at;else break e}}function i(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var xe=re[0],De=re.pop();if(De!==xe){re[0]=De;e:for(var at=0,Je=re.length,H=Je>>>1;at<H;){var le=2*(at+1)-1,we=re[le],ke=le+1,He=re[ke];if(0>o(we,De))ke<Je&&0>o(He,we)?(re[at]=He,re[ke]=De,at=ke):(re[at]=we,re[le]=De,at=le);else if(ke<Je&&0>o(He,De))re[at]=He,re[ke]=De,at=ke;else break e}}return xe}function o(re,xe){var De=re.sortIndex-xe.sortIndex;return De!==0?De:re.id-xe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var p=Date,g=p.now();a.unstable_now=function(){return p.now()-g}}var v=[],b=[],S=1,j=null,T=3,A=!1,B=!1,I=!1,V=!1,ae=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function de(re){for(var xe=i(b);xe!==null;){if(xe.callback===null)s(b);else if(xe.startTime<=re)s(b),xe.sortIndex=xe.expirationTime,n(v,xe);else break;xe=i(b)}}function Ee(re){if(I=!1,de(re),!B)if(i(v)!==null)B=!0,ue||(ue=!0,zt());else{var xe=i(b);xe!==null&&Pt(Ee,xe.startTime-re)}}var ue=!1,te=-1,Ne=5,Le=-1;function yt(){return V?!0:!(a.unstable_now()-Le<Ne)}function Nt(){if(V=!1,ue){var re=a.unstable_now();Le=re;var xe=!0;try{e:{B=!1,I&&(I=!1,K(te),te=-1),A=!0;var De=T;try{t:{for(de(re),j=i(v);j!==null&&!(j.expirationTime>re&&yt());){var at=j.callback;if(typeof at=="function"){j.callback=null,T=j.priorityLevel;var Je=at(j.expirationTime<=re);if(re=a.unstable_now(),typeof Je=="function"){j.callback=Je,de(re),xe=!0;break t}j===i(v)&&s(v),de(re)}else s(v);j=i(v)}if(j!==null)xe=!0;else{var H=i(b);H!==null&&Pt(Ee,H.startTime-re),xe=!1}}break e}finally{j=null,T=De,A=!1}xe=void 0}}finally{xe?zt():ue=!1}}}var zt;if(typeof Y=="function")zt=function(){Y(Nt)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,dt=qe.port2;qe.port1.onmessage=Nt,zt=function(){dt.postMessage(null)}}else zt=function(){ae(Nt,0)};function Pt(re,xe){te=ae(function(){re(a.unstable_now())},xe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(re){re.callback=null},a.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<re?Math.floor(1e3/re):5},a.unstable_getCurrentPriorityLevel=function(){return T},a.unstable_next=function(re){switch(T){case 1:case 2:case 3:var xe=3;break;default:xe=T}var De=T;T=xe;try{return re()}finally{T=De}},a.unstable_requestPaint=function(){V=!0},a.unstable_runWithPriority=function(re,xe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var De=T;T=re;try{return xe()}finally{T=De}},a.unstable_scheduleCallback=function(re,xe,De){var at=a.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?at+De:at):De=at,re){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=De+Je,re={id:S++,callback:xe,priorityLevel:re,startTime:De,expirationTime:Je,sortIndex:-1},De>at?(re.sortIndex=De,n(b,re),i(v)===null&&re===i(b)&&(I?(K(te),te=-1):I=!0,Pt(Ee,De-at))):(re.sortIndex=Je,n(v,re),B||A||(B=!0,ue||(ue=!0,zt()))),re},a.unstable_shouldYield=yt,a.unstable_wrapCallback=function(re){var xe=T;return function(){var De=T;T=xe;try{return re.apply(this,arguments)}finally{T=De}}}})(Gf)),Gf}var Xg;function _0(){return Xg||(Xg=1,Kf.exports=w0()),Kf.exports}var If={exports:{}},Sn={};var Wg;function S0(){if(Wg)return Sn;Wg=1;var a=kh();function n(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(v,b,S){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:j==null?null:""+j,children:v,containerInfo:b,implementation:S}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Sn.createPortal=function(v,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return c(v,b,null,S)},Sn.flushSync=function(v){var b=p.T,S=s.p;try{if(p.T=null,s.p=2,v)return v()}finally{p.T=b,s.p=S,s.d.f()}},Sn.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(v,b))},Sn.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},Sn.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var S=b.as,j=g(S,b.crossOrigin),T=typeof b.integrity=="string"?b.integrity:void 0,A=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?s.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:j,integrity:T,fetchPriority:A}):S==="script"&&s.d.X(v,{crossOrigin:j,integrity:T,fetchPriority:A,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Sn.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=g(b.as,b.crossOrigin);s.d.M(v,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(v)},Sn.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,j=g(S,b.crossOrigin);s.d.L(v,S,{crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Sn.preloadModule=function(v,b){if(typeof v=="string")if(b){var S=g(b.as,b.crossOrigin);s.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(v)},Sn.requestFormReset=function(v){s.d.r(v)},Sn.unstable_batchedUpdates=function(v,b){return v(b)},Sn.useFormState=function(v,b,S){return p.H.useFormState(v,b,S)},Sn.useFormStatus=function(){return p.H.useHostTransitionStatus()},Sn.version="19.2.4",Sn}var Jg;function j0(){if(Jg)return If.exports;Jg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),If.exports=S0(),If.exports}var Fg;function k0(){if(Fg)return jo;Fg=1;var a=_0(),n=kh(),i=j0();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(c(e)!==e)throw Error(s(188))}function b(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,l=t;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return v(d),e;if(h===l)return v(d),t;h=h.sibling}throw Error(s(188))}if(r.return!==l.return)r=d,l=h;else{for(var w=!1,E=d.child;E;){if(E===r){w=!0,r=d,l=h;break}if(E===l){w=!0,l=d,r=h;break}E=E.sibling}if(!w){for(E=h.child;E;){if(E===r){w=!0,r=h,l=d;break}if(E===l){w=!0,l=h,r=d;break}E=E.sibling}if(!w)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Le=Symbol.for("react.activity"),yt=Symbol.for("react.memo_cache_sentinel"),Nt=Symbol.iterator;function zt(e){return e===null||typeof e!="object"?null:(e=Nt&&e[Nt]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case ae:return"Profiler";case V:return"StrictMode";case Ee:return"Suspense";case ue:return"SuspenseList";case Le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case Y:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case de:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return t=e.displayName||null,t!==null?t:dt(e.type)||"Memo";case Ne:t=e._payload,e=e._init;try{return dt(e(t))}catch{}}return null}var Pt=Array.isArray,re=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},at=[],Je=-1;function H(e){return{current:e}}function le(e){0>Je||(e.current=at[Je],at[Je]=null,Je--)}function we(e,t){Je++,at[Je]=e.current,e.current=t}var ke=H(null),He=H(null),Ie=H(null),Fe=H(null);function en(e,t){switch(we(Ie,t),we(He,e),we(ke,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?hg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=hg(t),e=mg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}le(ke),we(ke,e)}function Mt(){le(ke),le(He),le(Ie)}function Ae(e){e.memoizedState!==null&&we(Fe,e);var t=ke.current,r=mg(t,e.type);t!==r&&(we(He,e),we(ke,r))}function li(e){He.current===e&&(le(ke),le(He)),Fe.current===e&&(le(Fe),bo._currentValue=De)}var st,xr;function La(e){if(st===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);st=t&&t[1]||"",xr=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+e+xr}var ua=!1;function xl(e,t){if(!e||ua)return"";ua=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var ee=ne}Reflect.construct(e,[],ce)}else{try{ce.call()}catch(ne){ee=ne}e.call(ce.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(ce=e())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),w=h[0],E=h[1];if(w&&E){var R=w.split(`
`),F=E.split(`
`);for(d=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===R.length||d===F.length)for(l=R.length-1,d=F.length-1;1<=l&&0<=d&&R[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(R[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||R[l]!==F[d]){var se=`
`+R[l].replace(" at new "," at ");return e.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",e.displayName)),se}while(1<=l&&0<=d);break}}}finally{ua=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?La(r):""}function Ic(e,t){switch(e.tag){case 26:case 27:case 5:return La(e.type);case 16:return La("Lazy");case 13:return e.child!==t&&t!==null?La("Suspense Fallback"):La("Suspense");case 19:return La("SuspenseList");case 0:case 15:return xl(e.type,!1);case 11:return xl(e.type.render,!1);case 1:return xl(e.type,!0);case 31:return La("Activity");default:return""}}function Xo(e){try{var t="",r=null;do t+=Ic(e,r),r=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var wl=Object.prototype.hasOwnProperty,oi=a.unstable_scheduleCallback,Tn=a.unstable_cancelCallback,Wo=a.unstable_shouldYield,ui=a.unstable_requestPaint,yn=a.unstable_now,ci=a.unstable_getCurrentPriorityLevel,vn=a.unstable_ImmediatePriority,xa=a.unstable_UserBlockingPriority,wr=a.unstable_NormalPriority,di=a.unstable_LowPriority,ts=a.unstable_IdlePriority,ns=a.log,qa=a.unstable_setDisableYieldValue,wa=null,on=null;function un(e){if(typeof ns=="function"&&qa(e),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(wa,e)}catch{}}var _e=Math.clz32?Math.clz32:as,fi=Math.log,Ba=Math.LN2;function as(e){return e>>>=0,e===0?32:31-(fi(e)/Ba|0)|0}var ve=256,_r=262144,hi=4194304;function ca(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mi(e,t,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~h,l!==0?d=ca(l):(w&=E,w!==0?d=ca(w):r||(r=E&~e,r!==0&&(d=ca(r))))):(E=l&~h,E!==0?d=ca(E):w!==0?d=ca(w):r||(r=l&~e,r!==0&&(d=ca(r)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,r=t&-t,h>=r||h===32&&(r&4194048)!==0)?t:d}function Pa(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Vc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var e=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),e}function _a(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _l(e,t,r,l,d,h){var w=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,F=e.hiddenUpdates;for(r=w&~r;0<r;){var se=31-_e(r),ce=1<<se;E[se]=0,R[se]=-1;var ee=F[se];if(ee!==null)for(F[se]=null,se=0;se<ee.length;se++){var ne=ee[se];ne!==null&&(ne.lane&=-536870913)}r&=~ce}l!==0&&pi(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(w&~t))}function pi(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-_e(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function St(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var l=31-_e(r),d=1<<l;d&t|e[l]&t&&(e[l]|=t),r&=~d}}function $t(e,t){var r=t&-t;return r=(r&42)!==0?1:Sl(r),(r&(e.suspendedLanes|t))!==0?0:r}function Sl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Sr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gi(){var e=xe.p;return e!==0?e:(e=window.event,e===void 0?32:Lg(e.type))}function yi(e,t){var r=xe.p;try{return xe.p=e,t()}finally{xe.p=r}}var Sa=Math.random().toString(36).slice(2),kt="__reactFiber$"+Sa,Ht="__reactProps$"+Sa,kn="__reactContainer$"+Sa,jr="__reactEvents$"+Sa,Yc="__reactListeners$"+Sa,ja="__reactHandles$"+Sa,jl="__reactResources$"+Sa,zn="__reactMarker$"+Sa;function rs(e){delete e[kt],delete e[Ht],delete e[jr],delete e[Yc],delete e[ja]}function ka(e){var t=e[kt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[kn]||r[kt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=wg(e);e!==null;){if(r=e[kt])return r;e=wg(e)}return t}e=r,r=e.parentNode}return null}function vt(e){if(e=e[kt]||e[kn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Un(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function bn(e){var t=e[jl];return t||(t=e[jl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Kt(e){e[zn]=!0}var $a=new Set,vi={};function da(e,t){Ea(e,t),Ea(e+"Capture",t)}function Ea(e,t){for(vi[e]=t,e=0;e<t.length;e++)$a.add(t[e])}var Ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kl={},bi={};function Fo(e){return wl.call(bi,e)?!0:wl.call(kl,e)?!1:Ha.test(e)?bi[e]=!0:(kl[e]=!0,!1)}function Xe(e,t,r){if(Fo(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function xi(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Xn(e,t,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+l)}}function cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zo(e,t,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(w){r=""+w,h.call(this,w)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(w){r=""+w},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function is(e){if(!e._valueTracker){var t=kr(e)?"checked":"value";e._valueTracker=Zo(e,t,""+e[t])}}function El(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=kr(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function ut(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wi=/[\n"\\]/g;function an(e){return e.replace(wi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Na(e,t,r,l,d,h,w,E){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),t!=null?w==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+cn(t)):e.value!==""+cn(t)&&(e.value=""+cn(t)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),t!=null?_i(e,w,cn(t)):r!=null?_i(e,w,cn(r)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+cn(E):e.removeAttribute("name")}function ss(e,t,r,l,d,h,w,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){is(e);return}r=r!=null?""+cn(r):"",t=t!=null?""+cn(t):r,E||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),is(e)}function _i(e,t,r){t==="number"&&ut(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function fa(e,t,r,l){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+cn(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Nl(e,t,r){if(t!=null&&(t=""+cn(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+cn(r):""}function Si(e,t,r,l){if(t==null){if(l!=null){if(r!=null)throw Error(s(92));if(Pt(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),t=r}r=cn(t),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),is(e)}function Ka(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rt(e,t,r){var l=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,r):typeof r!="number"||r===0||Qc.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Tl(e,t,r){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&r[d]!==l&&rt(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&rt(e,h,t[h])}function Ol(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),En=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ha(e){return En.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function On(){}var Wn=null;function ls(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ga=null,Tt=null;function Ln(e){var t=vt(e);if(t&&(e=t.stateNode)){var r=e[Ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(Na(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+an(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var d=l[Ht]||null;if(!d)throw Error(s(90));Na(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)l=r[t],l.form===e.form&&El(l)}break e;case"textarea":Nl(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&fa(e,!!r.multiple,t,!1)}}}var Ia=!1;function Er(e,t,r){if(Ia)return e(t,r);Ia=!0;try{var l=e(t);return l}finally{if(Ia=!1,(Ga!==null||Tt!==null)&&(Hu(),Ga&&(t=Ga,e=Tt,Tt=Ga=null,Ln(t),e)))for(t=0;t<e.length;t++)Ln(e[t])}}function Va(e,t){var r=e.stateNode;if(r===null)return null;var l=r[Ht]||null;if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=!1;if(rn)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Al=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Al=!1}var Jn=null,os=null,Nr=null;function Tr(){if(Nr)return Nr;var e,t=os,r=t.length,l,d="value"in Jn?Jn.value:Jn.textContent,h=d.length;for(e=0;e<r&&t[e]===d[e];e++);var w=r-e;for(l=1;l<=w&&t[r-l]===d[h-l];l++);return Nr=d.slice(e,1<l?1-l:void 0)}function Or(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function eu(){return!1}function Vt(e){function t(r,l,d,h,w){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=w,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(r=e[E],this[E]=r?r(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ji:eu,this.isPropagationStopped=eu,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),t}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Vt(Ya),Ta=j({},Ya,{view:0,detail:0}),cs=Vt(Ta),ki,Cl,Ei,ds=j({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(ki=e.screenX-Ei.screenX,Cl=e.screenY-Ei.screenY):Cl=ki=0,Ei=e),ki)},movementY:function(e){return"movementY"in e?e.movementY:Cl}}),fs=Vt(ds),Rl=j({},ds,{dataTransfer:0}),tu=Vt(Rl),hs=j({},Ta,{relatedTarget:0}),Ar=Vt(hs),ms=j({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=Vt(ms),Wc=j({},Ya,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cr=Vt(Wc),Dl=j({},Ya,{data:0}),ps=Vt(Dl),Ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ni(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sn[e])?!!t[e]:!1}function Qa(){return Ni}var au=j({},Ta,{key:function(e){if(e.key){var t=Ml[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qa,charCode:function(e){return e.type==="keypress"?Or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gs=Vt(au),ru=j({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=Vt(ru),ys=j({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qa}),Ll=Vt(ys),Xa=j({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=Vt(Xa),Bl=j({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vs=Vt(Bl),Pl=j({},Ya,{newState:0,oldState:0}),iu=Vt(Pl),Jc=[9,13,27,32],Ti=rn&&"CompositionEvent"in window,Oa=null;rn&&"documentMode"in document&&(Oa=document.documentMode);var Fc=rn&&"TextEvent"in window&&!Oa,bs=rn&&(!Ti||Oa&&8<Oa&&11>=Oa),xs=" ",su=!1;function $l(e,t){switch(e){case"keyup":return Jc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wa=!1;function ou(e,t){switch(e){case"compositionend":return lu(t);case"keypress":return t.which!==32?null:(su=!0,xs);case"textInput":return e=t.data,e===xs&&su?null:e;default:return null}}function Zc(e,t){if(Wa)return e==="compositionend"||!Ti&&$l(e,t)?(e=Tr(),Nr=os=Jn=null,Wa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bs&&t.locale!=="ko"?null:t.data;default:return null}}var uu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ws(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uu[e.type]:t==="textarea"}function Hl(e,t,r,l){Ga?Tt?Tt.push(l):Tt=[l]:Ga=l,t=Xu(t,"onChange"),0<t.length&&(r=new us("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var Rr=null,Oi=null;function ed(e){lg(e,0)}function _s(e){var t=Un(e);if(El(t))return e}function Ai(e,t){if(e==="change")return t}var Fn=!1;if(rn){var Ot;if(rn){var Dr="oninput"in document;if(!Dr){var Ja=document.createElement("div");Ja.setAttribute("oninput","return;"),Dr=typeof Ja.oninput=="function"}Ot=Dr}else Ot=!1;Fn=Ot&&(!document.documentMode||9<document.documentMode)}function cu(){Rr&&(Rr.detachEvent("onpropertychange",Ss),Oi=Rr=null)}function Ss(e){if(e.propertyName==="value"&&_s(Oi)){var t=[];Hl(t,Oi,e,ls(e)),Er(ed,t)}}function du(e,t,r){e==="focusin"?(cu(),Rr=t,Oi=r,Rr.attachEvent("onpropertychange",Ss)):e==="focusout"&&cu()}function Fa(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _s(Oi)}function Kl(e,t){if(e==="click")return _s(t)}function Mr(e,t){if(e==="input"||e==="change")return _s(t)}function Aa(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:Aa;function u(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!wl.call(t,d)||!wn(e[d],t[d]))return!1}return!0}function m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y(e,t){var r=m(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=m(r)}}function x(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ut(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ut(e.document)}return t}function k(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var N=rn&&"documentMode"in document&&11>=document.documentMode,O=null,M=null,Q=null,z=!1;function D(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;z||O==null||O!==ut(l)||(l=O,"selectionStart"in l&&k(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Q&&u(Q,l)||(Q=l,l=Xu(M,"onSelect"),0<l.length&&(t=new us("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=O)))}function q(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var $={animationend:q("Animation","AnimationEnd"),animationiteration:q("Animation","AnimationIteration"),animationstart:q("Animation","AnimationStart"),transitionrun:q("Transition","TransitionRun"),transitionstart:q("Transition","TransitionStart"),transitioncancel:q("Transition","TransitionCancel"),transitionend:q("Transition","TransitionEnd")},U={},L={};rn&&(L=document.createElement("div").style,"AnimationEvent"in window||(delete $.animationend.animation,delete $.animationiteration.animation,delete $.animationstart.animation),"TransitionEvent"in window||delete $.transitionend.transition);function W(e){if(U[e])return U[e];if(!$[e])return e;var t=$[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in L)return U[e]=t[r];return e}var Z=W("animationend"),X=W("animationiteration"),ie=W("animationstart"),he=W("transitionrun"),ge=W("transitionstart"),ye=W("transitioncancel"),me=W("transitionend"),Se=new Map,be="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");be.push("scrollEnd");function pe(e,t){Se.set(e,t),da(t,[e])}var je=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},$e=[],We=0,Me=0;function Ke(){for(var e=We,t=Me=We=0;t<e;){var r=$e[t];$e[t++]=null;var l=$e[t];$e[t++]=null;var d=$e[t];$e[t++]=null;var h=$e[t];if($e[t++]=null,l!==null&&d!==null){var w=l.pending;w===null?d.next=d:(d.next=w.next,w.next=d),l.pending=d}h!==0&&Ca(r,d,h)}}function bt(e,t,r,l){$e[We++]=e,$e[We++]=t,$e[We++]=r,$e[We++]=l,Me|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function _n(e,t,r,l){return bt(e,t,r,l),zr(e)}function ft(e,t){return bt(e,null,null,t),zr(e)}function Ca(e,t,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,l=h.alternate,l!==null&&(l.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-_e(r),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=r|536870912),h):null}function zr(e){if(50<fo)throw fo=0,cf=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var js={};function eb(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(e,t,r,l){return new eb(e,t,r,l)}function td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Za(e,t){var r=e.alternate;return r===null?(r=qn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Kh(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fu(e,t,r,l,d,h){var w=0;if(l=e,typeof e=="function")td(e)&&(w=1);else if(typeof e=="string")w=i0(e,r,ke.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Le:return e=qn(31,r,t,d),e.elementType=Le,e.lanes=h,e;case I:return Ci(r.children,d,h,t);case V:w=8,d|=24;break;case ae:return e=qn(12,r,t,d|2),e.elementType=ae,e.lanes=h,e;case Ee:return e=qn(13,r,t,d),e.elementType=Ee,e.lanes=h,e;case ue:return e=qn(19,r,t,d),e.elementType=ue,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:w=10;break e;case K:w=9;break e;case de:w=11;break e;case te:w=14;break e;case Ne:w=16,l=null;break e}w=29,r=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=qn(w,r,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function Ci(e,t,r,l){return e=qn(7,e,l,t),e.lanes=r,e}function nd(e,t,r){return e=qn(6,e,null,t),e.lanes=r,e}function Gh(e){var t=qn(18,null,null,0);return t.stateNode=e,t}function ad(e,t,r){return t=qn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ih=new WeakMap;function Zn(e,t){if(typeof e=="object"&&e!==null){var r=Ih.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Xo(t)},Ih.set(e,t),t)}return{value:e,source:t,stack:Xo(t)}}var ks=[],Es=0,hu=null,Gl=0,ea=[],ta=0,Ur=null,Ra=1,Da="";function er(e,t){ks[Es++]=Gl,ks[Es++]=hu,hu=e,Gl=t}function Vh(e,t,r){ea[ta++]=Ra,ea[ta++]=Da,ea[ta++]=Ur,Ur=e;var l=Ra;e=Da;var d=32-_e(l)-1;l&=~(1<<d),r+=1;var h=32-_e(t)+d;if(30<h){var w=d-d%5;h=(l&(1<<w)-1).toString(32),l>>=w,d-=w,Ra=1<<32-_e(t)+d|r<<d|l,Da=h+e}else Ra=1<<h|r<<d|l,Da=e}function rd(e){e.return!==null&&(er(e,1),Vh(e,1,0))}function id(e){for(;e===hu;)hu=ks[--Es],ks[Es]=null,Gl=ks[--Es],ks[Es]=null;for(;e===Ur;)Ur=ea[--ta],ea[ta]=null,Da=ea[--ta],ea[ta]=null,Ra=ea[--ta],ea[ta]=null}function Yh(e,t){ea[ta++]=Ra,ea[ta++]=Da,ea[ta++]=Ur,Ra=t.id,Da=t.overflow,Ur=e}var dn=null,At=null,it=!1,Lr=null,na=!1,sd=Error(s(519));function qr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(Zn(t,e)),sd}function Qh(e){var t=e.stateNode,r=e.type,l=e.memoizedProps;switch(t[kt]=e,t[Ht]=l,r){case"dialog":et("cancel",t),et("close",t);break;case"iframe":case"object":case"embed":et("load",t);break;case"video":case"audio":for(r=0;r<mo.length;r++)et(mo[r],t);break;case"source":et("error",t);break;case"img":case"image":case"link":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"input":et("invalid",t),ss(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":et("invalid",t);break;case"textarea":et("invalid",t),Si(t,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||l.suppressHydrationWarning===!0||dg(t.textContent,r)?(l.popover!=null&&(et("beforetoggle",t),et("toggle",t)),l.onScroll!=null&&et("scroll",t),l.onScrollEnd!=null&&et("scrollend",t),l.onClick!=null&&(t.onclick=On),t=!0):t=!1,t||qr(e,!0)}function Xh(e){for(dn=e.return;dn;)switch(dn.tag){case 5:case 31:case 13:na=!1;return;case 27:case 3:na=!0;return;default:dn=dn.return}}function Ns(e){if(e!==dn)return!1;if(!it)return Xh(e),it=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||kf(e.type,e.memoizedProps)),r=!r),r&&At&&qr(e),Xh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));At=xg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));At=xg(e)}else t===27?(t=At,Fr(e.type)?(e=Af,Af=null,At=e):At=t):At=dn?ra(e.stateNode.nextSibling):null;return!0}function Ri(){At=dn=null,it=!1}function ld(){var e=Lr;return e!==null&&(Dn===null?Dn=e:Dn.push.apply(Dn,e),Lr=null),e}function Il(e){Lr===null?Lr=[e]:Lr.push(e)}var od=H(null),Di=null,tr=null;function Br(e,t,r){we(od,t._currentValue),t._currentValue=r}function nr(e){e._currentValue=od.current,le(od)}function ud(e,t,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===r)break;e=e.return}}function cd(e,t,r,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var w=d.child;h=h.firstContext;e:for(;h!==null;){var E=h;h=d;for(var R=0;R<t.length;R++)if(E.context===t[R]){h.lanes|=r,E=h.alternate,E!==null&&(E.lanes|=r),ud(h.return,r,e),l||(w=null);break e}h=E.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(s(341));w.lanes|=r,h=w.alternate,h!==null&&(h.lanes|=r),ud(w,r,e),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===e){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function Ts(e,t,r,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var E=d.type;wn(d.pendingProps.value,w.value)||(e!==null?e.push(E):e=[E])}}else if(d===Fe.current){if(w=d.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(bo):e=[bo])}d=d.return}e!==null&&cd(t,e,r,l),t.flags|=262144}function mu(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mi(e){Di=e,tr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function fn(e){return Wh(Di,e)}function pu(e,t){return Di===null&&Mi(e),Wh(e,t)}function Wh(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},tr===null){if(e===null)throw Error(s(308));tr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else tr=tr.next=t;return r}var tb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},nb=a.unstable_scheduleCallback,ab=a.unstable_NormalPriority,Yt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new tb,data:new Map,refCount:0}}function Vl(e){e.refCount--,e.refCount===0&&nb(ab,function(){e.controller.abort()})}var Yl=null,fd=0,Os=0,As=null;function rb(e,t){if(Yl===null){var r=Yl=[];fd=0,Os=gf(),As={status:"pending",value:void 0,then:function(l){r.push(l)}}}return fd++,t.then(Jh,Jh),t}function Jh(){if(--fd===0&&Yl!==null){As!==null&&(As.status="fulfilled");var e=Yl;Yl=null,Os=0,As=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ib(e,t){var r=[],l={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),l}var Fh=re.S;re.S=function(e,t){zp=yn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&rb(e,t),Fh!==null&&Fh(e,t)};var zi=H(null);function hd(){var e=zi.current;return e!==null?e:jt.pooledCache}function gu(e,t){t===null?we(zi,zi.current):we(zi,t.pool)}function Zh(){var e=hd();return e===null?null:{parent:Yt._currentValue,pool:e}}var Cs=Error(s(460)),md=Error(s(474)),yu=Error(s(542)),vu={then:function(){}};function em(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tm(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(On,On),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,am(e),e;default:if(typeof t.status=="string")t.then(On,On);else{if(e=jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,am(e),e}throw Li=t,Cs}}function Ui(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Li=r,Cs):r}}var Li=null;function nm(){if(Li===null)throw Error(s(459));var e=Li;return Li=null,e}function am(e){if(e===Cs||e===yu)throw Error(s(483))}var Rs=null,Ql=0;function bu(e){var t=Ql;return Ql+=1,Rs===null&&(Rs=[]),tm(Rs,e,t)}function Xl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xu(e,t){throw t.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function rm(e){function t(G,P){if(e){var J=G.deletions;J===null?(G.deletions=[P],G.flags|=16):J.push(P)}}function r(G,P){if(!e)return null;for(;P!==null;)t(G,P),P=P.sibling;return null}function l(G){for(var P=new Map;G!==null;)G.key!==null?P.set(G.key,G):P.set(G.index,G),G=G.sibling;return P}function d(G,P){return G=Za(G,P),G.index=0,G.sibling=null,G}function h(G,P,J){return G.index=J,e?(J=G.alternate,J!==null?(J=J.index,J<P?(G.flags|=67108866,P):J):(G.flags|=67108866,P)):(G.flags|=1048576,P)}function w(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function E(G,P,J,oe){return P===null||P.tag!==6?(P=nd(J,G.mode,oe),P.return=G,P):(P=d(P,J),P.return=G,P)}function R(G,P,J,oe){var ze=J.type;return ze===I?se(G,P,J.props.children,oe,J.key):P!==null&&(P.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===Ne&&Ui(ze)===P.type)?(P=d(P,J.props),Xl(P,J),P.return=G,P):(P=fu(J.type,J.key,J.props,null,G.mode,oe),Xl(P,J),P.return=G,P)}function F(G,P,J,oe){return P===null||P.tag!==4||P.stateNode.containerInfo!==J.containerInfo||P.stateNode.implementation!==J.implementation?(P=ad(J,G.mode,oe),P.return=G,P):(P=d(P,J.children||[]),P.return=G,P)}function se(G,P,J,oe,ze){return P===null||P.tag!==7?(P=Ci(J,G.mode,oe,ze),P.return=G,P):(P=d(P,J),P.return=G,P)}function ce(G,P,J){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=nd(""+P,G.mode,J),P.return=G,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return J=fu(P.type,P.key,P.props,null,G.mode,J),Xl(J,P),J.return=G,J;case B:return P=ad(P,G.mode,J),P.return=G,P;case Ne:return P=Ui(P),ce(G,P,J)}if(Pt(P)||zt(P))return P=Ci(P,G.mode,J,null),P.return=G,P;if(typeof P.then=="function")return ce(G,bu(P),J);if(P.$$typeof===Y)return ce(G,pu(G,P),J);xu(G,P)}return null}function ee(G,P,J,oe){var ze=P!==null?P.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ze!==null?null:E(G,P,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return J.key===ze?R(G,P,J,oe):null;case B:return J.key===ze?F(G,P,J,oe):null;case Ne:return J=Ui(J),ee(G,P,J,oe)}if(Pt(J)||zt(J))return ze!==null?null:se(G,P,J,oe,null);if(typeof J.then=="function")return ee(G,P,bu(J),oe);if(J.$$typeof===Y)return ee(G,P,pu(G,J),oe);xu(G,J)}return null}function ne(G,P,J,oe,ze){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return G=G.get(J)||null,E(P,G,""+oe,ze);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return G=G.get(oe.key===null?J:oe.key)||null,R(P,G,oe,ze);case B:return G=G.get(oe.key===null?J:oe.key)||null,F(P,G,oe,ze);case Ne:return oe=Ui(oe),ne(G,P,J,oe,ze)}if(Pt(oe)||zt(oe))return G=G.get(J)||null,se(P,G,oe,ze,null);if(typeof oe.then=="function")return ne(G,P,J,bu(oe),ze);if(oe.$$typeof===Y)return ne(G,P,J,pu(P,oe),ze);xu(P,oe)}return null}function Te(G,P,J,oe){for(var ze=null,lt=null,Oe=P,Ye=P=0,nt=null;Oe!==null&&Ye<J.length;Ye++){Oe.index>Ye?(nt=Oe,Oe=null):nt=Oe.sibling;var ot=ee(G,Oe,J[Ye],oe);if(ot===null){Oe===null&&(Oe=nt);break}e&&Oe&&ot.alternate===null&&t(G,Oe),P=h(ot,P,Ye),lt===null?ze=ot:lt.sibling=ot,lt=ot,Oe=nt}if(Ye===J.length)return r(G,Oe),it&&er(G,Ye),ze;if(Oe===null){for(;Ye<J.length;Ye++)Oe=ce(G,J[Ye],oe),Oe!==null&&(P=h(Oe,P,Ye),lt===null?ze=Oe:lt.sibling=Oe,lt=Oe);return it&&er(G,Ye),ze}for(Oe=l(Oe);Ye<J.length;Ye++)nt=ne(Oe,G,Ye,J[Ye],oe),nt!==null&&(e&&nt.alternate!==null&&Oe.delete(nt.key===null?Ye:nt.key),P=h(nt,P,Ye),lt===null?ze=nt:lt.sibling=nt,lt=nt);return e&&Oe.forEach(function(ai){return t(G,ai)}),it&&er(G,Ye),ze}function Ue(G,P,J,oe){if(J==null)throw Error(s(151));for(var ze=null,lt=null,Oe=P,Ye=P=0,nt=null,ot=J.next();Oe!==null&&!ot.done;Ye++,ot=J.next()){Oe.index>Ye?(nt=Oe,Oe=null):nt=Oe.sibling;var ai=ee(G,Oe,ot.value,oe);if(ai===null){Oe===null&&(Oe=nt);break}e&&Oe&&ai.alternate===null&&t(G,Oe),P=h(ai,P,Ye),lt===null?ze=ai:lt.sibling=ai,lt=ai,Oe=nt}if(ot.done)return r(G,Oe),it&&er(G,Ye),ze;if(Oe===null){for(;!ot.done;Ye++,ot=J.next())ot=ce(G,ot.value,oe),ot!==null&&(P=h(ot,P,Ye),lt===null?ze=ot:lt.sibling=ot,lt=ot);return it&&er(G,Ye),ze}for(Oe=l(Oe);!ot.done;Ye++,ot=J.next())ot=ne(Oe,G,Ye,ot.value,oe),ot!==null&&(e&&ot.alternate!==null&&Oe.delete(ot.key===null?Ye:ot.key),P=h(ot,P,Ye),lt===null?ze=ot:lt.sibling=ot,lt=ot);return e&&Oe.forEach(function(g0){return t(G,g0)}),it&&er(G,Ye),ze}function _t(G,P,J,oe){if(typeof J=="object"&&J!==null&&J.type===I&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case A:e:{for(var ze=J.key;P!==null;){if(P.key===ze){if(ze=J.type,ze===I){if(P.tag===7){r(G,P.sibling),oe=d(P,J.props.children),oe.return=G,G=oe;break e}}else if(P.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===Ne&&Ui(ze)===P.type){r(G,P.sibling),oe=d(P,J.props),Xl(oe,J),oe.return=G,G=oe;break e}r(G,P);break}else t(G,P);P=P.sibling}J.type===I?(oe=Ci(J.props.children,G.mode,oe,J.key),oe.return=G,G=oe):(oe=fu(J.type,J.key,J.props,null,G.mode,oe),Xl(oe,J),oe.return=G,G=oe)}return w(G);case B:e:{for(ze=J.key;P!==null;){if(P.key===ze)if(P.tag===4&&P.stateNode.containerInfo===J.containerInfo&&P.stateNode.implementation===J.implementation){r(G,P.sibling),oe=d(P,J.children||[]),oe.return=G,G=oe;break e}else{r(G,P);break}else t(G,P);P=P.sibling}oe=ad(J,G.mode,oe),oe.return=G,G=oe}return w(G);case Ne:return J=Ui(J),_t(G,P,J,oe)}if(Pt(J))return Te(G,P,J,oe);if(zt(J)){if(ze=zt(J),typeof ze!="function")throw Error(s(150));return J=ze.call(J),Ue(G,P,J,oe)}if(typeof J.then=="function")return _t(G,P,bu(J),oe);if(J.$$typeof===Y)return _t(G,P,pu(G,J),oe);xu(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,P!==null&&P.tag===6?(r(G,P.sibling),oe=d(P,J),oe.return=G,G=oe):(r(G,P),oe=nd(J,G.mode,oe),oe.return=G,G=oe),w(G)):r(G,P)}return function(G,P,J,oe){try{Ql=0;var ze=_t(G,P,J,oe);return Rs=null,ze}catch(Oe){if(Oe===Cs||Oe===yu)throw Oe;var lt=qn(29,Oe,null,G.mode);return lt.lanes=oe,lt.return=G,lt}}}var qi=rm(!0),im=rm(!1),Pr=!1;function pd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ct&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=zr(e),Ca(e,null,r),t}return bt(e,l,t,r),zr(e)}function Wl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,St(e,r)}}function yd(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var w={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=w:h=h.next=w,r=r.next}while(r!==null);h===null?d=h=t:h=h.next=t}else d=h=t;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var vd=!1;function Jl(){if(vd){var e=As;if(e!==null)throw e}}function Fl(e,t,r,l){vd=!1;var d=e.updateQueue;Pr=!1;var h=d.firstBaseUpdate,w=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var R=E,F=R.next;R.next=null,w===null?h=F:w.next=F,w=R;var se=e.alternate;se!==null&&(se=se.updateQueue,E=se.lastBaseUpdate,E!==w&&(E===null?se.firstBaseUpdate=F:E.next=F,se.lastBaseUpdate=R))}if(h!==null){var ce=d.baseState;w=0,se=F=R=null,E=h;do{var ee=E.lane&-536870913,ne=ee!==E.lane;if(ne?(tt&ee)===ee:(l&ee)===ee){ee!==0&&ee===Os&&(vd=!0),se!==null&&(se=se.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=e,Ue=E;ee=t;var _t=r;switch(Ue.tag){case 1:if(Te=Ue.payload,typeof Te=="function"){ce=Te.call(_t,ce,ee);break e}ce=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ue.payload,ee=typeof Te=="function"?Te.call(_t,ce,ee):Te,ee==null)break e;ce=j({},ce,ee);break e;case 2:Pr=!0}}ee=E.callback,ee!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=d.callbacks,ne===null?d.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:E.tag,payload:E.payload,callback:E.callback,next:null},se===null?(F=se=ne,R=ce):se=se.next=ne,w|=ee;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;ne=E,E=ne.next,ne.next=null,d.lastBaseUpdate=ne,d.shared.pending=null}}while(!0);se===null&&(R=ce),d.baseState=R,d.firstBaseUpdate=F,d.lastBaseUpdate=se,h===null&&(d.shared.lanes=0),Yr|=w,e.lanes=w,e.memoizedState=ce}}function sm(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function lm(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)sm(r[e],t)}var Ds=H(null),wu=H(0);function om(e,t){e=dr,we(wu,e),we(Ds,t),dr=e|t.baseLanes}function bd(){we(wu,dr),we(Ds,Ds.current)}function xd(){dr=wu.current,le(Ds),le(wu)}var Bn=H(null),aa=null;function Kr(e){var t=e.alternate;we(Gt,Gt.current&1),we(Bn,e),aa===null&&(t===null||Ds.current!==null||t.memoizedState!==null)&&(aa=e)}function wd(e){we(Gt,Gt.current),we(Bn,e),aa===null&&(aa=e)}function um(e){e.tag===22?(we(Gt,Gt.current),we(Bn,e),aa===null&&(aa=e)):Gr()}function Gr(){we(Gt,Gt.current),we(Bn,Bn.current)}function Pn(e){le(Bn),aa===e&&(aa=null),le(Gt)}var Gt=H(0);function _u(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Tf(r)||Of(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ar=0,Ve=null,xt=null,Qt=null,Su=!1,Ms=!1,Bi=!1,ju=0,Zl=0,zs=null,sb=0;function Ut(){throw Error(s(321))}function _d(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!wn(e[r],t[r]))return!1;return!0}function Sd(e,t,r,l,d,h){return ar=h,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,re.H=e===null||e.memoizedState===null?Vm:qd,Bi=!1,h=r(l,d),Bi=!1,Ms&&(h=dm(t,r,l,d)),cm(e),h}function cm(e){re.H=no;var t=xt!==null&&xt.next!==null;if(ar=0,Qt=xt=Ve=null,Su=!1,Zl=0,zs=null,t)throw Error(s(300));e===null||Xt||(e=e.dependencies,e!==null&&mu(e)&&(Xt=!0))}function dm(e,t,r,l){Ve=e;var d=0;do{if(Ms&&(zs=null),Zl=0,Ms=!1,25<=d)throw Error(s(301));if(d+=1,Qt=xt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}re.H=Ym,h=t(r,l)}while(Ms);return h}function lb(){var e=re.H,t=e.useState()[0];return t=typeof t.then=="function"?eo(t):t,e=e.useState()[0],(xt!==null?xt.memoizedState:null)!==e&&(Ve.flags|=1024),t}function jd(){var e=ju!==0;return ju=0,e}function kd(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Ed(e){if(Su){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Su=!1}ar=0,Qt=xt=Ve=null,Ms=!1,Zl=ju=0,zs=null}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Ve.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function It(){if(xt===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=Qt===null?Ve.memoizedState:Qt.next;if(t!==null)Qt=t,xt=e;else{if(e===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Qt===null?Ve.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eo(e){var t=Zl;return Zl+=1,zs===null&&(zs=[]),e=tm(zs,e,t),t=Ve,(Qt===null?t.memoizedState:Qt.next)===null&&(t=t.alternate,re.H=t===null||t.memoizedState===null?Vm:qd),e}function Eu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return eo(e);if(e.$$typeof===Y)return fn(e)}throw Error(s(438,String(e)))}function Nd(e){var t=null,r=Ve.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=ku(),Ve.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),l=0;l<e;l++)r[l]=yt;return t.index++,r}function rr(e,t){return typeof t=="function"?t(e):t}function Nu(e){var t=It();return Td(t,xt,e)}function Td(e,t,r){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var w=d.next;d.next=h.next,h.next=w}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var E=w=null,R=null,F=t,se=!1;do{var ce=F.lane&-536870913;if(ce!==F.lane?(tt&ce)===ce:(ar&ce)===ce){var ee=F.revertLane;if(ee===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ce===Os&&(se=!0);else if((ar&ee)===ee){F=F.next,ee===Os&&(se=!0);continue}else ce={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(E=R=ce,w=h):R=R.next=ce,Ve.lanes|=ee,Yr|=ee;ce=F.action,Bi&&r(h,ce),h=F.hasEagerState?F.eagerState:r(h,ce)}else ee={lane:ce,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(E=R=ee,w=h):R=R.next=ee,Ve.lanes|=ce,Yr|=ce;F=F.next}while(F!==null&&F!==t);if(R===null?w=h:R.next=E,!wn(h,e.memoizedState)&&(Xt=!0,se&&(r=As,r!==null)))throw r;e.memoizedState=h,e.baseState=w,e.baseQueue=R,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Od(e){var t=It(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,h=t.memoizedState;if(d!==null){r.pending=null;var w=d=d.next;do h=e(h,w.action),w=w.next;while(w!==d);wn(h,t.memoizedState)||(Xt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,l]}function fm(e,t,r){var l=Ve,d=It(),h=it;if(h){if(r===void 0)throw Error(s(407));r=r()}else r=t();var w=!wn((xt||d).memoizedState,r);if(w&&(d.memoizedState=r,Xt=!0),d=d.queue,Rd(pm.bind(null,l,d,e),[e]),d.getSnapshot!==t||w||Qt!==null&&Qt.memoizedState.tag&1){if(l.flags|=2048,Us(9,{destroy:void 0},mm.bind(null,l,d,r,t),null),jt===null)throw Error(s(349));h||(ar&127)!==0||hm(l,t,r)}return r}function hm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ve.updateQueue,t===null?(t=ku(),Ve.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function mm(e,t,r,l){t.value=r,t.getSnapshot=l,gm(t)&&ym(e)}function pm(e,t,r){return r(function(){gm(t)&&ym(e)})}function gm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wn(e,r)}catch{return!0}}function ym(e){var t=ft(e,2);t!==null&&Mn(t,e,2)}function Ad(e){var t=Nn();if(typeof e=="function"){var r=e;if(e=r(),Bi){un(!0);try{r()}finally{un(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:e},t}function vm(e,t,r,l){return e.baseState=r,Td(e,xt,typeof l=="function"?l:rr)}function ob(e,t,r,l,d){if(Au(e))throw Error(s(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){h.listeners.push(w)}};re.T!==null?r(!0):h.isTransition=!1,l(h),r=t.pending,r===null?(h.next=t.pending=h,bm(t,h)):(h.next=r.next,t.pending=r.next=h)}}function bm(e,t){var r=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=re.T,w={};re.T=w;try{var E=r(d,l),R=re.S;R!==null&&R(w,E),xm(e,t,E)}catch(F){Cd(e,t,F)}finally{h!==null&&w.types!==null&&(h.types=w.types),re.T=h}}else try{h=r(d,l),xm(e,t,h)}catch(F){Cd(e,t,F)}}function xm(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){wm(e,t,l)},function(l){return Cd(e,t,l)}):wm(e,t,r)}function wm(e,t,r){t.status="fulfilled",t.value=r,_m(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,bm(e,r)))}function Cd(e,t,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=r,_m(t),t=t.next;while(t!==l)}e.action=null}function _m(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Sm(e,t){return t}function jm(e,t){if(it){var r=jt.formState;if(r!==null){e:{var l=Ve;if(it){if(At){t:{for(var d=At,h=na;d.nodeType!==8;){if(!h){d=null;break t}if(d=ra(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){At=ra(d.nextSibling),l=d.data==="F!";break e}}qr(l)}l=!1}l&&(t=r[0])}}return r=Nn(),r.memoizedState=r.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sm,lastRenderedState:t},r.queue=l,r=Km.bind(null,Ve,l),l.dispatch=r,l=Ad(!1),h=Ld.bind(null,Ve,!1,l.queue),l=Nn(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,r=ob.bind(null,Ve,d,h,r),d.dispatch=r,l.memoizedState=e,[t,r,!1]}function km(e){var t=It();return Em(t,xt,e)}function Em(e,t,r){if(t=Td(e,t,Sm)[0],e=Nu(rr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=eo(t)}catch(w){throw w===Cs?yu:w}else l=t;t=It();var d=t.queue,h=d.dispatch;return r!==t.memoizedState&&(Ve.flags|=2048,Us(9,{destroy:void 0},ub.bind(null,d,r),null)),[l,h,e]}function ub(e,t){e.action=t}function Nm(e){var t=It(),r=xt;if(r!==null)return Em(t,r,e);It(),t=t.memoizedState,r=It();var l=r.queue.dispatch;return r.memoizedState=e,[t,l,!1]}function Us(e,t,r,l){return e={tag:e,create:r,deps:l,inst:t,next:null},t=Ve.updateQueue,t===null&&(t=ku(),Ve.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e),e}function Tm(){return It().memoizedState}function Tu(e,t,r,l){var d=Nn();Ve.flags|=e,d.memoizedState=Us(1|t,{destroy:void 0},r,l===void 0?null:l)}function Ou(e,t,r,l){var d=It();l=l===void 0?null:l;var h=d.memoizedState.inst;xt!==null&&l!==null&&_d(l,xt.memoizedState.deps)?d.memoizedState=Us(t,h,r,l):(Ve.flags|=e,d.memoizedState=Us(1|t,h,r,l))}function Om(e,t){Tu(8390656,8,e,t)}function Rd(e,t){Ou(2048,8,e,t)}function cb(e){Ve.flags|=4;var t=Ve.updateQueue;if(t===null)t=ku(),Ve.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Am(e){var t=It().memoizedState;return cb({ref:t,nextImpl:e}),function(){if((ct&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Cm(e,t){return Ou(4,2,e,t)}function Rm(e,t){return Ou(4,4,e,t)}function Dm(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mm(e,t,r){r=r!=null?r.concat([e]):null,Ou(4,4,Dm.bind(null,t,e),r)}function Dd(){}function zm(e,t){var r=It();t=t===void 0?null:t;var l=r.memoizedState;return t!==null&&_d(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function Um(e,t){var r=It();t=t===void 0?null:t;var l=r.memoizedState;if(t!==null&&_d(t,l[1]))return l[0];if(l=e(),Bi){un(!0);try{e()}finally{un(!1)}}return r.memoizedState=[l,t],l}function Md(e,t,r){return r===void 0||(ar&1073741824)!==0&&(tt&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=Lp(),Ve.lanes|=e,Yr|=e,r)}function Lm(e,t,r,l){return wn(r,t)?r:Ds.current!==null?(e=Md(e,r,l),wn(e,t)||(Xt=!0),e):(ar&42)===0||(ar&1073741824)!==0&&(tt&261930)===0?(Xt=!0,e.memoizedState=r):(e=Lp(),Ve.lanes|=e,Yr|=e,t)}function qm(e,t,r,l,d){var h=xe.p;xe.p=h!==0&&8>h?h:8;var w=re.T,E={};re.T=E,Ld(e,!1,t,r);try{var R=d(),F=re.S;if(F!==null&&F(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var se=ib(R,l);to(e,t,se,Kn(e))}else to(e,t,l,Kn(e))}catch(ce){to(e,t,{then:function(){},status:"rejected",reason:ce},Kn())}finally{xe.p=h,w!==null&&E.types!==null&&(w.types=E.types),re.T=w}}function db(){}function zd(e,t,r,l){if(e.tag!==5)throw Error(s(476));var d=Bm(e).queue;qm(e,d,t,De,r===null?db:function(){return Pm(e),r(l)})}function Bm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:De},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Pm(e){var t=Bm(e);t.next===null&&(t=e.alternate.memoizedState),to(e,t.next.queue,{},Kn())}function Ud(){return fn(bo)}function $m(){return It().memoizedState}function Hm(){return It().memoizedState}function fb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Kn();e=$r(r);var l=Hr(t,e,r);l!==null&&(Mn(l,t,r),Wl(l,t,r)),t={cache:dd()},e.payload=t;return}t=t.return}}function hb(e,t,r){var l=Kn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Au(e)?Gm(t,r):(r=_n(e,t,r,l),r!==null&&(Mn(r,e,l),Im(r,t,l)))}function Km(e,t,r){var l=Kn();to(e,t,r,l)}function to(e,t,r,l){var d={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Au(e))Gm(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var w=t.lastRenderedState,E=h(w,r);if(d.hasEagerState=!0,d.eagerState=E,wn(E,w))return bt(e,t,d,0),jt===null&&Ke(),!1}catch{}if(r=_n(e,t,d,l),r!==null)return Mn(r,e,l),Im(r,t,l),!0}return!1}function Ld(e,t,r,l){if(l={lane:2,revertLane:gf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Au(e)){if(t)throw Error(s(479))}else t=_n(e,r,l,2),t!==null&&Mn(t,e,2)}function Au(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function Gm(e,t){Ms=Su=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Im(e,t,r){if((r&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,St(e,r)}}var no={readContext:fn,use:Eu,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};no.useEffectEvent=Ut;var Vm={readContext:fn,use:Eu,useCallback:function(e,t){return Nn().memoizedState=[e,t===void 0?null:t],e},useContext:fn,useEffect:Om,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,Tu(4194308,4,Dm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Tu(4194308,4,e,t)},useInsertionEffect:function(e,t){Tu(4,2,e,t)},useMemo:function(e,t){var r=Nn();t=t===void 0?null:t;var l=e();if(Bi){un(!0);try{e()}finally{un(!1)}}return r.memoizedState=[l,t],l},useReducer:function(e,t,r){var l=Nn();if(r!==void 0){var d=r(t);if(Bi){un(!0);try{r(t)}finally{un(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=hb.bind(null,Ve,e),[l.memoizedState,e]},useRef:function(e){var t=Nn();return e={current:e},t.memoizedState=e},useState:function(e){e=Ad(e);var t=e.queue,r=Km.bind(null,Ve,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Dd,useDeferredValue:function(e,t){var r=Nn();return Md(r,e,t)},useTransition:function(){var e=Ad(!1);return e=qm.bind(null,Ve,e.queue,!0,!1),Nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var l=Ve,d=Nn();if(it){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),jt===null)throw Error(s(349));(tt&127)!==0||hm(l,t,r)}d.memoizedState=r;var h={value:r,getSnapshot:t};return d.queue=h,Om(pm.bind(null,l,h,e),[e]),l.flags|=2048,Us(9,{destroy:void 0},mm.bind(null,l,h,r,t),null),r},useId:function(){var e=Nn(),t=jt.identifierPrefix;if(it){var r=Da,l=Ra;r=(l&~(1<<32-_e(l)-1)).toString(32)+r,t="_"+t+"R_"+r,r=ju++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=sb++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ud,useFormState:jm,useActionState:jm,useOptimistic:function(e){var t=Nn();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Ld.bind(null,Ve,!0,r),r.dispatch=t,[e,t]},useMemoCache:Nd,useCacheRefresh:function(){return Nn().memoizedState=fb.bind(null,Ve)},useEffectEvent:function(e){var t=Nn(),r={impl:e};return t.memoizedState=r,function(){if((ct&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},qd={readContext:fn,use:Eu,useCallback:zm,useContext:fn,useEffect:Rd,useImperativeHandle:Mm,useInsertionEffect:Cm,useLayoutEffect:Rm,useMemo:Um,useReducer:Nu,useRef:Tm,useState:function(){return Nu(rr)},useDebugValue:Dd,useDeferredValue:function(e,t){var r=It();return Lm(r,xt.memoizedState,e,t)},useTransition:function(){var e=Nu(rr)[0],t=It().memoizedState;return[typeof e=="boolean"?e:eo(e),t]},useSyncExternalStore:fm,useId:$m,useHostTransitionStatus:Ud,useFormState:km,useActionState:km,useOptimistic:function(e,t){var r=It();return vm(r,xt,e,t)},useMemoCache:Nd,useCacheRefresh:Hm};qd.useEffectEvent=Am;var Ym={readContext:fn,use:Eu,useCallback:zm,useContext:fn,useEffect:Rd,useImperativeHandle:Mm,useInsertionEffect:Cm,useLayoutEffect:Rm,useMemo:Um,useReducer:Od,useRef:Tm,useState:function(){return Od(rr)},useDebugValue:Dd,useDeferredValue:function(e,t){var r=It();return xt===null?Md(r,e,t):Lm(r,xt.memoizedState,e,t)},useTransition:function(){var e=Od(rr)[0],t=It().memoizedState;return[typeof e=="boolean"?e:eo(e),t]},useSyncExternalStore:fm,useId:$m,useHostTransitionStatus:Ud,useFormState:Nm,useActionState:Nm,useOptimistic:function(e,t){var r=It();return xt!==null?vm(r,xt,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Nd,useCacheRefresh:Hm};Ym.useEffectEvent=Am;function Bd(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:j({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pd={enqueueSetState:function(e,t,r){e=e._reactInternals;var l=Kn(),d=$r(l);d.payload=t,r!=null&&(d.callback=r),t=Hr(e,d,l),t!==null&&(Mn(t,e,l),Wl(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=Kn(),d=$r(l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Hr(e,d,l),t!==null&&(Mn(t,e,l),Wl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Kn(),l=$r(r);l.tag=2,t!=null&&(l.callback=t),t=Hr(e,l,r),t!==null&&(Mn(t,e,r),Wl(t,e,r))}};function Qm(e,t,r,l,d,h,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,w):t.prototype&&t.prototype.isPureReactComponent?!u(r,l)||!u(d,h):!0}function Xm(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&Pd.enqueueReplaceState(t,t.state,null)}function Pi(e,t){var r=t;if("ref"in t){r={};for(var l in t)l!=="ref"&&(r[l]=t[l])}if(e=e.defaultProps){r===t&&(r=j({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function Wm(e){je(e)}function Jm(e){console.error(e)}function Fm(e){je(e)}function Cu(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Zm(e,t,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $d(e,t,r){return r=$r(r),r.tag=3,r.payload={element:null},r.callback=function(){Cu(e,t)},r}function ep(e){return e=$r(e),e.tag=3,e}function tp(e,t,r,l){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){Zm(t,r,l)}}var w=r.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){Zm(t,r,l),typeof d!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function mb(e,t,r,l,d){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=r.alternate,t!==null&&Ts(t,r,d,!0),r=Bn.current,r!==null){switch(r.tag){case 31:case 13:return aa===null?Ku():r.alternate===null&&Lt===0&&(Lt=3),r.flags&=-257,r.flags|=65536,r.lanes=d,l===vu?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([l]):t.add(l),hf(e,l,d)),!1;case 22:return r.flags|=65536,l===vu?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([l]):r.add(l)),hf(e,l,d)),!1}throw Error(s(435,r.tag))}return hf(e,l,d),Ku(),!1}if(it)return t=Bn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==sd&&(e=Error(s(422),{cause:l}),Il(Zn(e,r)))):(l!==sd&&(t=Error(s(423),{cause:l}),Il(Zn(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Zn(l,r),d=$d(e.stateNode,l,d),yd(e,d),Lt!==4&&(Lt=2)),!1;var h=Error(s(520),{cause:l});if(h=Zn(h,r),co===null?co=[h]:co.push(h),Lt!==4&&(Lt=2),t===null)return!0;l=Zn(l,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=$d(r.stateNode,l,e),yd(r,e),!1;case 1:if(t=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Qr===null||!Qr.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=ep(d),tp(d,e,r,l),yd(r,d),!1}r=r.return}while(r!==null);return!1}var Hd=Error(s(461)),Xt=!1;function hn(e,t,r,l){t.child=e===null?im(t,null,r,l):qi(t,e.child,r,l)}function np(e,t,r,l,d){r=r.render;var h=t.ref;if("ref"in l){var w={};for(var E in l)E!=="ref"&&(w[E]=l[E])}else w=l;return Mi(t),l=Sd(e,t,r,w,h,d),E=jd(),e!==null&&!Xt?(kd(e,t,d),ir(e,t,d)):(it&&E&&rd(t),t.flags|=1,hn(e,t,l,d),t.child)}function ap(e,t,r,l,d){if(e===null){var h=r.type;return typeof h=="function"&&!td(h)&&h.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=h,rp(e,t,h,l,d)):(e=fu(r.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Wd(e,d)){var w=h.memoizedProps;if(r=r.compare,r=r!==null?r:u,r(w,l)&&e.ref===t.ref)return ir(e,t,d)}return t.flags|=1,e=Za(h,l),e.ref=t.ref,e.return=t,t.child=e}function rp(e,t,r,l,d){if(e!==null){var h=e.memoizedProps;if(u(h,l)&&e.ref===t.ref)if(Xt=!1,t.pendingProps=l=h,Wd(e,d))(e.flags&131072)!==0&&(Xt=!0);else return t.lanes=e.lanes,ir(e,t,d)}return Kd(e,t,r,l,d)}function ip(e,t,r,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,t.child=null;return sp(e,t,h,r,l)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&gu(t,h!==null?h.cachePool:null),h!==null?om(t,h):bd(),um(t);else return l=t.lanes=536870912,sp(e,t,h!==null?h.baseLanes|r:r,r,l)}else h!==null?(gu(t,h.cachePool),om(t,h),Gr(),t.memoizedState=null):(e!==null&&gu(t,null),bd(),Gr());return hn(e,t,d,r),t.child}function ao(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function sp(e,t,r,l,d){var h=hd();return h=h===null?null:{parent:Yt._currentValue,pool:h},t.memoizedState={baseLanes:r,cachePool:h},e!==null&&gu(t,null),bd(),um(t),e!==null&&Ts(e,t,l,!0),t.childLanes=d,null}function Ru(e,t){return t=Mu({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function lp(e,t,r){return qi(t,e.child,null,r),e=Ru(t,t.pendingProps),e.flags|=2,Pn(t),t.memoizedState=null,e}function pb(e,t,r){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(it){if(l.mode==="hidden")return e=Ru(t,l),t.lanes=536870912,ao(null,e);if(wd(t),(e=At)?(e=bg(e,na),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ur!==null?{id:Ra,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},r=Gh(e),r.return=t,t.child=r,dn=t,At=null)):e=null,e===null)throw qr(t);return t.lanes=536870912,null}return Ru(t,l)}var h=e.memoizedState;if(h!==null){var w=h.dehydrated;if(wd(t),d)if(t.flags&256)t.flags&=-257,t=lp(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Xt||Ts(e,t,r,!1),d=(r&e.childLanes)!==0,Xt||d){if(l=jt,l!==null&&(w=$t(l,r),w!==0&&w!==h.retryLane))throw h.retryLane=w,ft(e,w),Mn(l,e,w),Hd;Ku(),t=lp(e,t,r)}else e=h.treeContext,At=ra(w.nextSibling),dn=t,it=!0,Lr=null,na=!1,e!==null&&Yh(t,e),t=Ru(t,l),t.flags|=4096;return t}return e=Za(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Du(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Kd(e,t,r,l,d){return Mi(t),r=Sd(e,t,r,l,void 0,d),l=jd(),e!==null&&!Xt?(kd(e,t,d),ir(e,t,d)):(it&&l&&rd(t),t.flags|=1,hn(e,t,r,d),t.child)}function op(e,t,r,l,d,h){return Mi(t),t.updateQueue=null,r=dm(t,l,r,d),cm(e),l=jd(),e!==null&&!Xt?(kd(e,t,h),ir(e,t,h)):(it&&l&&rd(t),t.flags|=1,hn(e,t,r,h),t.child)}function up(e,t,r,l,d){if(Mi(t),t.stateNode===null){var h=js,w=r.contextType;typeof w=="object"&&w!==null&&(h=fn(w)),h=new r(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Pd,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},pd(t),w=r.contextType,h.context=typeof w=="object"&&w!==null?fn(w):js,h.state=t.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(Bd(t,r,w,l),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(w=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),w!==h.state&&Pd.enqueueReplaceState(h,h.state,null),Fl(t,l,h,d),Jl(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var E=t.memoizedProps,R=Pi(r,E);h.props=R;var F=h.context,se=r.contextType;w=js,typeof se=="object"&&se!==null&&(w=fn(se));var ce=r.getDerivedStateFromProps;se=typeof ce=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,se||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||F!==w)&&Xm(t,h,l,w),Pr=!1;var ee=t.memoizedState;h.state=ee,Fl(t,l,h,d),Jl(),F=t.memoizedState,E||ee!==F||Pr?(typeof ce=="function"&&(Bd(t,r,ce,l),F=t.memoizedState),(R=Pr||Qm(t,r,R,l,ee,F,w))?(se||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=F),h.props=l,h.state=F,h.context=w,l=R):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,gd(e,t),w=t.memoizedProps,se=Pi(r,w),h.props=se,ce=t.pendingProps,ee=h.context,F=r.contextType,R=js,typeof F=="object"&&F!==null&&(R=fn(F)),E=r.getDerivedStateFromProps,(F=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w!==ce||ee!==R)&&Xm(t,h,l,R),Pr=!1,ee=t.memoizedState,h.state=ee,Fl(t,l,h,d),Jl();var ne=t.memoizedState;w!==ce||ee!==ne||Pr||e!==null&&e.dependencies!==null&&mu(e.dependencies)?(typeof E=="function"&&(Bd(t,r,E,l),ne=t.memoizedState),(se=Pr||Qm(t,r,se,l,ee,ne,R)||e!==null&&e.dependencies!==null&&mu(e.dependencies))?(F||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,ne,R),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,ne,R)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||w===e.memoizedProps&&ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&ee===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ne),h.props=l,h.state=ne,h.context=R,l=se):(typeof h.componentDidUpdate!="function"||w===e.memoizedProps&&ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&ee===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,Du(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=qi(t,e.child,null,d),t.child=qi(t,null,r,d)):hn(e,t,r,d),t.memoizedState=h.state,e=t.child):e=ir(e,t,d),e}function cp(e,t,r,l){return Ri(),t.flags|=256,hn(e,t,r,l),t.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(e){return{baseLanes:e,cachePool:Zh()}}function Vd(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Hn),e}function dp(e,t,r){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,w;if((w=h)||(w=e!==null&&e.memoizedState===null?!1:(Gt.current&2)!==0),w&&(d=!0,t.flags&=-129),w=(t.flags&32)!==0,t.flags&=-33,e===null){if(it){if(d?Kr(t):Gr(),(e=At)?(e=bg(e,na),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ur!==null?{id:Ra,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},r=Gh(e),r.return=t,t.child=r,dn=t,At=null)):e=null,e===null)throw qr(t);return Of(e)?t.lanes=32:t.lanes=536870912,null}var E=l.children;return l=l.fallback,d?(Gr(),d=t.mode,E=Mu({mode:"hidden",children:E},d),l=Ci(l,d,r,null),E.return=t,l.return=t,E.sibling=l,t.child=E,l=t.child,l.memoizedState=Id(r),l.childLanes=Vd(e,w,r),t.memoizedState=Gd,ao(null,l)):(Kr(t),Yd(t,E))}var R=e.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(h)t.flags&256?(Kr(t),t.flags&=-257,t=Qd(e,t,r)):t.memoizedState!==null?(Gr(),t.child=e.child,t.flags|=128,t=null):(Gr(),E=l.fallback,d=t.mode,l=Mu({mode:"visible",children:l.children},d),E=Ci(E,d,r,null),E.flags|=2,l.return=t,E.return=t,l.sibling=E,t.child=l,qi(t,e.child,null,r),l=t.child,l.memoizedState=Id(r),l.childLanes=Vd(e,w,r),t.memoizedState=Gd,t=ao(null,l));else if(Kr(t),Of(E)){if(w=E.nextSibling&&E.nextSibling.dataset,w)var F=w.dgst;w=F,l=Error(s(419)),l.stack="",l.digest=w,Il({value:l,source:null,stack:null}),t=Qd(e,t,r)}else if(Xt||Ts(e,t,r,!1),w=(r&e.childLanes)!==0,Xt||w){if(w=jt,w!==null&&(l=$t(w,r),l!==0&&l!==R.retryLane))throw R.retryLane=l,ft(e,l),Mn(w,e,l),Hd;Tf(E)||Ku(),t=Qd(e,t,r)}else Tf(E)?(t.flags|=192,t.child=e.child,t=null):(e=R.treeContext,At=ra(E.nextSibling),dn=t,it=!0,Lr=null,na=!1,e!==null&&Yh(t,e),t=Yd(t,l.children),t.flags|=4096);return t}return d?(Gr(),E=l.fallback,d=t.mode,R=e.child,F=R.sibling,l=Za(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,F!==null?E=Za(F,E):(E=Ci(E,d,r,null),E.flags|=2),E.return=t,l.return=t,l.sibling=E,t.child=l,ao(null,l),l=t.child,E=e.child.memoizedState,E===null?E=Id(r):(d=E.cachePool,d!==null?(R=Yt._currentValue,d=d.parent!==R?{parent:R,pool:R}:d):d=Zh(),E={baseLanes:E.baseLanes|r,cachePool:d}),l.memoizedState=E,l.childLanes=Vd(e,w,r),t.memoizedState=Gd,ao(e.child,l)):(Kr(t),r=e.child,e=r.sibling,r=Za(r,{mode:"visible",children:l.children}),r.return=t,r.sibling=null,e!==null&&(w=t.deletions,w===null?(t.deletions=[e],t.flags|=16):w.push(e)),t.child=r,t.memoizedState=null,r)}function Yd(e,t){return t=Mu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mu(e,t){return e=qn(22,e,null,t),e.lanes=0,e}function Qd(e,t,r){return qi(t,e.child,null,r),e=Yd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fp(e,t,r){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ud(e.return,t,r)}function Xd(e,t,r,l,d,h){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d,treeForkCount:h}:(w.isBackwards=t,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=r,w.tailMode=d,w.treeForkCount=h)}function hp(e,t,r){var l=t.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var w=Gt.current,E=(w&2)!==0;if(E?(w=w&1|2,t.flags|=128):w&=1,we(Gt,w),hn(e,t,l,r),l=it?Gl:0,!E&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fp(e,r,t);else if(e.tag===19)fp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&_u(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Xd(t,!1,d,r,h,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&_u(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Xd(t,!0,r,null,h,l);break;case"together":Xd(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function ir(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Yr|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Ts(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=Za(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Za(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Wd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&mu(e)))}function gb(e,t,r){switch(t.tag){case 3:en(t,t.stateNode.containerInfo),Br(t,Yt,e.memoizedState.cache),Ri();break;case 27:case 5:Ae(t);break;case 4:en(t,t.stateNode.containerInfo);break;case 10:Br(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,wd(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Kr(t),t.flags|=128,null):(r&t.child.childLanes)!==0?dp(e,t,r):(Kr(t),e=ir(e,t,r),e!==null?e.sibling:null);Kr(t);break;case 19:var d=(e.flags&128)!==0;if(l=(r&t.childLanes)!==0,l||(Ts(e,t,r,!1),l=(r&t.childLanes)!==0),d){if(l)return hp(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),we(Gt,Gt.current),l)break;return null;case 22:return t.lanes=0,ip(e,t,r,t.pendingProps);case 24:Br(t,Yt,e.memoizedState.cache)}return ir(e,t,r)}function mp(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Xt=!0;else{if(!Wd(e,r)&&(t.flags&128)===0)return Xt=!1,gb(e,t,r);Xt=(e.flags&131072)!==0}else Xt=!1,it&&(t.flags&1048576)!==0&&Vh(t,Gl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Ui(t.elementType),t.type=e,typeof e=="function")td(e)?(l=Pi(e,l),t.tag=1,t=up(null,t,e,l,r)):(t.tag=0,t=Kd(null,t,e,l,r));else{if(e!=null){var d=e.$$typeof;if(d===de){t.tag=11,t=np(null,t,e,l,r);break e}else if(d===te){t.tag=14,t=ap(null,t,e,l,r);break e}}throw t=dt(e)||e,Error(s(306,t,""))}}return t;case 0:return Kd(e,t,t.type,t.pendingProps,r);case 1:return l=t.type,d=Pi(l,t.pendingProps),up(e,t,l,d,r);case 3:e:{if(en(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,gd(e,t),Fl(t,l,null,r);var w=t.memoizedState;if(l=w.cache,Br(t,Yt,l),l!==h.cache&&cd(t,[Yt],r,!0),Jl(),l=w.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:w.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=cp(e,t,l,r);break e}else if(l!==d){d=Zn(Error(s(424)),t),Il(d),t=cp(e,t,l,r);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,At=ra(e.firstChild),dn=t,it=!0,Lr=null,na=!0,r=im(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ri(),l===d){t=ir(e,t,r);break e}hn(e,t,l,r)}t=t.child}return t;case 26:return Du(e,t),e===null?(r=kg(t.type,null,t.pendingProps,null))?t.memoizedState=r:it||(r=t.type,e=t.pendingProps,l=Wu(Ie.current).createElement(r),l[kt]=t,l[Ht]=e,mn(l,r,e),Kt(l),t.stateNode=l):t.memoizedState=kg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ae(t),e===null&&it&&(l=t.stateNode=_g(t.type,t.pendingProps,Ie.current),dn=t,na=!0,d=At,Fr(t.type)?(Af=d,At=ra(l.firstChild)):At=d),hn(e,t,t.pendingProps.children,r),Du(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&it&&((d=l=At)&&(l=Vb(l,t.type,t.pendingProps,na),l!==null?(t.stateNode=l,dn=t,At=ra(l.firstChild),na=!1,d=!0):d=!1),d||qr(t)),Ae(t),d=t.type,h=t.pendingProps,w=e!==null?e.memoizedProps:null,l=h.children,kf(d,h)?l=null:w!==null&&kf(d,w)&&(t.flags|=32),t.memoizedState!==null&&(d=Sd(e,t,lb,null,null,r),bo._currentValue=d),Du(e,t),hn(e,t,l,r),t.child;case 6:return e===null&&it&&((e=r=At)&&(r=Yb(r,t.pendingProps,na),r!==null?(t.stateNode=r,dn=t,At=null,e=!0):e=!1),e||qr(t)),null;case 13:return dp(e,t,r);case 4:return en(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=qi(t,null,l,r):hn(e,t,l,r),t.child;case 11:return np(e,t,t.type,t.pendingProps,r);case 7:return hn(e,t,t.pendingProps,r),t.child;case 8:return hn(e,t,t.pendingProps.children,r),t.child;case 12:return hn(e,t,t.pendingProps.children,r),t.child;case 10:return l=t.pendingProps,Br(t,t.type,l.value),hn(e,t,l.children,r),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,Mi(t),d=fn(d),l=l(d),t.flags|=1,hn(e,t,l,r),t.child;case 14:return ap(e,t,t.type,t.pendingProps,r);case 15:return rp(e,t,t.type,t.pendingProps,r);case 19:return hp(e,t,r);case 31:return pb(e,t,r);case 22:return ip(e,t,r,t.pendingProps);case 24:return Mi(t),l=fn(Yt),e===null?(d=hd(),d===null&&(d=jt,h=dd(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),t.memoizedState={parent:l,cache:d},pd(t),Br(t,Yt,d)):((e.lanes&r)!==0&&(gd(e,t),Fl(t,null,null,r),Jl()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Br(t,Yt,l)):(l=h.cache,Br(t,Yt,l),l!==d.cache&&cd(t,[Yt],r,!0))),hn(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function sr(e){e.flags|=4}function Jd(e,t,r,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if($p())e.flags|=8192;else throw Li=vu,md}else e.flags&=-16777217}function pp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ag(t))if($p())e.flags|=8192;else throw Li=vu,md}function zu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Jo():536870912,e.lanes|=t,Ps|=t)}function ro(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,t}function yb(e,t,r){var l=t.pendingProps;switch(id(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(t),null;case 1:return Ct(t),null;case 3:return r=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),nr(Yt),Mt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ns(t)?sr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ld())),Ct(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(sr(t),h!==null?(Ct(t),pp(t,h)):(Ct(t),Jd(t,d,null,l,r))):h?h!==e.memoizedState?(sr(t),Ct(t),pp(t,h)):(Ct(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&sr(t),Ct(t),Jd(t,d,e,l,r)),null;case 27:if(li(t),r=Ie.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&sr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ct(t),null}e=ke.current,Ns(t)?Qh(t):(e=_g(d,l,r),t.stateNode=e,sr(t))}return Ct(t),null;case 5:if(li(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&sr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ct(t),null}if(h=ke.current,Ns(t))Qh(t);else{var w=Wu(Ie.current);switch(h){case 1:h=w.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=w.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=w.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?w.createElement(d,{is:l.is}):w.createElement(d)}}h[kt]=t,h[Ht]=l;e:for(w=t.child;w!==null;){if(w.tag===5||w.tag===6)h.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}t.stateNode=h;e:switch(mn(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&sr(t)}}return Ct(t),Jd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&sr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ie.current,Ns(t)){if(e=t.stateNode,r=t.memoizedProps,l=null,d=dn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[kt]=t,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||dg(e.nodeValue,r)),e||qr(t,!0)}else e=Wu(e).createTextNode(l),e[kt]=t,t.stateNode=e}return Ct(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ns(t),r!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[kt]=t}else Ri(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ct(t),e=!1}else r=ld(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(Pn(t),t):(Pn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Ct(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ns(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[kt]=t}else Ri(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ct(t),d=!1}else d=ld(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Pn(t),t):(Pn(t),null)}return Pn(t),(t.flags&128)!==0?(t.lanes=r,t):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),zu(t,t.updateQueue),Ct(t),null);case 4:return Mt(),e===null&&xf(t.stateNode.containerInfo),Ct(t),null;case 10:return nr(t.type),Ct(t),null;case 19:if(le(Gt),l=t.memoizedState,l===null)return Ct(t),null;if(d=(t.flags&128)!==0,h=l.rendering,h===null)if(d)ro(l,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=_u(e),h!==null){for(t.flags|=128,ro(l,!1),e=h.updateQueue,t.updateQueue=e,zu(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Kh(r,e),r=r.sibling;return we(Gt,Gt.current&1|2),it&&er(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&yn()>Pu&&(t.flags|=128,d=!0,ro(l,!1),t.lanes=4194304)}else{if(!d)if(e=_u(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,zu(t,e),ro(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!it)return Ct(t),null}else 2*yn()-l.renderingStartTime>Pu&&r!==536870912&&(t.flags|=128,d=!0,ro(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=yn(),e.sibling=null,r=Gt.current,we(Gt,d?r&1|2:r&1),it&&er(t,l.treeForkCount),e):(Ct(t),null);case 22:case 23:return Pn(t),xd(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(r&536870912)!==0&&(t.flags&128)===0&&(Ct(t),t.subtreeFlags&6&&(t.flags|=8192)):Ct(t),r=t.updateQueue,r!==null&&zu(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==r&&(t.flags|=2048),e!==null&&le(zi),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),nr(Yt),Ct(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function vb(e,t){switch(id(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nr(Yt),Mt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return li(t),null;case 31:if(t.memoizedState!==null){if(Pn(t),t.alternate===null)throw Error(s(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Pn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(Gt),null;case 4:return Mt(),null;case 10:return nr(t.type),null;case 22:case 23:return Pn(t),xd(),e!==null&&le(zi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return nr(Yt),null;case 25:return null;default:return null}}function gp(e,t){switch(id(t),t.tag){case 3:nr(Yt),Mt();break;case 26:case 27:case 5:li(t);break;case 4:Mt();break;case 31:t.memoizedState!==null&&Pn(t);break;case 13:Pn(t);break;case 19:le(Gt);break;case 10:nr(t.type);break;case 22:case 23:Pn(t),xd(),e!==null&&le(zi);break;case 24:nr(Yt)}}function io(e,t){try{var r=t.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var d=l.next;r=d;do{if((r.tag&e)===e){l=void 0;var h=r.create,w=r.inst;l=h(),w.destroy=l}r=r.next}while(r!==d)}}catch(E){pt(t,t.return,E)}}function Ir(e,t,r){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var w=l.inst,E=w.destroy;if(E!==void 0){w.destroy=void 0,d=t;var R=r,F=E;try{F()}catch(se){pt(d,R,se)}}}l=l.next}while(l!==h)}}catch(se){pt(t,t.return,se)}}function yp(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{lm(t,r)}catch(l){pt(e,e.return,l)}}}function vp(e,t,r){r.props=Pi(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){pt(e,t,l)}}function so(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(d){pt(e,t,d)}}function Ma(e,t){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(d){pt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){pt(e,t,d)}else r.current=null}function bp(e){var t=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(d){pt(e,e.return,d)}}function Fd(e,t,r){try{var l=e.stateNode;Pb(l,e.type,r,t),l[Ht]=t}catch(d){pt(e,e.return,d)}}function xp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fr(e.type)||e.tag===4}function Zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ef(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=On));else if(l!==4&&(l===27&&Fr(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(ef(e,t,r),e=e.sibling;e!==null;)ef(e,t,r),e=e.sibling}function Uu(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(l===27&&Fr(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Uu(e,t,r),e=e.sibling;e!==null;)Uu(e,t,r),e=e.sibling}function wp(e){var t=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);mn(t,l,r),t[kt]=e,t[Ht]=r}catch(h){pt(e,e.return,h)}}var lr=!1,Wt=!1,tf=!1,_p=typeof WeakSet=="function"?WeakSet:Set,ln=null;function bb(e,t){if(e=e.containerInfo,Sf=ac,e=_(e),k(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var w=0,E=-1,R=-1,F=0,se=0,ce=e,ee=null;t:for(;;){for(var ne;ce!==r||d!==0&&ce.nodeType!==3||(E=w+d),ce!==h||l!==0&&ce.nodeType!==3||(R=w+l),ce.nodeType===3&&(w+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)ee=ce,ce=ne;for(;;){if(ce===e)break t;if(ee===r&&++F===d&&(E=w),ee===h&&++se===l&&(R=w),(ne=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ne}r=E===-1||R===-1?null:{start:E,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(jf={focusedElem:e,selectionRange:r},ac=!1,ln=t;ln!==null;)if(t=ln,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ln=e;else for(;ln!==null;){switch(t=ln,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=t,d=h.memoizedProps,h=h.memoizedState,l=r.stateNode;try{var Te=Pi(r.type,d);e=l.getSnapshotBeforeUpdate(Te,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ue){pt(r,r.return,Ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)Nf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,ln=e;break}ln=t.return}}function Sp(e,t,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ur(e,r),l&4&&io(5,r);break;case 1:if(ur(e,r),l&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(w){pt(r,r.return,w)}else{var d=Pi(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(r,r.return,w)}}l&64&&yp(r),l&512&&so(r,r.return);break;case 3:if(ur(e,r),l&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{lm(e,t)}catch(w){pt(r,r.return,w)}}break;case 27:t===null&&l&4&&wp(r);case 26:case 5:ur(e,r),t===null&&l&4&&bp(r),l&512&&so(r,r.return);break;case 12:ur(e,r);break;case 31:ur(e,r),l&4&&Ep(e,r);break;case 13:ur(e,r),l&4&&Np(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Tb.bind(null,r),Qb(e,r))));break;case 22:if(l=r.memoizedState!==null||lr,!l){t=t!==null&&t.memoizedState!==null||Wt,d=lr;var h=Wt;lr=l,(Wt=t)&&!h?cr(e,r,(r.subtreeFlags&8772)!==0):ur(e,r),lr=d,Wt=h}break;case 30:break;default:ur(e,r)}}function jp(e){var t=e.alternate;t!==null&&(e.alternate=null,jp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rt=null,An=!1;function or(e,t,r){for(r=r.child;r!==null;)kp(e,t,r),r=r.sibling}function kp(e,t,r){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(wa,r)}catch{}switch(r.tag){case 26:Wt||Ma(r,t),or(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Wt||Ma(r,t);var l=Rt,d=An;Fr(r.type)&&(Rt=r.stateNode,An=!1),or(e,t,r),go(r.stateNode),Rt=l,An=d;break;case 5:Wt||Ma(r,t);case 6:if(l=Rt,d=An,Rt=null,or(e,t,r),Rt=l,An=d,Rt!==null)if(An)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(r.stateNode)}catch(h){pt(r,t,h)}else try{Rt.removeChild(r.stateNode)}catch(h){pt(r,t,h)}break;case 18:Rt!==null&&(An?(e=Rt,yg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Qs(e)):yg(Rt,r.stateNode));break;case 4:l=Rt,d=An,Rt=r.stateNode.containerInfo,An=!0,or(e,t,r),Rt=l,An=d;break;case 0:case 11:case 14:case 15:Ir(2,r,t),Wt||Ir(4,r,t),or(e,t,r);break;case 1:Wt||(Ma(r,t),l=r.stateNode,typeof l.componentWillUnmount=="function"&&vp(r,t,l)),or(e,t,r);break;case 21:or(e,t,r);break;case 22:Wt=(l=Wt)||r.memoizedState!==null,or(e,t,r),Wt=l;break;default:or(e,t,r)}}function Ep(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Qs(e)}catch(r){pt(t,t.return,r)}}}function Np(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qs(e)}catch(r){pt(t,t.return,r)}}function xb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new _p),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new _p),t;default:throw Error(s(435,e.tag))}}function Lu(e,t){var r=xb(e);t.forEach(function(l){if(!r.has(l)){r.add(l);var d=Ob.bind(null,e,l);l.then(d,d)}})}function Cn(e,t){var r=t.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l],h=e,w=t,E=w;e:for(;E!==null;){switch(E.tag){case 27:if(Fr(E.type)){Rt=E.stateNode,An=!1;break e}break;case 5:Rt=E.stateNode,An=!1;break e;case 3:case 4:Rt=E.stateNode.containerInfo,An=!0;break e}E=E.return}if(Rt===null)throw Error(s(160));kp(h,w,d),Rt=null,An=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Tp(t,e),t=t.sibling}var ma=null;function Tp(e,t){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Cn(t,e),Rn(e),l&4&&(Ir(3,e,e.return),io(3,e),Ir(5,e,e.return));break;case 1:Cn(t,e),Rn(e),l&512&&(Wt||r===null||Ma(r,r.return)),l&64&&lr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var d=ma;if(Cn(t,e),Rn(e),l&512&&(Wt||r===null||Ma(r,r.return)),l&4){var h=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[zn]||h[kt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),mn(h,l,r),h[kt]=e,Kt(h),l=h;break e;case"link":var w=Tg("link","href",d).get(l+(r.href||""));if(w){for(var E=0;E<w.length;E++)if(h=w[E],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){w.splice(E,1);break t}}h=d.createElement(l),mn(h,l,r),d.head.appendChild(h);break;case"meta":if(w=Tg("meta","content",d).get(l+(r.content||""))){for(E=0;E<w.length;E++)if(h=w[E],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){w.splice(E,1);break t}}h=d.createElement(l),mn(h,l,r),d.head.appendChild(h);break;default:throw Error(s(468,l))}h[kt]=e,Kt(h),l=h}e.stateNode=l}else Og(d,e.type,e.stateNode);else e.stateNode=Ng(d,l,e.memoizedProps);else h!==l?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,l===null?Og(d,e.type,e.stateNode):Ng(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Fd(e,e.memoizedProps,r.memoizedProps)}break;case 27:Cn(t,e),Rn(e),l&512&&(Wt||r===null||Ma(r,r.return)),r!==null&&l&4&&Fd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Cn(t,e),Rn(e),l&512&&(Wt||r===null||Ma(r,r.return)),e.flags&32){d=e.stateNode;try{Ka(d,"")}catch(Te){pt(e,e.return,Te)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Fd(e,d,r!==null?r.memoizedProps:d)),l&1024&&(tf=!0);break;case 6:if(Cn(t,e),Rn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(Te){pt(e,e.return,Te)}}break;case 3:if(Zu=null,d=ma,ma=Ju(t.containerInfo),Cn(t,e),ma=d,Rn(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Qs(t.containerInfo)}catch(Te){pt(e,e.return,Te)}tf&&(tf=!1,Op(e));break;case 4:l=ma,ma=Ju(e.stateNode.containerInfo),Cn(t,e),Rn(e),ma=l;break;case 12:Cn(t,e),Rn(e);break;case 31:Cn(t,e),Rn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lu(e,l)));break;case 13:Cn(t,e),Rn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bu=yn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lu(e,l)));break;case 22:d=e.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,F=lr,se=Wt;if(lr=F||d,Wt=se||R,Cn(t,e),Wt=se,lr=F,Rn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||R||lr||Wt||$i(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){R=r=t;try{if(h=R.stateNode,d)w=h.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=R.stateNode;var ce=R.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;E.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Te){pt(R,R.return,Te)}}}else if(t.tag===6){if(r===null){R=t;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(Te){pt(R,R.return,Te)}}}else if(t.tag===18){if(r===null){R=t;try{var ne=R.stateNode;d?vg(ne,!0):vg(R.stateNode,!1)}catch(Te){pt(R,R.return,Te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Lu(e,r))));break;case 19:Cn(t,e),Rn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lu(e,l)));break;case 30:break;case 21:break;default:Cn(t,e),Rn(e)}}function Rn(e){var t=e.flags;if(t&2){try{for(var r,l=e.return;l!==null;){if(xp(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var d=r.stateNode,h=Zd(e);Uu(e,h,d);break;case 5:var w=r.stateNode;r.flags&32&&(Ka(w,""),r.flags&=-33);var E=Zd(e);Uu(e,E,w);break;case 3:case 4:var R=r.stateNode.containerInfo,F=Zd(e);ef(e,F,R);break;default:throw Error(s(161))}}catch(se){pt(e,e.return,se)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Op(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Op(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ur(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sp(e,t.alternate,t),t=t.sibling}function $i(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ir(4,t,t.return),$i(t);break;case 1:Ma(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&vp(t,t.return,r),$i(t);break;case 27:go(t.stateNode);case 26:case 5:Ma(t,t.return),$i(t);break;case 22:t.memoizedState===null&&$i(t);break;case 30:$i(t);break;default:$i(t)}e=e.sibling}}function cr(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,w=h.flags;switch(h.tag){case 0:case 11:case 15:cr(d,h,r),io(4,h);break;case 1:if(cr(d,h,r),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){pt(l,l.return,F)}if(l=h,d=l.updateQueue,d!==null){var E=l.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)sm(R[d],E)}catch(F){pt(l,l.return,F)}}r&&w&64&&yp(h),so(h,h.return);break;case 27:wp(h);case 26:case 5:cr(d,h,r),r&&l===null&&w&4&&bp(h),so(h,h.return);break;case 12:cr(d,h,r);break;case 31:cr(d,h,r),r&&w&4&&Ep(d,h);break;case 13:cr(d,h,r),r&&w&4&&Np(d,h);break;case 22:h.memoizedState===null&&cr(d,h,r),so(h,h.return);break;case 30:break;default:cr(d,h,r)}t=t.sibling}}function nf(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Vl(r))}function af(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vl(e))}function pa(e,t,r,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ap(e,t,r,l),t=t.sibling}function Ap(e,t,r,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:pa(e,t,r,l),d&2048&&io(9,t);break;case 1:pa(e,t,r,l);break;case 3:pa(e,t,r,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vl(e)));break;case 12:if(d&2048){pa(e,t,r,l),e=t.stateNode;try{var h=t.memoizedProps,w=h.id,E=h.onPostCommit;typeof E=="function"&&E(w,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){pt(t,t.return,R)}}else pa(e,t,r,l);break;case 31:pa(e,t,r,l);break;case 13:pa(e,t,r,l);break;case 23:break;case 22:h=t.stateNode,w=t.alternate,t.memoizedState!==null?h._visibility&2?pa(e,t,r,l):lo(e,t):h._visibility&2?pa(e,t,r,l):(h._visibility|=2,Ls(e,t,r,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&nf(w,t);break;case 24:pa(e,t,r,l),d&2048&&af(t.alternate,t);break;default:pa(e,t,r,l)}}function Ls(e,t,r,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,w=t,E=r,R=l,F=w.flags;switch(w.tag){case 0:case 11:case 15:Ls(h,w,E,R,d),io(8,w);break;case 23:break;case 22:var se=w.stateNode;w.memoizedState!==null?se._visibility&2?Ls(h,w,E,R,d):lo(h,w):(se._visibility|=2,Ls(h,w,E,R,d)),d&&F&2048&&nf(w.alternate,w);break;case 24:Ls(h,w,E,R,d),d&&F&2048&&af(w.alternate,w);break;default:Ls(h,w,E,R,d)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,l=t,d=l.flags;switch(l.tag){case 22:lo(r,l),d&2048&&nf(l.alternate,l);break;case 24:lo(r,l),d&2048&&af(l.alternate,l);break;default:lo(r,l)}t=t.sibling}}var oo=8192;function qs(e,t,r){if(e.subtreeFlags&oo)for(e=e.child;e!==null;)Cp(e,t,r),e=e.sibling}function Cp(e,t,r){switch(e.tag){case 26:qs(e,t,r),e.flags&oo&&e.memoizedState!==null&&s0(r,ma,e.memoizedState,e.memoizedProps);break;case 5:qs(e,t,r);break;case 3:case 4:var l=ma;ma=Ju(e.stateNode.containerInfo),qs(e,t,r),ma=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=oo,oo=16777216,qs(e,t,r),oo=l):qs(e,t,r));break;default:qs(e,t,r)}}function Rp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function uo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];ln=l,Mp(l,e)}Rp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dp(e),e=e.sibling}function Dp(e){switch(e.tag){case 0:case 11:case 15:uo(e),e.flags&2048&&Ir(9,e,e.return);break;case 3:uo(e);break;case 12:uo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,qu(e)):uo(e);break;default:uo(e)}}function qu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];ln=l,Mp(l,e)}Rp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ir(8,t,t.return),qu(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,qu(t));break;default:qu(t)}e=e.sibling}}function Mp(e,t){for(;ln!==null;){var r=ln;switch(r.tag){case 0:case 11:case 15:Ir(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Vl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,ln=l;else e:for(r=e;ln!==null;){l=ln;var d=l.sibling,h=l.return;if(jp(l),l===r){ln=null;break e}if(d!==null){d.return=h,ln=d;break e}ln=h}}}var wb={getCacheForType:function(e){var t=fn(Yt),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return fn(Yt).controller.signal}},_b=typeof WeakMap=="function"?WeakMap:Map,ct=0,jt=null,Ze=null,tt=0,mt=0,$n=null,Vr=!1,Bs=!1,rf=!1,dr=0,Lt=0,Yr=0,Hi=0,sf=0,Hn=0,Ps=0,co=null,Dn=null,lf=!1,Bu=0,zp=0,Pu=1/0,$u=null,Qr=null,tn=0,Xr=null,$s=null,fr=0,of=0,uf=null,Up=null,fo=0,cf=null;function Kn(){return(ct&2)!==0&&tt!==0?tt&-tt:re.T!==null?gf():gi()}function Lp(){if(Hn===0)if((tt&536870912)===0||it){var e=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Hn=e}else Hn=536870912;return e=Bn.current,e!==null&&(e.flags|=32),Hn}function Mn(e,t,r){(e===jt&&(mt===2||mt===9)||e.cancelPendingCommit!==null)&&(Hs(e,0),Wr(e,tt,Hn,!1)),Qn(e,r),((ct&2)===0||e!==jt)&&(e===jt&&((ct&2)===0&&(Hi|=r),Lt===4&&Wr(e,tt,Hn,!1)),za(e))}function qp(e,t,r){if((ct&6)!==0)throw Error(s(327));var l=!r&&(t&127)===0&&(t&e.expiredLanes)===0||Pa(e,t),d=l?kb(e,t):ff(e,t,!0),h=l;do{if(d===0){Bs&&!l&&Wr(e,t,0,!1);break}else{if(r=e.current.alternate,h&&!Sb(r)){d=ff(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){t=w;e:{var E=e;d=co;var R=E.current.memoizedState.isDehydrated;if(R&&(Hs(E,w).flags|=256),w=ff(E,w,!1),w!==2){if(rf&&!R){E.errorRecoveryDisabledLanes|=h,Hi|=h,d=4;break e}h=Dn,Dn=d,h!==null&&(Dn===null?Dn=h:Dn.push.apply(Dn,h))}d=w}if(h=!1,d!==2)continue}}if(d===1){Hs(e,0),Wr(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Wr(l,t,Hn,!Vr);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(d=Bu+300-yn(),10<d)){if(Wr(l,t,Hn,!Vr),mi(l,0,!0)!==0)break e;fr=t,l.timeoutHandle=pg(Bp.bind(null,l,r,Dn,$u,lf,t,Hn,Hi,Ps,Vr,h,"Throttled",-0,0),d);break e}Bp(l,r,Dn,$u,lf,t,Hn,Hi,Ps,Vr,h,null,-0,0)}}break}while(!0);za(e)}function Bp(e,t,r,l,d,h,w,E,R,F,se,ce,ee,ne){if(e.timeoutHandle=-1,ce=t.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:On},Cp(t,h,ce);var Te=(h&62914560)===h?Bu-yn():(h&4194048)===h?zp-yn():0;if(Te=l0(ce,Te),Te!==null){fr=h,e.cancelPendingCommit=Te(Yp.bind(null,e,t,h,r,l,d,w,E,R,se,ce,null,ee,ne)),Wr(e,h,w,!F);return}}Yp(e,t,h,r,l,d,w,E,R)}function Sb(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var d=r[l],h=d.getSnapshot;d=d.value;try{if(!wn(h(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wr(e,t,r,l){t&=~sf,t&=~Hi,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-_e(d),w=1<<h;l[h]=-1,d&=~w}r!==0&&pi(e,r,t)}function Hu(){return(ct&6)===0?(ho(0),!1):!0}function df(){if(Ze!==null){if(mt===0)var e=Ze.return;else e=Ze,tr=Di=null,Ed(e),Rs=null,Ql=0,e=Ze;for(;e!==null;)gp(e.alternate,e),e=e.return;Ze=null}}function Hs(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Kb(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),fr=0,df(),jt=e,Ze=r=Za(e.current,null),tt=t,mt=0,$n=null,Vr=!1,Bs=Pa(e,t),rf=!1,Ps=Hn=sf=Hi=Yr=Lt=0,Dn=co=null,lf=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-_e(l),h=1<<d;t|=e[d],l&=~h}return dr=t,Ke(),r}function Pp(e,t){Ve=null,re.H=no,t===Cs||t===yu?(t=nm(),mt=3):t===md?(t=nm(),mt=4):mt=t===Hd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$n=t,Ze===null&&(Lt=1,Cu(e,Zn(t,e.current)))}function $p(){var e=Bn.current;return e===null?!0:(tt&4194048)===tt?aa===null:(tt&62914560)===tt||(tt&536870912)!==0?e===aa:!1}function Hp(){var e=re.H;return re.H=no,e===null?no:e}function Kp(){var e=re.A;return re.A=wb,e}function Ku(){Lt=4,Vr||(tt&4194048)!==tt&&Bn.current!==null||(Bs=!0),(Yr&134217727)===0&&(Hi&134217727)===0||jt===null||Wr(jt,tt,Hn,!1)}function ff(e,t,r){var l=ct;ct|=2;var d=Hp(),h=Kp();(jt!==e||tt!==t)&&($u=null,Hs(e,t)),t=!1;var w=Lt;e:do try{if(mt!==0&&Ze!==null){var E=Ze,R=$n;switch(mt){case 8:df(),w=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(t=!0);var F=mt;if(mt=0,$n=null,Ks(e,E,R,F),r&&Bs){w=0;break e}break;default:F=mt,mt=0,$n=null,Ks(e,E,R,F)}}jb(),w=Lt;break}catch(se){Pp(e,se)}while(!0);return t&&e.shellSuspendCounter++,tr=Di=null,ct=l,re.H=d,re.A=h,Ze===null&&(jt=null,tt=0,Ke()),w}function jb(){for(;Ze!==null;)Gp(Ze)}function kb(e,t){var r=ct;ct|=2;var l=Hp(),d=Kp();jt!==e||tt!==t?($u=null,Pu=yn()+500,Hs(e,t)):Bs=Pa(e,t);e:do try{if(mt!==0&&Ze!==null){t=Ze;var h=$n;t:switch(mt){case 1:mt=0,$n=null,Ks(e,t,h,1);break;case 2:case 9:if(em(h)){mt=0,$n=null,Ip(t);break}t=function(){mt!==2&&mt!==9||jt!==e||(mt=7),za(e)},h.then(t,t);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:em(h)?(mt=0,$n=null,Ip(t)):(mt=0,$n=null,Ks(e,t,h,7));break;case 5:var w=null;switch(Ze.tag){case 26:w=Ze.memoizedState;case 5:case 27:var E=Ze;if(w?Ag(w):E.stateNode.complete){mt=0,$n=null;var R=E.sibling;if(R!==null)Ze=R;else{var F=E.return;F!==null?(Ze=F,Gu(F)):Ze=null}break t}}mt=0,$n=null,Ks(e,t,h,5);break;case 6:mt=0,$n=null,Ks(e,t,h,6);break;case 8:df(),Lt=6;break e;default:throw Error(s(462))}}Eb();break}catch(se){Pp(e,se)}while(!0);return tr=Di=null,re.H=l,re.A=d,ct=r,Ze!==null?0:(jt=null,tt=0,Ke(),Lt)}function Eb(){for(;Ze!==null&&!Wo();)Gp(Ze)}function Gp(e){var t=mp(e.alternate,e,dr);e.memoizedProps=e.pendingProps,t===null?Gu(e):Ze=t}function Ip(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=op(r,t,t.pendingProps,t.type,void 0,tt);break;case 11:t=op(r,t,t.pendingProps,t.type.render,t.ref,tt);break;case 5:Ed(t);default:gp(r,t),t=Ze=Kh(t,dr),t=mp(r,t,dr)}e.memoizedProps=e.pendingProps,t===null?Gu(e):Ze=t}function Ks(e,t,r,l){tr=Di=null,Ed(t),Rs=null,Ql=0;var d=t.return;try{if(mb(e,d,t,r,tt)){Lt=1,Cu(e,Zn(r,e.current)),Ze=null;return}}catch(h){if(d!==null)throw Ze=d,h;Lt=1,Cu(e,Zn(r,e.current)),Ze=null;return}t.flags&32768?(it||l===1?e=!0:Bs||(tt&536870912)!==0?e=!1:(Vr=e=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vp(t,e)):Gu(t)}function Gu(e){var t=e;do{if((t.flags&32768)!==0){Vp(t,Vr);return}e=t.return;var r=yb(t.alternate,t,dr);if(r!==null){Ze=r;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);Lt===0&&(Lt=5)}function Vp(e,t){do{var r=vb(e.alternate,e);if(r!==null){r.flags&=32767,Ze=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){Ze=e;return}Ze=e=r}while(e!==null);Lt=6,Ze=null}function Yp(e,t,r,l,d,h,w,E,R){e.cancelPendingCommit=null;do Iu();while(tn!==0);if((ct&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(h=t.lanes|t.childLanes,h|=Me,_l(e,r,h,w,E,R),e===jt&&(Ze=jt=null,tt=0),$s=t,Xr=e,fr=r,of=h,uf=d,Up=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ab(wr,function(){return Fp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=re.T,re.T=null,d=xe.p,xe.p=2,w=ct,ct|=4;try{bb(e,t,r)}finally{ct=w,xe.p=d,re.T=l}}tn=1,Qp(),Xp(),Wp()}}function Qp(){if(tn===1){tn=0;var e=Xr,t=$s,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=re.T,re.T=null;var l=xe.p;xe.p=2;var d=ct;ct|=4;try{Tp(t,e);var h=jf,w=_(e.containerInfo),E=h.focusedElem,R=h.selectionRange;if(w!==E&&E&&E.ownerDocument&&x(E.ownerDocument.documentElement,E)){if(R!==null&&k(E)){var F=R.start,se=R.end;if(se===void 0&&(se=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min(se,E.value.length);else{var ce=E.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Te=E.textContent.length,Ue=Math.min(R.start,Te),_t=R.end===void 0?Ue:Math.min(R.end,Te);!ne.extend&&Ue>_t&&(w=_t,_t=Ue,Ue=w);var G=y(E,Ue),P=y(E,_t);if(G&&P&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==P.node||ne.focusOffset!==P.offset)){var J=ce.createRange();J.setStart(G.node,G.offset),ne.removeAllRanges(),Ue>_t?(ne.addRange(J),ne.extend(P.node,P.offset)):(J.setEnd(P.node,P.offset),ne.addRange(J))}}}}for(ce=[],ne=E;ne=ne.parentNode;)ne.nodeType===1&&ce.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ce.length;E++){var oe=ce[E];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}ac=!!Sf,jf=Sf=null}finally{ct=d,xe.p=l,re.T=r}}e.current=t,tn=2}}function Xp(){if(tn===2){tn=0;var e=Xr,t=$s,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=re.T,re.T=null;var l=xe.p;xe.p=2;var d=ct;ct|=4;try{Sp(e,t.alternate,t)}finally{ct=d,xe.p=l,re.T=r}}tn=3}}function Wp(){if(tn===4||tn===3){tn=0,ui();var e=Xr,t=$s,r=fr,l=Up;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?tn=5:(tn=0,$s=Xr=null,Jp(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Qr=null),Sr(r),t=t.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(wa,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=re.T,d=xe.p,xe.p=2,re.T=null;try{for(var h=e.onRecoverableError,w=0;w<l.length;w++){var E=l[w];h(E.value,{componentStack:E.stack})}}finally{re.T=t,xe.p=d}}(fr&3)!==0&&Iu(),za(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===cf?fo++:(fo=0,cf=e):fo=0,ho(0)}}function Jp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Vl(t)))}function Iu(){return Qp(),Xp(),Wp(),Fp()}function Fp(){if(tn!==5)return!1;var e=Xr,t=of;of=0;var r=Sr(fr),l=re.T,d=xe.p;try{xe.p=32>r?32:r,re.T=null,r=uf,uf=null;var h=Xr,w=fr;if(tn=0,$s=Xr=null,fr=0,(ct&6)!==0)throw Error(s(331));var E=ct;if(ct|=4,Dp(h.current),Ap(h,h.current,w,r),ct=E,ho(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(wa,h)}catch{}return!0}finally{xe.p=d,re.T=l,Jp(e,t)}}function Zp(e,t,r){t=Zn(r,t),t=$d(e.stateNode,t,2),e=Hr(e,t,2),e!==null&&(Qn(e,2),za(e))}function pt(e,t,r){if(e.tag===3)Zp(e,e,r);else for(;t!==null;){if(t.tag===3){Zp(t,e,r);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qr===null||!Qr.has(l))){e=Zn(r,e),r=ep(2),l=Hr(t,r,2),l!==null&&(tp(r,l,t,e),Qn(l,2),za(l));break}}t=t.return}}function hf(e,t,r){var l=e.pingCache;if(l===null){l=e.pingCache=new _b;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(r)||(rf=!0,d.add(r),e=Nb.bind(null,e,t,r),t.then(e,e))}function Nb(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,jt===e&&(tt&r)===r&&(Lt===4||Lt===3&&(tt&62914560)===tt&&300>yn()-Bu?(ct&2)===0&&Hs(e,0):sf|=r,Ps===tt&&(Ps=0)),za(e)}function eg(e,t){t===0&&(t=Jo()),e=ft(e,t),e!==null&&(Qn(e,t),za(e))}function Tb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),eg(e,r)}function Ob(e,t){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),eg(e,r)}function Ab(e,t){return oi(e,t)}var Vu=null,Gs=null,mf=!1,Yu=!1,pf=!1,Jr=0;function za(e){e!==Gs&&e.next===null&&(Gs===null?Vu=Gs=e:Gs=Gs.next=e),Yu=!0,mf||(mf=!0,Rb())}function ho(e,t){if(!pf&&Yu){pf=!0;do for(var r=!1,l=Vu;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var w=l.suspendedLanes,E=l.pingedLanes;h=(1<<31-_e(42|e)+1)-1,h&=d&~(w&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,rg(l,h))}else h=tt,h=mi(l,l===jt?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Pa(l,h)||(r=!0,rg(l,h));l=l.next}while(r);pf=!1}}function Cb(){tg()}function tg(){Yu=mf=!1;var e=0;Jr!==0&&Hb()&&(e=Jr);for(var t=yn(),r=null,l=Vu;l!==null;){var d=l.next,h=ng(l,t);h===0?(l.next=null,r===null?Vu=d:r.next=d,d===null&&(Gs=r)):(r=l,(e!==0||(h&3)!==0)&&(Yu=!0)),l=d}tn!==0&&tn!==5||ho(e),Jr!==0&&(Jr=0)}function ng(e,t){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var w=31-_e(h),E=1<<w,R=d[w];R===-1?((E&r)===0||(E&l)!==0)&&(d[w]=Vc(E,t)):R<=t&&(e.expiredLanes|=E),h&=~E}if(t=jt,r=tt,r=mi(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===t&&(mt===2||mt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Tn(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Pa(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(l!==null&&Tn(l),Sr(r)){case 2:case 8:r=xa;break;case 32:r=wr;break;case 268435456:r=ts;break;default:r=wr}return l=ag.bind(null,e),r=oi(r,l),e.callbackPriority=t,e.callbackNode=r,t}return l!==null&&l!==null&&Tn(l),e.callbackPriority=2,e.callbackNode=null,2}function ag(e,t){if(tn!==0&&tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Iu()&&e.callbackNode!==r)return null;var l=tt;return l=mi(e,e===jt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(qp(e,l,t),ng(e,yn()),e.callbackNode!=null&&e.callbackNode===r?ag.bind(null,e):null)}function rg(e,t){if(Iu())return null;qp(e,t,!0)}function Rb(){Gb(function(){(ct&6)!==0?oi(vn,Cb):tg()})}function gf(){if(Jr===0){var e=Os;e===0&&(e=ve,ve<<=1,(ve&261888)===0&&(ve=256)),Jr=e}return Jr}function ig(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ha(""+e)}function sg(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function Db(e,t,r,l,d){if(t==="submit"&&r&&r.stateNode===d){var h=ig((d[Ht]||null).action),w=l.submitter;w&&(t=(t=w[Ht]||null)?ig(t.formAction):w.getAttribute("formAction"),t!==null&&(h=t,w=null));var E=new us("action","action",null,l,d);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Jr!==0){var R=w?sg(d,w):new FormData(d);zd(r,{pending:!0,data:R,method:d.method,action:h},null,R)}}else typeof h=="function"&&(E.preventDefault(),R=w?sg(d,w):new FormData(d),zd(r,{pending:!0,data:R,method:d.method,action:h},h,R))},currentTarget:d}]})}}for(var yf=0;yf<be.length;yf++){var vf=be[yf],Mb=vf.toLowerCase(),zb=vf[0].toUpperCase()+vf.slice(1);pe(Mb,"on"+zb)}pe(Z,"onAnimationEnd"),pe(X,"onAnimationIteration"),pe(ie,"onAnimationStart"),pe("dblclick","onDoubleClick"),pe("focusin","onFocus"),pe("focusout","onBlur"),pe(he,"onTransitionRun"),pe(ge,"onTransitionStart"),pe(ye,"onTransitionCancel"),pe(me,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),da("onBeforeInput",["compositionend","keypress","textInput","paste"]),da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mo));function lg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var w=l.length-1;0<=w;w--){var E=l[w],R=E.instance,F=E.currentTarget;if(E=E.listener,R!==h&&d.isPropagationStopped())break e;h=E,d.currentTarget=F;try{h(d)}catch(se){je(se)}d.currentTarget=null,h=R}else for(w=0;w<l.length;w++){if(E=l[w],R=E.instance,F=E.currentTarget,E=E.listener,R!==h&&d.isPropagationStopped())break e;h=E,d.currentTarget=F;try{h(d)}catch(se){je(se)}d.currentTarget=null,h=R}}}}function et(e,t){var r=t[jr];r===void 0&&(r=t[jr]=new Set);var l=e+"__bubble";r.has(l)||(og(t,e,2,!1),r.add(l))}function bf(e,t,r){var l=0;t&&(l|=4),og(r,e,l,t)}var Qu="_reactListening"+Math.random().toString(36).slice(2);function xf(e){if(!e[Qu]){e[Qu]=!0,$a.forEach(function(r){r!=="selectionchange"&&(Ub.has(r)||bf(r,!1,e),bf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qu]||(t[Qu]=!0,bf("selectionchange",!1,t))}}function og(e,t,r,l){switch(Lg(t)){case 2:var d=c0;break;case 8:d=d0;break;default:d=zf}r=d.bind(null,t,r,e),d=void 0,!Al||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function wf(e,t,r,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var E=l.stateNode.containerInfo;if(E===d)break;if(w===4)for(w=l.return;w!==null;){var R=w.tag;if((R===3||R===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;E!==null;){if(w=ka(E),w===null)return;if(R=w.tag,R===5||R===6||R===26||R===27){l=h=w;continue e}E=E.parentNode}}l=l.return}Er(function(){var F=h,se=ls(r),ce=[];e:{var ee=Se.get(e);if(ee!==void 0){var ne=us,Te=e;switch(e){case"keypress":if(Or(r)===0)break e;case"keydown":case"keyup":ne=gs;break;case"focusin":Te="focus",ne=Ar;break;case"focusout":Te="blur",ne=Ar;break;case"beforeblur":case"afterblur":ne=Ar;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Ll;break;case Z:case X:case ie:ne=nu;break;case me:ne=ql;break;case"scroll":case"scrollend":ne=cs;break;case"wheel":ne=vs;break;case"copy":case"cut":case"paste":ne=Cr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ul;break;case"toggle":case"beforetoggle":ne=iu}var Ue=(t&4)!==0,_t=!Ue&&(e==="scroll"||e==="scrollend"),G=Ue?ee!==null?ee+"Capture":null:ee;Ue=[];for(var P=F,J;P!==null;){var oe=P;if(J=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||J===null||G===null||(oe=Va(P,G),oe!=null&&Ue.push(po(P,oe,J))),_t)break;P=P.return}0<Ue.length&&(ee=new ne(ee,Te,null,r,se),ce.push({event:ee,listeners:Ue}))}}if((t&7)===0){e:{if(ee=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",ee&&r!==Wn&&(Te=r.relatedTarget||r.fromElement)&&(ka(Te)||Te[kn]))break e;if((ne||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Te=r.relatedTarget||r.toElement,ne=F,Te=Te?ka(Te):null,Te!==null&&(_t=c(Te),Ue=Te.tag,Te!==_t||Ue!==5&&Ue!==27&&Ue!==6)&&(Te=null)):(ne=null,Te=F),ne!==Te)){if(Ue=fs,oe="onMouseLeave",G="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=Ul,oe="onPointerLeave",G="onPointerEnter",P="pointer"),_t=ne==null?ee:Un(ne),J=Te==null?ee:Un(Te),ee=new Ue(oe,P+"leave",ne,r,se),ee.target=_t,ee.relatedTarget=J,oe=null,ka(se)===F&&(Ue=new Ue(G,P+"enter",Te,r,se),Ue.target=J,Ue.relatedTarget=_t,oe=Ue),_t=oe,ne&&Te)t:{for(Ue=Lb,G=ne,P=Te,J=0,oe=G;oe;oe=Ue(oe))J++;oe=0;for(var ze=P;ze;ze=Ue(ze))oe++;for(;0<J-oe;)G=Ue(G),J--;for(;0<oe-J;)P=Ue(P),oe--;for(;J--;){if(G===P||P!==null&&G===P.alternate){Ue=G;break t}G=Ue(G),P=Ue(P)}Ue=null}else Ue=null;ne!==null&&ug(ce,ee,ne,Ue,!1),Te!==null&&_t!==null&&ug(ce,_t,Te,Ue,!0)}}e:{if(ee=F?Un(F):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var lt=Ai;else if(ws(ee))if(Fn)lt=Mr;else{lt=Fa;var Oe=du}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?F&&Ol(F.elementType)&&(lt=Ai):lt=Kl;if(lt&&(lt=lt(e,F))){Hl(ce,lt,r,se);break e}Oe&&Oe(e,ee,F),e==="focusout"&&F&&ee.type==="number"&&F.memoizedProps.value!=null&&_i(ee,"number",ee.value)}switch(Oe=F?Un(F):window,e){case"focusin":(ws(Oe)||Oe.contentEditable==="true")&&(O=Oe,M=F,Q=null);break;case"focusout":Q=M=O=null;break;case"mousedown":z=!0;break;case"contextmenu":case"mouseup":case"dragend":z=!1,D(ce,r,se);break;case"selectionchange":if(N)break;case"keydown":case"keyup":D(ce,r,se)}var Ye;if(Ti)e:{switch(e){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Wa?$l(e,r)&&(nt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(nt="onCompositionStart");nt&&(bs&&r.locale!=="ko"&&(Wa||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Wa&&(Ye=Tr()):(Jn=se,os="value"in Jn?Jn.value:Jn.textContent,Wa=!0)),Oe=Xu(F,nt),0<Oe.length&&(nt=new ps(nt,e,null,r,se),ce.push({event:nt,listeners:Oe}),Ye?nt.data=Ye:(Ye=lu(r),Ye!==null&&(nt.data=Ye)))),(Ye=Fc?ou(e,r):Zc(e,r))&&(nt=Xu(F,"onBeforeInput"),0<nt.length&&(Oe=new ps("onBeforeInput","beforeinput",null,r,se),ce.push({event:Oe,listeners:nt}),Oe.data=Ye)),Db(ce,e,F,r,se)}lg(ce,t)})}function po(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xu(e,t){for(var r=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Va(e,r),d!=null&&l.unshift(po(e,d,h)),d=Va(e,t),d!=null&&l.push(po(e,d,h))),e.tag===3)return l;e=e.return}return[]}function Lb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ug(e,t,r,l,d){for(var h=t._reactName,w=[];r!==null&&r!==l;){var E=r,R=E.alternate,F=E.stateNode;if(E=E.tag,R!==null&&R===l)break;E!==5&&E!==26&&E!==27||F===null||(R=F,d?(F=Va(r,h),F!=null&&w.unshift(po(r,F,R))):d||(F=Va(r,h),F!=null&&w.push(po(r,F,R)))),r=r.return}w.length!==0&&e.push({event:t,listeners:w})}var qb=/\r\n?/g,Bb=/\u0000|\uFFFD/g;function cg(e){return(typeof e=="string"?e:""+e).replace(qb,`
`).replace(Bb,"")}function dg(e,t){return t=cg(t),cg(e)===t}function wt(e,t,r,l,d,h){switch(r){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Ka(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Ka(e,""+l);break;case"className":xi(e,"class",l);break;case"tabIndex":xi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xi(e,r,l);break;case"style":Tl(e,l,h);break;case"data":if(t!=="object"){xi(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ha(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(t!=="input"&&wt(e,t,"name",d.name,d,null),wt(e,t,"formEncType",d.formEncType,d,null),wt(e,t,"formMethod",d.formMethod,d,null),wt(e,t,"formTarget",d.formTarget,d,null)):(wt(e,t,"encType",d.encType,d,null),wt(e,t,"method",d.method,d,null),wt(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ha(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=On);break;case"onScroll":l!=null&&et("scroll",e);break;case"onScrollEnd":l!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=ha(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":et("beforetoggle",e),et("toggle",e),Xe(e,"popover",l);break;case"xlinkActuate":Xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xe(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Xc.get(r)||r,Xe(e,r,l))}}function _f(e,t,r,l,d,h){switch(r){case"style":Tl(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof l=="string"?Ka(e,l):(typeof l=="number"||typeof l=="bigint")&&Ka(e,""+l);break;case"onScroll":l!=null&&et("scroll",e);break;case"onScrollEnd":l!=null&&et("scrollend",e);break;case"onClick":l!=null&&(e.onclick=On);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vi.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),h=e[Ht]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,l,d);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Xe(e,r,l)}}}function mn(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var l=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var w=r[h];if(w!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:wt(e,t,h,w,r,null)}}d&&wt(e,t,"srcSet",r.srcSet,r,null),l&&wt(e,t,"src",r.src,r,null);return;case"input":et("invalid",e);var E=h=w=d=null,R=null,F=null;for(l in r)if(r.hasOwnProperty(l)){var se=r[l];if(se!=null)switch(l){case"name":d=se;break;case"type":w=se;break;case"checked":R=se;break;case"defaultChecked":F=se;break;case"value":h=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,t));break;default:wt(e,t,l,se,r,null)}}ss(e,h,E,R,F,w,d,!1);return;case"select":et("invalid",e),l=w=h=null;for(d in r)if(r.hasOwnProperty(d)&&(E=r[d],E!=null))switch(d){case"value":h=E;break;case"defaultValue":w=E;break;case"multiple":l=E;default:wt(e,t,d,E,r,null)}t=h,r=w,e.multiple=!!l,t!=null?fa(e,!!l,t,!1):r!=null&&fa(e,!!l,r,!0);return;case"textarea":et("invalid",e),h=d=l=null;for(w in r)if(r.hasOwnProperty(w)&&(E=r[w],E!=null))switch(w){case"value":l=E;break;case"defaultValue":d=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:wt(e,t,w,E,r,null)}Si(e,l,d,h);return;case"option":for(R in r)r.hasOwnProperty(R)&&(l=r[R],l!=null)&&(R==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":wt(e,t,R,l,r,null));return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(l=0;l<mo.length;l++)et(mo[l],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in r)if(r.hasOwnProperty(F)&&(l=r[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:wt(e,t,F,l,r,null)}return;default:if(Ol(t)){for(se in r)r.hasOwnProperty(se)&&(l=r[se],l!==void 0&&_f(e,t,se,l,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(l=r[E],l!=null&&wt(e,t,E,l,r,null))}function Pb(e,t,r,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,w=null,E=null,R=null,F=null,se=null;for(ne in r){var ce=r[ne];if(r.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":R=ce;default:l.hasOwnProperty(ne)||wt(e,t,ne,null,l,ce)}}for(var ee in l){var ne=l[ee];if(ce=r[ee],l.hasOwnProperty(ee)&&(ne!=null||ce!=null))switch(ee){case"type":h=ne;break;case"name":d=ne;break;case"checked":F=ne;break;case"defaultChecked":se=ne;break;case"value":w=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,t));break;default:ne!==ce&&wt(e,t,ee,ne,l,ce)}}Na(e,w,E,R,F,se,h,d);return;case"select":ne=w=E=ee=null;for(h in r)if(R=r[h],r.hasOwnProperty(h)&&R!=null)switch(h){case"value":break;case"multiple":ne=R;default:l.hasOwnProperty(h)||wt(e,t,h,null,l,R)}for(d in l)if(h=l[d],R=r[d],l.hasOwnProperty(d)&&(h!=null||R!=null))switch(d){case"value":ee=h;break;case"defaultValue":E=h;break;case"multiple":w=h;default:h!==R&&wt(e,t,d,h,l,R)}t=E,r=w,l=ne,ee!=null?fa(e,!!r,ee,!1):!!l!=!!r&&(t!=null?fa(e,!!r,t,!0):fa(e,!!r,r?[]:"",!1));return;case"textarea":ne=ee=null;for(E in r)if(d=r[E],r.hasOwnProperty(E)&&d!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:wt(e,t,E,null,l,d)}for(w in l)if(d=l[w],h=r[w],l.hasOwnProperty(w)&&(d!=null||h!=null))switch(w){case"value":ee=d;break;case"defaultValue":ne=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==h&&wt(e,t,w,d,l,h)}Nl(e,ee,ne);return;case"option":for(var Te in r)ee=r[Te],r.hasOwnProperty(Te)&&ee!=null&&!l.hasOwnProperty(Te)&&(Te==="selected"?e.selected=!1:wt(e,t,Te,null,l,ee));for(R in l)ee=l[R],ne=r[R],l.hasOwnProperty(R)&&ee!==ne&&(ee!=null||ne!=null)&&(R==="selected"?e.selected=ee&&typeof ee!="function"&&typeof ee!="symbol":wt(e,t,R,ee,l,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in r)ee=r[Ue],r.hasOwnProperty(Ue)&&ee!=null&&!l.hasOwnProperty(Ue)&&wt(e,t,Ue,null,l,ee);for(F in l)if(ee=l[F],ne=r[F],l.hasOwnProperty(F)&&ee!==ne&&(ee!=null||ne!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,t));break;default:wt(e,t,F,ee,l,ne)}return;default:if(Ol(t)){for(var _t in r)ee=r[_t],r.hasOwnProperty(_t)&&ee!==void 0&&!l.hasOwnProperty(_t)&&_f(e,t,_t,void 0,l,ee);for(se in l)ee=l[se],ne=r[se],!l.hasOwnProperty(se)||ee===ne||ee===void 0&&ne===void 0||_f(e,t,se,ee,l,ne);return}}for(var G in r)ee=r[G],r.hasOwnProperty(G)&&ee!=null&&!l.hasOwnProperty(G)&&wt(e,t,G,null,l,ee);for(ce in l)ee=l[ce],ne=r[ce],!l.hasOwnProperty(ce)||ee===ne||ee==null&&ne==null||wt(e,t,ce,ee,l,ne)}function fg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $b(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var d=r[l],h=d.transferSize,w=d.initiatorType,E=d.duration;if(h&&E&&fg(w)){for(w=0,E=d.responseEnd,l+=1;l<r.length;l++){var R=r[l],F=R.startTime;if(F>E)break;var se=R.transferSize,ce=R.initiatorType;se&&fg(ce)&&(R=R.responseEnd,w+=se*(R<E?1:(E-F)/(R-F)))}if(--l,t+=8*(h+w)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sf=null,jf=null;function Wu(e){return e.nodeType===9?e:e.ownerDocument}function hg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function kf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ef=null;function Hb(){var e=window.event;return e&&e.type==="popstate"?e===Ef?!1:(Ef=e,!0):(Ef=null,!1)}var pg=typeof setTimeout=="function"?setTimeout:void 0,Kb=typeof clearTimeout=="function"?clearTimeout:void 0,gg=typeof Promise=="function"?Promise:void 0,Gb=typeof queueMicrotask=="function"?queueMicrotask:typeof gg<"u"?function(e){return gg.resolve(null).then(e).catch(Ib)}:pg;function Ib(e){setTimeout(function(){throw e})}function Fr(e){return e==="head"}function yg(e,t){var r=t,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(d),Qs(t);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")go(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,go(r);for(var h=r.firstChild;h;){var w=h.nextSibling,E=h.nodeName;h[zn]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=w}}else r==="body"&&go(e.ownerDocument.body);r=d}while(r);Qs(t)}function vg(e,t){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function Nf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Nf(r),rs(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Vb(e,t,r,l){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[zn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=ra(e.nextSibling),e===null)break}return null}function Yb(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=ra(e.nextSibling),e===null))return null;return e}function bg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ra(e.nextSibling),e===null))return null;return e}function Tf(e){return e.data==="$?"||e.data==="$~"}function Of(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qb(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var l=function(){t(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ra(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Af=null;function xg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return ra(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function wg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function _g(e,t,r){switch(t=Wu(r),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function go(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rs(e)}var ia=new Map,Sg=new Set;function Ju(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hr=xe.d;xe.d={f:Xb,r:Wb,D:Jb,C:Fb,L:Zb,m:e0,X:n0,S:t0,M:a0};function Xb(){var e=hr.f(),t=Hu();return e||t}function Wb(e){var t=vt(e);t!==null&&t.tag===5&&t.type==="form"?Pm(t):hr.r(e)}var Is=typeof document>"u"?null:document;function jg(e,t,r){var l=Is;if(l&&typeof t=="string"&&t){var d=an(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Sg.has(d)||(Sg.add(d),e={rel:e,crossOrigin:r,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),mn(t,"link",e),Kt(t),l.head.appendChild(t)))}}function Jb(e){hr.D(e),jg("dns-prefetch",e,null)}function Fb(e,t){hr.C(e,t),jg("preconnect",e,t)}function Zb(e,t,r){hr.L(e,t,r);var l=Is;if(l&&e&&t){var d='link[rel="preload"][as="'+an(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+an(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+an(r.imageSizes)+'"]')):d+='[href="'+an(e)+'"]';var h=d;switch(t){case"style":h=Vs(e);break;case"script":h=Ys(e)}ia.has(h)||(e=j({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),ia.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(yo(h))||t==="script"&&l.querySelector(vo(h))||(t=l.createElement("link"),mn(t,"link",e),Kt(t),l.head.appendChild(t)))}}function e0(e,t){hr.m(e,t);var r=Is;if(r&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+an(l)+'"][href="'+an(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ys(e)}if(!ia.has(h)&&(e=j({rel:"modulepreload",href:e},t),ia.set(h,e),r.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(vo(h)))return}l=r.createElement("link"),mn(l,"link",e),Kt(l),r.head.appendChild(l)}}}function t0(e,t,r){hr.S(e,t,r);var l=Is;if(l&&e){var d=bn(l).hoistableStyles,h=Vs(e);t=t||"default";var w=d.get(h);if(!w){var E={loading:0,preload:null};if(w=l.querySelector(yo(h)))E.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},r),(r=ia.get(h))&&Cf(e,r);var R=w=l.createElement("link");Kt(R),mn(R,"link",e),R._p=new Promise(function(F,se){R.onload=F,R.onerror=se}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Fu(w,t,l)}w={type:"stylesheet",instance:w,count:1,state:E},d.set(h,w)}}}function n0(e,t){hr.X(e,t);var r=Is;if(r&&e){var l=bn(r).hoistableScripts,d=Ys(e),h=l.get(d);h||(h=r.querySelector(vo(d)),h||(e=j({src:e,async:!0},t),(t=ia.get(d))&&Rf(e,t),h=r.createElement("script"),Kt(h),mn(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function a0(e,t){hr.M(e,t);var r=Is;if(r&&e){var l=bn(r).hoistableScripts,d=Ys(e),h=l.get(d);h||(h=r.querySelector(vo(d)),h||(e=j({src:e,async:!0,type:"module"},t),(t=ia.get(d))&&Rf(e,t),h=r.createElement("script"),Kt(h),mn(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function kg(e,t,r,l){var d=(d=Ie.current)?Ju(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Vs(r.href),r=bn(d).hoistableStyles,l=r.get(t),l||(l={type:"style",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Vs(r.href);var h=bn(d).hoistableStyles,w=h.get(e);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,w),(h=d.querySelector(yo(e)))&&!h._p&&(w.instance=h,w.state.loading=5),ia.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ia.set(e,r),h||r0(d,e,r,w.state))),t&&l===null)throw Error(s(528,""));return w}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ys(r),r=bn(d).hoistableScripts,l=r.get(t),l||(l={type:"script",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Vs(e){return'href="'+an(e)+'"'}function yo(e){return'link[rel="stylesheet"]['+e+"]"}function Eg(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function r0(e,t,r,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),mn(t,"link",r),Kt(t),e.head.appendChild(t))}function Ys(e){return'[src="'+an(e)+'"]'}function vo(e){return"script[async]"+e}function Ng(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+an(r.href)+'"]');if(l)return t.instance=l,Kt(l),l;var d=j({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Kt(l),mn(l,"style",d),Fu(l,r.precedence,e),t.instance=l;case"stylesheet":d=Vs(r.href);var h=e.querySelector(yo(d));if(h)return t.state.loading|=4,t.instance=h,Kt(h),h;l=Eg(r),(d=ia.get(d))&&Cf(l,d),h=(e.ownerDocument||e).createElement("link"),Kt(h);var w=h;return w._p=new Promise(function(E,R){w.onload=E,w.onerror=R}),mn(h,"link",l),t.state.loading|=4,Fu(h,r.precedence,e),t.instance=h;case"script":return h=Ys(r.src),(d=e.querySelector(vo(h)))?(t.instance=d,Kt(d),d):(l=r,(d=ia.get(h))&&(l=j({},r),Rf(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Kt(d),mn(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Fu(l,r.precedence,e));return t.instance}function Fu(e,t,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,w=0;w<l.length;w++){var E=l[w];if(E.dataset.precedence===t)h=E;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Cf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zu=null;function Tg(e,t,r){if(Zu===null){var l=new Map,d=Zu=new Map;d.set(r,l)}else d=Zu,l=d.get(r),l||(l=new Map,d.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[zn]||h[kt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var w=h.getAttribute(t)||"";w=e+w;var E=l.get(w);E?E.push(h):l.set(w,[h])}}return l}function Og(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function i0(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ag(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function s0(e,t,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Vs(l.href),h=t.querySelector(yo(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ec.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=h,Kt(h);return}h=t.ownerDocument||t,l=Eg(l),(d=ia.get(d))&&Cf(l,d),h=h.createElement("link"),Kt(h);var w=h;w._p=new Promise(function(E,R){w.onload=E,w.onerror=R}),mn(h,"link",l),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=ec.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var Df=0;function l0(e,t){return e.stylesheets&&e.count===0&&nc(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&nc(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Df===0&&(Df=62500*$b());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&nc(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Df?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function ec(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tc=null;function nc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tc=new Map,t.forEach(o0,e),tc=null,ec.call(e))}function o0(e,t){if(!(t.state.loading&4)){var r=tc.get(e);if(r)var l=r.get(null);else{r=new Map,tc.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var w=d[h];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(r.set(w.dataset.precedence,w),l=w)}l&&r.set(null,l)}d=t.instance,w=d.getAttribute("data-precedence"),h=r.get(w)||l,h===l&&r.set(null,d),r.set(w,d),this.count++,l=ec.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var bo={$$typeof:Y,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function u0(e,t,r,l,d,h,w,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.hiddenUpdates=_a(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Cg(e,t,r,l,d,h,w,E,R,F,se,ce){return e=new u0(e,t,r,w,R,F,se,ce,E),t=1,h===!0&&(t|=24),h=qn(3,null,null,t),e.current=h,h.stateNode=e,t=dd(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:r,cache:t},pd(h),e}function Rg(e){return e?(e=js,e):js}function Dg(e,t,r,l,d,h){d=Rg(d),l.context===null?l.context=d:l.pendingContext=d,l=$r(t),l.payload={element:r},h=h===void 0?null:h,h!==null&&(l.callback=h),r=Hr(e,l,t),r!==null&&(Mn(r,e,t),Wl(r,e,t))}function Mg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Mf(e,t){Mg(e,t),(e=e.alternate)&&Mg(e,t)}function zg(e){if(e.tag===13||e.tag===31){var t=ft(e,67108864);t!==null&&Mn(t,e,67108864),Mf(e,67108864)}}function Ug(e){if(e.tag===13||e.tag===31){var t=Kn();t=Sl(t);var r=ft(e,t);r!==null&&Mn(r,e,t),Mf(e,t)}}var ac=!0;function c0(e,t,r,l){var d=re.T;re.T=null;var h=xe.p;try{xe.p=2,zf(e,t,r,l)}finally{xe.p=h,re.T=d}}function d0(e,t,r,l){var d=re.T;re.T=null;var h=xe.p;try{xe.p=8,zf(e,t,r,l)}finally{xe.p=h,re.T=d}}function zf(e,t,r,l){if(ac){var d=Uf(l);if(d===null)wf(e,t,l,rc,r),qg(e,l);else if(h0(d,e,t,r,l))l.stopPropagation();else if(qg(e,l),t&4&&-1<f0.indexOf(e)){for(;d!==null;){var h=vt(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var w=ca(h.pendingLanes);if(w!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;w;){var R=1<<31-_e(w);E.entanglements[1]|=R,w&=~R}za(h),(ct&6)===0&&(Pu=yn()+500,ho(0))}}break;case 31:case 13:E=ft(h,2),E!==null&&Mn(E,h,2),Hu(),Mf(h,2)}if(h=Uf(l),h===null&&wf(e,t,l,rc,r),h===d)break;d=h}d!==null&&l.stopPropagation()}else wf(e,t,l,null,r)}}function Uf(e){return e=ls(e),Lf(e)}var rc=null;function Lf(e){if(rc=null,e=ka(e),e!==null){var t=c(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=p(t),e!==null)return e;e=null}else if(r===31){if(e=g(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rc=e,null}function Lg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ci()){case vn:return 2;case xa:return 8;case wr:case di:return 32;case ts:return 268435456;default:return 32}default:return 32}}var qf=!1,Zr=null,ei=null,ti=null,xo=new Map,wo=new Map,ni=[],f0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qg(e,t){switch(e){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":xo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function _o(e,t,r,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=vt(t),t!==null&&zg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function h0(e,t,r,l,d){switch(t){case"focusin":return Zr=_o(Zr,e,t,r,l,d),!0;case"dragenter":return ei=_o(ei,e,t,r,l,d),!0;case"mouseover":return ti=_o(ti,e,t,r,l,d),!0;case"pointerover":var h=d.pointerId;return xo.set(h,_o(xo.get(h)||null,e,t,r,l,d)),!0;case"gotpointercapture":return h=d.pointerId,wo.set(h,_o(wo.get(h)||null,e,t,r,l,d)),!0}return!1}function Bg(e){var t=ka(e.target);if(t!==null){var r=c(t);if(r!==null){if(t=r.tag,t===13){if(t=p(r),t!==null){e.blockedOn=t,yi(e.priority,function(){Ug(r)});return}}else if(t===31){if(t=g(r),t!==null){e.blockedOn=t,yi(e.priority,function(){Ug(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ic(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Uf(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Wn=l,r.target.dispatchEvent(l),Wn=null}else return t=vt(r),t!==null&&zg(t),e.blockedOn=r,!1;t.shift()}return!0}function Pg(e,t,r){ic(e)&&r.delete(t)}function m0(){qf=!1,Zr!==null&&ic(Zr)&&(Zr=null),ei!==null&&ic(ei)&&(ei=null),ti!==null&&ic(ti)&&(ti=null),xo.forEach(Pg),wo.forEach(Pg)}function sc(e,t){e.blockedOn===t&&(e.blockedOn=null,qf||(qf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,m0)))}var lc=null;function $g(e){lc!==e&&(lc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){lc===e&&(lc=null);for(var t=0;t<e.length;t+=3){var r=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Lf(l||r)===null)continue;break}var h=vt(r);h!==null&&(e.splice(t,3),t-=3,zd(h,{pending:!0,data:d,method:r.method,action:l},l,d))}}))}function Qs(e){function t(R){return sc(R,e)}Zr!==null&&sc(Zr,e),ei!==null&&sc(ei,e),ti!==null&&sc(ti,e),xo.forEach(t),wo.forEach(t);for(var r=0;r<ni.length;r++){var l=ni[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ni.length&&(r=ni[0],r.blockedOn===null);)Bg(r),r.blockedOn===null&&ni.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var d=r[l],h=r[l+1],w=d[Ht]||null;if(typeof h=="function")w||$g(r);else if(w){var E=null;if(h&&h.hasAttribute("formAction")){if(d=h,w=h[Ht]||null)E=w.formAction;else if(Lf(d)!==null)continue}else E=w.action;typeof E=="function"?r[l+1]=E:(r.splice(l,3),l-=3),$g(r)}}}function Hg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(w){return d=w})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Bf(e){this._internalRoot=e}oc.prototype.render=Bf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var r=t.current,l=Kn();Dg(r,l,e,t,null,null)},oc.prototype.unmount=Bf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dg(e.current,2,null,e,null,null),Hu(),t[kn]=null}};function oc(e){this._internalRoot=e}oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=gi();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ni.length&&t!==0&&t<ni[r].priority;r++);ni.splice(r,0,e),r===0&&Bg(e)}};var Kg=n.version;if(Kg!=="19.2.4")throw Error(s(527,Kg,"19.2.4"));xe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var p0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{wa=uc.inject(p0),on=uc}catch{}}return jo.createRoot=function(e,t){if(!o(e))throw Error(s(299));var r=!1,l="",d=Wm,h=Jm,w=Fm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(w=t.onRecoverableError)),t=Cg(e,1,!1,null,null,r,l,null,d,h,w,Hg),e[kn]=t.current,xf(e),new Bf(t)},jo.hydrateRoot=function(e,t,r){if(!o(e))throw Error(s(299));var l=!1,d="",h=Wm,w=Jm,E=Fm,R=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(R=r.formState)),t=Cg(e,1,!0,t,r??null,l,d,R,h,w,E,Hg),t.context=Rg(null),r=t.current,l=Kn(),l=Sl(l),d=$r(l),d.callback=null,Hr(r,d,l),r=l,t.current.lanes=r,Qn(t,r),za(t),e[kn]=t.current,xf(e),new oc(t)},jo.version="19.2.4",jo}var Zg;function E0(){if(Zg)return Hf.exports;Zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Hf.exports=k0(),Hf.exports}var N0=E0();const T0=jh(N0);var ey="popstate";function O0(a={}){function n(s,o){let{pathname:c,search:p,hash:g}=s.location;return oh("",{pathname:c,search:p,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(s,o){return typeof o=="string"?o:Mo(o)}return C0(n,i,null,a)}function Dt(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function sa(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function A0(){return Math.random().toString(36).substring(2,10)}function ty(a,n){return{usr:a.state,key:a.key,idx:n}}function oh(a,n,i=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof n=="string"?fl(n):n,state:i,key:n&&n.key||s||A0()}}function Mo({pathname:a="/",search:n="",hash:i=""}){return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function fl(a){let n={};if(a){let i=a.indexOf("#");i>=0&&(n.hash=a.substring(i),a=a.substring(0,i));let s=a.indexOf("?");s>=0&&(n.search=a.substring(s),a=a.substring(0,s)),a&&(n.pathname=a)}return n}function C0(a,n,i,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,p=o.history,g="POP",v=null,b=S();b==null&&(b=0,p.replaceState({...p.state,idx:b},""));function S(){return(p.state||{idx:null}).idx}function j(){g="POP";let V=S(),ae=V==null?null:V-b;b=V,v&&v({action:g,location:I.location,delta:ae})}function T(V,ae){g="PUSH";let K=oh(I.location,V,ae);b=S()+1;let Y=ty(K,b),de=I.createHref(K);try{p.pushState(Y,"",de)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;o.location.assign(de)}c&&v&&v({action:g,location:I.location,delta:1})}function A(V,ae){g="REPLACE";let K=oh(I.location,V,ae);b=S();let Y=ty(K,b),de=I.createHref(K);p.replaceState(Y,"",de),c&&v&&v({action:g,location:I.location,delta:0})}function B(V){return R0(V)}let I={get action(){return g},get location(){return a(o,p)},listen(V){if(v)throw new Error("A history only accepts one active listener");return o.addEventListener(ey,j),v=V,()=>{o.removeEventListener(ey,j),v=null}},createHref(V){return n(o,V)},createURL:B,encodeLocation(V){let ae=B(V);return{pathname:ae.pathname,search:ae.search,hash:ae.hash}},push:T,replace:A,go(V){return p.go(V)}};return I}function R0(a,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Dt(i,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:Mo(a);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Wy(a,n,i="/"){return D0(a,n,i,!1)}function D0(a,n,i,s){let o=typeof n=="string"?fl(n):n,c=yr(o.pathname||"/",i);if(c==null)return null;let p=Jy(a);M0(p);let g=null;for(let v=0;g==null&&v<p.length;++v){let b=I0(c);g=K0(p[v],b,s)}return g}function Jy(a,n=[],i=[],s="",o=!1){let c=(p,g,v=o,b)=>{let S={relativePath:b===void 0?p.path||"":b,caseSensitive:p.caseSensitive===!0,childrenIndex:g,route:p};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(s)&&v)return;Dt(S.relativePath.startsWith(s),`Absolute route path "${S.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(s.length)}let j=pr([s,S.relativePath]),T=i.concat(S);p.children&&p.children.length>0&&(Dt(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${j}".`),Jy(p.children,n,T,j,v)),!(p.path==null&&!p.index)&&n.push({path:j,score:$0(j,p.index),routesMeta:T})};return a.forEach((p,g)=>{if(p.path===""||!p.path?.includes("?"))c(p,g);else for(let v of Fy(p.path))c(p,g,!0,v)}),n}function Fy(a){let n=a.split("/");if(n.length===0)return[];let[i,...s]=n,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let p=Fy(s.join("/")),g=[];return g.push(...p.map(v=>v===""?c:[c,v].join("/"))),o&&g.push(...p),g.map(v=>a.startsWith("/")&&v===""?"/":v)}function M0(a){a.sort((n,i)=>n.score!==i.score?i.score-n.score:H0(n.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var z0=/^:[\w-]+$/,U0=3,L0=2,q0=1,B0=10,P0=-2,ny=a=>a==="*";function $0(a,n){let i=a.split("/"),s=i.length;return i.some(ny)&&(s+=P0),n&&(s+=L0),i.filter(o=>!ny(o)).reduce((o,c)=>o+(z0.test(c)?U0:c===""?q0:B0),s)}function H0(a,n){return a.length===n.length&&a.slice(0,-1).every((s,o)=>s===n[o])?a[a.length-1]-n[n.length-1]:0}function K0(a,n,i=!1){let{routesMeta:s}=a,o={},c="/",p=[];for(let g=0;g<s.length;++g){let v=s[g],b=g===s.length-1,S=c==="/"?n:n.slice(c.length)||"/",j=Nc({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},S),T=v.route;if(!j&&b&&i&&!s[s.length-1].route.index&&(j=Nc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!j)return null;Object.assign(o,j.params),p.push({params:o,pathname:pr([c,j.pathname]),pathnameBase:X0(pr([c,j.pathnameBase])),route:T}),j.pathnameBase!=="/"&&(c=pr([c,j.pathnameBase]))}return p}function Nc(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,s]=G0(a.path,a.caseSensitive,a.end),o=n.match(i);if(!o)return null;let c=o[0],p=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:s.reduce((b,{paramName:S,isOptional:j},T)=>{if(S==="*"){let B=g[T]||"";p=c.slice(0,c.length-B.length).replace(/(.)\/+$/,"$1")}const A=g[T];return j&&!A?b[S]=void 0:b[S]=(A||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:p,pattern:a}}function G0(a,n=!1,i=!0){sa(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,g,v)=>(s.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),s]}function I0(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return sa(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),a}}function yr(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,s=a.charAt(i);return s&&s!=="/"?null:a.slice(i)||"/"}var V0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Y0(a,n="/"){let{pathname:i,search:s="",hash:o=""}=typeof a=="string"?fl(a):a,c;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?c=ay(i.substring(1),"/"):c=ay(i,n)):c=n,{pathname:c,search:W0(s),hash:J0(o)}}function ay(a,n){let i=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function Vf(a,n,i,s){return`Cannot include a '${a}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q0(a){return a.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Eh(a){let n=Q0(a);return n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase)}function Nh(a,n,i,s=!1){let o;typeof a=="string"?o=fl(a):(o={...a},Dt(!o.pathname||!o.pathname.includes("?"),Vf("?","pathname","search",o)),Dt(!o.pathname||!o.pathname.includes("#"),Vf("#","pathname","hash",o)),Dt(!o.search||!o.search.includes("#"),Vf("#","search","hash",o)));let c=a===""||o.pathname==="",p=c?"/":o.pathname,g;if(p==null)g=i;else{let j=n.length-1;if(!s&&p.startsWith("..")){let T=p.split("/");for(;T[0]==="..";)T.shift(),j-=1;o.pathname=T.join("/")}g=j>=0?n[j]:"/"}let v=Y0(o,g),b=p&&p!=="/"&&p.endsWith("/"),S=(c||p===".")&&i.endsWith("/");return!v.pathname.endsWith("/")&&(b||S)&&(v.pathname+="/"),v}var pr=a=>a.join("/").replace(/\/\/+/g,"/"),X0=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),W0=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,J0=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,F0=class{constructor(a,n,i,s=!1){this.status=a,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function Z0(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function ex(a){return a.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Zy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ev(a,n){let i=a;if(typeof i!="string"||!V0.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,o=!1;if(Zy)try{let c=new URL(window.location.href),p=i.startsWith("//")?new URL(c.protocol+i):new URL(i),g=yr(p.pathname,n);p.origin===c.origin&&g!=null?i=g+p.search+p.hash:o=!0}catch{sa(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tv=["POST","PUT","PATCH","DELETE"];new Set(tv);var tx=["GET",...tv];new Set(tx);var hl=C.createContext(null);hl.displayName="DataRouter";var Mc=C.createContext(null);Mc.displayName="DataRouterState";var nx=C.createContext(!1),nv=C.createContext({isTransitioning:!1});nv.displayName="ViewTransition";var ax=C.createContext(new Map);ax.displayName="Fetchers";var rx=C.createContext(null);rx.displayName="Await";var Yn=C.createContext(null);Yn.displayName="Navigation";var Ko=C.createContext(null);Ko.displayName="Location";var la=C.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var Th=C.createContext(null);Th.displayName="RouteError";var av="REACT_ROUTER_ERROR",ix="REDIRECT",sx="ROUTE_ERROR_RESPONSE";function lx(a){if(a.startsWith(`${av}:${ix}:{`))try{let n=JSON.parse(a.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function ox(a){if(a.startsWith(`${av}:${sx}:{`))try{let n=JSON.parse(a.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new F0(n.status,n.statusText,n.data)}catch{}}function ux(a,{relative:n}={}){Dt(ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=C.useContext(Yn),{hash:o,pathname:c,search:p}=Go(a,{relative:n}),g=c;return i!=="/"&&(g=c==="/"?i:pr([i,c])),s.createHref({pathname:g,search:p,hash:o})}function ml(){return C.useContext(Ko)!=null}function ba(){return Dt(ml(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Ko).location}var rv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iv(a){C.useContext(Yn).static||C.useLayoutEffect(a)}function Zt(){let{isDataRoute:a}=C.useContext(la);return a?jx():cx()}function cx(){Dt(ml(),"useNavigate() may be used only in the context of a <Router> component.");let a=C.useContext(hl),{basename:n,navigator:i}=C.useContext(Yn),{matches:s}=C.useContext(la),{pathname:o}=ba(),c=JSON.stringify(Eh(s)),p=C.useRef(!1);return iv(()=>{p.current=!0}),C.useCallback((v,b={})=>{if(sa(p.current,rv),!p.current)return;if(typeof v=="number"){i.go(v);return}let S=Nh(v,JSON.parse(c),o,b.relative==="path");a==null&&n!=="/"&&(S.pathname=S.pathname==="/"?n:pr([n,S.pathname])),(b.replace?i.replace:i.push)(S,b.state,b)},[n,i,c,o,a])}var dx=C.createContext(null);function fx(a){let n=C.useContext(la).outlet;return C.useMemo(()=>n&&C.createElement(dx.Provider,{value:a},n),[n,a])}function Oh(){let{matches:a}=C.useContext(la),n=a[a.length-1];return n?n.params:{}}function Go(a,{relative:n}={}){let{matches:i}=C.useContext(la),{pathname:s}=ba(),o=JSON.stringify(Eh(i));return C.useMemo(()=>Nh(a,JSON.parse(o),s,n==="path"),[a,o,s,n])}function hx(a,n){return sv(a,n)}function sv(a,n,i,s,o){Dt(ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=C.useContext(Yn),{matches:p}=C.useContext(la),g=p[p.length-1],v=g?g.params:{},b=g?g.pathname:"/",S=g?g.pathnameBase:"/",j=g&&g.route;{let K=j&&j.path||"";ov(b,!j||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let T=ba(),A;if(n){let K=typeof n=="string"?fl(n):n;Dt(S==="/"||K.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${K.pathname}" was given in the \`location\` prop.`),A=K}else A=T;let B=A.pathname||"/",I=B;if(S!=="/"){let K=S.replace(/^\//,"").split("/");I="/"+B.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=Wy(a,{pathname:I});sa(j||V!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),sa(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ae=vx(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},v,K.params),pathname:pr([S,c.encodeLocation?c.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?S:pr([S,c.encodeLocation?c.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),p,i,s,o);return n&&ae?C.createElement(Ko.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},ae):ae}function mx(){let a=Sx(),n=Z0(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",a),p=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},n),i?C.createElement("pre",{style:o},i):null,p)}var px=C.createElement(mx,null),lv=class extends C.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,n){return n.location!==a.location||n.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:n.error,location:n.location,revalidation:a.revalidation||n.revalidation}}componentDidCatch(a,n){this.props.onError?this.props.onError(a,n):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const i=ox(a.digest);i&&(a=i)}let n=a!==void 0?C.createElement(la.Provider,{value:this.props.routeContext},C.createElement(Th.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?C.createElement(gx,{error:a},n):n}};lv.contextType=nx;var Yf=new WeakMap;function gx({children:a,error:n}){let{basename:i}=C.useContext(Yn);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=lx(n.digest);if(s){let o=Yf.get(n);if(o)throw o;let c=ev(s.location,i);if(Zy&&!Yf.get(n))if(c.isExternal||s.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:s.replace}));throw Yf.set(n,p),p}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return a}function yx({routeContext:a,match:n,children:i}){let s=C.useContext(hl);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(la.Provider,{value:a},i)}function vx(a,n=[],i=null,s=null,o=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let c=a,p=i?.errors;if(p!=null){let S=c.findIndex(j=>j.route.id&&p?.[j.route.id]!==void 0);Dt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),c=c.slice(0,Math.min(c.length,S+1))}let g=!1,v=-1;if(i)for(let S=0;S<c.length;S++){let j=c[S];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(v=S),j.route.id){let{loaderData:T,errors:A}=i,B=j.route.loader&&!T.hasOwnProperty(j.route.id)&&(!A||A[j.route.id]===void 0);if(j.route.lazy||B){g=!0,v>=0?c=c.slice(0,v+1):c=[c[0]];break}}}let b=i&&s?(S,j)=>{s(S,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:ex(i.matches),errorInfo:j})}:void 0;return c.reduceRight((S,j,T)=>{let A,B=!1,I=null,V=null;i&&(A=p&&j.route.id?p[j.route.id]:void 0,I=j.route.errorElement||px,g&&(v<0&&T===0?(ov("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,V=null):v===T&&(B=!0,V=j.route.hydrateFallbackElement||null)));let ae=n.concat(c.slice(0,T+1)),K=()=>{let Y;return A?Y=I:B?Y=V:j.route.Component?Y=C.createElement(j.route.Component,null):j.route.element?Y=j.route.element:Y=S,C.createElement(yx,{match:j,routeContext:{outlet:S,matches:ae,isDataRoute:i!=null},children:Y})};return i&&(j.route.ErrorBoundary||j.route.errorElement||T===0)?C.createElement(lv,{location:i.location,revalidation:i.revalidation,component:I,error:A,children:K(),routeContext:{outlet:null,matches:ae,isDataRoute:!0},onError:b}):K()},null)}function Ah(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bx(a){let n=C.useContext(hl);return Dt(n,Ah(a)),n}function xx(a){let n=C.useContext(Mc);return Dt(n,Ah(a)),n}function wx(a){let n=C.useContext(la);return Dt(n,Ah(a)),n}function Ch(a){let n=wx(a),i=n.matches[n.matches.length-1];return Dt(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function _x(){return Ch("useRouteId")}function Sx(){let a=C.useContext(Th),n=xx("useRouteError"),i=Ch("useRouteError");return a!==void 0?a:n.errors?.[i]}function jx(){let{router:a}=bx("useNavigate"),n=Ch("useNavigate"),i=C.useRef(!1);return iv(()=>{i.current=!0}),C.useCallback(async(o,c={})=>{sa(i.current,rv),i.current&&(typeof o=="number"?await a.navigate(o):await a.navigate(o,{fromRouteId:n,...c}))},[a,n])}var ry={};function ov(a,n,i){!n&&!ry[a]&&(ry[a]=!0,sa(!1,i))}C.memo(kx);function kx({routes:a,future:n,state:i,onError:s}){return sv(a,void 0,i,s,n)}function Qf({to:a,replace:n,state:i,relative:s}){Dt(ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=C.useContext(Yn);sa(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=C.useContext(la),{pathname:p}=ba(),g=Zt(),v=Nh(a,Eh(c),p,s==="path"),b=JSON.stringify(v);return C.useEffect(()=>{g(JSON.parse(b),{replace:n,state:i,relative:s})},[g,b,s,n,i]),null}function uv(a){return fx(a.context)}function qt(a){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ex({basename:a="/",children:n=null,location:i,navigationType:s="POP",navigator:o,static:c=!1,unstable_useTransitions:p}){Dt(!ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=a.replace(/^\/*/,"/"),v=C.useMemo(()=>({basename:g,navigator:o,static:c,unstable_useTransitions:p,future:{}}),[g,o,c,p]);typeof i=="string"&&(i=fl(i));let{pathname:b="/",search:S="",hash:j="",state:T=null,key:A="default"}=i,B=C.useMemo(()=>{let I=yr(b,g);return I==null?null:{location:{pathname:I,search:S,hash:j,state:T,key:A},navigationType:s}},[g,b,S,j,T,A,s]);return sa(B!=null,`<Router basename="${g}"> is not able to match the URL "${b}${S}${j}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:C.createElement(Yn.Provider,{value:v},C.createElement(Ko.Provider,{children:n,value:B}))}function Nx({children:a,location:n}){return hx(uh(a),n)}function uh(a,n=[]){let i=[];return C.Children.forEach(a,(s,o)=>{if(!C.isValidElement(s))return;let c=[...n,o];if(s.type===C.Fragment){i.push.apply(i,uh(s.props.children,c));return}Dt(s.type===qt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=uh(s.props.children,c)),i.push(p)}),i}var jc="get",kc="application/x-www-form-urlencoded";function zc(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function Tx(a){return zc(a)&&a.tagName.toLowerCase()==="button"}function Ox(a){return zc(a)&&a.tagName.toLowerCase()==="form"}function Ax(a){return zc(a)&&a.tagName.toLowerCase()==="input"}function Cx(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Rx(a,n){return a.button===0&&(!n||n==="_self")&&!Cx(a)}function ch(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((n,i)=>{let s=a[i];return n.concat(Array.isArray(s)?s.map(o=>[i,o]):[[i,s]])},[]))}function Dx(a,n){let i=ch(a);return n&&n.forEach((s,o)=>{i.has(o)||n.getAll(o).forEach(c=>{i.append(o,c)})}),i}var cc=null;function Mx(){if(cc===null)try{new FormData(document.createElement("form"),0),cc=!1}catch{cc=!0}return cc}var zx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xf(a){return a!=null&&!zx.has(a)?(sa(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kc}"`),null):a}function Ux(a,n){let i,s,o,c,p;if(Ox(a)){let g=a.getAttribute("action");s=g?yr(g,n):null,i=a.getAttribute("method")||jc,o=Xf(a.getAttribute("enctype"))||kc,c=new FormData(a)}else if(Tx(a)||Ax(a)&&(a.type==="submit"||a.type==="image")){let g=a.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=a.getAttribute("formaction")||g.getAttribute("action");if(s=v?yr(v,n):null,i=a.getAttribute("formmethod")||g.getAttribute("method")||jc,o=Xf(a.getAttribute("formenctype"))||Xf(g.getAttribute("enctype"))||kc,c=new FormData(g,a),!Mx()){let{name:b,type:S,value:j}=a;if(S==="image"){let T=b?`${b}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else b&&c.append(b,j)}}else{if(zc(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=jc,s=null,o=kc,p=a}return c&&o==="text/plain"&&(p=c,c=void 0),{action:s,method:i.toLowerCase(),encType:o,formData:c,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rh(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function Lx(a,n,i,s){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return i?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:n&&yr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function qx(a,n){if(a.id in n)return n[a.id];try{let i=await import(a.module);return n[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bx(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Px(a,n,i){let s=await Promise.all(a.map(async o=>{let c=n.routes[o.route.id];if(c){let p=await qx(c,i);return p.links?p.links():[]}return[]}));return Gx(s.flat(1).filter(Bx).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function iy(a,n,i,s,o,c){let p=(v,b)=>i[b]?v.route.id!==i[b].route.id:!0,g=(v,b)=>i[b].pathname!==v.pathname||i[b].route.path?.endsWith("*")&&i[b].params["*"]!==v.params["*"];return c==="assets"?n.filter((v,b)=>p(v,b)||g(v,b)):c==="data"?n.filter((v,b)=>{let S=s.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(p(v,b)||g(v,b))return!0;if(v.route.shouldRevalidate){let j=v.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function $x(a,n,{includeHydrateFallback:i}={}){return Hx(a.map(s=>{let o=n.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function Hx(a){return[...new Set(a)]}function Kx(a){let n={},i=Object.keys(a).sort();for(let s of i)n[s]=a[s];return n}function Gx(a,n){let i=new Set;return new Set(n),a.reduce((s,o)=>{let c=JSON.stringify(Kx(o));return i.has(c)||(i.add(c),s.push({key:c,link:o})),s},[])}function cv(){let a=C.useContext(hl);return Rh(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Ix(){let a=C.useContext(Mc);return Rh(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Dh=C.createContext(void 0);Dh.displayName="FrameworkContext";function dv(){let a=C.useContext(Dh);return Rh(a,"You must render this element inside a <HydratedRouter> element"),a}function Vx(a,n){let i=C.useContext(Dh),[s,o]=C.useState(!1),[c,p]=C.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:b,onMouseLeave:S,onTouchStart:j}=n,T=C.useRef(null);C.useEffect(()=>{if(a==="render"&&p(!0),a==="viewport"){let I=ae=>{ae.forEach(K=>{p(K.isIntersecting)})},V=new IntersectionObserver(I,{threshold:.5});return T.current&&V.observe(T.current),()=>{V.disconnect()}}},[a]),C.useEffect(()=>{if(s){let I=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(I)}}},[s]);let A=()=>{o(!0)},B=()=>{o(!1),p(!1)};return i?a!=="intent"?[c,T,{}]:[c,T,{onFocus:ko(g,A),onBlur:ko(v,B),onMouseEnter:ko(b,A),onMouseLeave:ko(S,B),onTouchStart:ko(j,A)}]:[!1,T,{}]}function ko(a,n){return i=>{a&&a(i),i.defaultPrevented||n(i)}}function Yx({page:a,...n}){let{router:i}=cv(),s=C.useMemo(()=>Wy(i.routes,a,i.basename),[i.routes,a,i.basename]);return s?C.createElement(Xx,{page:a,matches:s,...n}):null}function Qx(a){let{manifest:n,routeModules:i}=dv(),[s,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return Px(a,n,i).then(p=>{c||o(p)}),()=>{c=!0}},[a,n,i]),s}function Xx({page:a,matches:n,...i}){let s=ba(),{future:o,manifest:c,routeModules:p}=dv(),{basename:g}=cv(),{loaderData:v,matches:b}=Ix(),S=C.useMemo(()=>iy(a,n,b,c,s,"data"),[a,n,b,c,s]),j=C.useMemo(()=>iy(a,n,b,c,s,"assets"),[a,n,b,c,s]),T=C.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let I=new Set,V=!1;if(n.forEach(K=>{let Y=c.routes[K.route.id];!Y||!Y.hasLoader||(!S.some(de=>de.route.id===K.route.id)&&K.route.id in v&&p[K.route.id]?.shouldRevalidate||Y.hasClientLoader?V=!0:I.add(K.route.id))}),I.size===0)return[];let ae=Lx(a,g,o.unstable_trailingSlashAwareDataRequests,"data");return V&&I.size>0&&ae.searchParams.set("_routes",n.filter(K=>I.has(K.route.id)).map(K=>K.route.id).join(",")),[ae.pathname+ae.search]},[g,o.unstable_trailingSlashAwareDataRequests,v,s,c,S,n,a,p]),A=C.useMemo(()=>$x(j,c),[j,c]),B=Qx(j);return C.createElement(C.Fragment,null,T.map(I=>C.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...i})),A.map(I=>C.createElement("link",{key:I,rel:"modulepreload",href:I,...i})),B.map(({key:I,link:V})=>C.createElement("link",{key:I,nonce:i.nonce,...V,crossOrigin:V.crossOrigin??i.crossOrigin})))}function Wx(...a){return n=>{a.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var Jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jx&&(window.__reactRouterVersion="7.13.0")}catch{}function Fx({basename:a,children:n,unstable_useTransitions:i,window:s}){let o=C.useRef();o.current==null&&(o.current=O0({window:s,v5Compat:!0}));let c=o.current,[p,g]=C.useState({action:c.action,location:c.location}),v=C.useCallback(b=>{i===!1?g(b):C.startTransition(()=>g(b))},[i]);return C.useLayoutEffect(()=>c.listen(v),[c,v]),C.createElement(Ex,{basename:a,children:n,location:p.location,navigationType:p.action,navigator:c,unstable_useTransitions:i})}var fv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hv=C.forwardRef(function({onClick:n,discover:i="render",prefetch:s="none",relative:o,reloadDocument:c,replace:p,state:g,target:v,to:b,preventScrollReset:S,viewTransition:j,unstable_defaultShouldRevalidate:T,...A},B){let{basename:I,unstable_useTransitions:V}=C.useContext(Yn),ae=typeof b=="string"&&fv.test(b),K=ev(b,I);b=K.to;let Y=ux(b,{relative:o}),[de,Ee,ue]=Vx(s,A),te=nw(b,{replace:p,state:g,target:v,preventScrollReset:S,relative:o,viewTransition:j,unstable_defaultShouldRevalidate:T,unstable_useTransitions:V});function Ne(yt){n&&n(yt),yt.defaultPrevented||te(yt)}let Le=C.createElement("a",{...A,...ue,href:K.absoluteURL||Y,onClick:K.isExternal||c?n:Ne,ref:Wx(B,Ee),target:v,"data-discover":!ae&&i==="render"?"true":void 0});return de&&!ae?C.createElement(C.Fragment,null,Le,C.createElement(Yx,{page:Y})):Le});hv.displayName="Link";var Zx=C.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:c,to:p,viewTransition:g,children:v,...b},S){let j=Go(p,{relative:b.relative}),T=ba(),A=C.useContext(Mc),{navigator:B,basename:I}=C.useContext(Yn),V=A!=null&&ow(j)&&g===!0,ae=B.encodeLocation?B.encodeLocation(j).pathname:j.pathname,K=T.pathname,Y=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(K=K.toLowerCase(),Y=Y?Y.toLowerCase():null,ae=ae.toLowerCase()),Y&&I&&(Y=yr(Y,I)||Y);const de=ae!=="/"&&ae.endsWith("/")?ae.length-1:ae.length;let Ee=K===ae||!o&&K.startsWith(ae)&&K.charAt(de)==="/",ue=Y!=null&&(Y===ae||!o&&Y.startsWith(ae)&&Y.charAt(ae.length)==="/"),te={isActive:Ee,isPending:ue,isTransitioning:V},Ne=Ee?n:void 0,Le;typeof s=="function"?Le=s(te):Le=[s,Ee?"active":null,ue?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let yt=typeof c=="function"?c(te):c;return C.createElement(hv,{...b,"aria-current":Ne,className:Le,ref:S,style:yt,to:p,viewTransition:g},typeof v=="function"?v(te):v)});Zx.displayName="NavLink";var ew=C.forwardRef(({discover:a="render",fetcherKey:n,navigate:i,reloadDocument:s,replace:o,state:c,method:p=jc,action:g,onSubmit:v,relative:b,preventScrollReset:S,viewTransition:j,unstable_defaultShouldRevalidate:T,...A},B)=>{let{unstable_useTransitions:I}=C.useContext(Yn),V=sw(),ae=lw(g,{relative:b}),K=p.toLowerCase()==="get"?"get":"post",Y=typeof g=="string"&&fv.test(g),de=Ee=>{if(v&&v(Ee),Ee.defaultPrevented)return;Ee.preventDefault();let ue=Ee.nativeEvent.submitter,te=ue?.getAttribute("formmethod")||p,Ne=()=>V(ue||Ee.currentTarget,{fetcherKey:n,method:te,navigate:i,replace:o,state:c,relative:b,preventScrollReset:S,viewTransition:j,unstable_defaultShouldRevalidate:T});I&&i!==!1?C.startTransition(()=>Ne()):Ne()};return C.createElement("form",{ref:B,method:K,action:ae,onSubmit:s?v:de,...A,"data-discover":!Y&&a==="render"?"true":void 0})});ew.displayName="Form";function tw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mv(a){let n=C.useContext(hl);return Dt(n,tw(a)),n}function nw(a,{target:n,replace:i,state:s,preventScrollReset:o,relative:c,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v}={}){let b=Zt(),S=ba(),j=Go(a,{relative:c});return C.useCallback(T=>{if(Rx(T,n)){T.preventDefault();let A=i!==void 0?i:Mo(S)===Mo(j),B=()=>b(a,{replace:A,state:s,preventScrollReset:o,relative:c,viewTransition:p,unstable_defaultShouldRevalidate:g});v?C.startTransition(()=>B()):B()}},[S,b,j,i,s,n,a,o,c,p,g,v])}function aw(a){sa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=C.useRef(ch(a)),i=C.useRef(!1),s=ba(),o=C.useMemo(()=>Dx(s.search,i.current?null:n.current),[s.search]),c=Zt(),p=C.useCallback((g,v)=>{const b=ch(typeof g=="function"?g(new URLSearchParams(o)):g);i.current=!0,c("?"+b,v)},[c,o]);return[o,p]}var rw=0,iw=()=>`__${String(++rw)}__`;function sw(){let{router:a}=mv("useSubmit"),{basename:n}=C.useContext(Yn),i=_x(),s=a.fetch,o=a.navigate;return C.useCallback(async(c,p={})=>{let{action:g,method:v,encType:b,formData:S,body:j}=Ux(c,n);if(p.navigate===!1){let T=p.fetcherKey||iw();await s(T,i,p.action||g,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:S,body:j,formMethod:p.method||v,formEncType:p.encType||b,flushSync:p.flushSync})}else await o(p.action||g,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:S,body:j,formMethod:p.method||v,formEncType:p.encType||b,replace:p.replace,state:p.state,fromRouteId:i,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,o,n,i])}function lw(a,{relative:n}={}){let{basename:i}=C.useContext(Yn),s=C.useContext(la);Dt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Go(a||".",{relative:n})},p=ba();if(a==null){c.search=p.search;let g=new URLSearchParams(c.search),v=g.getAll("index");if(v.some(S=>S==="")){g.delete("index"),v.filter(j=>j).forEach(j=>g.append("index",j));let S=g.toString();c.search=S?`?${S}`:""}}return(!a||a===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:pr([i,c.pathname])),Mo(c)}function ow(a,{relative:n}={}){let i=C.useContext(nv);Dt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=mv("useViewTransitionState"),o=Go(a,{relative:n});if(!i.isTransitioning)return!1;let c=yr(i.currentLocation.pathname,s)||i.currentLocation.pathname,p=yr(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Nc(o.pathname,p)!=null||Nc(o.pathname,c)!=null}function Uc(a,n){var i={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(i[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(a);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(a,s[o])&&(i[s[o]]=a[s[o]]);return i}function uw(a,n,i,s){function o(c){return c instanceof i?c:new i(function(p){p(c)})}return new(i||(i=Promise))(function(c,p){function g(S){try{b(s.next(S))}catch(j){p(j)}}function v(S){try{b(s.throw(S))}catch(j){p(j)}}function b(S){S.done?c(S.value):o(S.value).then(g,v)}b((s=s.apply(a,n||[])).next())})}const cw=a=>a?(...n)=>a(...n):(...n)=>fetch(...n);class Mh extends Error{constructor(n,i="FunctionsError",s){super(n),this.name=i,this.context=s}}class dw extends Mh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class sy extends Mh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class ly extends Mh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var dh;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(dh||(dh={}));class fw{constructor(n,{headers:i={},customFetch:s,region:o=dh.Any}={}){this.url=n,this.headers=i,this.region=o,this.fetch=cw(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return uw(this,arguments,void 0,function*(i,s={}){var o;let c,p;try{const{headers:g,method:v,body:b,signal:S,timeout:j}=s;let T={},{region:A}=s;A||(A=this.region);const B=new URL(`${this.url}/${i}`);A&&A!=="any"&&(T["x-region"]=A,B.searchParams.set("forceFunctionRegion",A));let I;b&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",I=b):typeof b=="string"?(T["Content-Type"]="text/plain",I=b):typeof FormData<"u"&&b instanceof FormData?I=b:(T["Content-Type"]="application/json",I=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?I=JSON.stringify(b):I=b;let V=S;j&&(p=new AbortController,c=setTimeout(()=>p.abort(),j),S?(V=p.signal,S.addEventListener("abort",()=>p.abort())):V=p.signal);const ae=yield this.fetch(B.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),g),body:I,signal:V}).catch(Ee=>{throw new dw(Ee)}),K=ae.headers.get("x-relay-error");if(K&&K==="true")throw new sy(ae);if(!ae.ok)throw new ly(ae);let Y=((o=ae.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),de;return Y==="application/json"?de=yield ae.json():Y==="application/octet-stream"||Y==="application/pdf"?de=yield ae.blob():Y==="text/event-stream"?de=ae:Y==="multipart/form-data"?de=yield ae.formData():de=yield ae.text(),{data:de,error:null,response:ae}}catch(g){return{data:null,error:g,response:g instanceof ly||g instanceof sy?g.context:void 0}}finally{c&&clearTimeout(c)}})}}var hw=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},mw=class{constructor(a){var n,i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(n=a.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=a.signal,this.isMaybeSingle=(i=a.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(s=a.urlLengthLimit)!==null&&s!==void 0?s:8e3,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,n){return this.headers=new Headers(this.headers),this.headers.set(a,n),this}then(a,n){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let p=null,g=null,v=null,b=c.status,S=c.statusText;if(c.ok){var j,T;if(i.method!=="HEAD"){var A;const ae=await c.text();ae===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((A=i.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?g=ae:g=JSON.parse(ae))}const I=(j=i.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),V=(T=c.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");I&&V&&V.length>1&&(v=parseInt(V[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,b=406,S="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var B;const I=await c.text();try{p=JSON.parse(I),Array.isArray(p)&&c.status===404&&(g=[],p=null,b=200,S="OK")}catch{c.status===404&&I===""?(b=204,S="No Content"):p={message:I}}if(p&&i.isMaybeSingle&&(!(p==null||(B=p.details)===null||B===void 0)&&B.includes("0 rows"))&&(p=null,b=200,S="OK"),p&&i.shouldThrowOnError)throw new hw(p)}return{error:p,data:g,count:v,status:b,statusText:S}});return this.shouldThrowOnError||(o=o.catch(c=>{var p;let g="",v="",b="";const S=c?.cause;if(S){var j,T,A,B;const ae=(j=S?.message)!==null&&j!==void 0?j:"",K=(T=S?.code)!==null&&T!==void 0?T:"";g=`${(A=c?.name)!==null&&A!==void 0?A:"FetchError"}: ${c?.message}`,g+=`

Caused by: ${(B=S?.name)!==null&&B!==void 0?B:"Error"}: ${ae}`,K&&(g+=` (${K})`),S?.stack&&(g+=`
${S.stack}`)}else{var I;g=(I=c?.stack)!==null&&I!==void 0?I:""}const V=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(b="",v="Request was aborted (timeout or manual cancellation)",V>this.urlLengthLimit&&(v+=`. Note: Your request URL is ${V} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(S?.name==="HeadersOverflowError"||S?.code==="UND_ERR_HEADERS_OVERFLOW")&&(b="",v="HTTP headers exceeded server limits (typically 16KB)",V>this.urlLengthLimit&&(v+=`. Your request URL is ${V} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(p=c?.name)!==null&&p!==void 0?p:"FetchError"}: ${c?.message}`,details:g,hint:v,code:b},data:null,count:null,status:0,statusText:""}})),o.then(a,n)}returns(){return this}overrideTypes(){return this}},pw=class extends mw{select(a){let n=!1;const i=(a??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:n=!0,nullsFirst:i,foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.order`:"order",p=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${p?`${p},`:""}${a}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${a}`),this}range(a,n,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(c,`${n-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:n=!1,settings:i=!1,buffers:s=!1,wal:o=!1,format:c="text"}={}){var p;const g=[a?"analyze":null,n?"verbose":null,i?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${v}"; options=${g};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const oy=new RegExp("[,()]");var al=class extends pw{eq(a,n){return this.url.searchParams.append(a,`eq.${n}`),this}neq(a,n){return this.url.searchParams.append(a,`neq.${n}`),this}gt(a,n){return this.url.searchParams.append(a,`gt.${n}`),this}gte(a,n){return this.url.searchParams.append(a,`gte.${n}`),this}lt(a,n){return this.url.searchParams.append(a,`lt.${n}`),this}lte(a,n){return this.url.searchParams.append(a,`lte.${n}`),this}like(a,n){return this.url.searchParams.append(a,`like.${n}`),this}likeAllOf(a,n){return this.url.searchParams.append(a,`like(all).{${n.join(",")}}`),this}likeAnyOf(a,n){return this.url.searchParams.append(a,`like(any).{${n.join(",")}}`),this}ilike(a,n){return this.url.searchParams.append(a,`ilike.${n}`),this}ilikeAllOf(a,n){return this.url.searchParams.append(a,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(a,n){return this.url.searchParams.append(a,`ilike(any).{${n.join(",")}}`),this}regexMatch(a,n){return this.url.searchParams.append(a,`match.${n}`),this}regexIMatch(a,n){return this.url.searchParams.append(a,`imatch.${n}`),this}is(a,n){return this.url.searchParams.append(a,`is.${n}`),this}isDistinct(a,n){return this.url.searchParams.append(a,`isdistinct.${n}`),this}in(a,n){const i=Array.from(new Set(n)).map(s=>typeof s=="string"&&oy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`in.(${i})`),this}notIn(a,n){const i=Array.from(new Set(n)).map(s=>typeof s=="string"&&oy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`not.in.(${i})`),this}contains(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cs.{${n.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(n)}`),this}containedBy(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cd.{${n.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(n)}`),this}rangeGt(a,n){return this.url.searchParams.append(a,`sr.${n}`),this}rangeGte(a,n){return this.url.searchParams.append(a,`nxl.${n}`),this}rangeLt(a,n){return this.url.searchParams.append(a,`sl.${n}`),this}rangeLte(a,n){return this.url.searchParams.append(a,`nxr.${n}`),this}rangeAdjacent(a,n){return this.url.searchParams.append(a,`adj.${n}`),this}overlaps(a,n){return typeof n=="string"?this.url.searchParams.append(a,`ov.${n}`):this.url.searchParams.append(a,`ov.{${n.join(",")}}`),this}textSearch(a,n,{config:i,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(a,`${o}fts${c}.${n}`),this}match(a){return Object.entries(a).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(a,n,i){return this.url.searchParams.append(a,`not.${n}.${i}`),this}or(a,{foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${a})`),this}filter(a,n,i){return this.url.searchParams.append(a,`${n}.${i}`),this}},gw=class{constructor(a,{headers:n={},schema:i,fetch:s,urlLengthLimit:o=8e3}){this.url=a,this.headers=new Headers(n),this.schema=i,this.fetch=s,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,n){const{head:i=!1,count:s}=n??{},o=i?"HEAD":"GET";let c=!1;const p=(a??"*").split("").map(b=>/\s/.test(b)&&!c?"":(b==='"'&&(c=!c),b)).join(""),{url:g,headers:v}=this.cloneRequestState();return g.searchParams.set("select",p),s&&v.append("Prefer",`count=${s}`),new al({method:o,url:g,headers:v,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(a,{count:n,defaultToNull:i=!0}={}){var s;const o="POST",{url:c,headers:p}=this.cloneRequestState();if(n&&p.append("Prefer",`count=${n}`),i||p.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(g.length>0){const v=[...new Set(g)].map(b=>`"${b}"`);c.searchParams.set("columns",v.join(","))}}return new al({method:o,url:c,headers:p,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(a,{onConflict:n,ignoreDuplicates:i=!1,count:s,defaultToNull:o=!0}={}){var c;const p="POST",{url:g,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),n!==void 0&&g.searchParams.set("on_conflict",n),s&&v.append("Prefer",`count=${s}`),o||v.append("Prefer","missing=default"),Array.isArray(a)){const b=a.reduce((S,j)=>S.concat(Object.keys(j)),[]);if(b.length>0){const S=[...new Set(b)].map(j=>`"${j}"`);g.searchParams.set("columns",S.join(","))}}return new al({method:p,url:g,headers:v,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(a,{count:n}={}){var i;const s="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new al({method:s,url:o,headers:c,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:a}={}){var n;const i="DELETE",{url:s,headers:o}=this.cloneRequestState();return a&&o.append("Prefer",`count=${a}`),new al({method:i,url:s,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function zo(a){"@babel/helpers - typeof";return zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zo(a)}function yw(a,n){if(zo(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var s=i.call(a,n);if(zo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function vw(a){var n=yw(a,"string");return zo(n)=="symbol"?n:n+""}function bw(a,n,i){return(n=vw(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}function uy(a,n){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,s)}return i}function dc(a){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?uy(Object(i),!0).forEach(function(s){bw(a,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):uy(Object(i)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(i,s))})}return a}var xw=class pv{constructor(n,{headers:i={},schema:s,fetch:o,timeout:c,urlLengthLimit:p=8e3}={}){this.url=n,this.headers=new Headers(i),this.schemaName=s,this.urlLengthLimit=p;const g=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(v,b)=>{const S=new AbortController,j=setTimeout(()=>S.abort(),c),T=b?.signal;if(T){if(T.aborted)return clearTimeout(j),g(v,b);const A=()=>{clearTimeout(j),S.abort()};return T.addEventListener("abort",A,{once:!0}),g(v,dc(dc({},b),{},{signal:S.signal})).finally(()=>{clearTimeout(j),T.removeEventListener("abort",A)})}return g(v,dc(dc({},b),{},{signal:S.signal})).finally(()=>clearTimeout(j))}:this.fetch=g}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new gw(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new pv(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,i={},{head:s=!1,get:o=!1,count:c}={}){var p;let g;const v=new URL(`${this.url}/rpc/${n}`);let b;const S=A=>A!==null&&typeof A=="object"&&(!Array.isArray(A)||A.some(S)),j=s&&Object.values(i).some(S);j?(g="POST",b=i):s||o?(g=s?"HEAD":"GET",Object.entries(i).filter(([A,B])=>B!==void 0).map(([A,B])=>[A,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([A,B])=>{v.searchParams.append(A,B)})):(g="POST",b=i);const T=new Headers(this.headers);return j?T.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&T.set("Prefer",`count=${c}`),new al({method:g,url:v,headers:T,schema:this.schemaName,body:b,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch,urlLengthLimit:this.urlLengthLimit})}};class ww{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const s=i.versions;if(s&&s.node){const o=s.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let i=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(i+=`

Suggested solution: ${n.workaround}`),new Error(i)}static createWebSocket(n,i){const s=this.getWebSocketConstructor();return new s(n,i)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const _w="2.95.3",Sw=`realtime-js/${_w}`,jw="1.0.0",gv="2.0.0",cy=gv,fh=1e4,kw=1e3,Ew=100;var ii;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(ii||(ii={}));var nn;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(nn||(nn={}));var va;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(va||(va={}));var hh;(function(a){a.websocket="websocket"})(hh||(hh={}));var Yi;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Yi||(Yi={}));class Nw{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,i){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var i;return this._isArrayBuffer((i=n.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var i,s;const o=(s=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var i,s;const o=(s=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},p=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,p)}_encodeUserBroadcastPush(n,i,s){var o,c;const p=n.topic,g=(o=n.ref)!==null&&o!==void 0?o:"",v=(c=n.join_ref)!==null&&c!==void 0?c:"",b=n.payload.event,S=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},j=Object.keys(S).length===0?"":JSON.stringify(S);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`topic length ${p.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`metadata length ${j.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+g.length+p.length+b.length+j.length,A=new ArrayBuffer(this.HEADER_LENGTH+T);let B=new DataView(A),I=0;B.setUint8(I++,this.KINDS.userBroadcastPush),B.setUint8(I++,v.length),B.setUint8(I++,g.length),B.setUint8(I++,p.length),B.setUint8(I++,b.length),B.setUint8(I++,j.length),B.setUint8(I++,i),Array.from(v,ae=>B.setUint8(I++,ae.charCodeAt(0))),Array.from(g,ae=>B.setUint8(I++,ae.charCodeAt(0))),Array.from(p,ae=>B.setUint8(I++,ae.charCodeAt(0))),Array.from(b,ae=>B.setUint8(I++,ae.charCodeAt(0))),Array.from(j,ae=>B.setUint8(I++,ae.charCodeAt(0)));var V=new Uint8Array(A.byteLength+s.byteLength);return V.set(new Uint8Array(A),0),V.set(new Uint8Array(s),A.byteLength),V.buffer}decode(n,i){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return i(s)}if(typeof n=="string"){const s=JSON.parse(n),[o,c,p,g,v]=s;return i({join_ref:o,ref:c,topic:p,event:g,payload:v})}return i({})}_binaryDecode(n){const i=new DataView(n),s=i.getUint8(0),o=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,i,o)}_decodeUserBroadcast(n,i,s){const o=i.getUint8(1),c=i.getUint8(2),p=i.getUint8(3),g=i.getUint8(4);let v=this.HEADER_LENGTH+4;const b=s.decode(n.slice(v,v+o));v=v+o;const S=s.decode(n.slice(v,v+c));v=v+c;const j=s.decode(n.slice(v,v+p));v=v+p;const T=n.slice(v,n.byteLength),A=g===this.JSON_ENCODING?JSON.parse(s.decode(T)):T,B={type:this.BROADCAST_EVENT,event:S,payload:A};return p>0&&(B.meta=JSON.parse(j)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:B}}_isArrayBuffer(n){var i;return n instanceof ArrayBuffer||((i=n?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(n,i){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>i.includes(s)))}}let yv=class{constructor(n,i){this.callback=n,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Et;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Et||(Et={}));const dy=(a,n,i={})=>{var s;const o=(s=i.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((c,p)=>(c[p]=Tw(p,a,n,o),c),{}):{}},Tw=(a,n,i,s)=>{const o=n.find(g=>g.name===a),c=o?.type,p=i[a];return c&&!s.includes(c)?vv(c,p):mh(p)},vv=(a,n)=>{if(a.charAt(0)==="_"){const i=a.slice(1,a.length);return Rw(n,i)}switch(a){case Et.bool:return Ow(n);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return Aw(n);case Et.json:case Et.jsonb:return Cw(n);case Et.timestamp:return Dw(n);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return mh(n);default:return mh(n)}},mh=a=>a,Ow=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Aw=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},Cw=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},Rw=(a,n)=>{if(typeof a!="string")return a;const i=a.length-1,s=a[i];if(a[0]==="{"&&s==="}"){let c;const p=a.slice(1,i);try{c=JSON.parse("["+p+"]")}catch{c=p?p.split(","):[]}return c.map(g=>vv(n,g))}return a},Dw=a=>typeof a=="string"?a.replace(" ","T"):a,bv=a=>{const n=new URL(a);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Wf{constructor(n,i,s={},o=fh){this.channel=n,this.event=i,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,i){var s;return this._hasReceived(n)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:i}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(i))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var fy;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(fy||(fy={}));class Ro{constructor(n,i){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:p,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ro.syncState(this.state,o,c,p),this.pendingDiffs.forEach(v=>{this.state=Ro.syncDiff(this.state,v,c,p)}),this.pendingDiffs=[],g()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:p,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ro.syncDiff(this.state,o,c,p),g())}),this.onJoin((o,c,p)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:p})}),this.onLeave((o,c,p)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:p})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,i,s,o){const c=this.cloneDeep(n),p=this.transformState(i),g={},v={};return this.map(c,(b,S)=>{p[b]||(v[b]=S)}),this.map(p,(b,S)=>{const j=c[b];if(j){const T=S.map(V=>V.presence_ref),A=j.map(V=>V.presence_ref),B=S.filter(V=>A.indexOf(V.presence_ref)<0),I=j.filter(V=>T.indexOf(V.presence_ref)<0);B.length>0&&(g[b]=B),I.length>0&&(v[b]=I)}else g[b]=S}),this.syncDiff(c,{joins:g,leaves:v},s,o)}static syncDiff(n,i,s,o){const{joins:c,leaves:p}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(g,v)=>{var b;const S=(b=n[g])!==null&&b!==void 0?b:[];if(n[g]=this.cloneDeep(v),S.length>0){const j=n[g].map(A=>A.presence_ref),T=S.filter(A=>j.indexOf(A.presence_ref)<0);n[g].unshift(...T)}s(g,S,v)}),this.map(p,(g,v)=>{let b=n[g];if(!b)return;const S=v.map(j=>j.presence_ref);b=b.filter(j=>S.indexOf(j.presence_ref)<0),n[g]=b,o(g,b,v),b.length===0&&delete n[g]}),n}static map(n,i){return Object.getOwnPropertyNames(n).map(s=>i(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((i,s)=>{const o=n[s];return"metas"in o?i[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):i[s]=o,i},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hy;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(hy||(hy={}));var Do;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Do||(Do={}));var mr;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class sl{constructor(n,i={config:{}},s){var o,c;if(this.topic=n,this.params=i,this.socket=s,this.bindings={},this.state=nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Wf(this,va.join,this.params,this.timeout),this.rejoinTimer=new yv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(p=>p.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nn.closed,this.socket._remove(this)}),this._onError(p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(va.reply,{},(p,g)=>{this._trigger(this._replyEventName(g),p)}),this.presence=new Ro(this),this.broadcastEndpointURL=bv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,i=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==nn.closed){const{config:{broadcast:p,presence:g,private:v}}=this.params,b=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(A=>A.filter))!==null&&o!==void 0?o:[],S=!!this.bindings[Do.PRESENCE]&&this.bindings[Do.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,j={},T={broadcast:p,presence:Object.assign(Object.assign({},g),{enabled:S}),postgres_changes:b,private:v};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(A=>n?.(mr.CHANNEL_ERROR,A)),this._onClose(()=>n?.(mr.CLOSED)),this.updateJoinPayload(Object.assign({config:T},j)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:A})=>{var B;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){n?.(mr.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,V=(B=I?.length)!==null&&B!==void 0?B:0,ae=[];for(let K=0;K<V;K++){const Y=I[K],{filter:{event:de,schema:Ee,table:ue,filter:te}}=Y,Ne=A&&A[K];if(Ne&&Ne.event===de&&sl.isFilterValueEqual(Ne.schema,Ee)&&sl.isFilterValueEqual(Ne.table,ue)&&sl.isFilterValueEqual(Ne.filter,te))ae.push(Object.assign(Object.assign({},Y),{id:Ne.id}));else{this.unsubscribe(),this.state=nn.errored,n?.(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ae,n&&n(mr.SUBSCRIBED);return}}).receive("error",A=>{this.state=nn.errored,n?.(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{n?.(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,i={}){return await this.send({type:"presence",event:"track",payload:n},i.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,i,s){return this.state===nn.joined&&n===Do.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,i,s)}async httpSend(n,i,s={}){var o;if(i==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(g.status===202)return{success:!0};let v=g.statusText;try{const b=await g.json();v=b.error||b.message||v}catch{}return Promise.reject(new Error(v))}async send(n,i={}){var s,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:p}=n,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:p,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=b.body)===null||o===void 0?void 0:o.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var p,g,v;const b=this._push(n.type,n,i.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(g=(p=this.params)===null||p===void 0?void 0:p.config)===null||g===void 0?void 0:g.broadcast)===null||v===void 0)&&v.ack)&&c("ok"),b.receive("ok",()=>c("ok")),b.receive("error",()=>c("error")),b.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=nn.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(va.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Wf(this,va.leave,{},n),s.receive("ok",()=>{i(),o("ok")}).receive("timeout",()=>{i(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nn.closed,this.bindings={}}async _fetchWithTimeout(n,i,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),p=await this.socket.fetch(n,Object.assign(Object.assign({},i),{signal:o.signal}));return clearTimeout(c),p}_push(n,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Wf(this,n,i,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ew){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(n,i,s){return i}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,i,s){var o,c;const p=n.toLocaleLowerCase(),{close:g,error:v,leave:b,join:S}=va;if(s&&[g,v,b,S].indexOf(p)>=0&&s!==this._joinRef())return;let T=this._onMessage(p,i,s);if(i&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(p)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var B,I,V;return((B=A.filter)===null||B===void 0?void 0:B.event)==="*"||((V=(I=A.filter)===null||I===void 0?void 0:I.event)===null||V===void 0?void 0:V.toLocaleLowerCase())===p}).map(A=>A.callback(T,s)):(c=this.bindings[p])===null||c===void 0||c.filter(A=>{var B,I,V,ae,K,Y;if(["broadcast","presence","postgres_changes"].includes(p))if("id"in A){const de=A.id,Ee=(B=A.filter)===null||B===void 0?void 0:B.event;return de&&((I=i.ids)===null||I===void 0?void 0:I.includes(de))&&(Ee==="*"||Ee?.toLocaleLowerCase()===((V=i.data)===null||V===void 0?void 0:V.type.toLocaleLowerCase()))}else{const de=(K=(ae=A?.filter)===null||ae===void 0?void 0:ae.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return de==="*"||de===((Y=i?.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===p}).map(A=>{if(typeof T=="object"&&"ids"in T){const B=T.data,{schema:I,table:V,commit_timestamp:ae,type:K,errors:Y}=B;T=Object.assign(Object.assign({},{schema:I,table:V,commit_timestamp:ae,eventType:K,new:{},old:{},errors:Y}),this._getPayloadRecords(B))}A.callback(T,s)})}_isClosed(){return this.state===nn.closed}_isJoined(){return this.state===nn.joined}_isJoining(){return this.state===nn.joining}_isLeaving(){return this.state===nn.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,i,s){const o=n.toLocaleLowerCase(),c={type:o,filter:i,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,i){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&sl.isEqual(o.filter,i))})),this}static isEqual(n,i){if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const s in n)if(n[s]!==i[s])return!1;return!0}static isFilterValueEqual(n,i){return(n??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(va.close,{},n)}_onError(n){this._on(va.error,{},i=>n(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nn.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const i={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(i.new=dy(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(i.old=dy(n.columns,n.old_record)),i}}const Jf=()=>{},fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Mw=[1e3,2e3,5e3,1e4],zw=1e4,Uw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lw{constructor(n,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jf,this.ref=0,this.reconnectTimer=null,this.vsn=cy,this.logger=Jf,this.conn=null,this.sendBuffer=[],this.serializer=new Nw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((s=i?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${n}/${hh.websocket}`,this.httpEndpoint=bv(n),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ww.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const i=n.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const i=await n.unsubscribe();return i==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const n=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,i,s){this.logger(n,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ii.connecting:return Yi.Connecting;case ii.open:return Yi.Open;case ii.closing:return Yi.Closing;default:return Yi.Closed}}isConnected(){return this.connectionState()===Yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,i={config:{}}){const s=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new sl(`realtime:${n}`,i,this);return this.channels.push(c),c}}push(n){const{topic:i,event:s,payload:o,ref:c}=n,p=()=>{this.encode(n,g=>{var v;(v=this.conn)===null||v===void 0||v.send(g)})};this.log("push",`${i} ${s} (${c})`,o),this.isConnected()?p():this.sendBuffer.push(p)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(kw,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let i=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${n}"`),i.unsubscribe())}_remove(n){this.channels=this.channels.filter(i=>i.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",b)}catch(S){this.log("error","error in heartbeat callback",S)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:o,payload:c,ref:p}=i,g=p?`(${p})`:"",v=c.status||"";this.log("receive",`${v} ${s} ${o} ${g}`.trim(),c),this.channels.filter(b=>b._isMember(s)).forEach(b=>b._trigger(o,c,p)),this._triggerStateCallbacks("message",i)})}_clearTimer(n){var i;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===ii.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ii.open||this.conn.readyState===ii.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var i;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(va.error))}_appendParams(n,i){if(Object.keys(i).length===0)return n;const s=n.match(/\?/)?"&":"?",o=new URLSearchParams(i);return`${n}${s}${o}`}_workerObjectUrl(n){let i;if(n)i=n;else{const s=new Blob([Uw],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(n,i=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(n=null){let i,s=!1;if(n)i=n,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const c={access_token:i,version:Sw};i&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(va.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${n}`,i)})}_triggerStateCallbacks(n,i){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(i)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new yv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var i,s,o,c,p,g,v,b,S,j,T,A;switch(this.transport=(i=n?.transport)!==null&&i!==void 0?i:null,this.timeout=(s=n?.timeout)!==null&&s!==void 0?s:fh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:fc.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(p=n?.accessToken)!==null&&p!==void 0?p:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:Jf,this.vsn=(v=n?.vsn)!==null&&v!==void 0?v:cy,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=n?.reconnectAfterMs)!==null&&b!==void 0?b:(B=>Mw[B-1]||zw),this.vsn){case jw:this.encode=(S=n?.encode)!==null&&S!==void 0?S:((B,I)=>I(JSON.stringify(B))),this.decode=(j=n?.decode)!==null&&j!==void 0?j:((B,I)=>I(JSON.parse(B)));break;case gv:this.encode=(T=n?.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(A=n?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Uo=class extends Error{constructor(a,n){super(a),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function qw(a,n,i){const s=new URL(n,a);if(i)for(const[o,c]of Object.entries(i))c!==void 0&&s.searchParams.set(o,c);return s.toString()}async function Bw(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function Pw(a){const n=a.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:o,body:c,headers:p}){const g=qw(a.baseUrl,s,o),v=await Bw(a.auth),b=await n(g,{method:i,headers:{...c?{"Content-Type":"application/json"}:{},...v,...p},body:c?JSON.stringify(c):void 0}),S=await b.text(),j=(b.headers.get("content-type")||"").includes("application/json"),T=j&&S?JSON.parse(S):S;if(!b.ok){const A=j?T:void 0,B=A?.error;throw new Uo(B?.message??`Request failed with status ${b.status}`,{status:b.status,icebergType:B?.type,icebergCode:B?.code,details:A})}return{status:b.status,headers:b.headers,data:T}}}}function hc(a){return a.join("")}var $w=class{constructor(a,n=""){this.client=a,this.prefix=n}async listNamespaces(a){const n=a?{parent:hc(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(a,n){const i={namespace:a.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hc(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hc(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hc(a.namespace)}`}),!0}catch(n){if(n instanceof Uo&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(a,n){try{return await this.createNamespace(a,n)}catch(i){if(i instanceof Uo&&i.status===409)return;throw i}}};function Xs(a){return a.join("")}var Hw=class{constructor(a,n="",i){this.client=a,this.prefix=n,this.accessDelegation=i}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xs(a.namespace)}/tables`})).data.identifiers}async createTable(a,n){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xs(a.namespace)}/tables`,body:n,headers:i})).data.metadata}async updateTable(a,n){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Xs(a.namespace)}/tables/${a.name}`,body:n});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(a,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xs(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xs(a.namespace)}/tables/${a.name}`,headers:n})).data.metadata}async tableExists(a){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xs(a.namespace)}/tables/${a.name}`,headers:n}),!0}catch(i){if(i instanceof Uo&&i.status===404)return!1;throw i}}async createTableIfNotExists(a,n){try{return await this.createTable(a,n)}catch(i){if(i instanceof Uo&&i.status===409)return await this.loadTable({namespace:a.namespace,name:n.name});throw i}}},Kw=class{constructor(a){let n="v1";a.catalogName&&(n+=`/${a.catalogName}`);const i=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=Pw({baseUrl:i,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new $w(this.client,n),this.tableOps=new Hw(this.client,n,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,n){return this.namespaceOps.createNamespace(a,n)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,n){return this.tableOps.createTable(a,n)}async updateTable(a,n){return this.tableOps.updateTable(a,n)}async dropTable(a,n){await this.tableOps.dropTable(a,n)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,n){return this.namespaceOps.createNamespaceIfNotExists(a,n)}async createTableIfNotExists(a,n){return this.tableOps.createTableIfNotExists(a,n)}},Lc=class extends Error{constructor(a,n="storage",i,s){super(a),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=s}};function qc(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var mc=class extends Lc{constructor(a,n,i,s="storage"){super(a,s,n,i),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xv=class extends Lc{constructor(a,n,i="storage"){super(a,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const Gw=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),Iw=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},ph=a=>{if(Array.isArray(a))return a.map(i=>ph(i));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([i,s])=>{const o=i.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=ph(s)}),n},Vw=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function Lo(a){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lo(a)}function Yw(a,n){if(Lo(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var s=i.call(a,n);if(Lo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Qw(a){var n=Yw(a,"string");return Lo(n)=="symbol"?n:n+""}function Xw(a,n,i){return(n=Qw(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}function my(a,n){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,s)}return i}function Pe(a){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?my(Object(i),!0).forEach(function(s){Xw(a,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):my(Object(i)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(i,s))})}return a}const py=a=>{var n;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(n=a.error)===null||n===void 0?void 0:n.message)||JSON.stringify(a)},Ww=async(a,n,i,s)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!i?.noResolveJson){const o=a,c=o.status||500;if(typeof o.json=="function")o.json().then(p=>{const g=p?.statusCode||p?.code||c+"";n(new mc(py(p),c,g,s))}).catch(()=>{if(s==="vectors"){const p=c+"";n(new mc(o.statusText||`HTTP ${c} error`,c,p,s))}else{const p=c+"";n(new mc(o.statusText||`HTTP ${c} error`,c,p,s))}});else{const p=c+"";n(new mc(o.statusText||`HTTP ${c} error`,c,p,s))}}else n(new xv(py(a),a,s))},Jw=(a,n,i,s)=>{const o={method:a,headers:n?.headers||{}};return a==="GET"||a==="HEAD"||!s?Pe(Pe({},o),i):(Iw(s)?(o.headers=Pe({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,n?.duplex&&(o.duplex=n.duplex),Pe(Pe({},o),i))};async function Eo(a,n,i,s,o,c,p){return new Promise((g,v)=>{a(i,Jw(n,s,o,c)).then(b=>{if(!b.ok)throw b;if(s?.noResolveJson)return b;if(p==="vectors"){const S=b.headers.get("content-type");if(b.headers.get("content-length")==="0"||b.status===204)return{};if(!S||!S.includes("application/json"))return{}}return b.json()}).then(b=>g(b)).catch(b=>Ww(b,v,s,p))})}function wv(a="storage"){return{get:async(n,i,s,o)=>Eo(n,"GET",i,s,o,void 0,a),post:async(n,i,s,o,c)=>Eo(n,"POST",i,o,c,s,a),put:async(n,i,s,o,c)=>Eo(n,"PUT",i,o,c,s,a),head:async(n,i,s,o)=>Eo(n,"HEAD",i,Pe(Pe({},s),{},{noResolveJson:!0}),o,void 0,a),remove:async(n,i,s,o,c)=>Eo(n,"DELETE",i,o,c,s,a)}}const Fw=wv("storage"),{get:qo,post:ya,put:gh,head:Zw,remove:zh}=Fw,In=wv("vectors");var pl=class{constructor(a,n={},i,s="storage"){this.shouldThrowOnError=!1,this.url=a,this.headers=n,this.fetch=Gw(i),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(a){var n=this;try{return{data:await a(),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(qc(i))return{data:null,error:i};throw i}}},e_=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n}then(a,n){return this.execute().then(a,n)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(qc(n))return{data:null,error:n};throw n}}};let _v;_v=Symbol.toStringTag;var t_=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n,this[_v]="BlobDownloadBuilder",this.promise=null}asStream(){return new e_(this.downloadFn,this.shouldThrowOnError)}then(a,n){return this.getPromise().then(a,n)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(qc(n))return{data:null,error:n};throw n}}};const n_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var a_=class extends pl{constructor(a,n={},i,s){super(a,n,s,"storage"),this.bucketId=i}async uploadOrUpdate(a,n,i,s){var o=this;return o.handleOperation(async()=>{let c;const p=Pe(Pe({},gy),s);let g=Pe(Pe({},o.headers),a==="POST"&&{"x-upsert":String(p.upsert)});const v=p.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",p.cacheControl),v&&c.append("metadata",o.encodeMetadata(v)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.has("cacheControl")||c.append("cacheControl",p.cacheControl),v&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(v))):(c=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType,v&&(g["x-metadata"]=o.toBase64(o.encodeMetadata(v))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!p.duplex&&(p.duplex="half")),s?.headers&&(g=Pe(Pe({},g),s.headers));const b=o._removeEmptyFolders(n),S=o._getFinalPath(b),j=await(a=="PUT"?gh:ya)(o.fetch,`${o.url}/object/${S}`,c,Pe({headers:g},p?.duplex?{duplex:p.duplex}:{}));return{path:b,id:j.Id,fullPath:j.Key}})}async upload(a,n,i){return this.uploadOrUpdate("POST",a,n,i)}async uploadToSignedUrl(a,n,i,s){var o=this;const c=o._removeEmptyFolders(a),p=o._getFinalPath(c),g=new URL(o.url+`/object/upload/sign/${p}`);return g.searchParams.set("token",n),o.handleOperation(async()=>{let v;const b=Pe({upsert:gy.upsert},s),S=Pe(Pe({},o.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&i instanceof Blob?(v=new FormData,v.append("cacheControl",b.cacheControl),v.append("",i)):typeof FormData<"u"&&i instanceof FormData?(v=i,v.append("cacheControl",b.cacheControl)):(v=i,S["cache-control"]=`max-age=${b.cacheControl}`,S["content-type"]=b.contentType),{path:c,fullPath:(await gh(o.fetch,g.toString(),v,{headers:S})).Key}})}async createSignedUploadUrl(a,n){var i=this;return i.handleOperation(async()=>{let s=i._getFinalPath(a);const o=Pe({},i.headers);n?.upsert&&(o["x-upsert"]="true");const c=await ya(i.fetch,`${i.url}/object/upload/sign/${s}`,{},{headers:o}),p=new URL(i.url+c.url),g=p.searchParams.get("token");if(!g)throw new Lc("No token returned by API");return{signedUrl:p.toString(),path:a,token:g}})}async update(a,n,i){return this.uploadOrUpdate("PUT",a,n,i)}async move(a,n,i){var s=this;return s.handleOperation(async()=>await ya(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:a,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:s.headers}))}async copy(a,n,i){var s=this;return s.handleOperation(async()=>({path:(await ya(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:a,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(a,n,i){var s=this;return s.handleOperation(async()=>{let o=s._getFinalPath(a),c=await ya(s.fetch,`${s.url}/object/sign/${o}`,Pe({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:s.headers});const p=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${s.url}${c.signedURL}${p}`)}})}async createSignedUrls(a,n,i){var s=this;return s.handleOperation(async()=>{const o=await ya(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:a},{headers:s.headers}),c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o.map(p=>Pe(Pe({},p),{},{signedUrl:p.signedURL?encodeURI(`${s.url}${p.signedURL}${c}`):null}))})}download(a,n,i){const s=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",p=this._getFinalPath(a),g=()=>qo(this.fetch,`${this.url}/${s}/${p}${c}`,{headers:this.headers,noResolveJson:!0},i);return new t_(g,this.shouldThrowOnError)}async info(a){var n=this;const i=n._getFinalPath(a);return n.handleOperation(async()=>ph(await qo(n.fetch,`${n.url}/object/info/${i}`,{headers:n.headers})))}async exists(a){var n=this;const i=n._getFinalPath(a);try{return await Zw(n.fetch,`${n.url}/object/${i}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(qc(s)&&s instanceof xv){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}}getPublicUrl(a,n){const i=this._getFinalPath(a),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const c=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&s.push(p);let g=s.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${g}`)}}}async remove(a){var n=this;return n.handleOperation(async()=>await zh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:a},{headers:n.headers}))}async list(a,n,i){var s=this;return s.handleOperation(async()=>{const o=Pe(Pe(Pe({},n_),n),{},{prefix:a||""});return await ya(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},i)})}async listV2(a,n){var i=this;return i.handleOperation(async()=>{const s=Pe({},a);return await ya(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,s,{headers:i.headers},n)})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}};const r_="2.95.3",Io={"X-Client-Info":`storage-js/${r_}`};var i_=class extends pl{constructor(a,n={},i,s){const o=new URL(a);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),p=Pe(Pe({},Io),n);super(c,p,i,"storage")}async listBuckets(a){var n=this;return n.handleOperation(async()=>{const i=n.listBucketOptionsToQueryString(a);return await qo(n.fetch,`${n.url}/bucket${i}`,{headers:n.headers})})}async getBucket(a){var n=this;return n.handleOperation(async()=>await qo(n.fetch,`${n.url}/bucket/${a}`,{headers:n.headers}))}async createBucket(a,n={public:!1}){var i=this;return i.handleOperation(async()=>await ya(i.fetch,`${i.url}/bucket`,{id:a,name:a,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}))}async updateBucket(a,n){var i=this;return i.handleOperation(async()=>await gh(i.fetch,`${i.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(a){var n=this;return n.handleOperation(async()=>await ya(n.fetch,`${n.url}/bucket/${a}/empty`,{},{headers:n.headers}))}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await zh(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(a){const n={};return a&&("limit"in a&&(n.limit=String(a.limit)),"offset"in a&&(n.offset=String(a.offset)),a.search&&(n.search=a.search),a.sortColumn&&(n.sortColumn=a.sortColumn),a.sortOrder&&(n.sortOrder=a.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},s_=class extends pl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Pe(Pe({},Io),n);super(s,o,i,"storage")}async createBucket(a){var n=this;return n.handleOperation(async()=>await ya(n.fetch,`${n.url}/bucket`,{name:a},{headers:n.headers}))}async listBuckets(a){var n=this;return n.handleOperation(async()=>{const i=new URLSearchParams;a?.limit!==void 0&&i.set("limit",a.limit.toString()),a?.offset!==void 0&&i.set("offset",a.offset.toString()),a?.sortColumn&&i.set("sortColumn",a.sortColumn),a?.sortOrder&&i.set("sortOrder",a.sortOrder),a?.search&&i.set("search",a.search);const s=i.toString(),o=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return await qo(n.fetch,o,{headers:n.headers})})}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await zh(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}))}from(a){var n=this;if(!Vw(a))throw new Lc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new Kw({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(o,c){const p=o[c];return typeof p!="function"?p:async(...g)=>{try{return{data:await p.apply(o,g),error:null}}catch(v){if(s)throw v;return{data:null,error:v}}}}})}},l_=class extends pl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Pe(Pe({},Io),{},{"Content-Type":"application/json"},n);super(s,o,i,"vectors")}async createIndex(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/CreateIndex`,a,{headers:n.headers})||{})}async getIndex(a,n){var i=this;return i.handleOperation(async()=>await In.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:a,indexName:n},{headers:i.headers}))}async listIndexes(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/ListIndexes`,a,{headers:n.headers}))}async deleteIndex(a,n){var i=this;return i.handleOperation(async()=>await In.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:a,indexName:n},{headers:i.headers})||{})}},o_=class extends pl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Pe(Pe({},Io),{},{"Content-Type":"application/json"},n);super(s,o,i,"vectors")}async putVectors(a){var n=this;if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/PutVectors`,a,{headers:n.headers})||{})}async getVectors(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/GetVectors`,a,{headers:n.headers}))}async listVectors(a){var n=this;if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/ListVectors`,a,{headers:n.headers}))}async queryVectors(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/QueryVectors`,a,{headers:n.headers}))}async deleteVectors(a){var n=this;if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/DeleteVectors`,a,{headers:n.headers})||{})}},u_=class extends pl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Pe(Pe({},Io),{},{"Content-Type":"application/json"},n);super(s,o,i,"vectors")}async createBucket(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{})}async getBucket(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:a},{headers:n.headers}))}async listBuckets(a={}){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/ListVectorBuckets`,a,{headers:n.headers}))}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await In.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{})}},c_=class extends u_{constructor(a,n={}){super(a,n.headers||{},n.fetch)}from(a){return new d_(this.url,this.headers,a,this.fetch)}async createBucket(a){var n=()=>super.createBucket,i=this;return n().call(i,a)}async getBucket(a){var n=()=>super.getBucket,i=this;return n().call(i,a)}async listBuckets(a={}){var n=()=>super.listBuckets,i=this;return n().call(i,a)}async deleteBucket(a){var n=()=>super.deleteBucket,i=this;return n().call(i,a)}},d_=class extends l_{constructor(a,n,i,s){super(a,n,s),this.vectorBucketName=i}async createIndex(a){var n=()=>super.createIndex,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(a={}){var n=()=>super.listIndexes,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(a){var n=()=>super.getIndex,i=this;return n().call(i,i.vectorBucketName,a)}async deleteIndex(a){var n=()=>super.deleteIndex,i=this;return n().call(i,i.vectorBucketName,a)}index(a){return new f_(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},f_=class extends o_{constructor(a,n,i,s,o){super(a,n,o),this.vectorBucketName=i,this.indexName=s}async putVectors(a){var n=()=>super.putVectors,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(a){var n=()=>super.getVectors,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(a={}){var n=()=>super.listVectors,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(a){var n=()=>super.queryVectors,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(a){var n=()=>super.deleteVectors,i=this;return n().call(i,Pe(Pe({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},h_=class extends i_{constructor(a,n={},i,s){super(a,n,i,s)}from(a){return new a_(this.url,this.headers,a,this.fetch)}get vectors(){return new c_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new s_(this.url+"/iceberg",this.headers,this.fetch)}};const Sv="2.95.3",rl=30*1e3,yh=3,Ff=yh*rl,m_="http://localhost:9999",p_="supabase.auth.token",g_={"X-Client-Info":`gotrue-js/${Sv}`},vh="X-Supabase-Api-Version",jv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},y_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,v_=600*1e3;class Bo extends Error{constructor(n,i,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function Re(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class b_ extends Bo{constructor(n,i,s){super(n,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function x_(a){return Re(a)&&a.name==="AuthApiError"}class Qi extends Bo{constructor(n,i){super(n),this.name="AuthUnknownError",this.originalError=i}}class br extends Bo{constructor(n,i,s,o){super(n,s,o),this.name=i,this.status=s}}class Gn extends br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zf(a){return Re(a)&&a.name==="AuthSessionMissingError"}class Ws extends br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pc extends br{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class gc extends br{constructor(n,i=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function w_(a){return Re(a)&&a.name==="AuthImplicitGrantRedirectError"}class yy extends br{constructor(n,i=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class __ extends br{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bh extends br{constructor(n,i){super(n,"AuthRetryableFetchError",i,void 0)}}function eh(a){return Re(a)&&a.name==="AuthRetryableFetchError"}class vy extends br{constructor(n,i,s){super(n,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class xh extends br{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),by=` 	
\r=`.split(""),S_=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<by.length;n+=1)a[by[n].charCodeAt(0)]=-2;for(let n=0;n<Tc.length;n+=1)a[Tc[n].charCodeAt(0)]=n;return a})();function xy(a,n,i){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;i(Tc[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;i(Tc[s]),n.queuedBits-=6}}function kv(a,n,i){const s=S_[a];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)i(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function wy(a){const n=[],i=p=>{n.push(String.fromCodePoint(p))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=p=>{E_(p,s,i)};for(let p=0;p<a.length;p+=1)kv(a.charCodeAt(p),o,c);return n.join("")}function j_(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function k_(a,n){for(let i=0;i<a.length;i+=1){let s=a.charCodeAt(i);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(a.charCodeAt(i+1)-56320&65535|o)+65536,i+=1}j_(s,n)}}function E_(a,n,i){if(n.utf8seq===0){if(a<=127){i(a);return}for(let s=1;s<6;s+=1)if((a>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&i(n.codepoint)}}function ol(a){const n=[],i={queue:0,queuedBits:0},s=o=>{n.push(o)};for(let o=0;o<a.length;o+=1)kv(a.charCodeAt(o),i,s);return new Uint8Array(n)}function N_(a){const n=[];return k_(a,i=>n.push(i)),new Uint8Array(n)}function Wi(a){const n=[],i={queue:0,queuedBits:0},s=o=>{n.push(o)};return a.forEach(o=>xy(o,i,s)),xy(null,i,s),n.join("")}function T_(a){return Math.round(Date.now()/1e3)+a}function O_(){return Symbol("auth-callback")}const gn=()=>typeof window<"u"&&typeof document<"u",Ki={tested:!1,writable:!1},Ev=()=>{if(!gn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ki.tested)return Ki.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Ki.tested=!0,Ki.writable=!0}catch{Ki.tested=!0,Ki.writable=!1}return Ki.writable};function A_(a){const n={},i=new URL(a);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return i.searchParams.forEach((s,o)=>{n[o]=s}),n}const Nv=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),C_=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",il=async(a,n,i)=>{await a.setItem(n,JSON.stringify(i))},Gi=async(a,n)=>{const i=await a.getItem(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}},pn=async(a,n)=>{await a.removeItem(n)};class Bc{constructor(){this.promise=new Bc.promiseConstructor((n,i)=>{this.resolve=n,this.reject=i})}}Bc.promiseConstructor=Promise;function yc(a){const n=a.split(".");if(n.length!==3)throw new xh("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!y_.test(n[s]))throw new xh("JWT not in base64url format");return{header:JSON.parse(wy(n[0])),payload:JSON.parse(wy(n[1])),signature:ol(n[2]),raw:{header:n[0],payload:n[1]}}}async function R_(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function D_(a,n){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const p=await a(c);if(!n(c,null,p)){s(p);return}}catch(p){if(!n(c,p)){o(p);return}}})()})}function M_(a){return("0"+a.toString(16)).substr(-2)}function z_(){const n=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let o="";for(let c=0;c<56;c++)o+=i.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(n),Array.from(n,M_).join("")}async function U_(a){const i=new TextEncoder().encode(a),s=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function L_(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const i=await U_(a);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Js(a,n,i=!1){const s=z_();let o=s;i&&(o+="/PASSWORD_RECOVERY"),await il(a,`${n}-code-verifier`,o);const c=await L_(s);return[c,s===c?"plain":"s256"]}const q_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function B_(a){const n=a.headers.get(vh);if(!n||!n.match(q_))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function P_(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function $_(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const H_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fs(a){if(!H_.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function th(){const a={};return new Proxy(a,{get:(n,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function K_(a,n){return new Proxy(a,{get:(i,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const c=s.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,o)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(i,s,o)}})}function _y(a){return JSON.parse(JSON.stringify(a))}const Ii=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),G_=[502,503,504];async function Sy(a){var n;if(!C_(a))throw new bh(Ii(a),0);if(G_.includes(a.status))throw new bh(Ii(a),a.status);let i;try{i=await a.json()}catch(c){throw new Qi(Ii(c),c)}let s;const o=B_(a);if(o&&o.getTime()>=jv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new vy(Ii(i),a.status,((n=i.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Gn}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((c,p)=>c&&typeof p=="string",!0))throw new vy(Ii(i),a.status,i.weak_password.reasons);throw new b_(Ii(i),a.status||500,s)}const I_=(a,n,i,s)=>{const o={method:a,headers:n?.headers||{}};return a==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),i))};async function Be(a,n,i,s){var o;const c=Object.assign({},s?.headers);c[vh]||(c[vh]=jv["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const p=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(p.redirect_to=s.redirectTo);const g=Object.keys(p).length?"?"+new URLSearchParams(p).toString():"",v=await V_(a,n,i+g,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(v):{data:Object.assign({},v),error:null}}async function V_(a,n,i,s,o,c){const p=I_(n,s,o,c);let g;try{g=await a(i,Object.assign({},p))}catch(v){throw console.error(v),new bh(Ii(v),0)}if(g.ok||await Sy(g),s?.noResolveJson)return g;try{return await g.json()}catch(v){await Sy(v)}}function ga(a){var n;let i=null;X_(a)&&(i=Object.assign({},a),a.expires_at||(i.expires_at=T_(a.expires_in)));const s=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:i,user:s},error:null}}function jy(a){const n=ga(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(n.data.weak_password=a.weak_password),n}function si(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function Y_(a){return{data:a,error:null}}function Q_(a){const{action_link:n,email_otp:i,hashed_token:s,redirect_to:o,verification_type:c}=a,p=Uc(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:i,hashed_token:s,redirect_to:o,verification_type:c},v=Object.assign({},p);return{data:{properties:g,user:v},error:null}}function ky(a){return a}function X_(a){return a.access_token&&a.refresh_token&&a.expires_in}const nh=["global","local","others"];class W_{constructor({url:n="",headers:i={},fetch:s}){this.url=n,this.headers=i,this.fetch=Nv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,i=nh[0]){if(nh.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nh.join(", ")}`);try{return await Be(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,i={}){try{return await Be(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:si})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:i}=n,s=Uc(n,["options"]),o=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await Be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Q_,redirectTo:i?.redirectTo})}catch(i){if(Re(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(n){try{return await Be(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:si})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async listUsers(n){var i,s,o,c,p,g,v;try{const b={nextPage:null,lastPage:0,total:0},S=await Be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:ky});if(S.error)throw S.error;const j=await S.json(),T=(p=S.headers.get("x-total-count"))!==null&&p!==void 0?p:0,A=(v=(g=S.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return A.length>0&&(A.forEach(B=>{const I=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),V=JSON.parse(B.split(";")[1].split("=")[1]);b[`${V}Page`]=I}),b.total=parseInt(T)),{data:Object.assign(Object.assign({},j),b),error:null}}catch(b){if(Re(b))return{data:{users:[]},error:b};throw b}}async getUserById(n){Fs(n);try{return await Be(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:si})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async updateUserById(n,i){Fs(n);try{return await Be(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:i,headers:this.headers,xform:si})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,i=!1){Fs(n);try{return await Be(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:i},xform:si})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){Fs(n.userId);try{const{data:i,error:s}=await Be(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:i,error:s}}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _deleteFactor(n){Fs(n.userId),Fs(n.id);try{return{data:await Be(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _listOAuthClients(n){var i,s,o,c,p,g,v;try{const b={nextPage:null,lastPage:0,total:0},S=await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:ky});if(S.error)throw S.error;const j=await S.json(),T=(p=S.headers.get("x-total-count"))!==null&&p!==void 0?p:0,A=(v=(g=S.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return A.length>0&&(A.forEach(B=>{const I=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),V=JSON.parse(B.split(";")[1].split("=")[1]);b[`${V}Page`]=I}),b.total=parseInt(T)),{data:Object.assign(Object.assign({},j),b),error:null}}catch(b){if(Re(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(n){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _getOAuthClient(n){try{return await Be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _updateOAuthClient(n,i){try{return await Be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Re(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await Be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(n){try{return await Be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Re(i))return{data:null,error:i};throw i}}}function Ey(a={}){return{getItem:n=>a[n]||null,setItem:(n,i)=>{a[n]=i},removeItem:n=>{delete a[n]}}}const Zs={debug:!!(globalThis&&Ev()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tv extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class J_ extends Tv{}async function F_(a,n,i){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,o.name);try{return await i()}finally{Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,o.name)}}else{if(n===0)throw Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new J_(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Zs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function Z_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ov(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function e1(a){return parseInt(a,16)}function t1(a){const n=new TextEncoder().encode(a);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function n1(a){var n;const{chainId:i,domain:s,expirationTime:o,issuedAt:c=new Date,nonce:p,notBefore:g,requestId:v,resources:b,scheme:S,uri:j,version:T}=a;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(p&&p.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${p}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((n=a.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const A=Ov(a.address),B=S?`${S}://${s}`:s,I=a.statement?`${a.statement}
`:"",V=`${B} wants you to sign in with your Ethereum account:
${A}

${I}`;let ae=`URI: ${j}
Version: ${T}
Chain ID: ${i}${p?`
Nonce: ${p}`:""}
Issued At: ${c.toISOString()}`;if(o&&(ae+=`
Expiration Time: ${o.toISOString()}`),g&&(ae+=`
Not Before: ${g.toISOString()}`),v&&(ae+=`
Request ID: ${v}`),b){let K=`
Resources:`;for(const Y of b){if(!Y||typeof Y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Y}`);K+=`
- ${Y}`}ae+=K}return`${V}
${ae}`}class Jt extends Error{constructor({message:n,code:i,cause:s,name:o}){var c;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(c=o??(s instanceof Error?s.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=i}}class Oc extends Jt{constructor(n,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:n}),this.name="WebAuthnUnknownError",this.originalError=i}}function a1({error:a,options:n}){var i,s,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((i=c.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(n.mediation==="conditional"&&((s=c.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new Jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new Jt({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return c.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new Jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const p=window.location.hostname;if(Av(p)){if(c.rp.id!==p)return new Jt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function r1({error:a,options:n}){const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new Jt({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const s=window.location.hostname;if(Av(s)){if(i.rpId!==s)return new Jt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new Jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new Jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new Jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class i1{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const s1=new i1;function l1(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:n,user:i,excludeCredentials:s}=a,o=Uc(a,["challenge","user","excludeCredentials"]),c=ol(n).buffer,p=Object.assign(Object.assign({},i),{id:ol(i.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:c,user:p});if(s&&s.length>0){g.excludeCredentials=new Array(s.length);for(let v=0;v<s.length;v++){const b=s[v];g.excludeCredentials[v]=Object.assign(Object.assign({},b),{id:ol(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return g}function o1(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:n,allowCredentials:i}=a,s=Uc(a,["challenge","allowCredentials"]),o=ol(n).buffer,c=Object.assign(Object.assign({},s),{challenge:o});if(i&&i.length>0){c.allowCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const g=i[p];c.allowCredentials[p]=Object.assign(Object.assign({},g),{id:ol(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return c}function u1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a;return{id:a.id,rawId:a.id,response:{attestationObject:Wi(new Uint8Array(a.response.attestationObject)),clientDataJSON:Wi(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function c1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a,s=a.getClientExtensionResults(),o=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Wi(new Uint8Array(o.authenticatorData)),clientDataJSON:Wi(new Uint8Array(o.clientDataJSON)),signature:Wi(new Uint8Array(o.signature)),userHandle:o.userHandle?Wi(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Av(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function Ny(){var a,n;return!!(gn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function d1(a){try{const n=await navigator.credentials.create(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Oc("Browser returned unexpected credential type",n)}:{data:null,error:new Oc("Empty credential response",n)}}catch(n){return{data:null,error:a1({error:n,options:a})}}}async function f1(a){try{const n=await navigator.credentials.get(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Oc("Browser returned unexpected credential type",n)}:{data:null,error:new Oc("Empty credential response",n)}}catch(n){return{data:null,error:r1({error:n,options:a})}}}const h1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},m1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ac(...a){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),i=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of a)if(o)for(const c in o){const p=o[c];if(p!==void 0)if(Array.isArray(p))s[c]=p;else if(i(p))s[c]=p;else if(n(p)){const g=s[c];n(g)?s[c]=Ac(g,p):s[c]=Ac(p)}else s[c]=p}return s}function p1(a,n){return Ac(h1,a,n||{})}function g1(a,n){return Ac(m1,a,n||{})}class y1{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:i,friendlyName:s,signal:o},c){var p;try{const{data:g,error:v}=await this.client.mfa.challenge({factorId:n,webauthn:i});if(!g)return{data:null,error:v};const b=o??s1.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:S}=g.webauthn.credential_options.publicKey;if(!S.name){const j=s;if(j)S.name=`${S.id}:${j}`;else{const A=(await this.client.getUser()).data.user,B=((p=A?.user_metadata)===null||p===void 0?void 0:p.name)||A?.email||A?.id||"User";S.name=`${S.id}:${B}`}}S.displayName||(S.displayName=S.name)}switch(g.webauthn.type){case"create":{const S=p1(g.webauthn.credential_options.publicKey,c?.create),{data:j,error:T}=await d1({publicKey:S,signal:b});return j?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:j}},error:null}:{data:null,error:T}}case"request":{const S=g1(g.webauthn.credential_options.publicKey,c?.request),{data:j,error:T}=await f1(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:S,signal:b}));return j?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:j}},error:null}:{data:null,error:T}}}}catch(g){return Re(g)?{data:null,error:g}:{data:null,error:new Qi("Unexpected error in challenge",g)}}}async _verify({challengeId:n,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new Bo("rpId is required for WebAuthn authentication")};try{if(!Ny())return{data:null,error:new Qi("Browser does not support WebAuthn",null)};const{data:p,error:g}=await this.challenge({factorId:n,webauthn:{rpId:i,rpOrigins:s},signal:o},{request:c});if(!p)return{data:null,error:g};const{webauthn:v}=p;return this._verify({factorId:n,challengeId:p.challengeId,webauthn:{type:v.type,rpId:i,rpOrigins:s,credential_response:v.credential_response}})}catch(p){return Re(p)?{data:null,error:p}:{data:null,error:new Qi("Unexpected error in authenticate",p)}}}async _register({friendlyName:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new Bo("rpId is required for WebAuthn registration")};try{if(!Ny())return{data:null,error:new Qi("Browser does not support WebAuthn",null)};const{data:p,error:g}=await this._enroll({friendlyName:n});if(!p)return await this.client.mfa.listFactors().then(S=>{var j;return(j=S.data)===null||j===void 0?void 0:j.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===n&&T.status!=="unverified")}).then(S=>S?this.client.mfa.unenroll({factorId:S?.id}):void 0),{data:null,error:g};const{data:v,error:b}=await this._challenge({factorId:p.id,friendlyName:p.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:o},{create:c});return v?this._verify({factorId:p.id,challengeId:v.challengeId,webauthn:{rpId:i,rpOrigins:s,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:b}}catch(p){return Re(p)?{data:null,error:p}:{data:null,error:new Qi("Unexpected error in register",p)}}}}Z_();const v1={url:m_,storageKey:p_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:g_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ty(a,n,i){return await i()}const el={};class Po{get jwks(){var n,i;return(i=(n=el[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(n){el[this.storageKey]=Object.assign(Object.assign({},el[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,i;return(i=(n=el[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){el[this.storageKey]=Object.assign(Object.assign({},el[this.storageKey]),{cachedAt:n})}constructor(n){var i,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},v1),n);if(this.storageKey=c.storageKey,this.instanceID=(i=Po.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Po.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&gn()){const p=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(p),this.logDebugMessages&&console.trace(p)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new W_({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Nv(c.fetch),this.lock=c.lock||Ty,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&gn()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=F_:this.lock=Ty,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new y1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Ev()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ey(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Ey(this.memoryStorage)),gn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(p){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",p)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async p=>{this._debug("received broadcast notification from other tab or client",p);try{await this._notifyAllSubscribers(p.data.event,p.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}this.initialize().catch(p=>{this._debug("#initialize()","error",p)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Sv}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let i={},s="none";if(gn()&&(i=A_(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),gn()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(i,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),w_(c)){const v=(n=c.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:p,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",p,"redirect type",g),await this._saveSession(p),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",p):await this._notifyAllSubscribers("SIGNED_IN",p)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return Re(i)?this._returnResult({error:i}):this._returnResult({error:new Qi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var i,s,o;try{const c=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=n?.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:ga}),{data:p,error:g}=c;if(g||!p)return this._returnResult({data:{user:null,session:null},error:g});const v=p.session,b=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(c){if(Re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var i,s,o;try{let c;if("email"in n){const{email:S,password:j,options:T}=n;let A=null,B=null;this.flowType==="pkce"&&([A,B]=await Js(this.storage,this.storageKey)),c=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T?.emailRedirectTo,body:{email:S,password:j,data:(i=T?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:A,code_challenge_method:B},xform:ga})}else if("phone"in n){const{phone:S,password:j,options:T}=n;c=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:j,data:(s=T?.data)!==null&&s!==void 0?s:{},channel:(o=T?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T?.captchaToken}},xform:ga})}else throw new pc("You must provide either an email or phone number and a password");const{data:p,error:g}=c;if(g||!p)return await pn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const v=p.session,b=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(c){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let i;if("email"in n){const{email:c,password:p,options:g}=n;i=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:jy})}else if("phone"in n){const{phone:c,password:p,options:g}=n;i=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:jy})}else throw new pc("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const c=new Ws;return this._returnResult({data:{user:null,session:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(n){var i,s,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(i=n.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:i}=n;switch(i){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(n){var i,s,o,c,p,g,v,b,S,j,T;let A,B;if("message"in n)A=n.message,B=n.signature;else{const{chain:I,wallet:V,statement:ae,options:K}=n;let Y;if(gn())if(typeof V=="object")Y=V;else{const Le=window;if("ethereum"in Le&&typeof Le.ethereum=="object"&&"request"in Le.ethereum&&typeof Le.ethereum.request=="function")Y=Le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof V!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=V}const de=new URL((i=K?.url)!==null&&i!==void 0?i:window.location.href),Ee=await Y.request({method:"eth_requestAccounts"}).then(Le=>Le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ee||Ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ue=Ov(Ee[0]);let te=(s=K?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!te){const Le=await Y.request({method:"eth_chainId"});te=e1(Le)}const Ne={domain:de.host,address:ue,statement:ae,uri:de.href,version:"1",chainId:te,nonce:(o=K?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(p=(c=K?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&p!==void 0?p:new Date,expirationTime:(g=K?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(v=K?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(b=K?.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(S=K?.signInWithEthereum)===null||S===void 0?void 0:S.resources};A=n1(Ne),B=await Y.request({method:"personal_sign",params:[t1(A),ue]})}try{const{data:I,error:V}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:B},!((j=n.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ga});if(V)throw V;if(!I||!I.session||!I.user){const ae=new Ws;return this._returnResult({data:{user:null,session:null},error:ae})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:V})}catch(I){if(Re(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async signInWithSolana(n){var i,s,o,c,p,g,v,b,S,j,T,A;let B,I;if("message"in n)B=n.message,I=n.signature;else{const{chain:V,wallet:ae,statement:K,options:Y}=n;let de;if(gn())if(typeof ae=="object")de=ae;else{const ue=window;if("solana"in ue&&typeof ue.solana=="object"&&("signIn"in ue.solana&&typeof ue.solana.signIn=="function"||"signMessage"in ue.solana&&typeof ue.solana.signMessage=="function"))de=ue.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ae!="object"||!Y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");de=ae}const Ee=new URL((i=Y?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in de&&de.signIn){const ue=await de.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Y?.signInWithSolana),{version:"1",domain:Ee.host,uri:Ee.href}),K?{statement:K}:null));let te;if(Array.isArray(ue)&&ue[0]&&typeof ue[0]=="object")te=ue[0];else if(ue&&typeof ue=="object"&&"signedMessage"in ue&&"signature"in ue)te=ue;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)B=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),I=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in de)||typeof de.signMessage!="function"||!("publicKey"in de)||typeof de!="object"||!de.publicKey||!("toBase58"in de.publicKey)||typeof de.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");B=[`${Ee.host} wants you to sign in with your Solana account:`,de.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${Ee.href}`,`Issued At: ${(o=(s=Y?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=Y?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${Y.signInWithSolana.notBefore}`]:[],...!((p=Y?.signInWithSolana)===null||p===void 0)&&p.expirationTime?[`Expiration Time: ${Y.signInWithSolana.expirationTime}`]:[],...!((g=Y?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${Y.signInWithSolana.chainId}`]:[],...!((v=Y?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${Y.signInWithSolana.nonce}`]:[],...!((b=Y?.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${Y.signInWithSolana.requestId}`]:[],...!((j=(S=Y?.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||j===void 0)&&j.length?["Resources",...Y.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const ue=await de.signMessage(new TextEncoder().encode(B),"utf8");if(!ue||!(ue instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=ue}}try{const{data:V,error:ae}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:B,signature:Wi(I)},!((T=n.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(A=n.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:ga});if(ae)throw ae;if(!V||!V.session||!V.user){const K=new Ws;return this._returnResult({data:{user:null,session:null},error:K})}return V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),this._returnResult({data:Object.assign({},V),error:ae})}catch(V){if(Re(V))return this._returnResult({data:{user:null,session:null},error:V});throw V}}async _exchangeCodeForSession(n){const i=await Gi(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(i??"").split("/");try{if(!s&&this.flowType==="pkce")throw new __;const{data:c,error:p}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:ga});if(await pn(this.storage,`${this.storageKey}-code-verifier`),p)throw p;if(!c||!c.session||!c.user){const g=new Ws;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:p})}catch(c){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:i,provider:s,token:o,access_token:c,nonce:p}=n,g=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:p,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ga}),{data:v,error:b}=g;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!v||!v.session||!v.user){const S=new Ws;return this._returnResult({data:{user:null,session:null},error:S})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:b})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(n){var i,s,o,c,p;try{if("email"in n){const{email:g,options:v}=n;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Js(this.storage,this.storageKey));const{error:j}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=v?.data)!==null&&i!==void 0?i:{},create_user:(s=v?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}if("phone"in n){const{phone:g,options:v}=n,{data:b,error:S}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=v?.data)!==null&&o!==void 0?o:{},create_user:(c=v?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(p=v?.channel)!==null&&p!==void 0?p:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:S})}throw new pc("You must provide either an email or phone number.")}catch(g){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(n){var i,s;try{let o,c;"options"in n&&(o=(i=n.options)===null||i===void 0?void 0:i.redirectTo,c=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:p,error:g}=await Be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:ga});if(g)throw g;if(!p)throw new Error("An error occurred on token verification.");const v=p.session,b=p.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(o){if(Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var i,s,o,c,p;try{let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Js(this.storage,this.storageKey));const b=await Be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(i=n.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:v}),headers:this.headers,xform:Y_});return!((c=b.data)===null||c===void 0)&&c.url&&gn()&&!(!((p=n.options)===null||p===void 0)&&p.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(g){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)throw s;if(!i)throw new Gn;const{error:o}=await Be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const i=`${this.url}/resend`;if("email"in n){const{email:s,type:o,options:c}=n,{error:p}=await Be(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}else if("phone"in n){const{phone:s,type:o,options:c}=n,{data:p,error:g}=await Be(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:g})}throw new pc("You must provide either an email or phone number and a type")}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(n,i){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await n(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const i=await Gi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?n=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<Ff:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const p=await Gi(this.userStorage,this.storageKey+"-user");p?.user?n.user=p.user:n.user=th()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const p={value:this.suppressGetSessionWarning};n.user=K_(n.user,p),p.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(n){try{return n?await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:si}):await this._useSession(async i=>{var s,o,c;const{data:p,error:g}=i;if(g)throw g;return!(!((s=p.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gn}:await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=p.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:si})})}catch(i){if(Re(i))return Zf(i)&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(n,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,i))}async _updateUser(n,i={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Gn;const p=o.session;let g=null,v=null;this.flowType==="pkce"&&n.email!=null&&([g,v]=await Js(this.storage,this.storageKey));const{data:b,error:S}=await Be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:v}),jwt:p.access_token,xform:si});if(S)throw S;return p.user=b.user,await this._saveSession(p),await this._notifyAllSubscribers("USER_UPDATED",p),this._returnResult({data:{user:p.user},error:null})})}catch(s){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Gn;const i=Date.now()/1e3;let s=i,o=!0,c=null;const{payload:p}=yc(n.access_token);if(p.exp&&(s=p.exp,o=s<=i),o){const{data:g,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g)return{data:{user:null,session:null},error:null};c=g}else{const{data:g,error:v}=await this._getUser(n.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});c={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(i){if(Re(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async i=>{var s;if(!n){const{data:p,error:g}=i;if(g)throw g;n=(s=p.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new Gn;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(n,i){try{if(!gn())throw new gc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new gc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new yy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gc("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new yy("No code detected.");const{data:K,error:Y}=await this._exchangeCodeForSession(n.code);if(Y)throw Y;const de=new URL(window.location.href);return de.searchParams.delete("code"),window.history.replaceState(window.history.state,"",de.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:p,expires_in:g,expires_at:v,token_type:b}=n;if(!c||!g||!p||!b)throw new gc("No session defined in URL");const S=Math.round(Date.now()/1e3),j=parseInt(g);let T=S+j;v&&(T=parseInt(v));const A=T-S;A*1e3<=rl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${j}s`);const B=T-j;S-B>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",B,T,S):S-B<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",B,T,S);const{data:I,error:V}=await this._getUser(c);if(V)throw V;const ae={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:j,expires_at:T,refresh_token:p,token_type:b,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ae,redirectType:n.type},error:null})}catch(s){if(Re(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const i=await Gi(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&i)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:o,error:c}=i;if(c&&!Zf(c))return this._returnResult({error:c});const p=(s=o.session)===null||s===void 0?void 0:s.access_token;if(p){const{error:g}=await this.admin.signOut(p,n);if(g&&!(x_(g)&&(g.status===404||g.status===401||g.status===403)||Zf(g)))return this._returnResult({error:g})}return n!=="others"&&(await this._removeSession(),await pn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const i=O_(),s={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async i=>{var s,o;try{const{data:{session:c},error:p}=i;if(p)throw p;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,i={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Js(this.storage,this.storageKey,!0));try{return await Be(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=i.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var i;try{const{data:s,error:o}=await this._useSession(async c=>{var p,g,v,b,S;const{data:j,error:T}=c;if(T)throw T;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(p=n.options)===null||p===void 0?void 0:p.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await Be(this.fetch,"GET",A,{headers:this.headers,jwt:(S=(b=j.session)===null||b===void 0?void 0:b.access_token)!==null&&S!==void 0?S:void 0})});if(o)throw o;return gn()&&!(!((i=n.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:n.provider,url:s?.url},error:null})}catch(s){if(Re(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async i=>{var s;try{const{error:o,data:{session:c}}=i;if(o)throw o;const{options:p,provider:g,token:v,access_token:b,nonce:S}=n,j=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=c?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:g,id_token:v,access_token:b,nonce:S,link_identity:!0,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ga}),{data:T,error:A}=j;return A?this._returnResult({data:{user:null,session:null},error:A}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new Ws}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:A}))}catch(o){if(await pn(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async i=>{var s,o;const{data:c,error:p}=i;if(p)throw p;return await Be(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(n){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await D_(async o=>(o>0&&await R_(200*Math.pow(2,o-1)),this._debug(i,"refreshing attempt",o),await Be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ga})),(o,c)=>{const p=200*Math.pow(2,o);return c&&eh(c)&&Date.now()+p-s<rl})}catch(s){if(this._debug(i,"error",s),Re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",i,"url",s),gn()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Gi(this.storage,this.storageKey);if(o&&this.userStorage){let p=await Gi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!p&&(p={user:o.user},await il(this.userStorage,this.storageKey+"-user",p)),o.user=(n=p?.user)!==null&&n!==void 0?n:th()}else if(o&&!o.user&&!o.user){const p=await Gi(this.storage,this.storageKey+"-user");p&&p?.user?(o.user=p.user,await pn(this.storage,this.storageKey+"-user"),await il(this.storage,this.storageKey,o)):o.user=th()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Ff;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${Ff}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:p}=await this._callRefreshToken(o.refresh_token);p&&(console.error(p),eh(p)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",p),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:p,error:g}=await this._getUser(o.access_token);!g&&p?.user?(o.user=p.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(p){console.error("Error getting user data:",p),this._debug(s,"error getting user data, skipping SIGNED_IN notification",p)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var i,s;if(!n)throw new Gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Bc;const{data:c,error:p}=await this._refreshAccessToken(n);if(p)throw p;if(!c.session)throw new Gn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const g={data:c.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(c){if(this._debug(o,"error",c),Re(c)){const p={data:null,error:c};return eh(c)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(p),p}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,i,s=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:i});const c=[],p=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,i)}catch(v){c.push(v)}});if(await Promise.all(p),c.length>0){for(let g=0;g<c.length;g+=1)console.error(c[g]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await pn(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},n),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await il(this.userStorage,this.storageKey+"-user",{user:i.user});const o=Object.assign({},i);delete o.user;const c=_y(o);await il(this.storage,this.storageKey,c)}else{const o=_y(i);await il(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pn(this.storage,this.storageKey),await pn(this.storage,this.storageKey+"-code-verifier"),await pn(this.storage,this.storageKey+"-user"),this.userStorage&&await pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&gn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),rl);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-n)/rl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${rl}ms, refresh threshold is ${yh} ticks`),o<=yh&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Tv)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const i=`#_onVisibilityChanged(${n})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,i,s){const o=[`provider=${encodeURIComponent(i)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,p]=await Js(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(p)}`});o.push(g.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async i=>{var s;const{data:o,error:c}=i;return c?this._returnResult({data:null,error:c}):await Be(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(n){try{return await this._useSession(async i=>{var s,o;const{data:c,error:p}=i;if(p)return this._returnResult({data:null,error:p});const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:b}=await Be(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return b?this._returnResult({data:null,error:b}):(n.factorType==="totp"&&v.type==="totp"&&(!((o=v?.totp)===null||o===void 0)&&o.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const p=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?u1(n.webauthn.credential_response):c1(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:v}=await Be(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:p,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:v}))})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const p=await Be(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(p.error)return p;const{data:g}=p;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:l1(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:o1(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(n){const{data:i,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:i.id,code:n.code})}async _listFactors(){var n;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=i?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var i,s,o,c;if(n)try{const{payload:A}=yc(n);let B=null;A.aal&&(B=A.aal);let I=B;const{data:{user:V},error:ae}=await this.getUser(n);if(ae)return this._returnResult({data:null,error:ae});((s=(i=V?.factors)===null||i===void 0?void 0:i.filter(de=>de.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(I="aal2");const Y=A.amr||[];return{data:{currentLevel:B,nextLevel:I,currentAuthenticationMethods:Y},error:null}}catch(A){if(Re(A))return this._returnResult({data:null,error:A});throw A}const{data:{session:p},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!p)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=yc(p.access_token);let b=null;v.aal&&(b=v.aal);let S=b;((c=(o=p.user.factors)===null||o===void 0?void 0:o.filter(A=>A.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(S="aal2");const T=v.amr||[];return{data:{currentLevel:b,nextLevel:S,currentAuthenticationMethods:T},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;return o?this._returnResult({data:null,error:o}):s?await Be(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Gn})})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(n,i){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Gn});const p=await Be(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return p.data&&p.data.redirect_url&&gn()&&!i?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,i){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Gn});const p=await Be(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return p.data&&p.data.redirect_url&&gn()&&!i?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;return s?this._returnResult({data:null,error:s}):i?await Be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Gn})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;return o?this._returnResult({data:null,error:o}):s?(await Be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Gn})})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(n,i={keys:[]}){let s=i.keys.find(g=>g.kid===n);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(g=>g.kid===n),s&&this.jwks_cached_at+v_>o)return s;const{data:c,error:p}=await Be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(p)throw p;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(g=>g.kid===n),!s)?null:s}async getClaims(n,i={}){try{let s=n;if(!s){const{data:A,error:B}=await this.getSession();if(B||!A.session)return this._returnResult({data:null,error:B});s=A.session.access_token}const{header:o,payload:c,signature:p,raw:{header:g,payload:v}}=yc(s);i?.allowExpired||P_(c.exp);const b=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!b){const{error:A}=await this.getUser(s);if(A)throw A;return{data:{claims:c,header:o,signature:p},error:null}}const S=$_(o.alg),j=await crypto.subtle.importKey("jwk",b,S,!0,["verify"]);if(!await crypto.subtle.verify(S,j,p,N_(`${g}.${v}`)))throw new xh("Invalid JWT signature");return{data:{claims:c,header:o,signature:p},error:null}}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}}Po.nextInstanceID={};const b1=Po,x1="2.95.3";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";const w1={"X-Client-Info":`supabase-js-${Ao}/${x1}`},_1={headers:w1},S1={schema:"public"},j1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},k1={};function $o(a){"@babel/helpers - typeof";return $o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$o(a)}function E1(a,n){if($o(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var s=i.call(a,n);if($o(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function N1(a){var n=E1(a,"string");return $o(n)=="symbol"?n:n+""}function T1(a,n,i){return(n=N1(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}function Oy(a,n){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,s)}return i}function Bt(a){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Oy(Object(i),!0).forEach(function(s){T1(a,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):Oy(Object(i)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(i,s))})}return a}const O1=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),A1=()=>Headers,C1=(a,n,i)=>{const s=O1(i),o=A1();return async(c,p)=>{var g;const v=(g=await n())!==null&&g!==void 0?g:a;let b=new o(p?.headers);return b.has("apikey")||b.set("apikey",a),b.has("Authorization")||b.set("Authorization",`Bearer ${v}`),s(c,Bt(Bt({},p),{},{headers:b}))}};function R1(a){return a.endsWith("/")?a:a+"/"}function D1(a,n){var i,s;const{db:o,auth:c,realtime:p,global:g}=a,{db:v,auth:b,realtime:S,global:j}=n,T={db:Bt(Bt({},v),o),auth:Bt(Bt({},b),c),realtime:Bt(Bt({},S),p),storage:{},global:Bt(Bt(Bt({},j),g),{},{headers:Bt(Bt({},(i=j?.headers)!==null&&i!==void 0?i:{}),(s=g?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return a.accessToken?T.accessToken=a.accessToken:delete T.accessToken,T}function M1(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(R1(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var z1=class extends b1{constructor(a){super(a)}},U1=class{constructor(a,n,i){var s,o;this.supabaseUrl=a,this.supabaseKey=n;const c=M1(a);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const p=`sb-${c.hostname.split(".")[0]}-auth-token`,g={db:S1,realtime:k1,auth:Bt(Bt({},j1),{},{storageKey:p}),global:_1},v=D1(i??{},g);if(this.storageKey=(s=v.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(S,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=v.auth)!==null&&b!==void 0?b:{},this.headers,v.global.fetch)}this.fetch=C1(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Bt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new xw(new URL("rest/v1",c).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch,timeout:v.db.timeout,urlLengthLimit:v.db.urlLengthLimit}),this.storage=new h_(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new fw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,n,i)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,n,i;if(a.accessToken)return await a.accessToken();const{data:s}=await a.auth.getSession();return(n=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:o,storageKey:c,flowType:p,lock:g,debug:v,throwOnError:b},S,j){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z1({url:this.authUrl.href,headers:Bt(Bt({},T),S),storageKey:c,autoRefreshToken:a,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:o,flowType:p,lock:g,debug:v,throwOnError:b,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new Lw(this.realtimeUrl.href,Bt(Bt({},a),{},{params:Bt(Bt({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,n)=>{this._handleTokenChanged(a,"CLIENT",n?.access_token)})}_handleTokenChanged(a,n,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const L1=(a,n,i)=>new U1(a,n,i);function q1(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const n=a.version;if(n==null)return!1;const i=n.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}q1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const B1="https://uzkgrywvntdvfznbzydv.supabase.co",P1="sb_publishable_WSUDdU7NLCftdEhrKiFPqQ_9JrD0djr",Qe=L1(B1,P1);var Ec={exports:{}},$1=Ec.exports,Ay;function H1(){return Ay||(Ay=1,(function(a,n){((i,s)=>{a.exports=s()})($1,function(){var i=function(u,m){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(y,x){y.__proto__=x}:function(y,x){for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(y[_]=x[_])}))(u,m)},s=function(){return(s=Object.assign||function(u){for(var m,y=1,x=arguments.length;y<x;y++)for(var _ in m=arguments[y])Object.prototype.hasOwnProperty.call(m,_)&&(u[_]=m[_]);return u}).apply(this,arguments)};function o(u,m,y){for(var x,_=0,k=m.length;_<k;_++)!x&&_ in m||((x=x||Array.prototype.slice.call(m,0,_))[_]=m[_]);return u.concat(x||Array.prototype.slice.call(m))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:y0,p=Object.keys,g=Array.isArray;function v(u,m){return typeof m=="object"&&p(m).forEach(function(y){u[y]=m[y]}),u}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var b=Object.getPrototypeOf,S={}.hasOwnProperty;function j(u,m){return S.call(u,m)}function T(u,m){typeof m=="function"&&(m=m(b(u))),(typeof Reflect>"u"?p:Reflect.ownKeys)(m).forEach(function(y){B(u,y,m[y])})}var A=Object.defineProperty;function B(u,m,y,x){A(u,m,v(y&&j(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},x))}function I(u){return{from:function(m){return u.prototype=Object.create(m.prototype),B(u.prototype,"constructor",u),{extend:T.bind(null,u.prototype)}}}}var V=Object.getOwnPropertyDescriptor,ae=[].slice;function K(u,m,y){return ae.call(u,m,y)}function Y(u,m){return m(u)}function de(u){if(!u)throw new Error("Assertion Failed")}function Ee(u){c.setImmediate?setImmediate(u):setTimeout(u,0)}function ue(u,m){if(typeof m=="string"&&j(u,m))return u[m];if(!m)return u;if(typeof m!="string"){for(var y=[],x=0,_=m.length;x<_;++x){var k=ue(u,m[x]);y.push(k)}return y}var N,O=m.indexOf(".");return O===-1||(N=u[m.substr(0,O)])==null?void 0:ue(N,m.substr(O+1))}function te(u,m,y){if(u&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof m!="string"&&"length"in m){de(typeof y!="string"&&"length"in y);for(var x=0,_=m.length;x<_;++x)te(u,m[x],y[x])}else{var k,N,O=m.indexOf(".");O!==-1?(k=m.substr(0,O),(O=m.substr(O+1))===""?y===void 0?g(u)&&!isNaN(parseInt(k))?u.splice(k,1):delete u[k]:u[k]=y:te(N=(N=u[k])&&j(u,k)?N:u[k]={},O,y)):y===void 0?g(u)&&!isNaN(parseInt(m))?u.splice(m,1):delete u[m]:u[m]=y}}function Ne(u){var m,y={};for(m in u)j(u,m)&&(y[m]=u[m]);return y}var Le=[].concat;function yt(u){return Le.apply([],u)}var le="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(yt([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(m){return m+u+"Array"})}))).filter(function(u){return c[u]}),Nt=new Set(le.map(function(u){return c[u]})),zt=null;function qe(u){return zt=new WeakMap,u=(function m(y){if(!y||typeof y!="object")return y;var x=zt.get(y);if(x)return x;if(g(y)){x=[],zt.set(y,x);for(var _=0,k=y.length;_<k;++_)x.push(m(y[_]))}else if(Nt.has(y.constructor))x=y;else{var N,O=b(y);for(N in x=O===Object.prototype?{}:Object.create(O),zt.set(y,x),y)j(y,N)&&(x[N]=m(y[N]))}return x})(u),zt=null,u}var dt={}.toString;function Pt(u){return dt.call(u).slice(8,-1)}var re=typeof Symbol<"u"?Symbol.iterator:"@@iterator",xe=typeof re=="symbol"?function(u){var m;return u!=null&&(m=u[re])&&m.apply(u)}:function(){return null};function De(u,m){m=u.indexOf(m),0<=m&&u.splice(m,1)}var at={};function Je(u){var m,y,x,_;if(arguments.length===1){if(g(u))return u.slice();if(this===at&&typeof u=="string")return[u];if(_=xe(u))for(y=[];!(x=_.next()).done;)y.push(x.value);else{if(u==null)return[u];if(typeof(m=u.length)!="number")return[u];for(y=new Array(m);m--;)y[m]=u[m]}}else for(m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];return y}var H=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],vn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ke(u,m){this.name=u,this.message=m}function He(u,m){return u+". Errors: "+Object.keys(m).map(function(y){return m[y].toString()}).filter(function(y,x,_){return _.indexOf(y)===x}).join(`
`)}function Ie(u,m,y,x){this.failures=m,this.failedKeys=x,this.successCount=y,this.message=He(u,m)}function Fe(u,m){this.name="BulkError",this.failures=Object.keys(m).map(function(y){return m[y]}),this.failuresByPos=m,this.message=He(u,this.failures)}I(ke).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(Ie).from(ke),I(Fe).from(ke);var en=vn.reduce(function(u,m){return u[m]=m+"Error",u},{}),Mt=ke,Ae=vn.reduce(function(u,m){var y=m+"Error";function x(_,k){this.name=y,_?typeof _=="string"?(this.message="".concat(_).concat(k?`
 `+k:""),this.inner=k||null):typeof _=="object"&&(this.message="".concat(_.name," ").concat(_.message),this.inner=_):(this.message=we[m]||y,this.inner=null)}return I(x).from(Mt),u[m]=x,u},{}),li=(Ae.Syntax=SyntaxError,Ae.Type=TypeError,Ae.Range=RangeError,le.reduce(function(u,m){return u[m+"Error"]=Ae[m],u},{}));le=vn.reduce(function(u,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(u[m+"Error"]=Ae[m]),u},{});function st(){}function xr(u){return u}function La(u,m){return u==null||u===xr?m:function(y){return m(u(y))}}function ua(u,m){return function(){u.apply(this,arguments),m.apply(this,arguments)}}function xl(u,m){return u===st?m:function(){var y=u.apply(this,arguments),x=(y!==void 0&&(arguments[0]=y),this.onsuccess),_=this.onerror,k=(this.onsuccess=null,this.onerror=null,m.apply(this,arguments));return x&&(this.onsuccess=this.onsuccess?ua(x,this.onsuccess):x),_&&(this.onerror=this.onerror?ua(_,this.onerror):_),k!==void 0?k:y}}function Ic(u,m){return u===st?m:function(){u.apply(this,arguments);var y=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?ua(y,this.onsuccess):y),x&&(this.onerror=this.onerror?ua(x,this.onerror):x)}}function Xo(u,m){return u===st?m:function(_){var x=u.apply(this,arguments),_=(v(_,x),this.onsuccess),k=this.onerror,N=(this.onsuccess=null,this.onerror=null,m.apply(this,arguments));return _&&(this.onsuccess=this.onsuccess?ua(_,this.onsuccess):_),k&&(this.onerror=this.onerror?ua(k,this.onerror):k),x===void 0?N===void 0?void 0:N:v(x,N)}}function wl(u,m){return u===st?m:function(){return m.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function oi(u,m){return u===st?m:function(){var y=u.apply(this,arguments);if(y&&typeof y.then=="function"){for(var x=this,_=arguments.length,k=new Array(_);_--;)k[_]=arguments[_];return y.then(function(){return m.apply(x,k)})}return m.apply(this,arguments)}}le.ModifyError=Ie,le.DexieError=ke,le.BulkError=Fe;var Tn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Wo(u){Tn=u}var ui={},yn=100,ci=typeof Promise>"u"?[]:(vn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[ci=crypto.subtle.digest("SHA-512",new Uint8Array([0])),b(ci),vn]:[vn,b(vn),vn]),vn=ci[0],Ja=ci[1],Ja=Ja&&Ja.then,xa=vn&&vn.constructor,wr=!!ci[2],di=function(u,m){fi.push([u,m]),ns&&(queueMicrotask(Jo),ns=!1)},ts=!0,ns=!0,qa=[],wa=[],on=xr,un={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:st,pgp:!1,env:{},finalize:st},_e=un,fi=[],Ba=0,as=[];function ve(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=_e;if(typeof u!="function"){if(u!==ui)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ca(this,this._value)}else this._state=null,this._value=null,++m.ref,(function y(x,_){try{_(function(k){if(x._state===null){if(k===x)throw new TypeError("A promise cannot be resolved with itself.");var N=x._lib&&_a();k&&typeof k.then=="function"?y(x,function(O,M){k instanceof ve?k._then(O,M):k.then(O,M)}):(x._state=!0,x._value=k,mi(x)),N&&Qn()}},ca.bind(null,x))}catch(k){ca(x,k)}})(this,u)}var _r={get:function(){var u=_e,m=yi;function y(x,_){var k=this,N=!u.global&&(u!==_e||m!==yi),O=N&&!kn(),M=new ve(function(Q,z){Pa(k,new hi(rs(x,u,N,O),rs(_,u,N,O),Q,z,u))});return this._consoleTask&&(M._consoleTask=this._consoleTask),M}return y.prototype=ui,y},set:function(u){B(this,"then",u&&u.prototype===ui?_r:{get:function(){return u},set:_r.set})}};function hi(u,m,y,x,_){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof m=="function"?m:null,this.resolve=y,this.reject=x,this.psd=_}function ca(u,m){var y,x;wa.push(m),u._state===null&&(y=u._lib&&_a(),m=on(m),u._state=!1,u._value=m,x=u,qa.some(function(_){return _._value===x._value})||qa.push(x),mi(u),y)&&Qn()}function mi(u){var m=u._listeners;u._listeners=[];for(var y=0,x=m.length;y<x;++y)Pa(u,m[y]);var _=u._PSD;--_.ref||_.finalize(),Ba===0&&(++Ba,di(function(){--Ba==0&&_l()},[]))}function Pa(u,m){if(u._state===null)u._listeners.push(m);else{var y=u._state?m.onFulfilled:m.onRejected;if(y===null)return(u._state?m.resolve:m.reject)(u._value);++m.psd.ref,++Ba,di(Vc,[y,u,m])}}function Vc(u,m,y){try{var x,_=m._value;!m._state&&wa.length&&(wa=[]),x=Tn&&m._consoleTask?m._consoleTask.run(function(){return u(_)}):u(_),m._state||wa.indexOf(_)!==-1||(k=>{for(var N=qa.length;N;)if(qa[--N]._value===k._value)return qa.splice(N,1)})(m),y.resolve(x)}catch(k){y.reject(k)}finally{--Ba==0&&_l(),--y.psd.ref||y.psd.finalize()}}function Jo(){zn(un,function(){_a()&&Qn()})}function _a(){var u=ts;return ns=ts=!1,u}function Qn(){var u,m,y;do for(;0<fi.length;)for(u=fi,fi=[],y=u.length,m=0;m<y;++m){var x=u[m];x[0].apply(null,x[1])}while(0<fi.length);ns=ts=!0}function _l(){for(var u=qa,m=(qa=[],u.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)}),as.slice(0)),y=m.length;y;)m[--y]()}function pi(u){return new ve(ui,!1,u)}function St(u,m){var y=_e;return function(){var x=_a(),_=_e;try{return ja(y,!0),u.apply(this,arguments)}catch(k){m&&m(k)}finally{ja(_,!1),x&&Qn()}}}T(ve.prototype,{then:_r,_then:function(u,m){Pa(this,new hi(null,null,u,m,_e))},catch:function(u){var m,y;return arguments.length===1?this.then(null,u):(m=u,y=arguments[1],typeof m=="function"?this.then(null,function(x){return(x instanceof m?y:pi)(x)}):this.then(null,function(x){return(x&&x.name===m?y:pi)(x)}))},finally:function(u){return this.then(function(m){return ve.resolve(u()).then(function(){return m})},function(m){return ve.resolve(u()).then(function(){return pi(m)})})},timeout:function(u,m){var y=this;return u<1/0?new ve(function(x,_){var k=setTimeout(function(){return _(new Ae.Timeout(m))},u);y.then(x,_).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(ve.prototype,Symbol.toStringTag,"Dexie.Promise"),un.env=jl(),T(ve,{all:function(){var u=Je.apply(null,arguments).map(jr);return new ve(function(m,y){u.length===0&&m([]);var x=u.length;u.forEach(function(_,k){return ve.resolve(_).then(function(N){u[k]=N,--x||m(u)},y)})})},resolve:function(u){return u instanceof ve?u:u&&typeof u.then=="function"?new ve(function(m,y){u.then(m,y)}):new ve(ui,!0,u)},reject:pi,race:function(){var u=Je.apply(null,arguments).map(jr);return new ve(function(m,y){u.map(function(x){return ve.resolve(x).then(m,y)})})},PSD:{get:function(){return _e},set:function(u){return _e=u}},totalEchoes:{get:function(){return yi}},newPSD:kt,usePSD:zn,scheduler:{get:function(){return di},set:function(u){di=u}},rejectionMapper:{get:function(){return on},set:function(u){on=u}},follow:function(u,m){return new ve(function(y,x){return kt(function(_,k){var N=_e;N.unhandleds=[],N.onunhandled=k,N.finalize=ua(function(){var O,M=this;O=function(){M.unhandleds.length===0?_():k(M.unhandleds[0])},as.push(function Q(){O(),as.splice(as.indexOf(Q),1)}),++Ba,di(function(){--Ba==0&&_l()},[])},N.finalize),u()},m,y,x)})}}),xa&&(xa.allSettled&&B(ve,"allSettled",function(){var u=Je.apply(null,arguments).map(jr);return new ve(function(m){u.length===0&&m([]);var y=u.length,x=new Array(y);u.forEach(function(_,k){return ve.resolve(_).then(function(N){return x[k]={status:"fulfilled",value:N}},function(N){return x[k]={status:"rejected",reason:N}}).then(function(){return--y||m(x)})})})}),xa.any&&typeof AggregateError<"u"&&B(ve,"any",function(){var u=Je.apply(null,arguments).map(jr);return new ve(function(m,y){u.length===0&&y(new AggregateError([]));var x=u.length,_=new Array(x);u.forEach(function(k,N){return ve.resolve(k).then(function(O){return m(O)},function(O){_[N]=O,--x||y(new AggregateError(_))})})})}),xa.withResolvers)&&(ve.withResolvers=xa.withResolvers);var $t={awaits:0,echoes:0,id:0},Sl=0,Sr=[],gi=0,yi=0,Sa=0;function kt(u,N,y,x){var _=_e,k=Object.create(_),N=(k.parent=_,k.ref=0,k.global=!1,k.id=++Sa,un.env,k.env=wr?{Promise:ve,PromiseProp:{value:ve,configurable:!0,writable:!0},all:ve.all,race:ve.race,allSettled:ve.allSettled,any:ve.any,resolve:ve.resolve,reject:ve.reject}:{},N&&v(k,N),++_.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},zn(k,u,y,x));return k.ref===0&&k.finalize(),N}function Ht(){return $t.id||($t.id=++Sl),++$t.awaits,$t.echoes+=yn,$t.id}function kn(){return!!$t.awaits&&(--$t.awaits==0&&($t.id=0),$t.echoes=$t.awaits*yn,!0)}function jr(u){return $t.echoes&&u&&u.constructor===xa?(Ht(),u.then(function(m){return kn(),m},function(m){return kn(),vt(m)})):u}function Yc(){var u=Sr[Sr.length-1];Sr.pop(),ja(u,!1)}function ja(u,m){var y,x,_=_e;(m?!$t.echoes||gi++&&u===_e:!gi||--gi&&u===_e)||queueMicrotask(m?(function(k){++yi,$t.echoes&&--$t.echoes!=0||($t.echoes=$t.awaits=$t.id=0),Sr.push(_e),ja(k,!0)}).bind(null,u):Yc),u!==_e&&(_e=u,_===un&&(un.env=jl()),wr)&&(y=un.env.Promise,x=u.env,_.global||u.global)&&(Object.defineProperty(c,"Promise",x.PromiseProp),y.all=x.all,y.race=x.race,y.resolve=x.resolve,y.reject=x.reject,x.allSettled&&(y.allSettled=x.allSettled),x.any)&&(y.any=x.any)}function jl(){var u=c.Promise;return wr?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function zn(u,m,y,x,_){var k=_e;try{return ja(u,!0),m(y,x,_)}finally{ja(k,!1)}}function rs(u,m,y,x){return typeof u!="function"?u:function(){var _=_e;y&&Ht(),ja(m,!0);try{return u.apply(this,arguments)}finally{ja(_,!1),x&&queueMicrotask(kn)}}}function ka(u){Promise===xa&&$t.echoes===0?gi===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+Ja).indexOf("[native code]")===-1&&(Ht=kn=st);var vt=ve.reject,Un="",bn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kt="String expected.",$a=[],vi="__dbnames",da="readonly",Ea="readwrite";function Ha(u,m){return u?m?function(){return u.apply(this,arguments)&&m.apply(this,arguments)}:u:m}var kl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bi(u){return typeof u!="string"||/\./.test(u)?function(m){return m}:function(m){return m[u]===void 0&&u in m&&delete(m=qe(m))[u],m}}function Fo(){throw Ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Xe(u,m){try{var y=xi(u),x=xi(m);if(y!==x)return y==="Array"?1:x==="Array"?-1:y==="binary"?1:x==="binary"?-1:y==="string"?1:x==="string"?-1:y==="Date"?1:x!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return m<u?1:u<m?-1:0;case"binary":for(var _=Xn(u),k=Xn(m),N=_.length,O=k.length,M=N<O?N:O,Q=0;Q<M;++Q)if(_[Q]!==k[Q])return _[Q]<k[Q]?-1:1;return N===O?0:N<O?-1:1;case"Array":for(var z=u,D=m,q=z.length,$=D.length,U=q<$?q:$,L=0;L<U;++L){var W=Xe(z[L],D[L]);if(W!==0)return W}return q===$?0:q<$?-1:1}}catch{}return NaN}function xi(u){var m=typeof u;return m=="object"&&(ArrayBuffer.isView(u)||(m=Pt(u))==="ArrayBuffer")?"binary":m}function Xn(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function cn(u,m,y){var x=u.schema.yProps;return x?(m&&0<y.numFailures&&(m=m.filter(function(_,k){return!y.failures[k]})),Promise.all(x.map(function(_){return _=_.updatesTable,m?u.db.table(_).where("k").anyOf(m).delete():u.db.table(_).clear()})).then(function(){return y})):y}Zo.prototype.execute=function(u){var m=this["@@propmod"];if(m.add!==void 0){var y=m.add;if(g(y))return o(o([],g(u)?u:[],!0),y).sort();if(typeof y=="number")return(Number(u)||0)+y;if(typeof y=="bigint")try{return BigInt(u)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(m.remove!==void 0){var x=m.remove;if(g(x))return g(u)?u.filter(function(_){return!x.includes(_)}).sort():[];if(typeof x=="number")return Number(u)-x;if(typeof x=="bigint")try{return BigInt(u)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return y=(y=m.replacePrefix)==null?void 0:y[0],y&&typeof u=="string"&&u.startsWith(y)?m.replacePrefix[1]+u.substring(y.length):u};var kr=Zo;function Zo(u){this["@@propmod"]=u}function is(u,m){for(var y=p(m),x=y.length,_=!1,k=0;k<x;++k){var N=y[k],O=m[N],M=ue(u,N);O instanceof kr?(te(u,N,O.execute(M)),_=!0):M!==O&&(te(u,N,O),_=!0)}return _}ut.prototype._trans=function(u,m,y){var x=this._tx||_e.trans,_=this.name,k=Tn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function N(Q,z,D){if(D.schema[_])return m(D.idbtrans,D);throw new Ae.NotFound("Table "+_+" not part of transaction")}var O=_a();try{var M=x&&x.db._novip===this.db._novip?x===_e.trans?x._promise(u,N,y):kt(function(){return x._promise(u,N,y)},{trans:x,transless:_e.transless||_e}):(function Q(z,D,q,$){if(z.idbdb&&(z._state.openComplete||_e.letThrough||z._vip)){var U=z._createTransaction(D,q,z._dbSchema);try{U.create(),z._state.PR1398_maxLoop=3}catch(L){return L.name===en.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return Q(z,D,q,$)})):vt(L)}return U._promise(D,function(L,W){return kt(function(){return _e.trans=U,$(L,W,U)})}).then(function(L){if(D==="readwrite")try{U.idbtrans.commit()}catch{}return D==="readonly"?L:U._completion.then(function(){return L})})}if(z._state.openComplete)return vt(new Ae.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return vt(new Ae.DatabaseClosed);z.open().catch(st)}return z._state.dbReadyPromise.then(function(){return Q(z,D,q,$)})})(this.db,u,[this.name],N);return k&&(M._consoleTask=k,M=M.catch(function(Q){return console.trace(Q),vt(Q)})),M}finally{O&&Qn()}},ut.prototype.get=function(u,m){var y=this;return u&&u.constructor===Object?this.where(u).first(m):u==null?vt(new Ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return y.core.get({trans:x,key:u}).then(function(_){return y.hook.reading.fire(_)})}).then(m)},ut.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(g(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var m=p(u);if(m.length===1)return this.where(m[0]).equals(u[m[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(O){if(O.compound&&m.every(function(Q){return 0<=O.keyPath.indexOf(Q)})){for(var M=0;M<m.length;++M)if(m.indexOf(O.keyPath[M])===-1)return!1;return!0}return!1}).sort(function(O,M){return O.keyPath.length-M.keyPath.length})[0];if(y&&this.db._maxKey!==Un)return N=y.keyPath.slice(0,m.length),this.where(N).equals(N.map(function(O){return u[O]}));!y&&Tn&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var x=this.schema.idxByName;function _(O,M){return Xe(O,M)===0}var N=m.reduce(function(z,M){var Q=z[0],z=z[1],D=x[M],q=u[M];return[Q||D,Q||!D?Ha(z,D&&D.multi?function($){return $=ue($,M),g($)&&$.some(function(U){return _(q,U)})}:function($){return _(q,ue($,M))}):z]},[null,null]),k=N[0],N=N[1];return k?this.where(k.name).equals(u[k.keyPath]).filter(N):y?this.filter(N):this.where(m).equals("")},ut.prototype.filter=function(u){return this.toCollection().and(u)},ut.prototype.count=function(u){return this.toCollection().count(u)},ut.prototype.offset=function(u){return this.toCollection().offset(u)},ut.prototype.limit=function(u){return this.toCollection().limit(u)},ut.prototype.each=function(u){return this.toCollection().each(u)},ut.prototype.toArray=function(u){return this.toCollection().toArray(u)},ut.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ut.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,g(u)?"[".concat(u.join("+"),"]"):u))},ut.prototype.reverse=function(){return this.toCollection().reverse()},ut.prototype.mapToClass=function(u){for(var m=this.db,y=this.name,x=((this.schema.mappedClass=u).prototype instanceof Fo&&(u=(N=>{var O=z,M=N;if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function Q(){this.constructor=O}function z(){return N!==null&&N.apply(this,arguments)||this}return i(O,M),O.prototype=M===null?Object.create(M):(Q.prototype=M.prototype,new Q),Object.defineProperty(z.prototype,"db",{get:function(){return m},enumerable:!1,configurable:!0}),z.prototype.table=function(){return y},z})(u)),new Set),_=u.prototype;_;_=b(_))Object.getOwnPropertyNames(_).forEach(function(N){return x.add(N)});function k(N){if(!N)return N;var O,M=Object.create(u.prototype);for(O in N)if(!x.has(O))try{M[O]=N[O]}catch{}return M}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),u},ut.prototype.defineClass=function(){return this.mapToClass(function(u){v(this,u)})},ut.prototype.add=function(u,m){var y=this,x=this.schema.primKey,_=x.auto,k=x.keyPath,N=u;return k&&_&&(N=bi(k)(u)),this._trans("readwrite",function(O){return y.core.mutate({trans:O,type:"add",keys:m!=null?[m]:null,values:[N]})}).then(function(O){return O.numFailures?ve.reject(O.failures[0]):O.lastResult}).then(function(O){if(k)try{te(u,k,O)}catch{}return O})},ut.prototype.upsert=function(u,m){var y=this,x=this.schema.primKey.keyPath;return this._trans("readwrite",function(_){return y.core.get({trans:_,key:u}).then(function(k){var N=k??{};return is(N,m),x&&te(N,x,u),y.core.mutate({trans:_,type:"put",values:[N],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[m]}}).then(function(O){return O.numFailures?ve.reject(O.failures[0]):!!k})})})},ut.prototype.update=function(u,m){return typeof u!="object"||g(u)?this.where(":id").equals(u).modify(m):(u=ue(u,this.schema.primKey.keyPath))===void 0?vt(new Ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(m)},ut.prototype.put=function(u,m){var y=this,x=this.schema.primKey,_=x.auto,k=x.keyPath,N=u;return k&&_&&(N=bi(k)(u)),this._trans("readwrite",function(O){return y.core.mutate({trans:O,type:"put",values:[N],keys:m!=null?[m]:null})}).then(function(O){return O.numFailures?ve.reject(O.failures[0]):O.lastResult}).then(function(O){if(k)try{te(u,k,O)}catch{}return O})},ut.prototype.delete=function(u){var m=this;return this._trans("readwrite",function(y){return m.core.mutate({trans:y,type:"delete",keys:[u]}).then(function(x){return cn(m,[u],x)}).then(function(x){return x.numFailures?ve.reject(x.failures[0]):void 0})})},ut.prototype.clear=function(){var u=this;return this._trans("readwrite",function(m){return u.core.mutate({trans:m,type:"deleteRange",range:kl}).then(function(y){return cn(u,null,y)})}).then(function(m){return m.numFailures?ve.reject(m.failures[0]):void 0})},ut.prototype.bulkGet=function(u){var m=this;return this._trans("readonly",function(y){return m.core.getMany({keys:u,trans:y}).then(function(x){return x.map(function(_){return m.hook.reading.fire(_)})})})},ut.prototype.bulkAdd=function(u,m,y){var x=this,_=Array.isArray(m)?m:void 0,k=(y=y||(_?void 0:m))?y.allKeys:void 0;return this._trans("readwrite",function(N){var O=x.schema.primKey,Q=O.auto,O=O.keyPath;if(O&&_)throw new Ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(_&&_.length!==u.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var M=u.length,Q=O&&Q?u.map(bi(O)):u;return x.core.mutate({trans:N,type:"add",keys:_,values:Q,wantResults:k}).then(function(z){var D=z.numFailures,q=z.failures;if(D===0)return k?z.results:z.lastResult;throw new Fe("".concat(x.name,".bulkAdd(): ").concat(D," of ").concat(M," operations failed"),q)})})},ut.prototype.bulkPut=function(u,m,y){var x=this,_=Array.isArray(m)?m:void 0,k=(y=y||(_?void 0:m))?y.allKeys:void 0;return this._trans("readwrite",function(N){var O=x.schema.primKey,Q=O.auto,O=O.keyPath;if(O&&_)throw new Ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(_&&_.length!==u.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var M=u.length,Q=O&&Q?u.map(bi(O)):u;return x.core.mutate({trans:N,type:"put",keys:_,values:Q,wantResults:k}).then(function(z){var D=z.numFailures,q=z.failures;if(D===0)return k?z.results:z.lastResult;throw new Fe("".concat(x.name,".bulkPut(): ").concat(D," of ").concat(M," operations failed"),q)})})},ut.prototype.bulkUpdate=function(u){var m=this,y=this.core,x=u.map(function(N){return N.key}),_=u.map(function(N){return N.changes}),k=[];return this._trans("readwrite",function(N){return y.getMany({trans:N,keys:x,cache:"clone"}).then(function(O){var M=[],Q=[],z=(u.forEach(function(D,q){var $=D.key,U=D.changes,L=O[q];if(L){for(var W=0,Z=Object.keys(U);W<Z.length;W++){var X=Z[W],ie=U[X];if(X===m.schema.primKey.keyPath){if(Xe(ie,$)!==0)throw new Ae.Constraint("Cannot update primary key in bulkUpdate()")}else te(L,X,ie)}k.push(q),M.push($),Q.push(L)}}),M.length);return y.mutate({trans:N,type:"put",keys:M,values:Q,updates:{keys:x,changeSpecs:_}}).then(function(D){var q=D.numFailures,$=D.failures;if(q===0)return z;for(var U=0,L=Object.keys($);U<L.length;U++){var W,Z=L[U],X=k[Number(Z)];X!=null&&(W=$[Z],delete $[Z],$[X]=W)}throw new Fe("".concat(m.name,".bulkUpdate(): ").concat(q," of ").concat(z," operations failed"),$)})})})},ut.prototype.bulkDelete=function(u){var m=this,y=u.length;return this._trans("readwrite",function(x){return m.core.mutate({trans:x,type:"delete",keys:u}).then(function(_){return cn(m,u,_)})}).then(function(x){var _=x.numFailures,k=x.failures;if(_===0)return x.lastResult;throw new Fe("".concat(m.name,".bulkDelete(): ").concat(_," of ").concat(y," operations failed"),k)})};var El=ut;function ut(){}function wi(u){function m(N,O){if(O){for(var M=arguments.length,Q=new Array(M-1);--M;)Q[M-1]=arguments[M];return y[N].subscribe.apply(null,Q),u}if(typeof N=="string")return y[N]}var y={};m.addEventType=k;for(var x=1,_=arguments.length;x<_;++x)k(arguments[x]);return m;function k(N,O,M){var Q,z;if(typeof N!="object")return O=O||wl,z={subscribers:[],fire:M=M||st,subscribe:function(D){z.subscribers.indexOf(D)===-1&&(z.subscribers.push(D),z.fire=O(z.fire,D))},unsubscribe:function(D){z.subscribers=z.subscribers.filter(function(q){return q!==D}),z.fire=z.subscribers.reduce(O,M)}},y[N]=m[N]=z;p(Q=N).forEach(function(D){var q=Q[D];if(g(q))k(D,Q[D][0],Q[D][1]);else{if(q!=="asap")throw new Ae.InvalidArgument("Invalid event config");var $=k(D,xr,function(){for(var U=arguments.length,L=new Array(U);U--;)L[U]=arguments[U];$.subscribers.forEach(function(W){Ee(function(){W.apply(null,L)})})})}})}}function an(u,m){return I(m).from({prototype:u}),m}function Na(u,m){return!(u.filter||u.algorithm||u.or)&&(m?u.justLimit:!u.replayFilter)}function ss(u,m){u.filter=Ha(u.filter,m)}function _i(u,m,y){var x=u.replayFilter;u.replayFilter=x?function(){return Ha(x(),m())}:m,u.justLimit=y&&!x}function fa(u,m){if(u.isPrimKey)return m.primaryKey;var y=m.getIndexByKeyPath(u.index);if(y)return y;throw new Ae.Schema("KeyPath "+u.index+" on object store "+m.name+" is not indexed")}function Nl(u,m,y){var x=fa(u,m.schema);return m.openCursor({trans:y,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:x,range:u.range}})}function Si(u,m,y,x){var _,k,N=u.replayFilter?Ha(u.filter,u.replayFilter()):u.filter;return u.or?(_={},k=function(O,M,Q){var z,D;N&&!N(M,Q,function(q){return M.stop(q)},function(q){return M.fail(q)})||((D=""+(z=M.primaryKey))=="[object ArrayBuffer]"&&(D=""+new Uint8Array(z)),j(_,D))||(_[D]=!0,m(O,M,Q))},Promise.all([u.or._iterate(k,y),Ka(Nl(u,x,y),u.algorithm,k,!u.keysOnly&&u.valueMapper)])):Ka(Nl(u,x,y),Ha(u.algorithm,N),m,!u.keysOnly&&u.valueMapper)}function Ka(u,m,y,x){var _=St(x?function(k,N,O){return y(x(k),N,O)}:y);return u.then(function(k){if(k)return k.start(function(){var N=function(){return k.continue()};m&&!m(k,function(O){return N=O},function(O){k.stop(O),N=st},function(O){k.fail(O),N=st})||_(k.value,k,function(O){return N=O}),N()})})}rt.prototype._read=function(u,m){var y=this._ctx;return y.error?y.table._trans(null,vt.bind(null,y.error)):y.table._trans("readonly",u).then(m)},rt.prototype._write=function(u){var m=this._ctx;return m.error?m.table._trans(null,vt.bind(null,m.error)):m.table._trans("readwrite",u,"locked")},rt.prototype._addAlgorithm=function(u){var m=this._ctx;m.algorithm=Ha(m.algorithm,u)},rt.prototype._iterate=function(u,m){return Si(this._ctx,u,m,this._ctx.table.core)},rt.prototype.clone=function(u){var m=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return u&&v(y,u),m._ctx=y,m},rt.prototype.raw=function(){return this._ctx.valueMapper=null,this},rt.prototype.each=function(u){var m=this._ctx;return this._read(function(y){return Si(m,u,y,m.table.core)})},rt.prototype.count=function(u){var m=this;return this._read(function(y){var x,_=m._ctx,k=_.table.core;return Na(_,!0)?k.count({trans:y,query:{index:fa(_,k.schema),range:_.range}}).then(function(N){return Math.min(N,_.limit)}):(x=0,Si(_,function(){return++x,!1},y,k).then(function(){return x}))}).then(u)},rt.prototype.sortBy=function(u,m){var y=u.split(".").reverse(),x=y[0],_=y.length-1;function k(M,Q){return Q?k(M[y[Q]],Q-1):M[x]}var N=this._ctx.dir==="next"?1:-1;function O(M,Q){return Xe(k(M,_),k(Q,_))*N}return this.toArray(function(M){return M.sort(O)}).then(m)},rt.prototype.toArray=function(u){var m=this;return this._read(function(y){var x,_,k,N=m._ctx;return N.dir==="next"&&Na(N,!0)&&0<N.limit?(x=N.valueMapper,_=fa(N,N.table.core.schema),N.table.core.query({trans:y,limit:N.limit,values:!0,query:{index:_,range:N.range}}).then(function(O){return O=O.result,x?O.map(x):O})):(k=[],Si(N,function(O){return k.push(O)},y,N.table.core).then(function(){return k}))},u)},rt.prototype.offset=function(u){var m=this._ctx;return u<=0||(m.offset+=u,Na(m)?_i(m,function(){var y=u;return function(x,_){return y===0||(y===1?--y:_(function(){x.advance(y),y=0}),!1)}}):_i(m,function(){var y=u;return function(){return--y<0}})),this},rt.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),_i(this._ctx,function(){var m=u;return function(y,x,_){return--m<=0&&x(_),0<=m}},!0),this},rt.prototype.until=function(u,m){return ss(this._ctx,function(y,x,_){return!u(y.value)||(x(_),m)}),this},rt.prototype.first=function(u){return this.limit(1).toArray(function(m){return m[0]}).then(u)},rt.prototype.last=function(u){return this.reverse().first(u)},rt.prototype.filter=function(u){var m;return ss(this._ctx,function(y){return u(y.value)}),(m=this._ctx).isMatch=Ha(m.isMatch,u),this},rt.prototype.and=function(u){return this.filter(u)},rt.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},rt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},rt.prototype.desc=function(){return this.reverse()},rt.prototype.eachKey=function(u){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(y,x){u(x.key,x)})},rt.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},rt.prototype.eachPrimaryKey=function(u){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(y,x){u(x.primaryKey,x)})},rt.prototype.keys=function(u){var m=this._ctx,y=(m.keysOnly=!m.isMatch,[]);return this.each(function(x,_){y.push(_.key)}).then(function(){return y}).then(u)},rt.prototype.primaryKeys=function(u){var m=this._ctx;if(m.dir==="next"&&Na(m,!0)&&0<m.limit)return this._read(function(x){var _=fa(m,m.table.core.schema);return m.table.core.query({trans:x,values:!1,limit:m.limit,query:{index:_,range:m.range}})}).then(function(x){return x.result}).then(u);m.keysOnly=!m.isMatch;var y=[];return this.each(function(x,_){y.push(_.primaryKey)}).then(function(){return y}).then(u)},rt.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},rt.prototype.firstKey=function(u){return this.limit(1).keys(function(m){return m[0]}).then(u)},rt.prototype.lastKey=function(u){return this.reverse().firstKey(u)},rt.prototype.distinct=function(){var u,m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];return m&&m.multi&&(u={},ss(this._ctx,function(x){var x=x.primaryKey.toString(),_=j(u,x);return u[x]=!0,!_})),this},rt.prototype.modify=function(u){var m=this,y=this._ctx;return this._write(function(x){function _(L,W){var Z=W.failures;q+=L-W.numFailures;for(var X=0,ie=p(Z);X<ie.length;X++){var he=ie[X];D.push(Z[he])}}var k=typeof u=="function"?u:function(L){return is(L,u)},N=y.table.core,z=N.schema.primaryKey,O=z.outbound,M=z.extractKey,Q=200,z=m.db._options.modifyChunkSize,D=(z&&(Q=typeof z=="object"?z[N.name]||z["*"]||200:z),[]),q=0,$=[],U=u===Tl;return m.clone().primaryKeys().then(function(L){function W(X){var ie=Math.min(Q,L.length-X),he=L.slice(X,X+ie);return(U?Promise.resolve([]):N.getMany({trans:x,keys:he,cache:"immutable"})).then(function(ge){var ye=[],me=[],Se=O?[]:null,be=U?he:[];if(!U)for(var pe=0;pe<ie;++pe){var je=ge[pe],$e={value:qe(je),primKey:L[X+pe]};k.call($e,$e.value,$e)!==!1&&($e.value==null?be.push(L[X+pe]):O||Xe(M(je),M($e.value))===0?(me.push($e.value),O&&Se.push(L[X+pe])):(be.push(L[X+pe]),ye.push($e.value)))}return Promise.resolve(0<ye.length&&N.mutate({trans:x,type:"add",values:ye}).then(function(We){for(var Me in We.failures)be.splice(parseInt(Me),1);_(ye.length,We)})).then(function(){return(0<me.length||Z&&typeof u=="object")&&N.mutate({trans:x,type:"put",keys:Se,values:me,criteria:Z,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<X}).then(function(We){return _(me.length,We)})}).then(function(){return(0<be.length||Z&&U)&&N.mutate({trans:x,type:"delete",keys:be,criteria:Z,isAdditionalChunk:0<X}).then(function(We){return cn(y.table,be,We)}).then(function(We){return _(be.length,We)})}).then(function(){return L.length>X+ie&&W(X+Q)})})}var Z=Na(y)&&y.limit===1/0&&(typeof u!="function"||U)&&{index:y.index,range:y.range};return W(0).then(function(){if(0<D.length)throw new Ie("Error modifying one or more objects",D,q,$);return L.length})})})},rt.prototype.delete=function(){var u=this._ctx,m=u.range;return!Na(u)||u.table.schema.yProps||!u.isPrimKey&&m.type!==3?this.modify(Tl):this._write(function(y){var x=u.table.core.schema.primaryKey,_=m;return u.table.core.count({trans:y,query:{index:x,range:_}}).then(function(k){return u.table.core.mutate({trans:y,type:"deleteRange",range:_}).then(function(M){var O=M.failures,M=M.numFailures;if(M)throw new Ie("Could not delete some values",Object.keys(O).map(function(Q){return O[Q]}),k-M);return k-M})})})};var Qc=rt;function rt(){}var Tl=function(u,m){return m.value=null};function Ol(u,m){return u<m?-1:u===m?0:1}function Xc(u,m){return m<u?-1:u===m?0:1}function En(u,m,y){return u=u instanceof Ga?new u.Collection(u):u,u._ctx.error=new(y||TypeError)(m),u}function ha(u){return new u.Collection(u,function(){return ls("")}).limit(0)}function On($,m,y,x){var _,k,N,O,M,Q,z,D=y.length;if(!y.every(function(L){return typeof L=="string"}))return En($,Kt);function q(L){_=L==="next"?function(Z){return Z.toUpperCase()}:function(Z){return Z.toLowerCase()},k=L==="next"?function(Z){return Z.toLowerCase()}:function(Z){return Z.toUpperCase()},N=L==="next"?Ol:Xc;var W=y.map(function(Z){return{lower:k(Z),upper:_(Z)}}).sort(function(Z,X){return N(Z.lower,X.lower)});O=W.map(function(Z){return Z.upper}),M=W.map(function(Z){return Z.lower}),z=(Q=L)==="next"?"":x}q("next");var $=new $.Collection($,function(){return Wn(O[0],M[D-1]+x)}),U=($._ondirectionchange=function(L){q(L)},0);return $._addAlgorithm(function(L,W,Z){var X=L.key;if(typeof X=="string"){var ie=k(X);if(m(ie,M,U))return!0;for(var he=null,ge=U;ge<D;++ge){var ye=((me,Se,be,pe,je,$e)=>{for(var We=Math.min(me.length,pe.length),Me=-1,Ke=0;Ke<We;++Ke){var bt=Se[Ke];if(bt!==pe[Ke])return je(me[Ke],be[Ke])<0?me.substr(0,Ke)+be[Ke]+be.substr(Ke+1):je(me[Ke],pe[Ke])<0?me.substr(0,Ke)+pe[Ke]+be.substr(Ke+1):0<=Me?me.substr(0,Me)+Se[Me]+be.substr(Me+1):null;je(me[Ke],bt)<0&&(Me=Ke)}return We<pe.length&&$e==="next"?me+be.substr(me.length):We<me.length&&$e==="prev"?me.substr(0,be.length):Me<0?null:me.substr(0,Me)+pe[Me]+be.substr(Me+1)})(X,ie,O[ge],M[ge],N,Q);ye===null&&he===null?U=ge+1:(he===null||0<N(he,ye))&&(he=ye)}W(he!==null?function(){L.continue(he+z)}:Z)}return!1}),$}function Wn(u,m,y,x){return{type:2,lower:u,upper:m,lowerOpen:y,upperOpen:x}}function ls(u){return{type:1,lower:u,upper:u}}Object.defineProperty(Tt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Tt.prototype.between=function(u,m,y,x){y=y!==!1,x=x===!0;try{return 0<this._cmp(u,m)||this._cmp(u,m)===0&&(y||x)&&(!y||!x)?ha(this):new this.Collection(this,function(){return Wn(u,m,!y,!x)})}catch{return En(this,bn)}},Tt.prototype.equals=function(u){return u==null?En(this,bn):new this.Collection(this,function(){return ls(u)})},Tt.prototype.above=function(u){return u==null?En(this,bn):new this.Collection(this,function(){return Wn(u,void 0,!0)})},Tt.prototype.aboveOrEqual=function(u){return u==null?En(this,bn):new this.Collection(this,function(){return Wn(u,void 0,!1)})},Tt.prototype.below=function(u){return u==null?En(this,bn):new this.Collection(this,function(){return Wn(void 0,u,!1,!0)})},Tt.prototype.belowOrEqual=function(u){return u==null?En(this,bn):new this.Collection(this,function(){return Wn(void 0,u)})},Tt.prototype.startsWith=function(u){return typeof u!="string"?En(this,Kt):this.between(u,u+Un,!0,!0)},Tt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):On(this,function(m,y){return m.indexOf(y[0])===0},[u],Un)},Tt.prototype.equalsIgnoreCase=function(u){return On(this,function(m,y){return m===y[0]},[u],"")},Tt.prototype.anyOfIgnoreCase=function(){var u=Je.apply(at,arguments);return u.length===0?ha(this):On(this,function(m,y){return y.indexOf(m)!==-1},u,"")},Tt.prototype.startsWithAnyOfIgnoreCase=function(){var u=Je.apply(at,arguments);return u.length===0?ha(this):On(this,function(m,y){return y.some(function(x){return m.indexOf(x)===0})},u,Un)},Tt.prototype.anyOf=function(){var u,m,y=this,x=Je.apply(at,arguments),_=this._cmp;try{x.sort(_)}catch{return En(this,bn)}return x.length===0?ha(this):((u=new this.Collection(this,function(){return Wn(x[0],x[x.length-1])}))._ondirectionchange=function(k){_=k==="next"?y._ascending:y._descending,x.sort(_)},m=0,u._addAlgorithm(function(k,N,O){for(var M=k.key;0<_(M,x[m]);)if(++m===x.length)return N(O),!1;return _(M,x[m])===0||(N(function(){k.continue(x[m])}),!1)}),u)},Tt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Tt.prototype.noneOf=function(){var u=Je.apply(at,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return En(this,bn)}var m=u.reduce(function(y,x){return y?y.concat([[y[y.length-1][1],x]]):[[-1/0,x]]},null);return m.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},Tt.prototype.inAnyRange=function(u,Z){var y=this,x=this._cmp,_=this._ascending,k=this._descending,N=this._min,O=this._max;if(u.length===0)return ha(this);if(!u.every(function(X){return X[0]!==void 0&&X[1]!==void 0&&_(X[0],X[1])<=0}))return En(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ae.InvalidArgument);var M=!Z||Z.includeLowers!==!1,Q=Z&&Z.includeUppers===!0,z,D=_;function q(X,ie){return D(X[0],ie[0])}try{(z=u.reduce(function(X,ie){for(var he=0,ge=X.length;he<ge;++he){var ye=X[he];if(x(ie[0],ye[1])<0&&0<x(ie[1],ye[0])){ye[0]=N(ye[0],ie[0]),ye[1]=O(ye[1],ie[1]);break}}return he===ge&&X.push(ie),X},[])).sort(q)}catch{return En(this,bn)}var $=0,U=Q?function(X){return 0<_(X,z[$][1])}:function(X){return 0<=_(X,z[$][1])},L=M?function(X){return 0<k(X,z[$][0])}:function(X){return 0<=k(X,z[$][0])},W=U,Z=new this.Collection(this,function(){return Wn(z[0][0],z[z.length-1][1],!M,!Q)});return Z._ondirectionchange=function(X){D=X==="next"?(W=U,_):(W=L,k),z.sort(q)},Z._addAlgorithm(function(X,ie,he){for(var ge,ye=X.key;W(ye);)if(++$===z.length)return ie(he),!1;return!U(ge=ye)&&!L(ge)||(y._cmp(ye,z[$][1])===0||y._cmp(ye,z[$][0])===0||ie(function(){D===_?X.continue(z[$][0]):X.continue(z[$][1])}),!1)}),Z},Tt.prototype.startsWithAnyOf=function(){var u=Je.apply(at,arguments);return u.every(function(m){return typeof m=="string"})?u.length===0?ha(this):this.inAnyRange(u.map(function(m){return[m,m+Un]})):En(this,"startsWithAnyOf() only works with strings")};var Ga=Tt;function Tt(){}function Ln(u){return St(function(m){return Ia(m),u(m.target.error),!1})}function Ia(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Er="storagemutated",Va="x-storagemutated-1",rn=wi(null,Er),Al=(xn.prototype._lock=function(){return de(!_e.global),++this._reculock,this._reculock!==1||_e.global||(_e.lockOwnerFor=this),this},xn.prototype._unlock=function(){if(de(!_e.global),--this._reculock==0)for(_e.global||(_e.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{zn(u[1],u[0])}catch{}}return this},xn.prototype._locked=function(){return this._reculock&&_e.lockOwnerFor!==this},xn.prototype.create=function(u){var m=this;if(this.mode){var y=this.db.idbdb,x=this.db._state.dbOpenError;if(de(!this.idbtrans),!u&&!y)switch(x&&x.name){case"DatabaseClosedError":throw new Ae.DatabaseClosed(x);case"MissingAPIError":throw new Ae.MissingAPI(x.message,x);default:throw new Ae.OpenFailed(x)}if(!this.active)throw new Ae.TransactionInactive;de(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=St(function(_){Ia(_),m._reject(u.error)}),u.onabort=St(function(_){Ia(_),m.active&&m._reject(new Ae.Abort(u.error)),m.active=!1,m.on("abort").fire(_)}),u.oncomplete=St(function(){m.active=!1,m._resolve(),"mutatedParts"in u&&rn.storagemutated.fire(u.mutatedParts)})}return this},xn.prototype._promise=function(u,m,y){var x,_=this;return u==="readwrite"&&this.mode!=="readwrite"?vt(new Ae.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ve(function(k,N){_._blockedFuncs.push([function(){_._promise(u,m,y).then(k,N)},_e])}):y?kt(function(){var k=new ve(function(N,O){_._lock();var M=m(N,O,_);M&&M.then&&M.then(N,O)});return k.finally(function(){return _._unlock()}),k._lib=!0,k}):((x=new ve(function(k,N){var O=m(k,N,_);O&&O.then&&O.then(k,N)}))._lib=!0,x):vt(new Ae.TransactionInactive)},xn.prototype._root=function(){return this.parent?this.parent._root():this},xn.prototype.waitFor=function(u){var m,y=this._root(),x=ve.resolve(u),_=(y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return x}):(y._waitingFor=x,y._waitingQueue=[],m=y.idbtrans.objectStore(y.storeNames[0]),(function k(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(m.get(-1/0).onsuccess=k)})()),y._waitingFor);return new ve(function(k,N){x.then(function(O){return y._waitingQueue.push(St(k.bind(null,O)))},function(O){return y._waitingQueue.push(St(N.bind(null,O)))}).finally(function(){y._waitingFor===_&&(y._waitingFor=null)})})},xn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ae.Abort))},xn.prototype.table=function(u){var m=this._memoizedTables||(this._memoizedTables={});if(j(m,u))return m[u];var y=this.schema[u];if(y)return(y=new this.db.Table(u,y,this)).core=this.db.core.table(u),m[u]=y;throw new Ae.NotFound("Table "+u+" not part of transaction")},xn);function xn(){}function Jn(u,m,y,x,_,k,N,O){return{name:u,keyPath:m,unique:y,multi:x,auto:_,compound:k,src:(y&&!N?"&":"")+(x?"*":"")+(_?"++":"")+os(m),type:O}}function os(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function Nr(u,m,y){return{name:u,primKey:m,indexes:y,mappedClass:null,idxByName:(x=function(_){return[_.name,_]},y.reduce(function(_,k,N){return k=x(k,N),k&&(_[k[0]]=k[1]),_},{}))};var x}var Tr=function(u){try{return u.only([[]]),Tr=function(){return[[]]},[[]]}catch{return Tr=function(){return Un},Un}};function Or(u){return u==null?function(){}:typeof u=="string"?(m=u).split(".").length===1?function(y){return y[m]}:function(y){return ue(y,m)}:function(y){return ue(y,u)};var m}function ji(u){return[].slice.call(u)}var eu=0;function Vt(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Ya(u,m,M){function x(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var D=U.lower,q=U.upper,$=U.lowerOpen,U=U.upperOpen;return D===void 0?q===void 0?null:m.upperBound(q,!!U):q===void 0?m.lowerBound(D,!!$):m.bound(D,q,!!$,!!U)}function _(z){var D,q=z.name;return{name:q,schema:z,mutate:function($){var U=$.trans,L=$.type,W=$.keys,Z=$.values,X=$.range;return new Promise(function(ie,he){ie=St(ie);var ge=U.objectStore(q),ye=ge.keyPath==null,me=L==="put"||L==="add";if(!me&&L!=="delete"&&L!=="deleteRange")throw new Error("Invalid operation type: "+L);var Se,be=(W||Z||{length:1}).length;if(W&&Z&&W.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(be===0)return ie({numFailures:0,failures:{},results:[],lastResult:void 0});function pe(ft){++We,Ia(ft)}var je=[],$e=[],We=0;if(L==="deleteRange"){if(X.type===4)return ie({numFailures:We,failures:$e,results:[],lastResult:void 0});X.type===3?je.push(Se=ge.clear()):je.push(Se=ge.delete(x(X)))}else{var ye=me?ye?[Z,W]:[Z,null]:[W,null],Me=ye[0],Ke=ye[1];if(me)for(var bt=0;bt<be;++bt)je.push(Se=Ke&&Ke[bt]!==void 0?ge[L](Me[bt],Ke[bt]):ge[L](Me[bt])),Se.onerror=pe;else for(bt=0;bt<be;++bt)je.push(Se=ge[L](Me[bt])),Se.onerror=pe}function _n(ft){ft=ft.target.result,je.forEach(function(Ca,zr){return Ca.error!=null&&($e[zr]=Ca.error)}),ie({numFailures:We,failures:$e,results:L==="delete"?W:je.map(function(Ca){return Ca.result}),lastResult:ft})}Se.onerror=function(ft){pe(ft),_n(ft)},Se.onsuccess=_n})},getMany:function($){var U=$.trans,L=$.keys;return new Promise(function(W,Z){W=St(W);for(var X,ie=U.objectStore(q),he=L.length,ge=new Array(he),ye=0,me=0,Se=function(je){je=je.target,ge[je._pos]=je.result,++me===ye&&W(ge)},be=Ln(Z),pe=0;pe<he;++pe)L[pe]!=null&&((X=ie.get(L[pe]))._pos=pe,X.onsuccess=Se,X.onerror=be,++ye);ye===0&&W(ge)})},get:function($){var U=$.trans,L=$.key;return new Promise(function(W,Z){W=St(W);var X=U.objectStore(q).get(L);X.onsuccess=function(ie){return W(ie.target.result)},X.onerror=Ln(Z)})},query:(D=O,function($){return new Promise(function(U,L){U=St(U);var W,Z,X,me=$.trans,ie=$.values,he=$.limit,ye=$.query,ge=he===1/0?void 0:he,Se=ye.index,ye=ye.range,me=me.objectStore(q),me=Se.isPrimaryKey?me:me.index(Se.name),Se=x(ye);if(he===0)return U({result:[]});D?((ye=ie?me.getAll(Se,ge):me.getAllKeys(Se,ge)).onsuccess=function(be){return U({result:be.target.result})},ye.onerror=Ln(L)):(W=0,Z=!ie&&"openKeyCursor"in me?me.openKeyCursor(Se):me.openCursor(Se),X=[],Z.onsuccess=function(be){var pe=Z.result;return!pe||(X.push(ie?pe.value:pe.primaryKey),++W===he)?U({result:X}):void pe.continue()},Z.onerror=Ln(L))})}),openCursor:function($){var U=$.trans,L=$.values,W=$.query,Z=$.reverse,X=$.unique;return new Promise(function(ie,he){ie=St(ie);var me=W.index,ge=W.range,ye=U.objectStore(q),ye=me.isPrimaryKey?ye:ye.index(me.name),me=Z?X?"prevunique":"prev":X?"nextunique":"next",Se=!L&&"openKeyCursor"in ye?ye.openKeyCursor(x(ge),me):ye.openCursor(x(ge),me);Se.onerror=Ln(he),Se.onsuccess=St(function(be){var pe,je,$e,We,Me=Se.result;Me?(Me.___id=++eu,Me.done=!1,pe=Me.continue.bind(Me),je=(je=Me.continuePrimaryKey)&&je.bind(Me),$e=Me.advance.bind(Me),We=function(){throw new Error("Cursor not stopped")},Me.trans=U,Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=function(){throw new Error("Cursor not started")},Me.fail=St(he),Me.next=function(){var Ke=this,bt=1;return this.start(function(){return bt--?Ke.continue():Ke.stop()}).then(function(){return Ke})},Me.start=function(Ke){function bt(){if(Se.result)try{Ke()}catch(ft){Me.fail(ft)}else Me.done=!0,Me.start=function(){throw new Error("Cursor behind last entry")},Me.stop()}var _n=new Promise(function(ft,Ca){ft=St(ft),Se.onerror=Ln(Ca),Me.fail=Ca,Me.stop=function(zr){Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=We,ft(zr)}});return Se.onsuccess=St(function(ft){Se.onsuccess=bt,bt()}),Me.continue=pe,Me.continuePrimaryKey=je,Me.advance=$e,bt(),_n},ie(Me)):ie(null)},he)})},count:function($){var U=$.query,L=$.trans,W=U.index,Z=U.range;return new Promise(function(X,ie){var he=L.objectStore(q),he=W.isPrimaryKey?he:he.index(W.name),ge=x(Z),ge=ge?he.count(ge):he.count();ge.onsuccess=St(function(ye){return X(ye.target.result)}),ge.onerror=Ln(ie)})}}}k=M,N=ji((M=u).objectStoreNames);var k,M={schema:{name:M.name,tables:N.map(function(z){return k.objectStore(z)}).map(function(z){var D=z.keyPath,q=z.autoIncrement,U=g(D),$={},U={name:z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:D==null,compound:U,keyPath:D,autoIncrement:q,unique:!0,extractKey:Or(D)},indexes:ji(z.indexNames).map(function(L){return z.index(L)}).map(function(X){var ie=X.name,W=X.unique,Z=X.multiEntry,X=X.keyPath,ie={name:ie,compound:g(X),keyPath:X,unique:W,multiEntry:Z,extractKey:Or(X)};return $[Vt(X)]=ie}),getIndexByKeyPath:function(L){return $[Vt(L)]}};return $[":id"]=U.primaryKey,D!=null&&($[Vt(D)]=U.primaryKey),U})},hasGetAll:0<N.length&&"getAll"in k.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},N=M.schema,O=M.hasGetAll,M=N.tables.map(_),Q={};return M.forEach(function(z){return Q[z.name]=z}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(z){if(Q[z])return Q[z];throw new Error("Table '".concat(z,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Tr(m),schema:N}}function us(u,m,y,x){return y=y.IDBKeyRange,m=Ya(m,y,x),{dbcore:u.dbcore.reduce(function(_,k){return k=k.create,s(s({},_),k(_))},m)}}function Ta(u,m){var y=m.db,y=us(u._middlewares,y,u._deps,m);u.core=y.dbcore,u.tables.forEach(function(x){var _=x.name;u.core.schema.tables.some(function(k){return k.name===_})&&(x.core=u.core.table(_),u[_]instanceof u.Table)&&(u[_].core=x.core)})}function cs(u,m,y,x){y.forEach(function(_){var k=x[_];m.forEach(function(N){var O=(function M(Q,z){return V(Q,z)||(Q=b(Q))&&M(Q,z)})(N,_);(!O||"value"in O&&O.value===void 0)&&(N===u.Transaction.prototype||N instanceof u.Transaction?B(N,_,{get:function(){return this.table(_)},set:function(M){A(this,_,{value:M,writable:!0,configurable:!0,enumerable:!0})}}):N[_]=new u.Table(_,k))})})}function ki(u,m){m.forEach(function(y){for(var x in y)y[x]instanceof u.Table&&delete y[x]})}function Cl(u,m){return u._cfg.version-m._cfg.version}function Ei(u,m,y,x){var _=u._dbSchema,k=(y.objectStoreNames.contains("$meta")&&!_.$meta&&(_.$meta=Nr("$meta",nu("")[0],[]),u._storeNames.push("$meta")),u._createTransaction("readwrite",u._storeNames,_)),N=(k.create(y),k._completion.catch(x),k._reject.bind(k)),O=_e.transless||_e;kt(function(){if(_e.trans=k,_e.transless=O,m!==0)return Ta(u,y),Q=m,((M=k).storeNames.includes("$meta")?M.table("$meta").get("version").then(function(z){return z??Q}):ve.resolve(Q)).then(function(W){var D=u,q=W,$=k,U=y,L=[],W=D._versions,Z=D._dbSchema=Ar(0,D.idbdb,U);return(W=W.filter(function(X){return X._cfg.version>=q})).length===0?ve.resolve():(W.forEach(function(X){L.push(function(){var ie,he,ge,ye=Z,me=X._cfg.dbschema,Se=(ms(D,ye,U),ms(D,me,U),Z=D._dbSchema=me,fs(ye,me)),be=(Se.add.forEach(function(pe){Rl(U,pe[0],pe[1].primKey,pe[1].indexes)}),Se.change.forEach(function(pe){if(pe.recreate)throw new Ae.Upgrade("Not yet support for changing primary key");var je=U.objectStore(pe.name);pe.add.forEach(function($e){return hs(je,$e)}),pe.change.forEach(function($e){je.deleteIndex($e.name),hs(je,$e)}),pe.del.forEach(function($e){return je.deleteIndex($e)})}),X._cfg.contentUpgrade);if(be&&X._cfg.version>q)return Ta(D,U),$._memoizedTables={},ie=Ne(me),Se.del.forEach(function(pe){ie[pe]=ye[pe]}),ki(D,[D.Transaction.prototype]),cs(D,[D.Transaction.prototype],p(ie),ie),$.schema=ie,(he=H(be))&&Ht(),me=ve.follow(function(){var pe;(ge=be($))&&he&&(pe=kn.bind(null,null),ge.then(pe,pe))}),ge&&typeof ge.then=="function"?ve.resolve(ge):me.then(function(){return ge})}),L.push(function(ie){var he,ge,ye=X._cfg.dbschema;he=ye,ge=ie,[].slice.call(ge.db.objectStoreNames).forEach(function(me){return he[me]==null&&ge.db.deleteObjectStore(me)}),ki(D,[D.Transaction.prototype]),cs(D,[D.Transaction.prototype],D._storeNames,D._dbSchema),$.schema=D._dbSchema}),L.push(function(ie){D.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(D.idbdb.version/10)===X._cfg.version?(D.idbdb.deleteObjectStore("$meta"),delete D._dbSchema.$meta,D._storeNames=D._storeNames.filter(function(he){return he!=="$meta"})):ie.objectStore("$meta").put(X._cfg.version,"version"))})}),(function X(){return L.length?ve.resolve(L.shift()($.idbtrans)).then(X):ve.resolve()})().then(function(){tu(Z,U)}))}).catch(N);var M,Q;p(_).forEach(function(z){Rl(y,z,_[z].primKey,_[z].indexes)}),Ta(u,y),ve.follow(function(){return u.on.populate.fire(k)}).catch(N)})}function ds(u,m){tu(u._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var y=Ar(0,u.idbdb,m);ms(u,u._dbSchema,m);for(var x=0,_=fs(y,u._dbSchema).change;x<_.length;x++){var k=(N=>{if(N.change.length||N.recreate)return console.warn("Unable to patch indexes of table ".concat(N.name," because it has changes on the type of index or primary key.")),{value:void 0};var O=m.objectStore(N.name);N.add.forEach(function(M){Tn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(N.name,".").concat(M.src)),hs(O,M)})})(_[x]);if(typeof k=="object")return k.value}}function fs(u,m){var y,x={del:[],add:[],change:[]};for(y in u)m[y]||x.del.push(y);for(y in m){var _=u[y],k=m[y];if(_){var N={name:y,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(_.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||_.primKey.auto!==k.primKey.auto)N.recreate=!0,x.change.push(N);else{var O=_.idxByName,M=k.idxByName,Q=void 0;for(Q in O)M[Q]||N.del.push(Q);for(Q in M){var z=O[Q],D=M[Q];z?z.src!==D.src&&N.change.push(D):N.add.push(D)}(0<N.del.length||0<N.add.length||0<N.change.length)&&x.change.push(N)}}else x.add.push([y,k])}return x}function Rl(u,m,y,x){var _=u.db.createObjectStore(m,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});x.forEach(function(k){return hs(_,k)})}function tu(u,m){p(u).forEach(function(y){m.db.objectStoreNames.contains(y)||(Tn&&console.debug("Dexie: Creating missing table",y),Rl(m,y,u[y].primKey,u[y].indexes))})}function hs(u,m){u.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function Ar(u,m,y){var x={};return K(m.objectStoreNames,0).forEach(function(_){for(var k=y.objectStore(_),N=Jn(os(Q=k.keyPath),Q||"",!0,!1,!!k.autoIncrement,Q&&typeof Q!="string",!0),O=[],M=0;M<k.indexNames.length;++M){var z=k.index(k.indexNames[M]),Q=z.keyPath,z=Jn(z.name,Q,!!z.unique,!!z.multiEntry,!1,Q&&typeof Q!="string",!1);O.push(z)}x[_]=Nr(_,N,O)}),x}function ms(u,m,y){for(var x=y.db.objectStoreNames,_=0;_<x.length;++_){var k=x[_],N=y.objectStore(k);u._hasGetAll="getAll"in N;for(var O=0;O<N.indexNames.length;++O){var M,Q=N.indexNames[O],z=N.index(Q).keyPath,z=typeof z=="string"?z:"["+K(z).join("+")+"]";m[k]&&(M=m[k].idxByName[z])&&(M.name=Q,delete m[k].idxByName[z],m[k].idxByName[Q]=M)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function nu(u){return u.split(",").map(function(m,y){var _=m.split(":"),x=(x=_[1])==null?void 0:x.trim(),_=(m=_[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return Jn(_,k||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),g(k),y===0,x)})}Cr.prototype._createTableSchema=Nr,Cr.prototype._parseIndexSyntax=nu,Cr.prototype._parseStoresSpec=function(u,m){var y=this;p(u).forEach(function(x){if(u[x]!==null){var _=y._parseIndexSyntax(u[x]),k=_.shift();if(!k)throw new Ae.Schema("Invalid schema for table "+x+": "+u[x]);if(k.unique=!0,k.multi)throw new Ae.Schema("Primary key cannot be multiEntry*");_.forEach(function(N){if(N.auto)throw new Ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!N.keyPath)throw new Ae.Schema("Index must have a name and cannot be an empty string")}),k=y._createTableSchema(x,k,_),m[x]=k}})},Cr.prototype.stores=function(y){var m=this.db,y=(this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,y):y,m._versions),x={},_={};return y.forEach(function(k){v(x,k._cfg.storesSource),_=k._cfg.dbschema={},k._parseStoresSpec(x,_)}),m._dbSchema=_,ki(m,[m._allTables,m,m.Transaction.prototype]),cs(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],p(_),_),m._storeNames=p(_),this},Cr.prototype.upgrade=function(u){return this._cfg.contentUpgrade=oi(this._cfg.contentUpgrade||st,u),this};var Wc=Cr;function Cr(){}function Dl(u,m){var y=u._dbNamesDB;return y||(y=u._dbNamesDB=new Fn(vi,{addons:[],indexedDB:u,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function ps(u){return u&&typeof u.databases=="function"}function Ml(u){return kt(function(){return _e.letThrough=!0,u()})}function zl(u){return!("from"in u)}var sn=function(u,m){var y;if(!this)return y=new sn,u&&"d"in u&&v(y,u),y;v(this,arguments.length?{d:1,from:u,to:1<arguments.length?m:u}:{d:0})};function Ni(u,m,y){var x=Xe(m,y);if(!isNaN(x)){if(0<x)throw RangeError();if(zl(u))return v(u,{from:m,to:y,d:1});var x=u.l,_=u.r;if(Xe(y,u.from)<0)return x?Ni(x,m,y):u.l={from:m,to:y,d:1,l:null,r:null},ru(u);if(0<Xe(m,u.to))return _?Ni(_,m,y):u.r={from:m,to:y,d:1,l:null,r:null},ru(u);Xe(m,u.from)<0&&(u.from=m,u.l=null,u.d=_?_.d+1:1),0<Xe(y,u.to)&&(u.to=y,u.r=null,u.d=u.l?u.l.d+1:1),m=!u.r,x&&!u.l&&Qa(u,x),_&&m&&Qa(u,_)}}function Qa(u,m){zl(m)||(function y(x,_){var k=_.from,N=_.l,O=_.r;Ni(x,k,_.to),N&&y(x,N),O&&y(x,O)})(u,m)}function au(u,m){var y=gs(m),x=y.next();if(!x.done)for(var _=x.value,k=gs(u),N=k.next(_.from),O=N.value;!x.done&&!N.done;){if(Xe(O.from,_.to)<=0&&0<=Xe(O.to,_.from))return!0;Xe(_.from,O.from)<0?_=(x=y.next(O.from)).value:O=(N=k.next(_.from)).value}return!1}function gs(u){var m=zl(u)?null:{s:0,n:u};return{next:function(y){for(var x=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,x)for(;m.n.l&&Xe(y,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!x||Xe(y,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function ru(u){var m,y,x,_=(((_=u.r)==null?void 0:_.d)||0)-(((_=u.l)==null?void 0:_.d)||0),_=1<_?"r":_<-1?"l":"";_&&(m=_=="r"?"l":"r",y=s({},u),x=u[_],u.from=x.from,u.to=x.to,u[_]=x[_],y[_]=x[m],(u[m]=y).d=Ul(y)),u.d=Ul(u)}function Ul(y){var m=y.r,y=y.l;return(m?y?Math.max(m.d,y.d):m.d:y?y.d:0)+1}function ys(u,m){return p(m).forEach(function(y){u[y]?Qa(u[y],m[y]):u[y]=(function x(_){var k,N,O={};for(k in _)j(_,k)&&(N=_[k],O[k]=!N||typeof N!="object"||Nt.has(N.constructor)?N:x(N));return O})(m[y])}),u}function Ll(u,m){return u.all||m.all||Object.keys(u).some(function(y){return m[y]&&au(m[y],u[y])})}T(sn.prototype,((vn={add:function(u){return Qa(this,u),this},addKey:function(u){return Ni(this,u,u),this},addKeys:function(u){var m=this;return u.forEach(function(y){return Ni(m,y,y)}),this},hasKey:function(u){var m=gs(this).next(u).value;return m&&Xe(m.from,u)<=0&&0<=Xe(m.to,u)}})[re]=function(){return gs(this)},vn));var Xa={},ql={},Bl=!1;function vs(u){ys(ql,u),Bl||(Bl=!0,setTimeout(function(){Bl=!1,Pl(ql,!(ql={}))},0))}function Pl(u,m){m===void 0&&(m=!1);var y=new Set;if(u.all)for(var x=0,_=Object.values(Xa);x<_.length;x++)iu(O=_[x],u,y,m);else for(var k in u){var N,O,k=/^idb\:\/\/(.*)\/(.*)\//.exec(k);k&&(N=k[1],k=k[2],O=Xa["idb://".concat(N,"/").concat(k)])&&iu(O,u,y,m)}y.forEach(function(M){return M()})}function iu(u,m,y,x){for(var _=[],k=0,N=Object.entries(u.queries.query);k<N.length;k++){for(var O=N[k],M=O[0],Q=[],z=0,D=O[1];z<D.length;z++){var q=D[z];Ll(m,q.obsSet)?q.subscribers.forEach(function(W){return y.add(W)}):x&&Q.push(q)}x&&_.push([M,Q])}if(x)for(var $=0,U=_;$<U.length;$++){var L=U[$],M=L[0],Q=L[1];u.queries.query[M]=Q}}function Jc(u){var m=u._state,y=u._deps.indexedDB;if(m.isBeingOpened||u.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?vt(m.dbOpenError):u});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var x=m.openCanceller,_=Math.round(10*u.verno),k=!1;function N(){if(m.openCanceller!==x)throw new Ae.DatabaseClosed("db.open() was cancelled")}function O(){return new ve(function(q,$){if(N(),!y)throw new Ae.MissingAPI;var U=u.name,L=m.autoSchema||!_?y.open(U):y.open(U,_);if(!L)throw new Ae.MissingAPI;L.onerror=Ln($),L.onblocked=St(u._fireOnBlocked),L.onupgradeneeded=St(function(W){var Z;z=L.transaction,m.autoSchema&&!u._options.allowEmptyDB?(L.onerror=Ia,z.abort(),L.result.close(),(Z=y.deleteDatabase(U)).onsuccess=Z.onerror=St(function(){$(new Ae.NoSuchDatabase("Database ".concat(U," doesnt exist")))})):(z.onerror=Ln($),Z=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,D=Z<1,u.idbdb=L.result,k&&ds(u,z),Ei(u,Z/10,z,$))},$),L.onsuccess=St(function(){z=null;var W,Z,X,ie,he,ge,ye=u.idbdb=L.result,me=K(ye.objectStoreNames);if(0<me.length)try{var Se=ye.transaction((he=me).length===1?he[0]:he,"readonly");if(m.autoSchema)ge=ye,ie=Se,(X=u).verno=ge.version/10,ie=X._dbSchema=Ar(0,ge,ie),X._storeNames=K(ge.objectStoreNames,0),cs(X,[X._allTables],p(ie),ie);else if(ms(u,u._dbSchema,Se),Z=Se,((Z=fs(Ar(0,(W=u).idbdb,Z),W._dbSchema)).add.length||Z.change.some(function(be){return be.add.length||be.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ye.close(),_=ye.version+1,k=!0,q(O());Ta(u,Se)}catch{}$a.push(u),ye.onversionchange=St(function(be){m.vcFired=!0,u.on("versionchange").fire(be)}),ye.onclose=St(function(){u.close({disableAutoOpen:!1})}),D&&(me=u._deps,he=U,ps(ge=me.indexedDB)||he===vi||Dl(ge,me.IDBKeyRange).put({name:he}).catch(st)),q()},$)}).catch(function(q){switch(q?.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),O();break;case"VersionError":if(0<_)return _=0,O()}return ve.reject(q)})}var M,Q=m.dbReadyResolve,z=null,D=!1;return ve.race([x,(typeof navigator>"u"?ve.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function $(){return indexedDB.databases().finally(q)}M=setInterval($,100),$()}).finally(function(){return clearInterval(M)}):Promise.resolve()).then(O)]).then(function(){return N(),m.onReadyBeingFired=[],ve.resolve(Ml(function(){return u.on.ready.fire(u.vip)})).then(function q(){var $;if(0<m.onReadyBeingFired.length)return $=m.onReadyBeingFired.reduce(oi,st),m.onReadyBeingFired=[],ve.resolve(Ml(function(){return $(u.vip)})).then(q)})}).finally(function(){m.openCanceller===x&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(q){m.dbOpenError=q;try{z&&z.abort()}catch{}return x===m.openCanceller&&u._close(),vt(q)}).finally(function(){m.openComplete=!0,Q()}).then(function(){var q;return D&&(q={},u.tables.forEach(function($){$.schema.indexes.forEach(function(U){U.name&&(q["idb://".concat(u.name,"/").concat($.name,"/").concat(U.name)]=new sn(-1/0,[[[]]]))}),q["idb://".concat(u.name,"/").concat($.name,"/")]=q["idb://".concat(u.name,"/").concat($.name,"/:dels")]=new sn(-1/0,[[[]]])}),rn(Er).fire(q),Pl(q,!0)),u})}function Ti(u){function m(k){return u.next(k)}var y=_(m),x=_(function(k){return u.throw(k)});function _(k){return function(O){var O=k(O),M=O.value;return O.done?M:M&&typeof M.then=="function"?M.then(y,x):g(M)?Promise.all(M).then(y,x):y(M)}}return _(m)()}function Oa(u,m,y){for(var x=g(u)?u.slice():[u],_=0;_<y;++_)x.push(m);return x}var Fc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return s(s({},u),{table:function(x){var y=u.table(x),x=y.schema,_={},k=[];function N(q,$,U){var X=Vt(q),L=_[X]=_[X]||[],W=q==null?0:typeof q=="string"?1:q.length,Z=0<$,X=s(s({},U),{name:Z?"".concat(X,"(virtual-from:").concat(U.name,")"):U.name,lowLevelIndex:U,isVirtual:Z,keyTail:$,keyLength:W,extractKey:Or(q),unique:!Z&&U.unique});return L.push(X),X.isPrimaryKey||k.push(X),1<W&&N(W===2?q[0]:q.slice(0,W-1),$+1,U),L.sort(function(ie,he){return ie.keyTail-he.keyTail}),X}var O=N(x.primaryKey.keyPath,0,x.primaryKey);_[":id"]=[O];for(var M=0,Q=x.indexes;M<Q.length;M++){var z=Q[M];N(z.keyPath,0,z)}function D(q){var $,U=q.query.index;return U.isVirtual?s(s({},q),{query:{index:U.lowLevelIndex,range:($=q.query.range,U=U.keyTail,{type:$.type===1?2:$.type,lower:Oa($.lower,$.lowerOpen?u.MAX_KEY:u.MIN_KEY,U),lowerOpen:!0,upper:Oa($.upper,$.upperOpen?u.MIN_KEY:u.MAX_KEY,U),upperOpen:!0})}}):q}return s(s({},y),{schema:s(s({},x),{primaryKey:O,indexes:k,getIndexByKeyPath:function(q){return(q=_[Vt(q)])&&q[0]}}),count:function(q){return y.count(D(q))},query:function(q){return y.query(D(q))},openCursor:function(q){var $=q.query.index,U=$.keyTail,L=$.keyLength;return $.isVirtual?y.openCursor(D(q)).then(function(Z){return Z&&W(Z)}):y.openCursor(q);function W(Z){return Object.create(Z,{continue:{value:function(X){X!=null?Z.continue(Oa(X,q.reverse?u.MAX_KEY:u.MIN_KEY,U)):q.unique?Z.continue(Z.key.slice(0,L).concat(q.reverse?u.MIN_KEY:u.MAX_KEY,U)):Z.continue()}},continuePrimaryKey:{value:function(X,ie){Z.continuePrimaryKey(Oa(X,u.MAX_KEY,U),ie)}},primaryKey:{get:function(){return Z.primaryKey}},key:{get:function(){var X=Z.key;return L===1?X[0]:X.slice(0,L)}},value:{get:function(){return Z.value}}})}}})}})}};function bs(u,m,y,x){return y=y||{},x=x||"",p(u).forEach(function(_){var k,N,O;j(m,_)?(k=u[_],N=m[_],typeof k=="object"&&typeof N=="object"&&k&&N?(O=Pt(k))!==Pt(N)?y[x+_]=m[_]:O==="Object"?bs(k,N,y,x+_+"."):k!==N&&(y[x+_]=m[_]):k!==N&&(y[x+_]=m[_])):y[x+_]=void 0}),p(m).forEach(function(_){j(u,_)||(y[x+_]=m[_])}),y}function xs(u,m){return m.type==="delete"?m.keys:m.keys||m.values.map(u.extractKey)}var su={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return s(s({},u),{table:function(m){var y=u.table(m),x=y.schema.primaryKey;return s(s({},y),{mutate:function(_){var k=_e.trans,N=k.table(m).hook,O=N.deleting,M=N.creating,Q=N.updating;switch(_.type){case"add":if(M.fire===st)break;return k._promise("readwrite",function(){return z(_)},!0);case"put":if(M.fire===st&&Q.fire===st)break;return k._promise("readwrite",function(){return z(_)},!0);case"delete":if(O.fire===st)break;return k._promise("readwrite",function(){return z(_)},!0);case"deleteRange":if(O.fire===st)break;return k._promise("readwrite",function(){return(function D(q,$,U){return y.query({trans:q,values:!1,query:{index:x,range:$},limit:U}).then(function(L){var W=L.result;return z({type:"delete",keys:W,trans:q}).then(function(Z){return 0<Z.numFailures?Promise.reject(Z.failures[0]):W.length<U?{failures:[],numFailures:0,lastResult:void 0}:D(q,s(s({},$),{lower:W[W.length-1],lowerOpen:!0}),U)})})})(_.trans,_.range,1e4)},!0)}return y.mutate(_);function z(D){var q,$,U,L=_e.trans,W=D.keys||xs(x,D);if(W)return(D=D.type==="add"||D.type==="put"?s(s({},D),{keys:W}):s({},D)).type!=="delete"&&(D.values=o([],D.values)),D.keys&&(D.keys=o([],D.keys)),q=y,U=W,(($=D).type==="add"?Promise.resolve([]):q.getMany({trans:$.trans,keys:U,cache:"immutable"})).then(function(Z){var X=W.map(function(ie,he){var ge,ye,me,Se=Z[he],be={onerror:null,onsuccess:null};return D.type==="delete"?O.fire.call(be,ie,Se,L):D.type==="add"||Se===void 0?(ge=M.fire.call(be,ie,D.values[he],L),ie==null&&ge!=null&&(D.keys[he]=ie=ge,x.outbound||te(D.values[he],x.keyPath,ie))):(ge=bs(Se,D.values[he]),(ye=Q.fire.call(be,ge,ie,Se,L))&&(me=D.values[he],Object.keys(ye).forEach(function(pe){j(me,pe)?me[pe]=ye[pe]:te(me,pe,ye[pe])}))),be});return y.mutate(D).then(function(ie){for(var he=ie.failures,ge=ie.results,ye=ie.numFailures,ie=ie.lastResult,me=0;me<W.length;++me){var Se=(ge||W)[me],be=X[me];Se==null?be.onerror&&be.onerror(he[me]):be.onsuccess&&be.onsuccess(D.type==="put"&&Z[me]?D.values[me]:Se)}return{failures:he,results:ge,numFailures:ye,lastResult:ie}}).catch(function(ie){return X.forEach(function(he){return he.onerror&&he.onerror(ie)}),Promise.reject(ie)})});throw new Error("Keys missing")}}})}})}};function $l(u,m,y){try{if(!m||m.keys.length<u.length)return null;for(var x=[],_=0,k=0;_<m.keys.length&&k<u.length;++_)Xe(m.keys[_],u[k])===0&&(x.push(y?qe(m.values[_]):m.values[_]),++k);return x.length===u.length?x:null}catch{return null}}var lu={stack:"dbcore",level:-1,create:function(u){return{table:function(m){var y=u.table(m);return s(s({},y),{getMany:function(x){var _;return x.cache?(_=$l(x.keys,x.trans._cache,x.cache==="clone"))?ve.resolve(_):y.getMany(x).then(function(k){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?qe(k):k},k}):y.getMany(x)},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),y.mutate(x)}})}}}};function Wa(u,m){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function ou(u,m){switch(u){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Zc={stack:"dbcore",level:0,name:"Observability",create:function(u){var m=u.schema.name,y=new sn(u.MIN_KEY,u.MAX_KEY);return s(s({},u),{transaction:function(x,_,k){if(_e.subscr&&_!=="readonly")throw new Ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(_e.querier));return u.transaction(x,_,k)},table:function(x){function _(W){var L,W=W.query;return[L=W.index,new sn((L=(W=W.range).lower)!=null?L:u.MIN_KEY,(L=W.upper)!=null?L:u.MAX_KEY)]}var k=u.table(x),N=k.schema,O=N.primaryKey,M=N.indexes,Q=O.extractKey,z=O.outbound,D=O.autoIncrement&&M.filter(function(U){return U.compound&&U.keyPath.includes(O.keyPath)}),q=s(s({},k),{mutate:function(U){function L(je){return je="idb://".concat(m,"/").concat(x,"/").concat(je),he[je]||(he[je]=new sn)}var W,Z,X,ie=U.trans,he=U.mutatedParts||(U.mutatedParts={}),ge=L(""),ye=L(":dels"),me=U.type,be=U.type==="deleteRange"?[U.range]:U.type==="delete"?[U.keys]:U.values.length<50?[xs(O,U).filter(function(je){return je}),U.values]:[],Se=be[0],be=be[1],pe=U.trans._cache;return g(Se)?(ge.addKeys(Se),(me=me==="delete"||Se.length===be.length?$l(Se,pe):null)||ye.addKeys(Se),(me||be)&&(W=L,Z=me,X=be,N.indexes.forEach(function(je){var $e=W(je.name||"");function We(Ke){return Ke!=null?je.extractKey(Ke):null}function Me(Ke){je.multiEntry&&g(Ke)?Ke.forEach(function(bt){return $e.addKey(bt)}):$e.addKey(Ke)}(Z||X).forEach(function(Ke,ft){var _n=Z&&We(Z[ft]),ft=X&&We(X[ft]);Xe(_n,ft)!==0&&(_n!=null&&Me(_n),ft!=null)&&Me(ft)})}))):Se?(be={from:(pe=Se.lower)!=null?pe:u.MIN_KEY,to:(me=Se.upper)!=null?me:u.MAX_KEY},ye.add(be),ge.add(be)):(ge.add(y),ye.add(y),N.indexes.forEach(function(je){return L(je.name).add(y)})),k.mutate(U).then(function(je){return!Se||U.type!=="add"&&U.type!=="put"||(ge.addKeys(je.results),D&&D.forEach(function($e){for(var We=U.values.map(function(_n){return $e.extractKey(_n)}),Me=$e.keyPath.findIndex(function(_n){return _n===O.keyPath}),Ke=0,bt=je.results.length;Ke<bt;++Ke)We[Ke][Me]=je.results[Ke];L($e.name).addKeys(We)})),ie.mutatedParts=ys(ie.mutatedParts||{},he),je})}}),$={get:function(U){return[O,new sn(U.key)]},getMany:function(U){return[O,new sn().addKeys(U.keys)]},count:_,query:_,openCursor:_};return p($).forEach(function(U){q[U]=function(L){var W=_e.subscr,Z=!!W,X=Wa(_e,k)&&ou(U,L)?L.obsSet={}:W;if(Z){var ie,W=function(be){return be="idb://".concat(m,"/").concat(x,"/").concat(be),X[be]||(X[be]=new sn)},he=W(""),ge=W(":dels"),Z=$[U](L),ye=Z[0],Z=Z[1];if((U==="query"&&ye.isPrimaryKey&&!L.values?ge:W(ye.name||"")).add(Z),!ye.isPrimaryKey){if(U!=="count")return ie=U==="query"&&z&&L.values&&k.query(s(s({},L),{values:!1})),k[U].apply(this,arguments).then(function(be){if(U==="query"){if(z&&L.values)return ie.then(function(We){return We=We.result,he.addKeys(We),be});var pe=L.values?be.result.map(Q):be.result;(L.values?he:ge).addKeys(pe)}else{var je,$e;if(U==="openCursor")return $e=L.values,(je=be)&&Object.create(je,{key:{get:function(){return ge.addKey(je.primaryKey),je.key}},primaryKey:{get:function(){var We=je.primaryKey;return ge.addKey(We),We}},value:{get:function(){return $e&&he.addKey(je.primaryKey),je.value}}})}return be});ge.add(y)}}return k[U].apply(this,arguments)}}),q}})}};function uu(u,m,y){var x;return y.numFailures===0?m:m.type==="deleteRange"||(x=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1,y.numFailures===x)?null:(x=s({},m),g(x.keys)&&(x.keys=x.keys.filter(function(_,k){return!(k in y.failures)})),"values"in x&&g(x.values)&&(x.values=x.values.filter(function(_,k){return!(k in y.failures)})),x)}function ws(u,m){return y=u,((x=m).lower===void 0||(x.lowerOpen?0<Xe(y,x.lower):0<=Xe(y,x.lower)))&&(y=u,(x=m).upper===void 0||(x.upperOpen?Xe(y,x.upper)<0:Xe(y,x.upper)<=0));var y,x}function Hl(u,m,y,x,_,k){var N,O,M,Q,z,D;return!y||y.length===0||(N=m.query.index,O=N.multiEntry,M=m.query.range,Q=x.schema.primaryKey.extractKey,z=N.extractKey,D=(N.lowLevelIndex||N).extractKey,(x=y.reduce(function(q,$){var U=q,L=[];if($.type==="add"||$.type==="put")for(var W=new sn,Z=$.values.length-1;0<=Z;--Z){var X,ie=$.values[Z],he=Q(ie);!W.hasKey(he)&&(X=z(ie),O&&g(X)?X.some(function(be){return ws(be,M)}):ws(X,M))&&(W.addKey(he),L.push(ie))}switch($.type){case"add":var ge=new sn().addKeys(m.values?q.map(function(pe){return Q(pe)}):q),U=q.concat(m.values?L.filter(function(pe){return pe=Q(pe),!ge.hasKey(pe)&&(ge.addKey(pe),!0)}):L.map(function(pe){return Q(pe)}).filter(function(pe){return!ge.hasKey(pe)&&(ge.addKey(pe),!0)}));break;case"put":var ye=new sn().addKeys($.values.map(function(pe){return Q(pe)}));U=q.filter(function(pe){return!ye.hasKey(m.values?Q(pe):pe)}).concat(m.values?L:L.map(function(pe){return Q(pe)}));break;case"delete":var me=new sn().addKeys($.keys);U=q.filter(function(pe){return!me.hasKey(m.values?Q(pe):pe)});break;case"deleteRange":var Se=$.range;U=q.filter(function(pe){return!ws(Q(pe),Se)})}return U},u))===u)?u:(x.sort(function(q,$){return Xe(D(q),D($))||Xe(Q(q),Q($))}),m.limit&&m.limit<1/0&&(x.length>m.limit?x.length=m.limit:u.length===m.limit&&x.length<m.limit&&(_.dirty=!0)),k?Object.freeze(x):x)}function Rr(u,m){return Xe(u.lower,m.lower)===0&&Xe(u.upper,m.upper)===0&&!!u.lowerOpen==!!m.lowerOpen&&!!u.upperOpen==!!m.upperOpen}function Oi(u,m){return((y,x,_,k)=>{if(y===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((y=Xe(y,x))===0){if(_&&k)return 0;if(_)return 1;if(k)return-1}return y})(u.lower,m.lower,u.lowerOpen,m.lowerOpen)<=0&&0<=((y,x,_,k)=>{if(y===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((y=Xe(y,x))===0){if(_&&k)return 0;if(_)return-1;if(k)return 1}return y})(u.upper,m.upper,u.upperOpen,m.upperOpen)}function ed(u,m,y,x){u.subscribers.add(y),x.addEventListener("abort",function(){var _,k;u.subscribers.delete(y),u.subscribers.size===0&&(_=u,k=m,setTimeout(function(){_.subscribers.size===0&&De(k,_)},3e3))})}var _s={stack:"dbcore",level:0,name:"Cache",create:function(u){var m=u.schema.name;return s(s({},u),{transaction:function(y,x,_){var k,N,O=u.transaction(y,x,_);return x==="readwrite"&&(_=(k=new AbortController).signal,O.addEventListener("abort",(N=function(M){return function(){if(k.abort(),x==="readwrite"){for(var Q=new Set,z=0,D=y;z<D.length;z++){var q=D[z],$=Xa["idb://".concat(m,"/").concat(q)];if($){var U=u.table(q),L=$.optimisticOps.filter(function(je){return je.trans===O});if(O._explicit&&M&&O.mutatedParts)for(var W=0,Z=Object.values($.queries.query);W<Z.length;W++)for(var X=0,ie=(ye=Z[W]).slice();X<ie.length;X++)Ll((me=ie[X]).obsSet,O.mutatedParts)&&(De(ye,me),me.subscribers.forEach(function(je){return Q.add(je)}));else if(0<L.length){$.optimisticOps=$.optimisticOps.filter(function(je){return je.trans!==O});for(var he=0,ge=Object.values($.queries.query);he<ge.length;he++)for(var ye,me,Se,be=0,pe=(ye=ge[he]).slice();be<pe.length;be++)(me=pe[be]).res!=null&&O.mutatedParts&&(M&&!me.dirty?(Se=Object.isFrozen(me.res),Se=Hl(me.res,me.req,L,U,me,Se),me.dirty?(De(ye,me),me.subscribers.forEach(function(je){return Q.add(je)})):Se!==me.res&&(me.res=Se,me.promise=ve.resolve({result:Se}))):(me.dirty&&De(ye,me),me.subscribers.forEach(function(je){return Q.add(je)})))}}}Q.forEach(function(je){return je()})}}})(!1),{signal:_}),O.addEventListener("error",N(!1),{signal:_}),O.addEventListener("complete",N(!0),{signal:_})),O},table:function(y){var x=u.table(y),_=x.schema.primaryKey;return s(s({},x),{mutate:function(k){var N,O=_e.trans;return!_.outbound&&O.db._options.cache!=="disabled"&&!O.explicit&&O.idbtrans.mode==="readwrite"&&(N=Xa["idb://".concat(m,"/").concat(y)])?(O=x.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||xs(_,k).some(function(M){return M==null}))?(N.optimisticOps.push(k),k.mutatedParts&&vs(k.mutatedParts),O.then(function(M){0<M.numFailures&&(De(N.optimisticOps,k),(M=uu(0,k,M))&&N.optimisticOps.push(M),k.mutatedParts)&&vs(k.mutatedParts)}),O.catch(function(){De(N.optimisticOps,k),k.mutatedParts&&vs(k.mutatedParts)})):O.then(function(M){var Q=uu(0,s(s({},k),{values:k.values.map(function(z,D){var q;return M.failures[D]?z:(te(q=(q=_.keyPath)!=null&&q.includes(".")?qe(z):s({},z),_.keyPath,M.results[D]),q)})}),M);N.optimisticOps.push(Q),queueMicrotask(function(){return k.mutatedParts&&vs(k.mutatedParts)})}),O):x.mutate(k)},query:function(k){var N,O,M,Q,z,D,q;return Wa(_e,x)&&ou("query",k)?(N=((M=_e.trans)==null?void 0:M.db._options.cache)==="immutable",O=(M=_e).requery,M=M.signal,D=(($,U,L,W)=>{var Z=Xa["idb://".concat($,"/").concat(U)];if(!Z)return[];if(!($=Z.queries[L]))return[null,!1,Z,null];var X=$[(W.query?W.query.index.name:null)||""];if(!X)return[null,!1,Z,null];switch(L){case"query":var ie=X.find(function(he){return he.req.limit===W.limit&&he.req.values===W.values&&Rr(he.req.query.range,W.query.range)});return ie?[ie,!0,Z,X]:[X.find(function(he){return("limit"in he.req?he.req.limit:1/0)>=W.limit&&(!W.values||he.req.values)&&Oi(he.req.query.range,W.query.range)}),!1,Z,X];case"count":return ie=X.find(function(he){return Rr(he.req.query.range,W.query.range)}),[ie,!!ie,Z,X]}})(m,y,"query",k),q=D[0],Q=D[2],z=D[3],q&&D[1]?q.obsSet=k.obsSet:(D=x.query(k).then(function($){var U=$.result;if(q&&(q.res=U),N){for(var L=0,W=U.length;L<W;++L)Object.freeze(U[L]);Object.freeze(U)}else $.result=qe(U);return $}).catch(function($){return z&&q&&De(z,q),Promise.reject($)}),q={obsSet:k.obsSet,promise:D,subscribers:new Set,type:"query",req:k,dirty:!1},z?z.push(q):(z=[q],(Q=Q||(Xa["idb://".concat(m,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=z)),ed(q,z,O,M),q.promise.then(function($){return{result:Hl($.result,k,Q?.optimisticOps,x,q,N)}})):x.query(k)}})}})}};function Ai(u,m){return new Proxy(u,{get:function(y,x,_){return x==="db"?m:Reflect.get(y,x,_)}})}Ot.prototype.version=function(u){if(isNaN(u)||u<.1)throw new Ae.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new Ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var m=this._versions,y=m.filter(function(x){return x._cfg.version===u})[0];return y||(y=new this.Version(u),m.push(y),m.sort(Cl),y.stores({}),this._state.autoSchema=!1),y},Ot.prototype._whenReady=function(u){var m=this;return this.idbdb&&(this._state.openComplete||_e.letThrough||this._vip)?u():new ve(function(y,x){if(m._state.openComplete)return x(new Ae.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void x(new Ae.DatabaseClosed);m.open().catch(st)}m._state.dbReadyPromise.then(y,x)}).then(u)},Ot.prototype.use=function(_){var m=_.stack,y=_.create,x=_.level,_=_.name,k=(_&&this.unuse({stack:m,name:_}),this._middlewares[m]||(this._middlewares[m]=[]));return k.push({stack:m,create:y,level:x??10,name:_}),k.sort(function(N,O){return N.level-O.level}),this},Ot.prototype.unuse=function(u){var m=u.stack,y=u.name,x=u.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(_){return x?_.create!==x:!!y&&_.name!==y})),this},Ot.prototype.open=function(){var u=this;return zn(un,function(){return Jc(u)})},Ot.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,m=$a.indexOf(this);if(0<=m&&$a.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new ve(function(y){u.dbReadyResolve=y}),u.openCanceller=new ve(function(y,x){u.cancelOpen=x}))},Ot.prototype.close=function(m){var m=(m===void 0?{disableAutoOpen:!0}:m).disableAutoOpen,y=this._state;m?(y.isBeingOpened&&y.cancelOpen(new Ae.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new Ae.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},Ot.prototype.delete=function(u){var m=this,y=(u===void 0&&(u={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),x=this._state;return new ve(function(_,k){function N(){m.close(u);var O=m._deps.indexedDB.deleteDatabase(m.name);O.onsuccess=St(function(){var M,Q,z;M=m._deps,Q=m.name,ps(z=M.indexedDB)||Q===vi||Dl(z,M.IDBKeyRange).delete(Q).catch(st),_()}),O.onerror=Ln(k),O.onblocked=m._fireOnBlocked}if(y)throw new Ae.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(N):N()})},Ot.prototype.backendDB=function(){return this.idbdb},Ot.prototype.isOpen=function(){return this.idbdb!==null},Ot.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Ot.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ot.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ot.prototype,"tables",{get:function(){var u=this;return p(this._allTables).map(function(m){return u._allTables[m]})},enumerable:!1,configurable:!0}),Ot.prototype.transaction=function(){var u=(function(m,y,x){var _=arguments.length;if(_<2)throw new Ae.InvalidArgument("Too few arguments");for(var k=new Array(_-1);--_;)k[_-1]=arguments[_];return x=k.pop(),[m,yt(k),x]}).apply(this,arguments);return this._transaction.apply(this,u)},Ot.prototype._transaction=function(u,m,y){var x,_,k=this,N=_e.trans,O=(N&&N.db===this&&u.indexOf("!")===-1||(N=null),u.indexOf("?")!==-1);u=u.replace("!","").replace("?","");try{if(_=m.map(function(Q){if(Q=Q instanceof k.Table?Q.name:Q,typeof Q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Q}),u=="r"||u===da)x=da;else{if(u!="rw"&&u!=Ea)throw new Ae.InvalidArgument("Invalid transaction mode: "+u);x=Ea}if(N){if(N.mode===da&&x===Ea){if(!O)throw new Ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");N=null}N&&_.forEach(function(Q){if(N&&N.storeNames.indexOf(Q)===-1){if(!O)throw new Ae.SubTransaction("Table "+Q+" not included in parent transaction.");N=null}}),O&&N&&!N.active&&(N=null)}}catch(Q){return N?N._promise(null,function(z,D){D(Q)}):vt(Q)}var M=(function Q(z,D,q,$,U){return ve.resolve().then(function(){var X=_e.transless||_e,L=z._createTransaction(D,q,z._dbSchema,$),X=(L.explicit=!0,{trans:L,transless:X});if($)L.idbtrans=$.idbtrans;else try{L.create(),L.idbtrans._explicit=!0,z._state.PR1398_maxLoop=3}catch(ie){return ie.name===en.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return Q(z,D,q,null,U)})):vt(ie)}var W,Z=H(U),X=(Z&&Ht(),ve.follow(function(){var ie;(W=U.call(L,L))&&(Z?(ie=kn.bind(null,null),W.then(ie,ie)):typeof W.next=="function"&&typeof W.throw=="function"&&(W=Ti(W)))},X));return(W&&typeof W.then=="function"?ve.resolve(W).then(function(ie){return L.active?ie:vt(new Ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return W})).then(function(ie){return $&&L._resolve(),L._completion.then(function(){return ie})}).catch(function(ie){return L._reject(ie),vt(ie)})})}).bind(null,this,x,_,N,y);return N?N._promise(x,M,"lock"):_e.trans?zn(_e.transless,function(){return k._whenReady(M)}):this._whenReady(M)},Ot.prototype.table=function(u){if(j(this._allTables,u))return this._allTables[u];throw new Ae.InvalidTable("Table ".concat(u," does not exist"))};var Fn=Ot;function Ot(u,m){var y,x,_,k,N,O=this,M=(this._middlewares={},this.verno=0,Ot.dependencies),M=(this._options=m=s({addons:Ot.addons,autoOpen:!0,indexedDB:M.indexedDB,IDBKeyRange:M.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},m.addons),Q=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:st,dbReadyPromise:null,cancelOpen:st,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen}),z=(Q.dbReadyPromise=new ve(function(D){Q.dbReadyResolve=D}),Q.openCanceller=new ve(function(D,q){Q.cancelOpen=q}),this._state=Q,this.name=u,this.on=wi(this,"populate","blocked","versionchange","close",{ready:[oi,st]}),this.once=function(D,q){var $=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];O.on(D).unsubscribe($),q.apply(O,U)};return O.on(D,$)},this.on.ready.subscribe=Y(this.on.ready.subscribe,function(D){return function(q,$){Ot.vip(function(){var U,L=O._state;L.openComplete?(L.dbOpenError||ve.resolve().then(q),$&&D(q)):L.onReadyBeingFired?(L.onReadyBeingFired.push(q),$&&D(q)):(D(q),U=O,$||D(function W(){U.on.ready.unsubscribe(q),U.on.ready.unsubscribe(W)}))})}}),this.Collection=(y=this,an(Qc.prototype,function(W,L){this.db=y;var $=kl,U=null;if(L)try{$=L()}catch(X){U=X}var L=W._ctx,W=L.table,Z=W.hook.reading.fire;this._ctx={table:W,index:L.index,isPrimKey:!L.index||W.schema.primKey.keyPath&&L.index===W.schema.primKey.name,range:$,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:U,or:L.or,valueMapper:Z!==xr?Z:null}})),this.Table=(x=this,an(El.prototype,function(D,q,$){this.db=x,this._tx=$,this.name=D,this.schema=q,this.hook=x._allTables[D]?x._allTables[D].hook:wi(null,{creating:[xl,st],reading:[La,xr],updating:[Xo,st],deleting:[Ic,st]})})),this.Transaction=(_=this,an(Al.prototype,function(D,q,$,U,L){var W=this;D!=="readonly"&&q.forEach(function(Z){Z=(Z=$[Z])==null?void 0:Z.yProps,Z&&(q=q.concat(Z.map(function(X){return X.updatesTable})))}),this.db=_,this.mode=D,this.storeNames=q,this.schema=$,this.chromeTransactionDurability=U,this.idbtrans=null,this.on=wi(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ve(function(Z,X){W._resolve=Z,W._reject=X}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(Z){var X=W.active;return W.active=!1,W.on.error.fire(Z),W.parent?W.parent._reject(Z):X&&W.idbtrans&&W.idbtrans.abort(),vt(Z)})})),this.Version=(k=this,an(Wc.prototype,function(D){this.db=k,this._cfg={version:D,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(N=this,an(Ga.prototype,function(D,q,$){if(this.db=N,this._ctx={table:D,index:q===":id"?null:q,or:$},this._cmp=this._ascending=Xe,this._descending=function(U,L){return Xe(L,U)},this._max=function(U,L){return 0<Xe(U,L)?U:L},this._min=function(U,L){return Xe(U,L)<0?U:L},this._IDBKeyRange=N._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ae.MissingAPI})),this.on("versionchange",function(D){0<D.newVersion?console.warn("Another connection wants to upgrade database '".concat(O.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(O.name,"'. Closing db now to resume the delete request.")),O.close({disableAutoOpen:!1})}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('".concat(O.name,"') was blocked")):console.warn("Upgrade '".concat(O.name,"' blocked by other connection holding version ").concat(D.oldVersion/10))}),this._maxKey=Tr(m.IDBKeyRange),this._createTransaction=function(D,q,$,U){return new O.Transaction(D,q,$,O._options.chromeTransactionDurability,U)},this._fireOnBlocked=function(D){O.on("blocked").fire(D),$a.filter(function(q){return q.name===O.name&&q!==O&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(D)})},this.use(lu),this.use(_s),this.use(Zc),this.use(Fc),this.use(su),new Proxy(this,{get:function(D,q,$){var U;return q==="_vip"||(q==="table"?function(L){return Ai(O.table(L),z)}:(U=Reflect.get(D,q,$))instanceof El?Ai(U,z):q==="tables"?U.map(function(L){return Ai(L,z)}):q==="_createTransaction"?function(){return Ai(U.apply(this,arguments),z)}:U)}}));this.vip=z,M.forEach(function(D){return D(O)})}var Dr,Ja=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",cu=(Ss.prototype.subscribe=function(u,m,y){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:m,complete:y})},Ss.prototype[Ja]=function(){return this},Ss);function Ss(u){this._subscribe=u}try{Dr={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Dr={indexedDB:null,IDBKeyRange:null}}function du(u){var m,y=!1,x=new cu(function(_){var k=H(u),N,O=!1,M={},Q={},z={get closed(){return O},unsubscribe:function(){O||(O=!0,N&&N.abort(),D&&rn.storagemutated.unsubscribe($))}},D=(_.start&&_.start(z),!1),q=function(){return ka(U)},$=function(L){ys(M,L),Ll(Q,M)&&q()},U=function(){var L,W,Z;!O&&Dr.indexedDB&&(M={},L={},N&&N.abort(),N=new AbortController,Z=(X=>{var ie=_a();try{k&&Ht();var he=kt(u,X);return he=k?he.finally(kn):he}finally{ie&&Qn()}})(W={subscr:L,signal:N.signal,requery:q,querier:u,trans:null}),Promise.resolve(Z).then(function(X){y=!0,m=X,O||W.signal.aborted||(M={},(ie=>{for(var he in ie)if(j(ie,he))return;return 1})(Q=L)||D||(rn(Er,$),D=!0),ka(function(){return!O&&_.next&&_.next(X)}))},function(X){y=!1,["DatabaseClosedError","AbortError"].includes(X?.name)||O||ka(function(){O||_.error&&_.error(X)})}))};return setTimeout(q,0),z});return x.hasValue=function(){return y},x.getValue=function(){return m},x}var Fa=Fn;function Kl(u){var m=Aa;try{Aa=!0,rn.storagemutated.fire(u),Pl(u,!0)}finally{Aa=m}}T(Fa,s(s({},le),{delete:function(u){return new Fa(u,{addons:[]}).delete()},exists:function(u){return new Fa(u,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return m=Fa.dependencies,y=m.indexedDB,m=m.IDBKeyRange,(ps(y)?Promise.resolve(y.databases()).then(function(x){return x.map(function(_){return _.name}).filter(function(_){return _!==vi})}):Dl(y,m).toCollection().primaryKeys()).then(u)}catch{return vt(new Ae.MissingAPI)}var m,y},defineClass:function(){return function(u){v(this,u)}},ignoreTransaction:function(u){return _e.trans?zn(_e.transless,u):u()},vip:Ml,async:function(u){return function(){try{var m=Ti(u.apply(this,arguments));return m&&typeof m.then=="function"?m:ve.resolve(m)}catch(y){return vt(y)}}},spawn:function(u,m,y){try{var x=Ti(u.apply(y,m||[]));return x&&typeof x.then=="function"?x:ve.resolve(x)}catch(_){return vt(_)}},currentTransaction:{get:function(){return _e.trans||null}},waitFor:function(u,m){return u=ve.resolve(typeof u=="function"?Fa.ignoreTransaction(u):u).timeout(m||6e4),_e.trans?_e.trans.waitFor(u):u},Promise:ve,debug:{get:function(){return Tn},set:function(u){Wo(u)}},derive:I,extend:v,props:T,override:Y,Events:wi,on:rn,liveQuery:du,extendObservabilitySet:ys,getByKeyPath:ue,setByKeyPath:te,delByKeyPath:function(u,m){typeof m=="string"?te(u,m,void 0):"length"in m&&[].map.call(m,function(y){te(u,y,void 0)})},shallowClone:Ne,deepClone:qe,getObjectDiff:bs,cmp:Xe,asap:Ee,minKey:-1/0,addons:[],connections:$a,errnames:en,dependencies:Dr,cache:Xa,semVer:"4.3.0",version:"4.3.0".split(".").map(function(u){return parseInt(u)}).reduce(function(u,m,y){return u+m/Math.pow(10,2*y)})})),Fa.maxKey=Tr(Fa.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(rn(Er,function(u){Aa||(u=new CustomEvent(Va,{detail:u}),Aa=!0,dispatchEvent(u),Aa=!1)}),addEventListener(Va,function(u){u=u.detail,Aa||Kl(u)}));var Mr,Aa=!1,wn=function(){};return typeof BroadcastChannel<"u"&&((wn=function(){(Mr=new BroadcastChannel(Va)).onmessage=function(u){return u.data&&Kl(u.data)}})(),typeof Mr.unref=="function"&&Mr.unref(),rn(Er,function(u){Aa||Mr.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!Fn.disableBfCache&&u.persisted){Tn&&console.debug("Dexie: handling persisted pagehide"),Mr?.close();for(var m=0,y=$a;m<y.length;m++)y[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!Fn.disableBfCache&&u.persisted&&(Tn&&console.debug("Dexie: handling persisted pageshow"),wn(),Kl({all:new sn(-1/0,[[]])}))})),ve.rejectionMapper=function(u,m){return!u||u instanceof ke||u instanceof TypeError||u instanceof SyntaxError||!u.name||!li[u.name]?u:(m=new li[u.name](m||u.message,u),"stack"in u&&B(m,"stack",{get:function(){return this.inner.stack}}),m)},Wo(Tn),s(Fn,Object.freeze({__proto__:null,Dexie:Fn,Entity:Fo,PropModification:kr,RangeSet:sn,add:function(u){return new kr({add:u})},cmp:Xe,default:Fn,liveQuery:du,mergeRanges:Qa,rangesOverlap:au,remove:function(u){return new kr({remove:u})},replacePrefix:function(u,m){return new kr({replacePrefix:[u,m]})}}),{default:Fn}),Fn})})(Ec)),Ec.exports}var K1=H1();const wh=jh(K1),Cy=Symbol.for("Dexie"),cl=globalThis[Cy]||(globalThis[Cy]=wh);if(wh.semVer!==cl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${wh.semVer} and ${cl.semVer}`);const{liveQuery:Lk,mergeRanges:qk,rangesOverlap:Bk,RangeSet:Pk,cmp:$k,Entity:Hk,PropModification:Kk,replacePrefix:Gk,add:Ik,remove:Vk,DexieYProvider:Yk}=cl;class G1 extends cl{athlete_summary;app_settings;athlete_levels_lookup;personal_records;muscles;equipment;exercises;exercise_muscles;exercise_equipment;routines;routine_exercises;workouts;workout_logs;constructor(){super("FitnexDB"),this.version(3).stores({athlete_summary:"user_id",app_settings:"id",athlete_levels_lookup:"id, level_name",personal_records:"[user_id+exercise_id]",muscles:"id, name, parent",equipment:"id, name",exercises:"id, name",exercise_muscles:"[exercise_id+muscle_id], muscle_id",exercise_equipment:"[exercise_id+equipment_id], equipment_id",routines:"id, name",routine_exercises:"[routine_id+exercise_id], exercise_id",workouts:"id, user_id, start_time, status, is_synced",workout_logs:"id, workout_id, exercise_id, exercise_order, is_synced, [workout_id+exercise_id+set_number]"})}}const fe=new G1,I1={async syncSummary(a){const{data:n,error:i}=await Qe.from("v_user_dashboard").select("*").eq("user_id",a).maybeSingle();if(i)throw i;return n?(await fe.athlete_summary.put(n),n):null}};let vc=!1;const Ft={async syncLibrary(a=!1){if(vc&&!a)return;if(await fe.muscles.count()>0&&!a){vc=!0;return}const[i,s,o,c,p,g]=await Promise.all([Qe.from("muscles").select("*"),Qe.from("equipment").select("*"),Qe.from("exercises").select("*"),Qe.from("exercise_muscles").select("*"),Qe.from("exercise_equipment").select("*"),Qe.from("routine_exercises").select("*")]);await fe.transaction("rw",[fe.muscles,fe.equipment,fe.exercises,fe.exercise_muscles,fe.exercise_equipment,fe.routine_exercises],async()=>{i.data&&await fe.muscles.bulkPut(i.data),s.data&&await fe.equipment.bulkPut(s.data),o.data&&await fe.exercises.bulkPut(o.data),c.data&&await fe.exercise_muscles.bulkPut(c.data),p.data&&await fe.exercise_equipment.bulkPut(p.data),g.data&&await fe.routine_exercises.bulkPut(g.data)}),vc=!0},async getActiveWorkout(){return await fe.workouts.filter(a=>!a.end_time).first()},async getActiveMuscles(){return await fe.muscles.filter(a=>a.status!==!1).toArray()},async getMuscleById(a){return await fe.muscles.get(a)},async getAllEquipment(){return await fe.equipment.toArray()},async getExercisesWithMeta(){const[a,n,i,s,o]=await Promise.all([fe.exercises.filter(c=>c.status!==!1).toArray(),fe.exercise_muscles.toArray(),fe.exercise_equipment.toArray(),fe.muscles.toArray(),fe.equipment.toArray()]);return a.map(c=>{const g=n.filter(S=>S.exercise_id===c.id).map(S=>{const j=s.find(A=>A.id===S.muscle_id),T=j?.parent?s.find(A=>A.id===j.parent):null;return{name:j?.name||"Unknown",parent_name:T?.name||null,role:S.role}}),v=i.find(S=>S.exercise_id===c.id),b=o.find(S=>S.id===v?.equipment_id);return{...c,all_muscles:g,equipment_name:b?.name||"None"}})},async getExerciseDetail(a){const[n,i,s,o,c]=await Promise.all([fe.exercises.get(a),fe.exercise_muscles.where("exercise_id").equals(a).toArray(),fe.exercise_equipment.where("exercise_id").equals(a).toArray(),fe.muscles.toArray(),fe.equipment.toArray()]);return n?{...n,muscles:i.map(p=>({id:p.muscle_id,name:o.find(g=>g.id===p.muscle_id)?.name||"Unknown",role:p.role})),equipmentId:s[0]?.equipment_id?.toString()||""}:null},async addMuscle(a,n){const i={name:a,parent:n||null},{data:s,error:o}=await Qe.from("muscles").insert([i]).select().single();if(o)throw o;return await fe.muscles.put(s),s},async updateMuscle(a,n,i){const s={name:n,parent:i||null,updated_at:new Date().toISOString()},{data:o,error:c}=await Qe.from("muscles").update(s).eq("id",a).select().single();if(c)throw c;await fe.muscles.put(o)},async archiveMuscle(a){const{data:n,error:i}=await Qe.from("muscles").update({status:!1}).eq("id",a).select().single();if(i)throw i;await fe.muscles.put(n)},async addExercise(a,n,i){const{data:s,error:o}=await Qe.from("exercises").insert([a]).select().single();if(o)throw o;await fe.exercises.put(s);const c=[];if(n.length>0){const p=n.map(g=>({exercise_id:s.id,muscle_id:g.id,role:g.role}));c.push(Qe.from("exercise_muscles").insert(p).then(()=>fe.exercise_muscles.bulkPut(p)))}if(i){const p={exercise_id:s.id,equipment_id:parseInt(i)};c.push(Qe.from("exercise_equipment").insert([p]).then(()=>fe.exercise_equipment.put(p)))}return await Promise.all(c),s},async updateExercise(a,n,i,s){const{data:o,error:c}=await Qe.from("exercises").update(n).eq("id",a).select().single();if(c)throw c;if(await fe.exercises.put(o),await Promise.all([Qe.from("exercise_muscles").delete().eq("exercise_id",a),fe.exercise_muscles.where("exercise_id").equals(a).delete()]),i.length>0){const p=i.map(g=>({exercise_id:a,muscle_id:g.id,role:g.role}));await Qe.from("exercise_muscles").insert(p),await fe.exercise_muscles.bulkPut(p)}if(await Promise.all([Qe.from("exercise_equipment").delete().eq("exercise_id",a),fe.exercise_equipment.where("exercise_id").equals(a).delete()]),s){const p={exercise_id:a,equipment_id:parseInt(s)};await Qe.from("exercise_equipment").insert([p]),await fe.exercise_equipment.put(p)}},async archiveExercise(a){const{data:n,error:i}=await Qe.from("exercises").update({status:!1}).eq("id",a).select().single();if(i)throw i;await fe.exercises.put(n)},resetLock(){vc=!1}},Cv=6048e5,V1=864e5,Ry=Symbol.for("constructDateFrom");function vr(a,n){return typeof a=="function"?a(n):a&&typeof a=="object"&&Ry in a?a[Ry](n):a instanceof Date?new a.constructor(n):new Date(n)}function oa(a,n){return vr(n||a,a)}function Y1(a,n,i){const s=oa(a,i?.in);return isNaN(n)?vr(a,NaN):(n&&s.setDate(s.getDate()+n),s)}let Q1={};function Pc(){return Q1}function Fi(a,n){const i=Pc(),s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=oa(a,n?.in),c=o.getDay(),p=(c<s?7:0)+c-s;return o.setDate(o.getDate()-p),o.setHours(0,0,0,0),o}function Cc(a,n){return Fi(a,{...n,weekStartsOn:1})}function Rv(a,n){const i=oa(a,n?.in),s=i.getFullYear(),o=vr(i,0);o.setFullYear(s+1,0,4),o.setHours(0,0,0,0);const c=Cc(o),p=vr(i,0);p.setFullYear(s,0,4),p.setHours(0,0,0,0);const g=Cc(p);return i.getTime()>=c.getTime()?s+1:i.getTime()>=g.getTime()?s:s-1}function Dy(a){const n=oa(a),i=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return i.setUTCFullYear(n.getFullYear()),+a-+i}function Dv(a,...n){const i=vr.bind(null,n.find(s=>typeof s=="object"));return n.map(i)}function Rc(a,n){const i=oa(a,n?.in);return i.setHours(0,0,0,0),i}function X1(a,n,i){const[s,o]=Dv(i?.in,a,n),c=Rc(s),p=Rc(o),g=+c-Dy(c),v=+p-Dy(p);return Math.round((g-v)/V1)}function W1(a,n){const i=Rv(a,n),s=vr(a,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Cc(s)}function J1(a,n,i){const[s,o]=Dv(i?.in,a,n);return+Rc(s)==+Rc(o)}function F1(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Z1(a){return!(!F1(a)&&typeof a!="number"||isNaN(+oa(a)))}function eS(a,n){const i=oa(a,n?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const tS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nS=(a,n,i)=>{let s;const o=tS[a];return typeof o=="string"?s=o:n===1?s=o.one:s=o.other.replace("{{count}}",n.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};function ah(a){return(n={})=>{const i=n.width?String(n.width):a.defaultWidth;return a.formats[i]||a.formats[a.defaultWidth]}}const aS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sS={date:ah({formats:aS,defaultWidth:"full"}),time:ah({formats:rS,defaultWidth:"full"}),dateTime:ah({formats:iS,defaultWidth:"full"})},lS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oS=(a,n,i,s)=>lS[a];function No(a){return(n,i)=>{const s=i?.context?String(i.context):"standalone";let o;if(s==="formatting"&&a.formattingValues){const p=a.defaultFormattingWidth||a.defaultWidth,g=i?.width?String(i.width):p;o=a.formattingValues[g]||a.formattingValues[p]}else{const p=a.defaultWidth,g=i?.width?String(i.width):a.defaultWidth;o=a.values[g]||a.values[p]}const c=a.argumentCallback?a.argumentCallback(n):n;return o[c]}}const uS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pS=(a,n)=>{const i=Number(a),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},gS={ordinalNumber:pS,era:No({values:uS,defaultWidth:"wide"}),quarter:No({values:cS,defaultWidth:"wide",argumentCallback:a=>a-1}),month:No({values:dS,defaultWidth:"wide"}),day:No({values:fS,defaultWidth:"wide"}),dayPeriod:No({values:hS,defaultWidth:"wide",formattingValues:mS,defaultFormattingWidth:"wide"})};function To(a){return(n,i={})=>{const s=i.width,o=s&&a.matchPatterns[s]||a.matchPatterns[a.defaultMatchWidth],c=n.match(o);if(!c)return null;const p=c[0],g=s&&a.parsePatterns[s]||a.parsePatterns[a.defaultParseWidth],v=Array.isArray(g)?vS(g,j=>j.test(p)):yS(g,j=>j.test(p));let b;b=a.valueCallback?a.valueCallback(v):v,b=i.valueCallback?i.valueCallback(b):b;const S=n.slice(p.length);return{value:b,rest:S}}}function yS(a,n){for(const i in a)if(Object.prototype.hasOwnProperty.call(a,i)&&n(a[i]))return i}function vS(a,n){for(let i=0;i<a.length;i++)if(n(a[i]))return i}function bS(a){return(n,i={})=>{const s=n.match(a.matchPattern);if(!s)return null;const o=s[0],c=n.match(a.parsePattern);if(!c)return null;let p=a.valueCallback?a.valueCallback(c[0]):c[0];p=i.valueCallback?i.valueCallback(p):p;const g=n.slice(o.length);return{value:p,rest:g}}}const xS=/^(\d+)(th|st|nd|rd)?/i,wS=/\d+/i,_S={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},SS={any:[/^b/i,/^(a|c)/i]},jS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kS={any:[/1/i,/2/i,/3/i,/4/i]},ES={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},AS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RS={ordinalNumber:bS({matchPattern:xS,parsePattern:wS,valueCallback:a=>parseInt(a,10)}),era:To({matchPatterns:_S,defaultMatchWidth:"wide",parsePatterns:SS,defaultParseWidth:"any"}),quarter:To({matchPatterns:jS,defaultMatchWidth:"wide",parsePatterns:kS,defaultParseWidth:"any",valueCallback:a=>a+1}),month:To({matchPatterns:ES,defaultMatchWidth:"wide",parsePatterns:NS,defaultParseWidth:"any"}),day:To({matchPatterns:TS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any"}),dayPeriod:To({matchPatterns:AS,defaultMatchWidth:"any",parsePatterns:CS,defaultParseWidth:"any"})},DS={code:"en-US",formatDistance:nS,formatLong:sS,formatRelative:oS,localize:gS,match:RS,options:{weekStartsOn:0,firstWeekContainsDate:1}};function MS(a,n){const i=oa(a,n?.in);return X1(i,eS(i))+1}function zS(a,n){const i=oa(a,n?.in),s=+Cc(i)-+W1(i);return Math.round(s/Cv)+1}function Mv(a,n){const i=oa(a,n?.in),s=i.getFullYear(),o=Pc(),c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,p=vr(n?.in||a,0);p.setFullYear(s+1,0,c),p.setHours(0,0,0,0);const g=Fi(p,n),v=vr(n?.in||a,0);v.setFullYear(s,0,c),v.setHours(0,0,0,0);const b=Fi(v,n);return+i>=+g?s+1:+i>=+b?s:s-1}function US(a,n){const i=Pc(),s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=Mv(a,n),c=vr(n?.in||a,0);return c.setFullYear(o,0,s),c.setHours(0,0,0,0),Fi(c,n)}function LS(a,n){const i=oa(a,n?.in),s=+Fi(i,n)-+US(i,n);return Math.round(s/Cv)+1}function gt(a,n){const i=a<0?"-":"",s=Math.abs(a).toString().padStart(n,"0");return i+s}const ri={y(a,n){const i=a.getFullYear(),s=i>0?i:1-i;return gt(n==="yy"?s%100:s,n.length)},M(a,n){const i=a.getMonth();return n==="M"?String(i+1):gt(i+1,2)},d(a,n){return gt(a.getDate(),n.length)},a(a,n){const i=a.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(a,n){return gt(a.getHours()%12||12,n.length)},H(a,n){return gt(a.getHours(),n.length)},m(a,n){return gt(a.getMinutes(),n.length)},s(a,n){return gt(a.getSeconds(),n.length)},S(a,n){const i=n.length,s=a.getMilliseconds(),o=Math.trunc(s*Math.pow(10,i-3));return gt(o,n.length)}},tl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},My={G:function(a,n,i){const s=a.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});default:return i.era(s,{width:"wide"})}},y:function(a,n,i){if(n==="yo"){const s=a.getFullYear(),o=s>0?s:1-s;return i.ordinalNumber(o,{unit:"year"})}return ri.y(a,n)},Y:function(a,n,i,s){const o=Mv(a,s),c=o>0?o:1-o;if(n==="YY"){const p=c%100;return gt(p,2)}return n==="Yo"?i.ordinalNumber(c,{unit:"year"}):gt(c,n.length)},R:function(a,n){const i=Rv(a);return gt(i,n.length)},u:function(a,n){const i=a.getFullYear();return gt(i,n.length)},Q:function(a,n,i){const s=Math.ceil((a.getMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return gt(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(a,n,i){const s=Math.ceil((a.getMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return gt(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(a,n,i){const s=a.getMonth();switch(n){case"M":case"MM":return ri.M(a,n);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(a,n,i){const s=a.getMonth();switch(n){case"L":return String(s+1);case"LL":return gt(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(a,n,i,s){const o=LS(a,s);return n==="wo"?i.ordinalNumber(o,{unit:"week"}):gt(o,n.length)},I:function(a,n,i){const s=zS(a);return n==="Io"?i.ordinalNumber(s,{unit:"week"}):gt(s,n.length)},d:function(a,n,i){return n==="do"?i.ordinalNumber(a.getDate(),{unit:"date"}):ri.d(a,n)},D:function(a,n,i){const s=MS(a);return n==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):gt(s,n.length)},E:function(a,n,i){const s=a.getDay();switch(n){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(a,n,i,s){const o=a.getDay(),c=(o-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return gt(c,2);case"eo":return i.ordinalNumber(c,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(a,n,i,s){const o=a.getDay(),c=(o-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return gt(c,n.length);case"co":return i.ordinalNumber(c,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(a,n,i){const s=a.getDay(),o=s===0?7:s;switch(n){case"i":return String(o);case"ii":return gt(o,n.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(a,n,i){const o=a.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(a,n,i){const s=a.getHours();let o;switch(s===12?o=tl.noon:s===0?o=tl.midnight:o=s/12>=1?"pm":"am",n){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(a,n,i){const s=a.getHours();let o;switch(s>=17?o=tl.evening:s>=12?o=tl.afternoon:s>=4?o=tl.morning:o=tl.night,n){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(a,n,i){if(n==="ho"){let s=a.getHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return ri.h(a,n)},H:function(a,n,i){return n==="Ho"?i.ordinalNumber(a.getHours(),{unit:"hour"}):ri.H(a,n)},K:function(a,n,i){const s=a.getHours()%12;return n==="Ko"?i.ordinalNumber(s,{unit:"hour"}):gt(s,n.length)},k:function(a,n,i){let s=a.getHours();return s===0&&(s=24),n==="ko"?i.ordinalNumber(s,{unit:"hour"}):gt(s,n.length)},m:function(a,n,i){return n==="mo"?i.ordinalNumber(a.getMinutes(),{unit:"minute"}):ri.m(a,n)},s:function(a,n,i){return n==="so"?i.ordinalNumber(a.getSeconds(),{unit:"second"}):ri.s(a,n)},S:function(a,n){return ri.S(a,n)},X:function(a,n,i){const s=a.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return Uy(s);case"XXXX":case"XX":return Vi(s);default:return Vi(s,":")}},x:function(a,n,i){const s=a.getTimezoneOffset();switch(n){case"x":return Uy(s);case"xxxx":case"xx":return Vi(s);default:return Vi(s,":")}},O:function(a,n,i){const s=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+zy(s,":");default:return"GMT"+Vi(s,":")}},z:function(a,n,i){const s=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+zy(s,":");default:return"GMT"+Vi(s,":")}},t:function(a,n,i){const s=Math.trunc(+a/1e3);return gt(s,n.length)},T:function(a,n,i){return gt(+a,n.length)}};function zy(a,n=""){const i=a>0?"-":"+",s=Math.abs(a),o=Math.trunc(s/60),c=s%60;return c===0?i+String(o):i+String(o)+n+gt(c,2)}function Uy(a,n){return a%60===0?(a>0?"-":"+")+gt(Math.abs(a)/60,2):Vi(a,n)}function Vi(a,n=""){const i=a>0?"-":"+",s=Math.abs(a),o=gt(Math.trunc(s/60),2),c=gt(s%60,2);return i+o+n+c}const Ly=(a,n)=>{switch(a){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});default:return n.date({width:"full"})}},zv=(a,n)=>{switch(a){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});default:return n.time({width:"full"})}},qS=(a,n)=>{const i=a.match(/(P+)(p+)?/)||[],s=i[1],o=i[2];if(!o)return Ly(a,n);let c;switch(s){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",Ly(s,n)).replace("{{time}}",zv(o,n))},BS={p:zv,P:qS},PS=/^D+$/,$S=/^Y+$/,HS=["D","DD","YY","YYYY"];function KS(a){return PS.test(a)}function GS(a){return $S.test(a)}function IS(a,n,i){const s=VS(a,n,i);if(console.warn(s),HS.includes(a))throw new RangeError(s)}function VS(a,n,i){const s=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${n}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const YS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XS=/^'([^]*?)'?$/,WS=/''/g,JS=/[a-zA-Z]/;function Co(a,n,i){const s=Pc(),o=s.locale??DS,c=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,p=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,g=oa(a,i?.in);if(!Z1(g))throw new RangeError("Invalid time value");let v=n.match(QS).map(S=>{const j=S[0];if(j==="p"||j==="P"){const T=BS[j];return T(S,o.formatLong)}return S}).join("").match(YS).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const j=S[0];if(j==="'")return{isToken:!1,value:FS(S)};if(My[j])return{isToken:!0,value:S};if(j.match(JS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(v=o.localize.preprocessor(g,v));const b={firstWeekContainsDate:c,weekStartsOn:p,locale:o};return v.map(S=>{if(!S.isToken)return S.value;const j=S.value;(GS(j)||KS(j))&&IS(j,n,String(a));const T=My[j[0]];return T(g,j,o.localize,b)}).join("")}function FS(a){const n=a.match(XS);return n?n[1].replace(WS,"'"):a}const dl={async reconcile(){console.log(" SyncManager: Reconciling...");try{const a=await ht.getPendingWorkouts(),n=await ht.getPendingLogs();a.length>0&&(await ht.pushWorkoutsToSupabase(a),console.log(` Synced ${a.length} workouts.`)),n.length>0&&(await ht.pushLogsToSupabase(n),console.log(` Synced ${n.length} logs.`))}catch(a){console.error(" SyncManager Error:",a)}},watchConnection(){window.addEventListener("online",()=>this.reconcile())}};class Xi{static getISTDate(n=new Date){return new Date(n.getTime()+198e5).toISOString().replace("Z","")}static formatToISTDisplay(n){return n?new Date(n).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0,hour:"2-digit",minute:"2-digit"}):""}}let bc=!1;const ht={getActiveWorkoutQuery(){return fe.workouts.where("status").equals(1).sortBy("start_time").then(a=>a.length?a[a.length-1]:null)},getWorkoutLogsQuery(a){return fe.workout_logs.where("workout_id").equals(a).sortBy("exercise_order","set_number")},async getPendingWorkouts(){return await fe.workouts.where("is_synced").equals(0).and(a=>a.status===0).toArray()},async getPendingLogs(){return await fe.workout_logs.where("is_synced").equals(0).toArray()},async startNewWorkout(a,n,i=[]){const s=await fe.workouts.where("status").equals(1).first();if(s)return s.id;const o=crypto.randomUUID(),c=Xi.getISTDate();if(await fe.workouts.put({id:o,user_id:a,routine_id:n||null,start_time:c,finish_time:"",status:1,rest_day:0,is_synced:0,created_at:c,updated_at:null}),i.length>0){const p=i.map((g,v)=>({...g,id:crypto.randomUUID(),workout_id:o,exercise_order:g.exercise_order??v,set_number:g.set_number||1,is_synced:0,completed:0}));await fe.workout_logs.bulkPut(p)}return o},async addExercisesToActive(a,n){const i=await fe.workout_logs.where("workout_id").equals(a).toArray(),s=i.length>0?Math.max(...i.map(c=>c.exercise_order||0)):-1,o=n.map((c,p)=>({id:crypto.randomUUID(),workout_id:a,exercise_id:c,set_number:1,reps:10,weight:0,exercise_order:s+1+p,is_synced:0,completed:0,created_at:Xi.getISTDate(),updated_at:null}));return await fe.workout_logs.bulkPut(o)},async addSet(a,n,i){const s=await fe.workout_logs.where({workout_id:a,exercise_id:n}).reverse().first(),o=await fe.workout_logs.where({workout_id:a,exercise_id:n}).first();return await fe.workout_logs.add({id:crypto.randomUUID(),workout_id:a,exercise_id:n,set_number:i,exercise_order:o?.exercise_order||0,reps:s?.reps||10,weight:s?.weight||0,distance:s?.distance||0,duration:s?.duration||0,completed:0,is_synced:0,created_at:Xi.getISTDate(),updated_at:null})},async updateLog(a){return await fe.workout_logs.put(a)},async deleteSet(a){return await fe.workout_logs.delete(a)},async deleteExercise(a,n){return await fe.workout_logs.where({workout_id:a,exercise_id:n}).delete()},async finishWorkout(a,n,i){const s={notes:n,status:0,is_synced:0};i?(s.start_time=i.start,s.finish_time=i.end):s.finish_time=Xi.getISTDate(),await fe.workouts.update(a,s),dl.watchConnection(),dl.reconcile()},async discardWorkout(a){return await fe.transaction("rw",[fe.workouts,fe.workout_logs],async()=>{await fe.workout_logs.where("workout_id").equals(a).delete(),await fe.workouts.delete(a)})},async pushWorkoutsToSupabase(a){const n=a.map(({is_synced:o,status:c,rest_day:p,...g})=>({...g,status:!1,rest_day:p===1})),{error:i}=await Qe.from("workouts").upsert(n);if(i)throw i;const s=a.map(o=>o.id);await fe.workouts.where("id").anyOf(s).modify({is_synced:1})},async pushLogsToSupabase(a){const n=a.map(({is_synced:o,completed:c,...p})=>({...p})),{error:i}=await Qe.from("workout_logs").upsert(n);if(i)throw i;const s=a.map(o=>o.id);await fe.workout_logs.where("id").anyOf(s).modify({is_synced:1})},async syncRecentWorkouts(a,n=!1){if(bc&&!n)return;const i=Fi(new Date,{weekStartsOn:1}).toISOString();if(await fe.workouts.where("start_time").above(i).count()>0&&!n){bc=!0;return}const{data:o,error:c}=await Qe.from("workouts").select("*").eq("user_id",a).gte("start_time",i);if(c)throw c;if(o){const p=o.map(g=>({...g,is_synced:1,status:g.status?1:0}));await fe.workouts.bulkPut(p)}bc=!0},async logRestDay(a){const n=Xi.getISTDate(),i={id:crypto.randomUUID(),user_id:a,rest_day:!0,status:!1,start_time:n,finish_time:n,created_at:n,updated_at:n},{error:s}=await Qe.from("workouts").insert(i);await fe.workouts.put({...i,status:0,is_synced:s?0:1,rest_day:1})},resetLock(){bc=!1}};let rh=!1;const Ji={async syncRoutine(a,n=!1){if(rh&&!n)return;const[i,s]=await Promise.all([Qe.from("routines").select("*").or(`created_by.eq.${a},is_public.eq.true`).eq("status",!0).order("name",{ascending:!0}),Qe.from("routine_exercises").select("*")]);if(i.error||s.error){console.error("Sync Error:",i.error||s.error);return}await fe.transaction("rw",[fe.routines,fe.routine_exercises],async()=>{await fe.routines.clear(),await fe.routine_exercises.clear(),i.data&&await fe.routines.bulkPut(i.data),s.data&&await fe.routine_exercises.bulkPut(s.data)}),rh=!0},async getRoutinesWithMeta(){const[a,n,i,s]=await Promise.all([fe.routines.filter(o=>o.status!==!1).toArray(),fe.routine_exercises.toArray(),fe.exercise_muscles.toArray(),fe.muscles.toArray()]);return a.map(o=>{const c=n.filter(g=>g.routine_id===o.id).sort((g,v)=>(g.exercise_order??0)-(v.exercise_order??0)),p=new Set;return c.forEach(g=>{i.filter(v=>v.exercise_id===g.exercise_id&&v.role==="primary").forEach(v=>{const b=s.find(S=>S.id===v.muscle_id);b&&p.add(b.name)})}),{...o,exercise_count:c.length,muscles:Array.from(p).slice(0,3),exercises:c}})},async getRoutineDetail(a){const[n,i,s]=await Promise.all([fe.routines.get(a),fe.routine_exercises.where("routine_id").equals(a).sortBy("exercise_order"),fe.exercises.toArray()]);if(!n)return null;const o=i.map(c=>{const p=s.find(g=>g.id===c.exercise_id);return{...c,name:p?.name||"Unknown Exercise"}});return{...n,exercises:o}},async addRoutine(a,n){const{data:i,error:s}=await Qe.from("routines").insert([a]).select().single();if(s)throw s;const o=n.map((c,p)=>({routine_id:i.id,exercise_id:c.id,target_sets:c.target_sets,target_reps:c.target_reps,exercise_order:p}));await Qe.from("routine_exercises").insert(o),await fe.transaction("rw",[fe.routines,fe.routine_exercises],async()=>{await fe.routines.put(i),await fe.routine_exercises.bulkPut(o)})},async updateRoutine(a,n,i){const{data:s,error:o}=await Qe.from("routines").update(n).eq("id",a).select().single();if(o)throw o;await Qe.from("routine_exercises").delete().eq("routine_id",a);const c=i.map((p,g)=>({routine_id:a,exercise_id:p.exercise_id||p.id,target_sets:p.target_sets,target_reps:p.target_reps,exercise_order:g}));await Qe.from("routine_exercises").insert(c),await fe.transaction("rw",[fe.routines,fe.routine_exercises],async()=>{await fe.routines.put(s),await fe.routine_exercises.where("routine_id").equals(a).delete(),await fe.routine_exercises.bulkPut(c)})},async archiveRoutine(a){const{data:n,error:i}=await Qe.from("routines").update({status:!1}).eq("id",a).select().single();if(i)throw i;n&&await fe.routines.put(n)},resetLock(){rh=!1}};let xc=!1;const Uh={async syncMetadata(a=!1){if(xc&&!a)return;if(await fe.athlete_levels_lookup.count()>0&&!a){xc=!0;return}const{data:i,error:s}=await Qe.from("athlete_levels_lookup").select("*").order("display_order");if(s){console.error("Metadata sync error:",s);return}i&&(await fe.athlete_levels_lookup.bulkPut(i),xc=!0)},async updateLevel(a){return await Qe.from("athlete_level").upsert(a)},resetLock(){xc=!1}},Uv=C.createContext(void 0),ZS=({children:a})=>{const[n,i]=C.useState(null),[s,o]=C.useState(null),[c,p]=C.useState(!0),[g,v]=C.useState(null),b=async(T,A=!1)=>{v(null),p(!0);try{if(!A){const I=await fe.athlete_summary.get(T);if(I){o(I),p(!1);return}}const B=await I1.syncSummary(T);o(B)}catch(B){console.error("Fitnex Auth Error:",B),v(B.message||"Failed to sync athlete data"),o(null)}finally{p(!1)}};C.useEffect(()=>{const{data:{subscription:T}}=Qe.auth.onAuthStateChange(async(A,B)=>{B?.user?(i(B.user.id),await b(B.user.id)):(i(null),o(null),p(!1))});return()=>T.unsubscribe()},[]);const S=async()=>{n&&await b(n,!0)},j=async()=>{try{dl.watchConnection(),await dl.reconcile();const T=await fe.workout_logs.where("is_synced").equals(0).count();return T>0?{success:!1,message:`Wait! ${T} sets are not synced.`}:(Ft.resetLock(),ht.resetLock(),Ji.resetLock(),Uh.resetLock(),await Qe.auth.signOut(),await fe.delete(),i(null),o(null),window.location.href="/fitnex/login",{success:!0})}catch(T){return console.error("Sign-out error:",T),{success:!1,message:T.message}}};return f.jsx(Uv.Provider,{value:{user_id:n,athlete:s,loading:c,error:g,signOut:j,refreshAthlete:S},children:a})},jn=()=>{const a=C.useContext(Uv);if(!a)throw new Error("useAuth must be used within AuthProvider");return a},ll=({label:a,...n})=>f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1 ml-1",children:a}),f.jsx("input",{...n,className:"w-full h-12 bg-slate-900 border border-slate-800 rounded-xl px-4 focus:outline-none focus:ring-2 focus:ring-brand transition-all"})]}),qy="/fitnex/logo.webp",e2=()=>{const a=Zt(),[n,i]=C.useState(""),[s,o]=C.useState(""),[c,p]=C.useState(!1),[g,v]=C.useState(null),b=async S=>{S.preventDefault(),p(!0),v(null);const{error:j}=await Qe.auth.signInWithPassword({email:n,password:s});j?(v(j.message),p(!1)):a("/dashboard",{replace:!0})};return f.jsx("div",{className:"safe-ios-top h-screen w-full bg-black overflow-hidden animate-login",children:f.jsxs("div",{className:"h-full w-full flex flex-col lg:flex-row",children:[f.jsx("div",{className:"hidden lg:flex w-1/2 items-center justify-center bg-gradient-to-br from-brand to-brand/70",children:f.jsxs("div",{className:"flex flex-col items-center text-black space-y-3",children:[f.jsx("img",{src:qy,className:"w-[300px]"}),f.jsx("h1",{className:"text-4xl font-black tracking-tight",children:"TRACK-FIT"}),f.jsx("p",{className:"tracking-[0.35em] font-bold opacity-70",children:"PRO EDITION"})]})}),f.jsxs("div",{className:"flex lg:hidden h-full flex-col items-center justify-center px-6",children:[f.jsx("img",{src:qy,className:"w-56 mb-6"}),f.jsxs("div",{className:"w-full max-w-sm",children:[f.jsx("h1",{className:"text-2xl font-black text-center mb-2",children:"Welcome Back"}),f.jsx("p",{className:"text-center text-slate-400 text-sm mb-4",children:"Sign in to track your progress"}),f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"h-px flex-1 bg-white/10"}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-brand"}),f.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsx(ll,{label:"Email Address",type:"email",value:n,onChange:S=>i(S.target.value),placeholder:"name@example.com",required:!0}),f.jsx(ll,{label:"Password",type:"password",value:s,onChange:S=>o(S.target.value),placeholder:"",required:!0}),g&&f.jsx("p",{className:"text-red-500 text-[10px] font-black uppercase tracking-widest ml-1 bg-red-500/10 p-2 rounded-lg border border-red-500/20",children:g}),f.jsx("button",{disabled:c,className:"w-full h-14 bg-brand text-white font-black uppercase italic rounded-2xl mt-6 active:scale-[0.98] transition-all disabled:opacity-50 shadow-xl shadow-brand/20",children:c?"Authenticating...":"Sign In"})]})]})]}),f.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center px-6",children:f.jsxs("div",{className:"w-full max-w-sm",children:[f.jsx("h1",{className:"text-2xl font-black text-center mb-2",children:"Welcome Back"}),f.jsx("p",{className:"text-center text-slate-400 text-sm mb-4",children:"Sign in to track your progress"}),f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"h-px flex-1 bg-white/10"}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-brand"}),f.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsx(ll,{label:"Email Address",type:"email",value:n,onChange:S=>i(S.target.value),placeholder:"name@example.com",required:!0}),f.jsx(ll,{label:"Password",type:"password",value:s,onChange:S=>o(S.target.value),placeholder:"",required:!0}),g&&f.jsx("p",{className:"text-red-500 text-[10px] font-black uppercase tracking-widest ml-1 bg-red-500/10 p-2 rounded-lg border border-red-500/20",children:g}),f.jsx("button",{disabled:c,className:"w-full h-14 bg-brand text-white font-black uppercase italic rounded-2xl mt-6 active:scale-[0.98] transition-all disabled:opacity-50 shadow-xl shadow-brand/20",children:c?"Authenticating...":"Sign In"})]})]})})]})})},_h={async getLatestMetrics(){const{data:a,error:n}=await Qe.from("v_latest_body_metrics").select("*").maybeSingle();if(n)throw console.error("Error fetching metrics:",n.message),n;return a},async updateMetrics(a){const{error:n}=await Qe.from("body_metrics").upsert({...a,logdate:a.logdate||new Date().toISOString().split("T")[0]});if(n)throw console.error("Error updating metrics:",n.message),n;return!0}},Lv={async getProfile(a){const{data:n,error:i}=await Qe.from("user_profile").select("*").eq("user_id",a).single();return i?(console.error("Error fetching profile:",i.message),null):n},async updateProfile(a){const{data:n,error:i}=await Qe.from("user_profile").upsert({...a,updated_at:new Date().toISOString()}).select().single();if(i)throw new Error(`Profile update failed: ${i.message}`);return n}},t2=()=>{const{refreshAthlete:a}=jn();return{saveOnboarding:async(i,s,o)=>{try{const p=(await Promise.all([Lv.updateProfile(i),_h.updateMetrics(s),Uh.updateLevel(o)])).find(g=>g.error)?.error;if(p)throw new Error(p.message);return await a(),{success:!0}}catch(c){return console.error("Onboarding Service Error:",c),{success:!1,error:c.message}}}}};const qv=(...a)=>a.filter((n,i,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===i).join(" ").trim();const n2=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const a2=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,s)=>s?s.toUpperCase():i.toLowerCase());const By=a=>{const n=a2(a);return n.charAt(0).toUpperCase()+n.slice(1)};var r2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i2=a=>{for(const n in a)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const s2=C.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:p,...g},v)=>C.createElement("svg",{ref:v,...r2,width:n,height:n,stroke:a,strokeWidth:s?Number(i)*24/Number(n):i,className:qv("lucide",o),...!c&&!i2(g)&&{"aria-hidden":"true"},...g},[...p.map(([b,S])=>C.createElement(b,S)),...Array.isArray(c)?c:[c]]));const Ce=(a,n)=>{const i=C.forwardRef(({className:s,...o},c)=>C.createElement(s2,{ref:c,iconNode:n,className:qv(`lucide-${n2(By(a))}`,`lucide-${a}`,s),...o}));return i.displayName=By(a),i};const l2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],o2=Ce("activity",l2);const u2=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],c2=Ce("award",u2);const d2=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Bv=Ce("box",d2);const f2=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],h2=Ce("calendar-clock",f2);const m2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],p2=Ce("calendar",m2);const g2=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],y2=Ce("chart-no-axes-column",g2);const v2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gl=Ce("check",v2);const b2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yl=Ce("chevron-down",b2);const x2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Pv=Ce("chevron-left",x2);const w2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zi=Ce("chevron-right",w2);const _2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],S2=Ce("chevron-up",_2);const j2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lh=Ce("circle-alert",j2);const k2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],E2=Ce("circle-user",k2);const N2=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],qh=Ce("clipboard-list",N2);const T2=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],O2=Ce("coffee",T2);const A2=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Ho=Ce("dumbbell",A2);const C2=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],R2=Ce("flame",C2);const D2=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],M2=Ce("git-commit-horizontal",D2);const z2=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],U2=Ce("git-compare",z2);const L2=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],$v=Ce("git-merge",L2);const q2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$c=Ce("globe",q2);const B2=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],P2=Ce("hash",B2);const $2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],H2=Ce("heart",$2);const K2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],G2=Ce("house",K2);const I2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Hv=Ce("library",I2);const V2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Y2=Ce("loader-circle",V2);const Q2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Hc=Ce("lock",Q2);const X2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kv=Ce("log-out",X2);const W2=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ua=Ce("minus",W2);const J2=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],F2=Ce("moon",J2);const Z2=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]],Gv=Ce("move-vertical",Z2);const ej=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Iv=Ce("move",ej);const tj=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],nj=Ce("paintbrush",tj);const aj=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],rj=Ce("palette",aj);const ij=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],sj=Ce("percent",ij);const lj=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12",key:"1y3wsu"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z",key:"110lr1"}],["path",{d:"m2 22 .414-.414",key:"jhxm08"}]],oj=Ce("pipette",lj);const uj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Dc=Ce("play",uj);const cj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gr=Ce("plus",cj);const dj=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Sh=Ce("refresh-ccw",dj);const fj=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Vv=Ce("repeat",fj);const hj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mj=Ce("rotate-ccw",hj);const pj=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Yv=Ce("ruler",pj);const gj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bh=Ce("save",gj);const yj=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Qv=Ce("scale",yj);const vj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vl=Ce("search",vj);const bj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xj=Ce("settings",bj);const wj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ph=Ce("sparkles",wj);const _j=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Xv=Ce("star",_j);const Sj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],jj=Ce("sun",Sj);const kj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],es=Ce("target",kj);const Ej=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Kc=Ce("timer",Ej);const Nj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vo=Ce("trash-2",Nj);const Tj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Oj=Ce("trending-up",Tj);const Aj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Yo=Ce("trophy",Aj);const Cj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qo=Ce("user",Cj);const Rj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dj=Ce("users",Rj);const Mj=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Wv=Ce("weight",Mj);const zj=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Uj=Ce("wind",zj);const Lj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gc=Ce("x",Lj);const qj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bl=Ce("zap",qj),Bj=({value:a,onChange:n})=>{const i=[{id:"male",label:"Male",icon:f.jsx(Qo,{size:32})},{id:"female",label:"Female",icon:f.jsx(E2,{size:32})},{id:"other",label:"Other",icon:f.jsx(Dj,{size:32})}];return f.jsx("div",{className:"grid grid-cols-1 gap-4 w-full",children:i.map(s=>f.jsxs("button",{type:"button",onClick:()=>n(s.id),className:`flex items-center gap-6 p-6 rounded-3xl border-2 transition-all active:scale-95 ${a===s.id?"border-brand bg-brand/10 text-brand":"border-slate-800 bg-slate-900/50 text-slate-500"}`,children:[f.jsx("div",{className:`p-4 rounded-2xl ${a===s.id?"bg-brand text-white shadow-lg shadow-brand/30":"bg-slate-800"}`,children:s.icon}),f.jsx("span",{className:"text-xl font-bold uppercase tracking-tight",children:s.label})]},s.id))})},ih=({min:a,max:n,value:i,onChange:s,unit:o})=>{const c=C.useRef(null),p=20,g=()=>{if(!c.current)return;const{scrollLeft:v}=c.current,b=Math.round(v/p),S=a+b;S!==i&&S>=a&&S<=n&&s(S)};return C.useEffect(()=>{c.current&&(c.current.scrollLeft=(i-a)*p)},[]),f.jsxs("div",{className:"flex flex-col items-center w-full py-6 select-none overflow-hidden",children:[f.jsxs("div",{className:"text-7xl font-black mb-4 flex items-baseline gap-2 tabular-nums",children:[i," ",f.jsx("span",{className:"text-2xl text-brand font-bold uppercase",children:o})]}),f.jsxs("div",{className:"relative w-full h-32 flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 flex justify-center pointer-events-none z-20",children:f.jsx("div",{className:"w-1.5 h-24 bg-brand rounded-full shadow-[0_0_20px_rgba(14,165,233,0.8)]"})}),f.jsxs("div",{ref:c,onScroll:g,className:"w-full flex overflow-x-auto snap-x snap-mandatory no-scrollbar",children:[f.jsx("div",{className:"flex-shrink-0 w-[50%]",style:{marginLeft:`-${p/2}px`}}),Array.from({length:n-a+1},(v,b)=>a+b).map(v=>f.jsxs("div",{className:"flex flex-col items-center justify-end flex-shrink-0 snap-center z-10",style:{width:`${p}px`},children:[f.jsx("div",{className:`w-1 rounded-full mb-3 transition-all duration-150 ${v===i?"bg-brand h-20 opacity-100 scale-x-150":v%5===0?"h-10 bg-slate-500 opacity-60":"h-6 bg-slate-800 opacity-40"}`}),v%5===0&&f.jsx("span",{className:`text-[10px] font-black transition-colors ${v===i?"text-brand":"text-slate-600"}`,children:v})]},v)),f.jsx("div",{className:"flex-shrink-0 w-[50%]",style:{marginRight:`-${p/2}px`}})]})]})]})},Pj=({value:a,onChange:n})=>{const[i,s]=C.useState([]);C.useEffect(()=>{(async()=>{const{data:p}=await Qe.from("athlete_levels_lookup").select("*").eq("status",!0).order("display_order",{ascending:!0});p&&s(p)})()},[]);const o=c=>{const p=Math.floor(c/2);if(p===0)return"Beginner";if(p<30)return`${p} Day${p>1?"s":""} Experience`;const g=Math.floor(p/30.44);if(g<12)return`${g} Month${g>1?"s":""} Experience`;const v=Math.floor(g/12),b=g%12;return b===0?`${v} Year${v>1?"s":""} Experience`:`${v}y ${b}m Experience`};return f.jsxs("div",{className:"relative w-full h-[380px]",children:[f.jsx("div",{className:"h-full overflow-y-auto pr-2 space-y-4 no-scrollbar pb-10",children:i.map(c=>f.jsxs("button",{onClick:()=>n(c.level_name,c.min_points),className:`w-full flex items-center gap-4 p-5 rounded-[2rem] border-2 transition-all active:scale-95 text-left ${a===c.level_name?"border-brand bg-brand/10 shadow-lg":"border-slate-800 bg-slate-900/40"}`,children:[f.jsx("div",{className:`p-3 rounded-2xl ${a===c.level_name?"bg-brand text-white":"bg-slate-800 text-slate-500"}`,children:c.multiplier>1.8?f.jsx(Yo,{size:24}):c.multiplier>1.2?f.jsx(Xv,{size:24}):f.jsx(bl,{size:24})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:`text-lg font-black block uppercase tracking-tight ${a===c.level_name?"text-white":"text-slate-300"}`,children:c.level_name}),f.jsx("span",{className:"text-[11px] text-slate-500 font-bold uppercase tracking-wider",children:o(c.min_points)})]})]},c.id))}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black to-transparent pointer-events-none"})]})},$j=()=>{const{user_id:a,refreshProfile:n}=jn(),{saveOnboarding:i}=t2(),[s,o]=C.useState(1),[c,p]=C.useState(!1),[g,v]=C.useState({name:"",gender:"male",birthdate:"",height:175,current_weight:80,target_weight:75,target_workout_days:4,selected_level:"Novice",initial_points:0}),b=C.useMemo(()=>{const A=g.height/100,B=parseFloat((g.current_weight/(A*A)).toFixed(1));return B<18.5?{val:B,label:"Underweight",color:"text-yellow-500"}:B<25?{val:B,label:"Healthy",color:"text-brand"}:B<30?{val:B,label:"Overweight",color:"text-orange-500"}:{val:B,label:"Obese",color:"text-red-500"}},[g.height,g.current_weight]),S=g.current_weight-g.target_weight,j=C.useMemo(()=>S>0?`That's a ${S}kg loss plan!`:S<0?`Targeting a ${Math.abs(S)}kg gain!`:"Staying steady and strong!",[S]),T=async()=>{if(a){p(!0);try{await i({user_id:a,name:g.name,gender:g.gender,birthdate:g.birthdate,target_weight:g.target_weight,target_days_per_week:g.target_workout_days,role:"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},g.current_weight,g.height,g.selected_level,g.initial_points),await n()}catch(A){console.error("Onboarding Error:",A)}finally{p(!1)}}};return f.jsxs("div",{className:"flex flex-col h-screen bg-transparent text-white pt-safe overflow-hidden",children:[f.jsx("div",{className:"flex-none h-1 w-full bg-slate-900/30",children:f.jsx("div",{className:"h-full bg-brand transition-all duration-700 shadow-[0_0_15px_#0ea5e9]",style:{width:`${s/6*100}%`}})}),f.jsx("div",{className:"flex-1 overflow-y-auto touch-pan-y no-scrollbar px-8 pt-8",children:f.jsxs("div",{className:"min-h-full flex flex-col",children:[s===1&&f.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("header",{className:"space-y-1",children:[f.jsxs("h1",{className:"text-4xl font-black uppercase leading-tight italic tracking-tighter",children:["First, ",f.jsx("br",{})," the ",f.jsx("span",{className:"text-brand",children:"Basics"})]}),f.jsx("p",{className:"text-slate-400 font-medium italic",children:"What should we call you?"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx(ll,{label:"FULL NAME",value:g.name,onChange:A=>v({...g,name:A.target.value}),placeholder:"John Doe"}),f.jsx("p",{className:"text-slate-500 font-black uppercase text-[10px] tracking-widest ml-1",children:"Gender"}),f.jsx(Bj,{value:g.gender,onChange:A=>v({...g,gender:A})}),f.jsx("p",{className:"text-slate-500 font-black uppercase text-[10px] tracking-widest ml-1",children:"Birthday"}),f.jsx(ll,{label:"BIRTH DATE",type:"date",value:g.birthdate,onChange:A=>v({...g,birthdate:A.target.value})})]})]}),s===2&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx(Ph,{className:"mx-auto mb-4 text-brand animate-pulse",size:32}),f.jsxs("h1",{className:"text-3xl font-black uppercase italic tracking-tight",children:["Nice to meet you, ",f.jsx("br",{}),f.jsxs("span",{className:"text-brand",children:[g.name.split(" ")[0]||"Athlete","!"]})]}),f.jsx("p",{className:"text-slate-400 font-medium mb-10 italic",children:"How tall are you?"}),f.jsx(ih,{min:100,max:250,value:g.height,unit:"cm",onChange:A=>v({...g,height:A})})]}),s===3&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx("h1",{className:"text-3xl font-black uppercase italic text-white tracking-tight",children:"Current Weight"}),f.jsx("p",{className:"text-slate-400 font-medium mb-10 italic",children:"Your starting point today"}),f.jsx(ih,{min:30,max:200,value:g.current_weight,unit:"kg",onChange:A=>v({...g,current_weight:A})}),f.jsxs("div",{className:"mt-8 bg-slate-900/40 border border-slate-800 p-6 rounded-[2rem] flex justify-between items-center backdrop-blur-md",children:[f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"BMI Index"}),f.jsx("p",{className:`text-lg font-black italic ${b.color}`,children:b.label})]}),f.jsx("div",{className:"text-5xl font-black italic tabular-nums text-white",children:b.val})]})]}),s===4&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx(es,{className:"mx-auto mb-4 text-brand",size:40}),f.jsx("h1",{className:"text-3xl font-black uppercase italic",children:"Target Weight"}),f.jsx("p",{className:"text-slate-400 font-medium mb-10 italic",children:"What is your dream goal?"}),f.jsx(ih,{min:30,max:200,value:g.target_weight,unit:"kg",onChange:A=>v({...g,target_weight:A})}),f.jsx("div",{className:"mt-8 py-3 px-8 bg-brand/10 border border-brand/20 rounded-full inline-block mx-auto animate-in zoom-in duration-500",children:f.jsx("span",{className:"text-brand font-black uppercase tracking-tighter text-xs italic",children:j})})]}),s===5&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx("h1",{className:"text-4xl font-black uppercase mb-4 leading-tight italic",children:"Commitment"}),f.jsx("p",{className:"text-slate-400 font-medium mb-12 italic",children:"How many days a week will you train?"}),f.jsx("div",{className:"flex justify-between items-center bg-slate-900/40 p-6 rounded-[2.5rem] border border-slate-800",children:[1,2,3,4,5,6,7].map(A=>f.jsx("button",{onClick:()=>v({...g,target_workout_days:A}),className:`w-10 h-10 rounded-full font-black transition-all ${g.target_workout_days===A?"bg-brand text-white scale-125 shadow-lg shadow-brand/40":"text-slate-600"}`,children:A},A))})]}),s===6&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center py-6",children:[f.jsxs("header",{className:"text-center mb-8",children:[f.jsx(Yo,{className:"mx-auto mb-2 text-brand",size:32}),f.jsx("h1",{className:"text-3xl font-black uppercase italic",children:"Experience"}),f.jsx("p",{className:"text-slate-400 font-medium italic",children:"Where should we start you off?"})]}),f.jsx(Pj,{value:g.selected_level,onChange:(A,B)=>v({...g,selected_level:A,initial_points:B})})]}),f.jsx("div",{className:"h-6 flex-none"})]})}),f.jsxs("footer",{className:"flex-none px-8 pt-2 pb-10 flex gap-3 bg-transparent mt-auto",children:[s>1&&f.jsx("button",{onClick:()=>o(A=>A-1),className:"h-14 w-14 bg-slate-900/80 rounded-2xl border border-slate-800 flex items-center justify-center text-slate-400 active:scale-90 transition-all",children:f.jsx(Pv,{size:24})}),f.jsx("button",{onClick:s===6?T:()=>o(A=>A+1),disabled:c||s===1&&!g.name,className:"h-14 flex-1 bg-brand text-white rounded-2xl font-black uppercase tracking-widest italic shadow-lg shadow-brand/20 active:scale-[0.98] transition-all disabled:opacity-30",children:c?f.jsx(Y2,{className:"animate-spin"}):f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx("span",{children:s===6?"Finish":"Continue"}),s<6&&f.jsx(Zi,{size:18,strokeWidth:3})]})})]})]})},Jv=C.createContext(void 0),Hj=({children:a})=>{const[n,i]=C.useState(!1),s=()=>i(!0),o=()=>i(!1);return f.jsx(Jv.Provider,{value:{isSidebarOpen:n,openSidebar:s,closeSidebar:o},children:a})},Fv=()=>{const a=C.useContext(Jv);if(!a)throw new Error("useUI must be used within UIProvider");return a},Kj=()=>{const{athlete:a}=jn(),{openSidebar:n}=Fv(),i=()=>{const o=new Date().getHours();return o<12?"Good morning,":o<17?"Good afternoon,":"Good evening,"},s=a?.name?a.name.split(" ")[0].charAt(0).toUpperCase()+a.name.split(" ")[0].slice(1).toLowerCase():"Athlete";return f.jsx("header",{className:"pt-4 pb-4 space-y-6 ios-no-top",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("p",{className:"flex items-center gap-1.5 text-brand font-black italic text-[11px] uppercase tracking-widest",children:[f.jsx(Ph,{size:12,strokeWidth:3}),i()]}),f.jsxs("h1",{className:"text-2xl font-black text-white tracking-tight",children:[s,"!"]})]}),f.jsx("button",{className:"w-12 h-12 rounded-2xl bg-slate-900 border border-slate-800 flex items-center justify-center text-slate-400 active:scale-90 transition-all",children:f.jsx(p2,{size:22})})]})})};function Gj(a,n,i){var s,o;typeof a=="function"?(s=n||[],o=i):(s=[],o=n);var c=nl.useRef({hasResult:!1,result:o,error:null}),p=nl.useReducer(function(b){return b+1},0);p[0];var g=p[1],v=nl.useMemo(function(){var b=typeof a=="function"?a():a;if(!b||typeof b.subscribe!="function")throw a===b?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!c.current.hasResult&&typeof window<"u"&&(typeof b.hasValue!="function"||b.hasValue()))if(typeof b.getValue=="function")c.current.result=b.getValue(),c.current.hasResult=!0;else{var S=b.subscribe(function(j){c.current.result=j,c.current.hasResult=!0});typeof S=="function"?S():S.unsubscribe()}return b},s);if(nl.useDebugValue(c.current.result),nl.useEffect(function(){var b=v.subscribe(function(S){var j=c.current;(j.error!==null||j.result!==S)&&(j.error=null,j.result=S,j.hasResult=!0,g())},function(S){var j=c.current;j.error!==S&&(j.error=S,g())});return typeof b=="function"?b:b.unsubscribe.bind(b)},s),c.current.error)throw c.current.error;return c.current.result}function ul(a,n,i){return Gj(function(){return cl.liveQuery(a)},n||[],i)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(a){var n=cl.DexieYProvider;n&&n.release(a)});const Zv=C.createContext(void 0),Ij=({children:a})=>{const n=Zt(),i=ul(()=>ht.getActiveWorkoutQuery()),s=ul(()=>i?ht.getWorkoutLogsQuery(i.id):[],[i]),o=(c="live")=>{n(`/workout/active?mode=${c}`)};return f.jsx(Zv.Provider,{value:{activeWorkout:i||null,activeLogs:s||[],isOngoing:!!i,resumeSession:o},children:a})},$h=()=>{const a=C.useContext(Zv);if(!a)throw new Error("useWorkout must be used within WorkoutProvider");return a},Vj=()=>{const{user_id:a}=jn(),n=Zt(),{isOngoing:i,resumeSession:s}=$h(),o=new Date,[c,p]=C.useState(!1),g=C.useMemo(()=>{const b=Fi(o,{weekStartsOn:1});return Array.from({length:7}).map((S,j)=>Y1(b,j))},[]),v=async b=>{if(a){if(b==="REST"){p(!1),await ht.logRestDay(a);return}if(b==="PAST"){p(!1),n("/workout/active?mode=past");return}p(!1);try{await ht.startNewWorkout(a),n("/workout/active?mode=live")}catch(S){console.error("Failed to start live workout:",S)}}};return f.jsxs("section",{className:"mt-2 relative",children:[f.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-black border border-slate-800 p-6 rounded-[2.5rem] shadow-xl",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Weekly Activity"}),f.jsx("div",{className:"px-3 py-1 bg-slate-900 rounded-full border border-slate-800",children:f.jsxs("span",{className:"text-[10px] font-black uppercase text-[var(--brand-primary)] italic",children:[Co(g[0],"MMM d"),"  ",Co(g[6],"MMM d")]})})]}),f.jsx("div",{className:"flex justify-between items-center mb-8",children:g.map(b=>{const S=J1(b,o);return f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx("span",{className:`text-[10px] font-black uppercase tracking-tighter ${S?"text-[var(--brand-primary)]":"text-slate-600"}`,children:Co(b,"EEE")}),f.jsx("div",{className:`w-9 h-9 rounded-2xl border-2 flex items-center justify-center transition-all ${S?"border-[var(--brand-primary)] bg-[var(--brand-primary)]/10":"border-slate-800 bg-black/40"}`,children:f.jsx("span",{className:`text-[11px] font-black ${S?"text-white":"text-slate-700"}`,children:Co(b,"d")})})]},b.toString())})}),f.jsxs("button",{onClick:()=>i?s():p(!0),className:`w-full py-4.5 rounded-2xl flex items-center justify-center gap-3 font-black uppercase italic text-[11px] tracking-widest transition-all active:scale-[0.98] shadow-lg ${i?"bg-[var(--brand-primary)] text-black":"bg-white text-black"}`,children:[i?f.jsx(mj,{size:16}):f.jsx(Dc,{size:16,fill:"currentColor"}),i?"Resume Session":"Start Workout"]})]}),c&&f.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:f.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-[3rem] p-8 animate-in slide-in-from-bottom duration-300",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h2",{className:"text-xl font-black uppercase italic text-white tracking-tight",children:"Session Type"}),f.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center text-slate-500 active:scale-90 transition-all",children:f.jsx(Gc,{size:20})})]}),f.jsxs("div",{className:"grid gap-4",children:[f.jsx(sh,{icon:f.jsx(Dc,{size:20,fill:"currentColor"}),title:"Live Workout",sub:"Real-time Tracking",color:"bg-[var(--brand-primary)]",onClick:()=>v("LIVE")}),f.jsx(sh,{icon:f.jsx(h2,{size:20}),title:"Log Previous",sub:"Manual Entry",color:"bg-slate-700 text-white",onClick:()=>v("PAST")}),f.jsx(sh,{icon:f.jsx(O2,{size:20}),title:"Rest Day",sub:"Recovery Mode",color:"bg-slate-800 text-white",onClick:()=>v("REST")})]})]})})]})},sh=({icon:a,title:n,sub:i,color:s,onClick:o})=>f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-5 p-5 bg-black border border-slate-800 rounded-3xl active:scale-[0.98] transition-all hover:border-slate-700",children:[f.jsx("div",{className:`w-12 h-12 rounded-2xl ${s} flex items-center justify-center shadow-lg`,children:a}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-[13px] font-black uppercase italic text-white leading-none",children:n}),f.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-1.5",children:i})]})]}),Yj=[{id:"strength",name:"Strength",icon:Ho,color:"bg-orange-500",bg:"from-orange-500/20"},{id:"hiit",name:"HIIT",icon:bl,color:"bg-yellow-500",bg:"from-yellow-500/20"},{id:"cardio",name:"Cardio",icon:H2,color:"bg-red-500",bg:"from-red-500/20"},{id:"endurance",name:"Endurance",icon:Kc,color:"bg-blue-500",bg:"from-blue-500/20"},{id:"mobility",name:"Mobility",icon:Uj,color:"bg-emerald-500",bg:"from-emerald-500/20"}],Qj=()=>f.jsxs("section",{className:"mt-8 space-y-4",children:[f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Training Focus"}),f.jsx("button",{className:"text-[10px] font-black uppercase text-brand",children:"Explore All"})]}),f.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2",children:Yj.map(a=>f.jsxs("button",{className:"flex-shrink-0 group relative w-32 h-40 bg-gradient-to-br to-slate-950 border border-slate-800 rounded-[2rem] overflow-hidden transition-all active:scale-95",children:[f.jsx("div",{className:`absolute inset-0 bg-gradient-to-b ${a.bg} to-transparent opacity-40 group-hover:opacity-60 transition-opacity`}),f.jsxs("div",{className:"relative h-full flex flex-col items-center justify-between py-6",children:[f.jsx("div",{className:`w-12 h-12 rounded-2xl ${a.color} flex items-center justify-center shadow-lg`,children:f.jsx(a.icon,{size:24,className:"text-black"})}),f.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-white group-hover:text-brand transition-colors",children:a.name})]})]},a.id))})]}),Xj=()=>f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] px-6 space-y-4 min-h-screen pb-32 pt-[env(safe-area-inset-top)] mt-4",children:[f.jsx(Kj,{}),f.jsx(Vj,{}),f.jsx(Qj,{}),f.jsxs("section",{className:"mt-6 space-y-4",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Recommended Today"}),f.jsxs("div",{className:"group relative w-full h-44 border border-slate-800 rounded-[2.5rem] overflow-hidden transition-all active:scale-[0.98]",children:[f.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1000&auto=format&fit=crop')] bg-cover bg-center opacity-30 group-hover:scale-110 transition-transform duration-700"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"}),f.jsxs("div",{className:"absolute bottom-6 left-6 right-6 flex justify-between items-end",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("span",{className:"text-[10px] font-black uppercase text-brand tracking-widest",children:"Advanced  45 Min"}),f.jsx("h4",{className:"text-xl font-black uppercase italic leading-none text-white",children:"Full Body Power"})]}),f.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-black",children:f.jsx(bl,{size:20,fill:"currentColor"})})]})]})]}),f.jsx("div",{className:"flex-1"})]}),Wj=()=>{const a=Zt(),n=ba(),i=[{icon:G2,label:"Home",path:"/dashboard"},{icon:Hv,label:"Library",path:"/library"},{icon:qh,label:"Logs",path:"/logs"},{icon:y2,label:"Stats",path:"/stats"},{icon:Qo,label:"Profile",path:"/profile"}],s=C.useMemo(()=>i.findIndex(o=>o.path===n.pathname),[n.pathname]);return f.jsx("nav",{className:"pointer-events-none w-full h-full flex items-end justify-center pb-2",children:f.jsxs("div",{className:"pointer-events-auto relative w-[90%] max-w-sm bg-[var(--bg-surface)] backdrop-blur-sm border border-[var(--border-color)] rounded-full shadow-md px-3 py-2",children:[f.jsx("div",{className:"absolute top-2 left-3 h-10 w-[calc((100%-24px)/5)] bg-[var(--brand-primary)] rounded-full transition-transform duration-300 ease-out",style:{transform:`translateX(${s*100}%)`}}),f.jsx("div",{className:"relative flex items-center justify-between",children:i.map(o=>{const c=n.pathname===o.path;return f.jsxs("button",{onClick:()=>a(o.path),className:"flex flex-col items-center justify-center flex-1 active:scale-95 transition",children:[f.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${c?"text-white":"text-[var(--text-muted)]"}`,children:f.jsx(o.icon,{size:20,strokeWidth:2})}),f.jsx("span",{className:`text-[10px] font-extrabold uppercase tracking-wide mt-1 ${c?"text-[var(--brand-primary)]":"text-[var(--text-muted)] opacity-60"}`,children:o.label})]},o.path)})})]})})},Py=({isOpen:a,onClose:n,isStatic:i=!1})=>{const{athlete:s,signOut:o}=jn(),c=i?"w-full h-full bg-[var(--bg-main)] border-r border-[var(--border-color)]":`fixed top-0 left-0 bottom-0 w-80 bg-[var(--bg-main)] z-[70] border-r border-[var(--border-color)] transition-transform duration-300 ease-out ${a?"translate-x-0":"-translate-x-full"}`;return f.jsxs(f.Fragment,{children:[!i&&f.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] transition-opacity duration-300 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:n}),f.jsx("aside",{className:c,children:f.jsxs("div",{className:"flex flex-col h-full p-8",children:[!i&&f.jsx("button",{onClick:n,className:"self-end p-2 text-[var(--text-muted)] mb-4 active:scale-90 transition-transform",children:f.jsx(Gc,{size:24})}),i&&f.jsx("div",{className:"mb-10 px-4",children:f.jsxs("h2",{className:"text-xl font-black italic tracking-tighter text-[var(--text-main)]",children:["TRACK",f.jsx("span",{className:"text-[var(--brand-primary)]",children:"FIT"})]})}),f.jsxs("div",{className:"flex items-center gap-4 mb-10 px-2",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--brand-primary)] bg-opacity-10 border border-[var(--brand-primary)] border-opacity-20 flex items-center justify-center text-[var(--brand-primary)] font-black text-xl italic",children:s?.name?.[0].toUpperCase()}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-black text-[var(--text-main)] text-md truncate w-32",children:s?.name}),f.jsx("p",{className:"text-[10px] text-[var(--text-muted)] font-bold uppercase tracking-wider",children:"Athlete Profile"})]})]}),f.jsxs("nav",{className:"flex-1 space-y-1",children:[f.jsx(Oo,{icon:Qo,label:"My Profile"}),f.jsx(Oo,{icon:Yo,label:"Rank Progress"}),f.jsx(Oo,{icon:Yv,label:"Body Metrics"}),f.jsx(Oo,{icon:xj,label:"Settings"}),f.jsx(Oo,{icon:Hv,label:"Library"})]}),f.jsxs("button",{onClick:o,className:"flex items-center gap-3 p-4 w-full rounded-2xl bg-red-500/5 text-red-500 font-bold border border-red-500/10 active:scale-95 transition-all mt-auto",children:[f.jsx(Kv,{size:18}),f.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})})]})},Oo=({icon:a,label:n})=>f.jsxs("button",{className:"w-full flex items-center justify-between p-4 rounded-2xl hover:bg-[var(--bg-surface)] transition-colors group",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(a,{size:18,className:"text-[var(--text-muted)] group-hover:text-[var(--brand-primary)] transition-colors"}),f.jsx("span",{className:"text-sm font-bold text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors",children:n})]}),f.jsx(Zi,{size:14,className:"text-[var(--border-color)]"})]}),Jj=80,Fj=()=>{const{isSidebarOpen:a,closeSidebar:n}=Fv(),i=ba();return C.useRef(null),C.useLayoutEffect(()=>{window.scrollTo(0,0)},[i.pathname]),f.jsxs("div",{className:"relative min-h-screen text-[var(--text-main)] bg-[var(--bg-main)]",children:[f.jsxs("div",{className:"flex min-h-screen",children:[f.jsx("div",{className:"hidden lg:block w-72 border-r border-[var(--border-color)]",children:f.jsx(Py,{isOpen:!0,onClose:()=>{},isStatic:!0})}),f.jsx("div",{className:"lg:hidden",children:f.jsx(Py,{isOpen:a,onClose:n})}),f.jsx("main",{className:"flex-1 flex flex-col w-full",children:f.jsx(uv,{})})]}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden pointer-events-none",style:{height:Jj},children:f.jsx(Wj,{})})]})},Zj=()=>f.jsx(Hj,{children:f.jsx(Fj,{})}),ek=()=>f.jsx("div",{className:"flex h-screen w-screen items-center justify-center bg-bg-main",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"text-brand-primary animate-pulse font-black italic text-4xl tracking-tighter",children:"FITNEX"}),f.jsx("div",{className:"h-1 w-12 bg-surface overflow-hidden rounded-full",children:f.jsx("div",{className:"h-full bg-brand-primary animate-progress-loading"})})]})}),tk=()=>{const{user_id:a}=jn(),[n,i]=C.useState(!1);return C.useEffect(()=>{(async()=>{if(a)try{await Promise.all([Ft.syncLibrary(),ht.syncRecentWorkouts(a),Ji.syncRoutine(a),Uh.syncMetadata()]),i(!0)}catch(o){console.error("Sync Error:",o),i(!0)}})()},[a]),n?f.jsx(uv,{}):f.jsx(ek,{})},nk=()=>{const{athlete:a,signOut:n}=jn(),i=Zt();return a?f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] min-h-screen px-6 pb-32 pt-[env(safe-area-inset-top)]",children:[f.jsx("header",{className:"flex justify-end pt-6 pb-2",children:f.jsx("button",{onClick:()=>n(),className:"p-3 bg-red-500/10 border border-red-500/15 rounded-2xl text-red-500 active:scale-90 transition-all",children:f.jsx(Kv,{size:18})})}),f.jsxs("section",{className:"flex flex-col items-center mb-10",children:[f.jsxs("div",{className:"relative mb-6",children:[f.jsx("div",{className:"absolute inset-0 bg-[var(--brand-primary)] opacity-10 blur-2xl rounded-full"}),f.jsx("div",{className:"relative w-28 h-28 rounded-full bg-gradient-to-tr from-[var(--brand-primary)] to-orange-500 p-[3px]",children:f.jsx("div",{className:"w-full h-full rounded-full bg-[var(--bg-main)] border-[4px] border-[var(--bg-main)] flex items-center justify-center overflow-hidden",children:f.jsx("span",{className:"text-4xl font-black text-[var(--text-main)] italic tracking-tighter",children:a.name?.charAt(0)})})})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-black tracking-tight uppercase italic text-[var(--text-main)] leading-none",children:a.name}),f.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[f.jsx("span",{className:"h-[1px] w-6 bg-slate-800"}),f.jsxs("p",{className:"text-[11px] font-black uppercase tracking-[0.4em] text-[var(--brand-primary)] italic",children:["Level  ",a.current_level]}),f.jsx("span",{className:"h-[1px] w-6 bg-slate-800"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2.5 mb-8",children:[f.jsx(wc,{label:"BMI",value:a.bmi||"0.0",icon:f.jsx(bl,{size:12})}),f.jsx(wc,{label:"Body Fat",value:`${a.body_fat_percent||"0"}%`,icon:f.jsx(sj,{size:12})}),f.jsx(wc,{label:"Lost",value:`${a.weight_lost||"0"}kg`,icon:f.jsx(R2,{size:12})}),f.jsx(wc,{label:"Goal",value:a.target_weight?`${a.target_weight}kg`:"",icon:f.jsx(es,{size:12})})]}),f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 whitespace-nowrap",children:"Account Settings"}),f.jsx("div",{className:"h-[1px] w-full bg-slate-800/50"})]}),f.jsxs("nav",{className:"space-y-3",children:[f.jsx(_c,{label:"User Profile",sub:"Personal Identity & Goals",icon:f.jsx(Qo,{size:18}),onClick:()=>i("/profile/details")}),f.jsx(_c,{label:"Measurements",sub:"Vitals & Metrics Tracking",icon:f.jsx(Qv,{size:18}),onClick:()=>i("/profile/metrics")}),f.jsx(_c,{label:"Level Details",sub:"Rank Progress & Milestone",icon:f.jsx(Yo,{size:18}),onClick:()=>i("/profile/level")}),f.jsx(_c,{label:"Themes & Appearance",sub:"Brand Color & Styles",icon:f.jsx(rj,{size:18}),onClick:()=>i("/profile/theme")})]}),f.jsx("div",{className:"flex-1"})]}):null},wc=({label:a,value:n,icon:i})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-3 rounded-[1.2rem] flex items-center gap-3",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-[var(--bg-main)] border border-slate-800 flex items-center justify-center text-[var(--brand-primary)]",children:i}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-black italic text-[var(--text-main)] leading-none",children:n}),f.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tight mt-0.5",children:a})]})]}),_c=({label:a,sub:n,icon:i,onClick:s})=>f.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 bg-[var(--bg-surface)] border border-slate-800 rounded-[1.8rem] active:opacity-70 transition-all group",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-2xl bg-[var(--bg-main)] border border-slate-800 flex items-center justify-center text-slate-500 group-active:text-[var(--brand-primary)]",children:i}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-[11px] font-black uppercase italic tracking-wider text-[var(--text-main)]",children:a}),f.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-tighter",children:n})]})]}),f.jsx(Zi,{size:16,className:"text-slate-600 group-active:text-[var(--brand-primary)]"})]}),Vn=({children:a,title:n,rightElement:i})=>{const s=Zt();return C.useLayoutEffect(()=>{window.scrollTo(0,0)},[]),f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] min-h-screen pt-[env(safe-area-inset-top)] pb-32",children:[f.jsxs("header",{className:"px-6 py-6 flex items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>s(-1),className:"w-10 h-10 rounded-xl bg-[var(--bg-surface)] border border-slate-800 flex items-center justify-center text-[var(--text-main)] active:scale-90 transition-all",children:f.jsx(Pv,{size:20})}),f.jsx("h1",{className:"text-2xl font-black uppercase italic tracking-tighter text-[var(--text-main)]",children:n})]}),i&&f.jsx("div",{className:"flex items-center gap-3",children:i})]}),f.jsx("main",{className:"flex-1 flex flex-col px-6",children:a})]})},ak=()=>{const{user_id:a,athlete:n,refreshAthlete:i}=jn(),[s,o]=C.useState(!1),[c,p]=C.useState({name:"",gender:"",birth_date:"",target_weight:"",target_days_per_week:"4"});C.useEffect(()=>{n&&p({name:n.name||"",gender:n.gender?n.gender.charAt(0).toUpperCase()+n.gender.slice(1).toLowerCase():"",birth_date:n.birthdate||"",target_weight:n.target_weight?.toString()||"",target_days_per_week:n.target_days_per_week?.toString()||"4"})},[n]);const g=async()=>{if(a){o(!0);try{await Lv.updateProfile({user_id:a,name:c.name,gender:c.gender.toLowerCase(),birthdate:c.birth_date,target_weight:parseFloat(c.target_weight)||0,target_days_per_week:parseInt(c.target_days_per_week)||4}),await i()}catch(v){console.error("Profile sync error:",v)}finally{o(!1)}}};return f.jsx(Vn,{title:"User Profile",children:f.jsxs("div",{className:"flex-1 flex flex-col space-y-8 pb-32 bg-[var(--bg-main)]",children:[f.jsxs("section",{className:"space-y-4",children:[f.jsx($y,{icon:f.jsx(Qo,{size:14}),title:"Identity"}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem]",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Full Athlete Name"}),f.jsx("input",{type:"text",value:c.name,onChange:v=>p({...c,name:v.target.value}),className:"bg-transparent border-none outline-none text-2xl font-black italic text-[var(--text-main)] w-full placeholder:text-slate-700",placeholder:"Full Name"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx(Hy,{label:"Gender",value:c.gender,options:["Male","Female","Other"],onChange:v=>p({...c,gender:v})}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem]",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Birth Date"}),f.jsx("input",{type:"date",value:c.birth_date,onChange:v=>p({...c,birth_date:v.target.value}),className:"bg-transparent border-none outline-none text-sm font-black uppercase text-[var(--text-main)] w-full invert-[0.8]"})]})]})]}),f.jsxs("section",{className:"space-y-4",children:[f.jsx($y,{icon:f.jsx(es,{size:14}),title:"Goals"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem]",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Target Weight"}),f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("input",{type:"text",inputMode:"decimal",value:c.target_weight,onChange:v=>p({...c,target_weight:v.target.value}),className:"bg-transparent border-none outline-none text-2xl font-black italic text-[var(--text-main)] w-16",placeholder:"00"}),f.jsx("span",{className:"text-[var(--brand-primary)] font-black italic text-xs uppercase",children:"kg"})]})]}),f.jsx(Hy,{label:"Days / Week",value:c.target_days_per_week,options:["1","2","3","4","5","6","7"],onChange:v=>p({...c,target_days_per_week:v})})]})]}),f.jsx("div",{className:"pt-4",children:f.jsxs("button",{disabled:s,onClick:g,className:"w-full py-4 bg-[var(--brand-primary)] text-black text-base font-black uppercase italic tracking-[0.1em] rounded-[1.5rem] flex items-center justify-center gap-2 active:scale-[0.97] transition-all disabled:opacity-50 shadow-lg shadow-[var(--brand-primary)]/20",children:[s?f.jsx(Sh,{size:18,className:"animate-spin"}):f.jsx(Bh,{size:18}),s?"Updating...":"Update Profile"]})}),f.jsx("div",{className:"flex-1"})]})})},$y=({icon:a,title:n})=>f.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2 font-black uppercase tracking-[0.2em] text-[10px] text-slate-500",children:[f.jsx("div",{className:"text-[var(--brand-primary)]",children:a}),n]}),Hy=({label:a,value:n,options:i,onChange:s})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem] relative",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:a}),f.jsxs("select",{value:n,onChange:o=>s(o.target.value),className:"bg-transparent border-none outline-none text-xl font-black italic text-[var(--text-main)] w-full appearance-none pr-8 cursor-pointer relative z-10",children:[f.jsx("option",{value:"",disabled:!0,children:"Select"}),i.map(o=>f.jsx("option",{value:o,className:"bg-black text-white",children:o},o))]}),f.jsx(yl,{size:14,className:"absolute right-5 bottom-6 text-slate-600 pointer-events-none"})]}),Sc={weight:"",height:"",belly:"",waist:"",hips:"",chest:"",shoulder:"",neck:"",right_bicep:"",left_bicep:"",right_forearm:"",left_forearm:"",right_calf:"",left_calf:"",right_thigh:"",left_thigh:""},rk=()=>{const{user_id:a,refreshAthlete:n}=jn(),[i,s]=C.useState(!0),[o,c]=C.useState(!1),[p,g]=C.useState(Sc);C.useEffect(()=>{(async()=>{try{const j=await _h.getLatestMetrics();if(j){const T={...Sc};Object.keys(Sc).forEach(A=>{const B=j[A];T[A]=B!=null?B.toString():""}),g(T)}}catch(j){console.error(j)}finally{s(!1)}})()},[]);const v=(S,j)=>{(j===""||/^[0-9]*\.?[0-9]*$/.test(j))&&g(T=>({...T,[S]:j}))},b=async()=>{if(!a)return;c(!0);const S={user_id:a,logdate:new Date().toISOString().split("T")[0],weight:parseFloat(p.weight)||0,height:parseFloat(p.height)||0};Object.keys(Sc).forEach(j=>{if(j==="weight"||j==="height")return;const T=p[j];S[j]=T===""?null:parseFloat(T)});try{await _h.updateMetrics(S),await n()}finally{c(!1)}};return i?f.jsx(Vn,{title:"Measurements",children:f.jsx("div",{className:"flex h-60 items-center justify-center",children:f.jsx(Sh,{className:"animate-spin text-[var(--brand-primary)]",size:28})})}):f.jsx(Vn,{title:"Measurements",children:f.jsxs("div",{className:"flex-1 flex flex-col space-y-10 bg-[var(--bg-main)]",children:[f.jsxs("section",{children:[f.jsx(lh,{icon:f.jsx(o2,{size:16}),title:"Core Vitals"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Ky,{label:"Weight",value:p.weight,unit:"kg",icon:f.jsx(Qv,{size:16}),onChange:S=>v("weight",S)}),f.jsx(Ky,{label:"Height",value:p.height,unit:"cm",icon:f.jsx(Yv,{size:16}),onChange:S=>v("height",S)})]})]}),f.jsxs("section",{children:[f.jsx(lh,{icon:f.jsx(Ho,{size:16}),title:"Torso"}),f.jsx("div",{className:"grid grid-cols-3 gap-3",children:["neck","shoulder","chest","belly","waist","hips"].map(S=>f.jsx(ik,{label:S,value:p[S],onChange:j=>v(S,j)},S))})]}),f.jsxs("section",{children:[f.jsx(lh,{icon:f.jsx(U2,{size:16}),title:"Limb Symmetry"}),f.jsx("div",{className:"space-y-4",children:[{label:"Bicep",l:"left_bicep",r:"right_bicep"},{label:"Forearm",l:"left_forearm",r:"right_forearm"},{label:"Thigh",l:"left_thigh",r:"right_thigh"},{label:"Calf",l:"left_calf",r:"right_calf"}].map(S=>f.jsx(sk,{label:S.label,leftKey:S.l,rightKey:S.r,metrics:p,onUpdate:(j,T)=>v(j,T)},S.label))})]}),f.jsx("div",{className:"pt-6",children:f.jsxs("button",{disabled:o,onClick:b,className:"w-full py-4 bg-[var(--brand-primary)] text-black text-base font-black uppercase italic tracking-[0.1em] rounded-[1.5rem] flex items-center justify-center gap-2 active:scale-[0.97] transition-all disabled:opacity-50 shadow-lg shadow-[var(--brand-primary)]/20",children:[o?f.jsx(Sh,{size:22,className:"animate-spin"}):f.jsx(Bh,{size:22}),o?"Updating...":"Update Athlete Data"]})}),f.jsx("div",{className:"flex-1"})]})})},lh=({icon:a,title:n})=>f.jsxs("div",{className:"flex items-center gap-3 mb-5 px-2 font-black uppercase tracking-[0.25em] text-[12px] text-slate-500",children:[f.jsx("div",{className:"text-[var(--brand-primary)]",children:a}),n]}),Ky=({label:a,value:n,unit:i,icon:s,onChange:o})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[2rem]",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3 text-[var(--brand-primary)]",children:[s,f.jsx("span",{className:"text-[10px] font-black text-slate-600",children:i})]}),f.jsx("input",{type:"text",inputMode:"decimal",value:n,onChange:c=>o(c.target.value),className:"bg-transparent border-none outline-none text-2xl font-black italic text-[var(--text-main)] w-full placeholder:text-slate-800",placeholder:"0.0"}),f.jsx("p",{className:"text-[11px] font-bold text-slate-500 uppercase mt-1.5",children:a})]}),ik=({label:a,value:n,onChange:i})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-4 rounded-[1.5rem] text-center",children:[f.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase mb-2",children:a}),f.jsx("input",{type:"text",inputMode:"decimal",value:n,onChange:s=>i(s.target.value),className:"bg-transparent border-none outline-none text-base font-black italic text-[var(--text-main)] w-full text-center placeholder:text-slate-800",placeholder:""})]}),sk=({label:a,leftKey:n,rightKey:i,metrics:s,onUpdate:o})=>f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-20 text-[11px] font-black uppercase text-slate-500 italic",children:a}),f.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[f.jsx("input",{type:"text",inputMode:"decimal",value:s[n],onChange:c=>o(n,c.target.value),className:"w-full bg-[var(--bg-surface)] border border-slate-800 p-4 rounded-2xl text-sm font-black italic text-[var(--text-main)] text-center placeholder:text-slate-800",placeholder:"L"}),f.jsx("input",{type:"text",inputMode:"decimal",value:s[i],onChange:c=>o(i,c.target.value),className:"w-full bg-[var(--bg-surface)] border border-slate-800 p-4 rounded-2xl text-sm font-black italic text-[var(--text-main)] text-center placeholder:text-slate-800",placeholder:"R"})]})]}),lk=()=>{const{athlete:a}=jn();if(!a)return null;const i=[{name:"Starter",points:"0-100",min:0},{name:"Novice",points:"101-500",min:101},{name:"Warrior",points:"501-2000",min:501},{name:"Elite",points:"2001+",min:2001}].find(s=>s.name===a.current_level);return f.jsx(Vn,{title:"Level Details",children:f.jsxs("div",{className:"flex-1 flex flex-col space-y-8 pb-10",children:[f.jsxs("section",{className:"text-center pt-4",children:[f.jsxs("div",{className:"relative inline-block mb-6",children:[f.jsx("div",{className:"absolute inset-0 bg-[var(--brand-primary)] opacity-20 blur-3xl rounded-full"}),f.jsxs("div",{className:"relative w-32 h-32 rounded-[2.5rem] bg-[var(--bg-surface)] border border-slate-800 flex items-center justify-center",children:[f.jsx(Yo,{size:48,className:"text-[var(--brand-primary)]",fill:"currentColor",fillOpacity:.1}),f.jsx("div",{className:"absolute -top-2 -right-2 bg-[var(--brand-primary)] text-black w-10 h-10 rounded-xl flex items-center justify-center font-black italic border-4 border-[var(--bg-main)]",children:a.current_level?.charAt(0)})]})]}),f.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tighter text-[var(--text-main)]",children:a.current_level}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 mt-2",children:"Current Athlete Status"})]}),f.jsxs("section",{className:"bg-[var(--bg-surface)] border border-slate-800 p-6 rounded-[2.5rem]",children:[f.jsxs("div",{className:"flex justify-between items-end mb-6",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1",children:"Total Points"}),f.jsx("p",{className:"text-3xl font-black italic text-[var(--text-main)]",children:a.level_points})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--brand-primary)] mb-1",children:"Next Rank"}),f.jsxs("p",{className:"text-xl font-black italic text-slate-500",children:[a.level_end," PTS"]})]})]}),f.jsx("div",{className:"h-3 w-full bg-[var(--bg-main)] rounded-full overflow-hidden border border-slate-800",children:f.jsx("div",{className:"h-full bg-[var(--brand-primary)] rounded-full transition-all duration-1000 shadow-[0_0_15px_var(--brand-primary)]",style:{width:`${a.level_completion_percent}%`}})}),f.jsxs("div",{className:"mt-4 flex justify-between items-center text-[10px] font-black italic uppercase text-slate-500",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Xv,{size:12,className:"text-[var(--brand-primary)]"}),f.jsxs("span",{children:[a.points_remaining," PTS Remaining"]})]}),f.jsxs("span",{className:"text-[var(--text-main)]",children:[a.level_completion_percent,"% Complete"]})]})]}),i&&f.jsx("section",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between p-5 rounded-2xl border border-[var(--brand-primary)] bg-[var(--brand-primary)]/5",children:[f.jsxs("div",{className:"flex items-center gap-4 text-[var(--text-main)]",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--brand-primary)] flex items-center justify-center text-black",children:f.jsx(c2,{size:20})}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs font-black uppercase italic tracking-wide",children:[i.name," Rank"]}),f.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase",children:["Active Milestone: ",i.points," PTS"]})]})]}),f.jsx("span",{className:"bg-[var(--brand-primary)] text-black text-[8px] font-black uppercase px-2 py-1 rounded-md",children:"Active"})]})}),a.projected_next_level_date&&f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[2rem] flex items-center gap-4 mt-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 flex items-center justify-center text-[var(--brand-primary)] border border-slate-800",children:f.jsx(Oj,{size:20})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Estimated Rank Up"}),f.jsxs("p",{className:"text-sm font-bold text-[var(--text-main)] uppercase italic",children:["Around"," ",new Date(a.projected_next_level_date).toLocaleDateString("en-US",{month:"long",day:"numeric"})]})]})]}),f.jsx("div",{className:"flex-1"})]})})},ok=[{name:"Fitnex Orange",hex:"#ff7f50"},{name:"Electric Blue",hex:"#3b82f6"},{name:"Cyber Green",hex:"#22c55e"},{name:"Neon Purple",hex:"#a855f7"},{name:"Crimson Red",hex:"#ef4444"},{name:"Solar Yellow",hex:"#eab308"}],uk=()=>{const[a,n]=C.useState(()=>document.documentElement.classList.contains("light-theme")?"light":"dark"),[i,s]=C.useState(()=>localStorage.getItem("fitnex-color")||"#ff7f50"),[o,c]=C.useState(i),p=()=>{const g=document.documentElement;localStorage.setItem("fitnex-theme",a),localStorage.setItem("fitnex-color",i),a==="light"?g.classList.add("light-theme"):g.classList.remove("light-theme"),g.style.setProperty("--brand-primary",i)};return C.useEffect(()=>{c(i)},[i]),f.jsx(Vn,{title:"Appearance",children:f.jsxs("div",{className:"space-y-10 pb-10 bg-[var(--bg-main)]",children:[f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-5 px-2 text-[var(--brand-primary)]",children:[f.jsx(Ph,{size:14}),f.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)]",children:"Visual Mode"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx(Gy,{active:a==="dark",onClick:()=>n("dark"),label:"Dark",icon:f.jsx(F2,{size:18}),desc:"OLED Saver"}),f.jsx(Gy,{active:a==="light",onClick:()=>n("light"),label:"Light",icon:f.jsx(jj,{size:18}),desc:"High Contrast"})]})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-5 px-2 text-[var(--brand-primary)]",children:[f.jsx(nj,{size:14}),f.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)]",children:"Brand Accent"})]}),f.jsx("div",{className:"p-6 rounded-[2.5rem] mb-4 border border-[var(--border-color)] bg-[var(--bg-surface)]",children:f.jsx("div",{className:"grid grid-cols-3 gap-y-6 gap-x-4",children:ok.map(g=>f.jsx("button",{onClick:()=>s(g.hex),className:"flex flex-col items-center gap-2",children:f.jsx("div",{className:"w-12 h-12 rounded-2xl transition-all duration-300 flex items-center justify-center border-2",style:{backgroundColor:g.hex,borderColor:i.toLowerCase()===g.hex.toLowerCase()?"var(--text-main)":"transparent"},children:i.toLowerCase()===g.hex.toLowerCase()&&f.jsx(gl,{size:20,className:"text-white",strokeWidth:4})})},g.hex))})}),f.jsxs("div",{className:"grid grid-cols-12 gap-3 mt-4",children:[f.jsxs("div",{className:"col-span-8 relative",children:[f.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]",children:f.jsx(P2,{size:14})}),f.jsx("input",{type:"text",value:o.replace("#",""),onChange:g=>{const v=`#${g.target.value}`;c(v),/^#[0-9A-F]{6}$/i.test(v)&&s(v)},className:"w-full border border-[var(--border-color)] rounded-2xl py-4 pl-10 pr-4 text-xs font-black uppercase bg-[var(--bg-surface)] text-[var(--text-main)] outline-none"})]}),f.jsxs("div",{className:"col-span-4 relative",children:[f.jsx("input",{type:"color",value:i,onChange:g=>s(g.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),f.jsx("div",{className:"w-full h-full border border-[var(--border-color)] rounded-2xl flex items-center justify-center text-[var(--text-muted)] bg-[var(--bg-surface)]",children:f.jsx(oj,{size:18})})]})]})]}),f.jsx("div",{className:"pt-4",children:f.jsx("button",{onClick:p,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic tracking-widest rounded-[2rem] active:scale-[0.95] transition-all",children:"Apply Changes"})})]})})},Gy=({active:a,onClick:n,label:i,icon:s,desc:o})=>f.jsxs("button",{onClick:n,className:"p-5 rounded-[2rem] border transition-all text-left",style:{backgroundColor:a?"rgba(var(--brand-rgb, 255,127,80), 0.1)":"var(--bg-surface)",borderColor:a?"var(--brand-primary)":"var(--border-color)",color:a?"var(--brand-primary)":"var(--text-muted)"},children:[f.jsx("div",{className:"mb-3",children:s}),f.jsx("p",{className:"text-xs font-black uppercase italic tracking-widest leading-none mb-1",children:i}),f.jsx("p",{className:"text-[8px] font-bold uppercase opacity-50",children:o})]}),ck=({search:a})=>{const n=Zt(),[i,s]=C.useState([]),[o,c]=C.useState(!0);C.useEffect(()=>{(async()=>{try{const S=await Ft.getActiveMuscles();s(S.sort((j,T)=>j.name.localeCompare(T.name)))}catch(S){console.error("Failed to load muscles:",S)}finally{c(!1)}})()},[]);const p=a.toLowerCase().trim(),g=b=>i.filter(S=>S.parent===b),v=i.filter(b=>{if(b.parent)return!1;const S=b.name.toLowerCase().includes(p),T=g(b.id).some(A=>A.name.toLowerCase().includes(p));return S||T});return o?null:f.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[f.jsxs("div",{className:"space-y-6",children:[v.map(b=>{const S=g(b.id).filter(j=>p===""||j.name.toLowerCase().includes(p)||b.name.toLowerCase().includes(p));return f.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[f.jsxs("button",{onClick:()=>n(`/library/muscles/${b.id}`),className:"w-full flex items-center justify-between p-5 bg-[var(--bg-surface)] border border-slate-800 rounded-[1.5rem] group active:scale-[0.98] transition-all",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black italic border transition-all ${b.name.toLowerCase().includes(p)&&p!==""?"bg-[var(--brand-primary)] border-[var(--brand-primary)] text-black":"bg-[var(--bg-main)] border-slate-800 text-[var(--brand-primary)]"}`,children:b.name.charAt(0)}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-sm font-black uppercase italic text-[var(--text-main)] group-hover:text-[var(--brand-primary)] transition-colors leading-none",children:b.name}),f.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mt-1",children:"Primary Group"})]})]}),f.jsx(Zi,{size:16,className:"text-slate-600 group-hover:text-[var(--brand-primary)] transition-colors"})]}),S.length>0&&f.jsx("div",{className:"ml-6 space-y-2 border-l-2 border-slate-800 pl-4",children:S.map(j=>f.jsxs("button",{onClick:()=>n(`/library/muscles/${j.id}`),className:"w-full flex items-center justify-between p-3.5 bg-[var(--bg-surface)] bg-opacity-40 border border-slate-800 rounded-xl group active:scale-[0.98] transition-all",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(M2,{size:14,className:j.name.toLowerCase().includes(p)&&p!==""?"text-[var(--brand-primary)]":"text-slate-600"}),f.jsx("p",{className:`text-[12px] font-bold uppercase italic transition-colors ${j.name.toLowerCase().includes(p)&&p!==""?"text-[var(--text-main)]":"text-slate-500"}`,children:j.name})]}),f.jsx(Zi,{size:12,className:"text-slate-600 group-hover:text-[var(--brand-primary)]"})]},j.id))})]},b.id)}),v.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center py-24 opacity-20",children:[f.jsx(es,{size:48,strokeWidth:1,className:"mb-4"}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"No Muscles Found"})]})]}),f.jsx("div",{className:"flex-1"})]})},dk=({search:a})=>{const n=Zt(),[i,s]=C.useState([]),[o,c]=C.useState(!0);C.useEffect(()=>{Ft.getExercisesWithMeta().then(v=>{s(v),c(!1)})},[]);const p=a.toLowerCase().trim(),g=i.filter(v=>{const b=v.name.toLowerCase().includes(p),S=v.all_muscles?.some(T=>T.name.toLowerCase().includes(p)||T.parent_name?.toLowerCase().includes(p)),j=v.equipment_name?.toLowerCase().includes(p);return b||S||j});return o?null:f.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[f.jsxs("div",{className:"space-y-3",children:[g.map(v=>f.jsxs("button",{onClick:()=>n(`/library/exercises/${v.id}`),className:"w-full flex items-center justify-between p-4 bg-[var(--bg-surface)] border border-slate-800 rounded-[2rem] active:scale-[0.98] transition-all group animate-in fade-in",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--bg-main)] border border-slate-800 flex items-center justify-center text-[var(--brand-primary)] group-hover:bg-[var(--brand-primary)] group-hover:text-black transition-all flex-shrink-0",children:f.jsx(Ho,{size:20})}),f.jsxs("div",{className:"text-left flex-1",children:[f.jsx("p",{className:"text-[13px] font-black uppercase italic text-[var(--text-main)] tracking-tight leading-tight mb-2",children:v.name}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[f.jsx("span",{className:"text-[7px] font-black uppercase px-2 py-1 bg-[var(--bg-main)] border border-slate-800 text-slate-500 rounded-md",children:v.equipment_name}),v.all_muscles?.map((b,S)=>f.jsx("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md border ${b.role==="primary"?"border-orange-500/20 bg-orange-500/5 text-orange-500":b.role==="secondary"?"border-blue-500/20 bg-blue-500/5 text-blue-500":"border-emerald-500/20 bg-emerald-500/5 text-emerald-500"}`,children:f.jsx("span",{className:"text-[7px] font-black uppercase italic",children:b.name})},S))]})]})]}),f.jsx(Zi,{size:16,className:"text-slate-600 opacity-30 ml-2"})]},v.id)),g.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-20",children:[f.jsx(Ho,{size:48,strokeWidth:1,className:"mb-4"}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"No Results"})]})]}),f.jsx("div",{className:"flex-1"})]})},fk=({search:a})=>{const n=Zt(),{user_id:i}=jn(),{isOngoing:s,resumeSession:o}=$h(),[c,p]=C.useState([]);C.useEffect(()=>{i&&Ji.getRoutinesWithMeta().then(p)},[i]);const g=async b=>{if(!i)return;if(s){o();return}const S=b.exercises||[];if(S.length===0){console.warn("This routine has no exercises to start.");return}const j=S.map((T,A)=>({exercise_id:T.exercise_id,reps:T.target_reps||10,weight:0,set_number:1,exercise_order:T.exercise_order??A}));try{await ht.startNewWorkout(i,b.id,j),o()}catch(T){console.error("Failed to start workout:",T)}},v=c.filter(b=>b.name.toLowerCase().includes(a.toLowerCase()));return f.jsx("div",{className:"flex-1 flex flex-col gap-4",children:v.map(b=>f.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.2rem] p-6 space-y-5 shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>n(`/library/routines/${b.id}`),children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-black flex items-center justify-center text-[var(--brand-primary)]",children:f.jsx(qh,{size:22})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-[13px] font-black uppercase italic text-white leading-none",children:b.name}),f.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-1.5",children:[b.exercise_count," Exercises"]})]})]}),f.jsx(Zi,{size:18,className:"opacity-20"})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:b.muscles.map(S=>f.jsx("span",{className:"px-2.5 py-1 bg-black border border-slate-800 rounded-lg text-[7px] font-black uppercase text-slate-500",children:S},S))}),f.jsxs("button",{onClick:()=>g(b),className:`w-full py-4 rounded-[1.4rem] flex items-center justify-center gap-2 transition-all font-black uppercase italic text-[11px] tracking-widest active:scale-95 ${s?"bg-slate-800 text-slate-500 cursor-not-allowed opacity-80":"bg-[var(--brand-primary)] text-black"}`,children:[f.jsx(Dc,{size:14,fill:"currentColor"}),s?"Ongoing session...":"Start Routine"]})]},b.id))})};let Iy="muscles";const hk=()=>{const a=Zt(),[n,i]=C.useState(Iy),[s,o]=C.useState(""),c=g=>{Iy=g,i(g),o("")},p=[{id:"muscles",label:"Muscles",icon:f.jsx(es,{size:14})},{id:"exercises",label:"Exercises",icon:f.jsx(Ho,{size:14})},{id:"routines",label:"Routines",icon:f.jsx(qh,{size:14})}];return f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] min-h-screen pt-[env(safe-area-inset-top)]",children:[f.jsx("div",{className:"sticky top-0 z-30 bg-[var(--bg-main)] px-4 pt-6 pb-2",children:f.jsx("div",{className:"flex bg-[var(--bg-surface)] p-1.5 rounded-[1.8rem] border border-slate-800",children:p.map(g=>f.jsxs("button",{onClick:()=>c(g.id),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-[1.4rem] transition-all duration-300 ${n===g.id?"bg-[var(--brand-primary)] text-black shadow-lg":"text-[var(--text-muted)] active:scale-95"}`,children:[g.icon,f.jsx("span",{className:"text-[11px] font-black uppercase italic tracking-tighter",children:g.label})]},g.id))})}),f.jsxs("div",{className:"px-4 flex-1 flex flex-col pb-32",children:[f.jsxs("div",{className:"flex items-center gap-3 mt-4 mb-6",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]",children:f.jsx(vl,{size:18})}),f.jsx("input",{type:"text",placeholder:`Search ${n}...`,value:s,onChange:g=>o(g.target.value),className:"w-full bg-[var(--bg-surface)] border border-slate-800 rounded-2xl py-4 pl-12 pr-4 text-sm font-bold text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)] transition-all"})]}),f.jsx("button",{onClick:()=>a(`/library/${n}/add`),className:"h-[58px] w-[58px] bg-[var(--brand-primary)] text-black rounded-2xl flex items-center justify-center active:scale-90 transition-all shadow-lg shadow-[var(--brand-primary)]/20 flex-shrink-0",children:f.jsx(gr,{size:24,strokeWidth:3})})]}),f.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-bottom-2 duration-500",children:[n==="muscles"&&f.jsx(ck,{search:s}),n==="exercises"&&f.jsx(dk,{search:s}),n==="routines"&&f.jsx(fk,{search:s}),f.jsx("div",{className:"flex-1"})]})]})]})},mk=()=>{const a=Zt(),[n,i]=C.useState([]),[s,o]=C.useState({name:"",parent_id:""}),[c,p]=C.useState(!1);C.useEffect(()=>{Ft.getActiveMuscles().then(i)},[]);const g=async()=>{if(!(!s.name||c)){p(!0);try{await Ft.addMuscle(s.name,s.parent_id),a(-1)}catch{alert("Error: Muscle name must be unique.")}finally{p(!1)}}};return f.jsx(Vn,{title:"New Muscle",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2rem] space-y-6",children:[f.jsx("input",{autoFocus:!0,type:"text",value:s.name,onChange:v=>o({...s,name:v.target.value}),placeholder:"e.g. Upper Chest",className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xl font-black italic text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)]"}),f.jsxs("div",{className:"relative",children:[f.jsxs("label",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)] mb-3",children:[f.jsx($v,{size:12,className:"text-[var(--brand-primary)]"}),"Parent Group"]}),f.jsxs("select",{value:s.parent_id,onChange:v=>o({...s,parent_id:v.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xs font-bold uppercase text-[var(--text-main)] outline-none appearance-none",children:[f.jsx("option",{value:"",children:"No Parent (Primary)"}),n.map(v=>f.jsx("option",{value:v.id,children:v.name},v.id))]}),f.jsx(yl,{size:16,className:"absolute right-4 bottom-4 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("button",{onClick:g,disabled:c,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic tracking-widest rounded-2xl flex items-center justify-center gap-2 active:scale-95 transition-all disabled:opacity-50",children:[f.jsx(gr,{size:22,strokeWidth:3}),c?"Adding...":"Add to Library"]})]})})},pk=({isOpen:a,onConfirm:n,onCancel:i})=>a?f.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[f.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:i}),f.jsxs("div",{className:"relative w-full max-w-sm bg-[var(--bg-surface)] border border-[var(--border-color)] rounded-[2.5rem] p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500 mb-6",children:f.jsx(Lh,{size:28})}),f.jsx("h3",{className:"text-xl font-black uppercase italic text-[var(--text-main)] mb-2 tracking-tight",children:"Archive Muscle?"}),f.jsx("p",{className:"text-sm font-bold text-[var(--text-muted)] leading-relaxed mb-8",children:"This muscle will be hidden from the library but preserved in your history."}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsx("button",{onClick:n,className:"w-full py-4 bg-red-500 text-white rounded-2xl font-black uppercase italic tracking-widest active:scale-95 shadow-lg shadow-red-500/20",children:"Archive"}),f.jsx("button",{onClick:i,className:"w-full py-4 bg-transparent text-[var(--text-muted)] font-black uppercase italic text-[10px]",children:"Cancel"})]})]})]}):null,gk=()=>{const{id:a}=Oh(),n=Zt(),[i,s]=C.useState(!0),[o,c]=C.useState(!1),[p,g]=C.useState([]),[v,b]=C.useState({name:"",parent_id:""});C.useEffect(()=>{(async()=>{if(!a)return;const[A,B]=await Promise.all([Ft.getMuscleById(a),Ft.getActiveMuscles()]);A&&b({name:A.name,parent_id:A.parent||""}),g(B.filter(I=>I.id!==a)),s(!1)})()},[a]);const S=async()=>{try{await Ft.updateMuscle(a,v.name,v.parent_id),n(-1)}catch{alert("Update failed.")}},j=async()=>{try{await Ft.archiveMuscle(a),n(-1)}catch{alert("Archive failed.")}};return i?null:f.jsxs(Vn,{title:"Muscle Settings",children:[f.jsxs("div",{className:"flex flex-col gap-6 pb-20",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-8 shadow-sm",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)] mb-3 block",children:[f.jsx(es,{size:12,className:"inline mr-1"})," Display Name"]}),f.jsx("input",{type:"text",value:v.name,onChange:T=>b({...v,name:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xl font-black italic text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)]"})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)] mb-3 block",children:[f.jsx($v,{size:12,className:"inline mr-1"})," Parent Group"]}),f.jsxs("select",{value:v.parent_id,onChange:T=>b({...v,parent_id:T.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xs font-black uppercase italic text-[var(--text-main)] outline-none appearance-none",children:[f.jsx("option",{value:"",children:"No Parent (Primary)"}),p.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]}),f.jsx(yl,{size:16,className:"absolute right-4 bottom-4 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:S,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic rounded-2xl flex items-center justify-center gap-2 active:scale-95 shadow-xl shadow-[var(--brand-primary)]/10",children:[f.jsx(Bh,{size:20})," Save Changes"]}),f.jsxs("button",{onClick:()=>c(!0),className:"w-full py-5 bg-red-500/10 text-red-500 font-black uppercase italic rounded-2xl flex items-center justify-center gap-2 border border-red-500/20 active:scale-95",children:[f.jsx(Vo,{size:20})," Archive Muscle"]})]})]}),f.jsx(pk,{isOpen:o,onConfirm:j,onCancel:()=>c(!1)})]})},yk=()=>{const a=Zt(),{user_id:n}=jn(),[i,s]=C.useState({muscles:[],equipment:[]}),[o,c]=C.useState(""),[p,g]=C.useState(""),[v,b]=C.useState(!1),[S,j]=C.useState(""),[T,A]=C.useState([]),[B,I]=C.useState({reps:!0,weight:!0,bodyweight:!1,distance:!1,duration:!1});C.useEffect(()=>{(async()=>{const[Y,de]=await Promise.all([Ft.getActiveMuscles(),Ft.getAllEquipment()]);s({muscles:Y,equipment:de})})()},[]);const V=(K,Y)=>{A(de=>{const Ee=de.find(ue=>ue.id===K.id);return Ee&&Ee.role===Y?de.filter(ue=>ue.id!==K.id):Ee?de.map(ue=>ue.id===K.id?{...ue,role:Y}:ue):[...de,{id:K.id,name:K.name,role:Y}]}),c("")},ae=async()=>{if(!(!p||!n))try{const K={name:p,...B,is_public:v,added_by:n};await Ft.addExercise(K,T,S||null),a(-1)}catch{alert("Error saving exercise.")}};return f.jsx(Vn,{title:"New Exercise",children:f.jsxs("div",{className:"flex flex-col gap-6 pb-24",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-6 shadow-sm",children:[f.jsx("input",{autoFocus:!0,type:"text",value:p,onChange:K=>g(K.target.value),placeholder:"EXERCISE NAME",className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter placeholder:opacity-10"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>b(!1),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${v?"text-[var(--text-muted)] border-[var(--border-color)]":"bg-[var(--text-main)] text-[var(--bg-main)]"}`,children:[f.jsx(Hc,{size:12})," Private"]}),f.jsxs("button",{onClick:()=>b(!0),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${v?"bg-[var(--brand-primary)] text-[var(--bg-main)] shadow-lg":"text-[var(--text-muted)] border-[var(--border-color)]"}`,children:[f.jsx($c,{size:12})," Public"]})]})]}),f.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{id:"reps",icon:f.jsx(Vv,{size:16})},{id:"weight",icon:f.jsx(Wv,{size:16})},{id:"bodyweight",icon:f.jsx(bl,{size:16})},{id:"distance",icon:f.jsx(Iv,{size:16})},{id:"duration",icon:f.jsx(Kc,{size:16})}].map(K=>f.jsxs("button",{onClick:()=>I({...B,[K.id]:!B[K.id]}),className:`flex flex-col items-center justify-center py-5 rounded-[1.4rem] border-2 transition-all gap-2 ${B[K.id]?"border-[var(--brand-primary)] bg-[var(--brand-primary)]/5 text-[var(--brand-primary)]":"border-[var(--border-color)] bg-[var(--bg-surface)] text-[var(--text-muted)]"}`,children:[K.icon,f.jsx("span",{className:"text-[7px] font-black uppercase",children:K.id})]},K.id))}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-4",children:[f.jsxs("label",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[var(--text-muted)] flex items-center gap-2",children:[f.jsx(Bv,{size:12})," Equipment"]}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:S,onChange:K=>j(K.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4.5 px-5 text-xs font-black uppercase italic text-[var(--text-main)] outline-none appearance-none",children:[f.jsx("option",{value:"",children:" NO EQUIPMENT "}),f.jsx("option",{value:"bodyweight_id",children:"BODYWEIGHT ONLY"}),i.equipment.map(K=>f.jsx("option",{value:K.id,children:K.name},K.id))]}),f.jsx(yl,{size:16,className:"absolute right-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-5",children:[f.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[var(--text-muted)]",children:"Muscle Targets"}),f.jsxs("div",{className:"relative",children:[f.jsx(vl,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]"}),f.jsx("input",{type:"text",value:o,onChange:K=>c(K.target.value),placeholder:"SEARCH...",className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4 pl-12 text-xs font-bold outline-none focus:border-[var(--brand-primary)]"}),o&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-[var(--border-color)] rounded-[2rem] shadow-2xl z-50 overflow-hidden max-h-72 overflow-y-auto backdrop-blur-xl",children:i.muscles.filter(K=>K.name.toLowerCase().includes(o.toLowerCase())).map(K=>f.jsxs("div",{className:"p-5 border-b border-[var(--border-color)] last:border-0 hover:bg-[var(--bg-main)] space-y-4",children:[f.jsx("span",{className:"text-[12px] font-black uppercase italic text-[var(--text-main)] block",children:K.name}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>V(K,"primary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-orange-500/10 text-orange-500 border border-orange-500/20 active:scale-90 transition-all",children:"Primary"}),f.jsx("button",{onClick:()=>V(K,"secondary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-blue-500/10 text-blue-500 border border-blue-500/20 active:scale-90 transition-all",children:"Secondary"}),f.jsx("button",{onClick:()=>V(K,"stabilizer"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 active:scale-90 transition-all",children:"Stabilizer"})]})]},K.id))})]}),f.jsx("div",{className:"space-y-2",children:T.map(K=>f.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border transition-all ${K.role==="primary"?"border-orange-500/20 bg-orange-500/[0.03]":K.role==="secondary"?"border-blue-500/20 bg-blue-500/[0.03]":"border-emerald-500/20 bg-emerald-500/[0.03]"}`,children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[11px] font-black uppercase italic text-[var(--text-main)]",children:K.name}),f.jsx("span",{className:`text-[8px] font-black uppercase tracking-[0.2em] mt-0.5 opacity-60 ${K.role==="primary"?"text-orange-500":K.role==="secondary"?"text-blue-500":"text-emerald-500"}`,children:K.role})]}),f.jsx("button",{onClick:()=>A(Y=>Y.filter(de=>de.id!==K.id)),className:"w-8 h-8 rounded-full bg-[var(--bg-main)] border border-[var(--border-color)] flex items-center justify-center text-[var(--text-muted)]",children:f.jsx(Ua,{size:14})})]},K.id))})]}),f.jsxs("button",{onClick:ae,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic rounded-3xl shadow-xl shadow-[var(--brand-primary)]/20 active:scale-[0.97] transition-all flex items-center justify-center gap-3 tracking-widest",children:[f.jsx(gl,{size:20,strokeWidth:4})," CONFIRM EXERCISE"]})]})})},vk=({isOpen:a,onConfirm:n,onCancel:i})=>a?f.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[f.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",onClick:i}),f.jsxs("div",{className:"relative w-full max-w-sm bg-[var(--bg-surface)] border border-[var(--border-color)] rounded-[2.5rem] p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500 mb-6 mx-auto",children:f.jsx(Lh,{size:32})}),f.jsx("h3",{className:"text-xl font-black uppercase italic text-[var(--text-main)] mb-2 tracking-tight text-center",children:"Archive Exercise?"}),f.jsx("p",{className:"text-sm font-bold text-[var(--text-muted)] leading-relaxed mb-8 text-center px-4",children:"This will hide the exercise from your library. Past workout data will be preserved."}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsx("button",{onClick:n,className:"w-full py-5 bg-red-500 text-white rounded-2xl font-black uppercase italic tracking-widest active:scale-95 shadow-lg shadow-red-500/20 transition-all",children:"Archive Now"}),f.jsx("button",{onClick:i,className:"w-full py-3 text-[var(--text-muted)] font-black uppercase italic text-[10px] tracking-widest hover:text-[var(--text-main)] transition-colors",children:"Cancel Action"})]})]})]}):null,bk=()=>{const{id:a}=Oh(),n=Zt(),[i,s]=C.useState(!0),[o,c]=C.useState(!1),[p,g]=C.useState({muscles:[],equipment:[]}),[v,b]=C.useState(""),[S,j]=C.useState(""),[T,A]=C.useState(!1),[B,I]=C.useState(""),[V,ae]=C.useState([]),[K,Y]=C.useState({reps:!0,weight:!0,bodyweight:!1,distance:!1,duration:!1});C.useEffect(()=>{(async()=>{if(!a)return;const[Ne,Le,yt]=await Promise.all([Ft.getExerciseDetail(a),Ft.getActiveMuscles(),Ft.getAllEquipment()]);Ne&&(j(Ne.name),A(Ne.is_public),I(Ne.equipmentId),ae(Ne.muscles),Y({reps:Ne.reps,weight:Ne.weight,bodyweight:Ne.bodyweight,distance:Ne.distance,duration:Ne.duration})),g({muscles:Le,equipment:yt}),s(!1)})()},[a]);const de=(te,Ne)=>{ae(Le=>{const yt=Le.find(Nt=>Nt.id===te.id);return yt&&yt.role===Ne?Le.filter(Nt=>Nt.id!==te.id):yt?Le.map(Nt=>Nt.id===te.id?{...Nt,role:Ne}:Nt):[...Le,{id:te.id,name:te.name,role:Ne}]}),b("")},Ee=async()=>{try{const te={name:S,...K,is_public:T,updated_at:new Date().toISOString()};await Ft.updateExercise(a,te,V,B||null),n(-1)}catch{alert("Update failed.")}},ue=async()=>{try{await Ft.archiveExercise(a),n(-1)}catch{alert("Archive failed.")}};return i?null:f.jsxs(Vn,{title:"Edit Exercise",children:[f.jsxs("div",{className:"flex flex-col gap-6 pb-24",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-6 shadow-sm",children:[f.jsx("input",{type:"text",value:S,onChange:te=>j(te.target.value),className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>A(!1),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${T?"text-[var(--text-muted)] border-[var(--border-color)]":"bg-[var(--text-main)] text-[var(--bg-main)]"}`,children:[f.jsx(Hc,{size:12})," Private"]}),f.jsxs("button",{onClick:()=>A(!0),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${T?"bg-[var(--brand-primary)] text-[var(--bg-main)] shadow-lg shadow-[var(--brand-primary)]/20":"text-[var(--text-muted)] border-[var(--border-color)]"}`,children:[f.jsx($c,{size:12})," Public"]})]})]}),f.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{id:"reps",icon:f.jsx(Vv,{size:16})},{id:"weight",icon:f.jsx(Wv,{size:16})},{id:"bodyweight",icon:f.jsx(bl,{size:16})},{id:"distance",icon:f.jsx(Iv,{size:16})},{id:"duration",icon:f.jsx(Kc,{size:16})}].map(te=>f.jsxs("button",{onClick:()=>Y({...K,[te.id]:!K[te.id]}),className:`flex flex-col items-center justify-center py-5 rounded-[1.4rem] border-2 transition-all gap-2 ${K[te.id]?"border-[var(--brand-primary)] bg-[var(--brand-primary)]/5 text-[var(--brand-primary)]":"border-[var(--border-color)] bg-[var(--bg-surface)] text-[var(--text-muted)]"}`,children:[te.icon,f.jsx("span",{className:"text-[7px] font-black uppercase",children:te.id})]},te.id))}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-4",children:[f.jsxs("label",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[f.jsx(Bv,{size:12})," Equipment"]}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:B,onChange:te=>I(te.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4.5 px-5 text-xs font-black uppercase italic text-[var(--text-main)] outline-none appearance-none transition-all focus:border-[var(--brand-primary)]",children:[f.jsx("option",{value:"",children:" NO EQUIPMENT "}),f.jsx("option",{value:"bodyweight_id",children:"BODYWEIGHT ONLY"}),p.equipment.map(te=>f.jsx("option",{value:te.id,children:te.name},te.id))]}),f.jsx(yl,{size:16,className:"absolute right-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-5",children:[f.jsxs("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[var(--text-muted)] flex items-center gap-2",children:[f.jsx(es,{size:12})," Target Muscles"]}),f.jsxs("div",{className:"relative",children:[f.jsx(vl,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]"}),f.jsx("input",{type:"text",value:v,onChange:te=>b(te.target.value),placeholder:"SEARCH...",className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4 pl-12 text-xs font-bold outline-none focus:border-[var(--brand-primary)] transition-all"}),v&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-[var(--border-color)] rounded-[2rem] shadow-2xl z-50 overflow-hidden max-h-72 overflow-y-auto backdrop-blur-xl",children:p.muscles.filter(te=>te.name.toLowerCase().includes(v.toLowerCase())).map(te=>f.jsxs("div",{className:"p-5 border-b border-[var(--border-color)] last:border-0 hover:bg-[var(--bg-main)] space-y-4",children:[f.jsx("span",{className:"text-[12px] font-black uppercase italic text-[var(--text-main)] block tracking-tight",children:te.name}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>de(te,"primary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-orange-500/10 text-orange-500 border border-orange-500/20 active:scale-90 transition-all",children:"Primary"}),f.jsx("button",{onClick:()=>de(te,"secondary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-blue-500/10 text-blue-500 border border-blue-500/20 active:scale-90 transition-all",children:"Secondary"}),f.jsx("button",{onClick:()=>de(te,"stabilizer"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 active:scale-90 transition-all",children:"Stabilizer"})]})]},te.id))})]}),f.jsx("div",{className:"space-y-2",children:V.map(te=>f.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border transition-all ${te.role==="primary"?"border-orange-500/20 bg-orange-500/[0.03]":te.role==="secondary"?"border-blue-500/20 bg-blue-500/[0.03]":"border-emerald-500/20 bg-emerald-500/[0.03]"}`,children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[11px] font-black uppercase italic text-[var(--text-main)]",children:te.name}),f.jsx("span",{className:`text-[8px] font-black uppercase tracking-[0.2em] mt-0.5 opacity-60 ${te.role==="primary"?"text-orange-500":te.role==="secondary"?"text-blue-500":"text-emerald-500"}`,children:te.role})]}),f.jsx("button",{onClick:()=>ae(Ne=>Ne.filter(Le=>Le.id!==te.id)),className:"w-8 h-8 rounded-full bg-[var(--bg-main)] border border-[var(--border-color)] flex items-center justify-center text-[var(--text-muted)] hover:text-red-500 active:scale-90 transition-all",children:f.jsx(Ua,{size:14})})]},te.id))})]}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:Ee,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic rounded-3xl shadow-lg flex items-center justify-center gap-3 tracking-widest active:scale-95 transition-all shadow-xl shadow-[var(--brand-primary)]/20",children:[f.jsx(gl,{size:20,strokeWidth:4})," UPDATE EXERCISE"]}),f.jsxs("button",{onClick:()=>c(!0),className:"w-full py-5 bg-red-500/10 text-red-500 font-black uppercase italic rounded-3xl flex items-center justify-center gap-3 tracking-widest active:scale-95 transition-all border border-red-500/20",children:[f.jsx(Vo,{size:20})," ARCHIVE"]})]})]}),f.jsx(vk,{isOpen:o,onConfirm:ue,onCancel:()=>c(!1)})]})},xk=()=>{const a=Zt(),{user_id:n}=jn(),[i,s]=C.useState(""),[o,c]=C.useState(""),[p,g]=C.useState(!1),[v,b]=C.useState(""),[S,j]=C.useState([]),[T,A]=C.useState([]);C.useEffect(()=>{Ft.getExercisesWithMeta().then(j)},[]);const B=C.useMemo(()=>{const Y={};return T.forEach(de=>{de.all_muscles?.filter(Ee=>Ee.role==="primary").forEach(Ee=>{Y[Ee.name]=(Y[Ee.name]||0)+1})}),Object.entries(Y).sort((de,Ee)=>Ee[1]-de[1]).slice(0,3)},[T]),I=Y=>{A([...T,{...Y,target_sets:3,target_reps:10}]),b("")},V=Y=>{A(de=>de.filter((Ee,ue)=>ue!==Y))},ae=(Y,de,Ee)=>{A(ue=>ue.map((te,Ne)=>Ne===Y?{...te,[de]:Ee}:te))},K=async()=>{if(!(!i||!n||T.length===0))try{const Y={name:i,description:o,is_public:p,user_id:n};await Ji.addRoutine(Y,T),a(-1)}catch(Y){console.error(Y),alert("Error saving routine.")}};return f.jsx(Vn,{title:"New Routine",children:f.jsxs("div",{className:"flex-1 flex flex-col gap-6 pb-32",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-6 rounded-[2.2rem] space-y-6",children:[f.jsx("input",{autoFocus:!0,type:"text",value:i,onChange:Y=>s(Y.target.value),placeholder:"ROUTINE NAME",className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter"}),f.jsx("textarea",{value:o,onChange:Y=>c(Y.target.value),placeholder:"DESCRIPTION (OPTIONAL)",className:"w-full bg-[var(--bg-main)] border border-slate-800 rounded-2xl p-4 text-xs font-bold text-[var(--text-main)] outline-none resize-none h-24 placeholder:text-slate-700"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Vy,{active:!p,label:"Private",icon:f.jsx(Hc,{size:12}),onClick:()=>g(!1)}),f.jsx(Vy,{active:p,label:"Public",icon:f.jsx($c,{size:12}),primary:!0,onClick:()=>g(!0)})]}),B.length>0&&f.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:B.map(([Y])=>f.jsx("span",{className:"text-[8px] font-black uppercase px-3 py-1.5 bg-[var(--brand-primary)]/10 text-[var(--brand-primary)] rounded-full border border-[var(--brand-primary)]/20",children:Y},Y))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(vl,{size:16,className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500"}),f.jsx("input",{type:"text",value:v,onChange:Y=>b(Y.target.value),placeholder:"ADD EXERCISE...",className:"w-full bg-[var(--bg-surface)] border border-slate-800 rounded-2xl py-5 pl-14 pr-6 text-xs font-black uppercase italic outline-none focus:border-[var(--brand-primary)]"}),v&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-slate-800 rounded-[2rem] shadow-2xl z-50 max-h-64 overflow-y-auto",children:S.filter(Y=>Y.name.toLowerCase().includes(v.toLowerCase())).map(Y=>f.jsx("button",{onClick:()=>I(Y),className:"w-full p-5 text-left border-b border-slate-800 last:border-0 hover:bg-slate-900 font-black uppercase italic text-xs text-[var(--text-main)]",children:Y.name},Y.id))})]}),f.jsx("div",{className:"space-y-3",children:T.map((Y,de)=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 rounded-[1.8rem] p-5 flex flex-col gap-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Gv,{size:16,className:"text-slate-700"}),f.jsx("span",{className:"text-xs font-black uppercase italic text-[var(--text-main)]",children:Y.name})]}),f.jsx("button",{onClick:()=>V(de),className:"w-8 h-8 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center text-slate-500 hover:text-red-500 transition-all",children:f.jsx(Ua,{size:14,strokeWidth:3})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Yy,{label:"Sets",value:Y.target_sets,onDec:()=>ae(de,"target_sets",Math.max(1,Y.target_sets-1)),onInc:()=>ae(de,"target_sets",Y.target_sets+1)}),f.jsx(Yy,{label:"Reps",value:Y.target_reps,onDec:()=>ae(de,"target_reps",Math.max(1,Y.target_reps-1)),onInc:()=>ae(de,"target_reps",Y.target_reps+1)})]})]},`${Y.id}-${de}`))}),f.jsxs("button",{onClick:K,className:"w-full py-5 bg-[var(--brand-primary)] text-black font-black uppercase italic rounded-3xl shadow-xl shadow-[var(--brand-primary)]/20 active:scale-[0.97] transition-all flex items-center justify-center gap-3 tracking-widest mt-4",children:[f.jsx(gl,{size:20,strokeWidth:4})," CREATE TEMPLATE"]}),f.jsx("div",{className:"flex-1"})]})})},Vy=({active:a,label:n,icon:i,onClick:s,primary:o})=>f.jsxs("button",{onClick:s,className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${a?o?"bg-[var(--brand-primary)] text-black border-[var(--brand-primary)]":"bg-white text-black border-white":"border-slate-800 text-slate-500"}`,children:[i," ",n]}),Yy=({label:a,value:n,onDec:i,onInc:s})=>f.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-3 flex items-center justify-between",children:[f.jsx("span",{className:"text-[8px] font-black uppercase text-slate-500",children:a}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:i,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(Ua,{size:10})}),f.jsx("span",{className:"text-xs font-black text-[var(--text-main)]",children:n}),f.jsx("button",{onClick:s,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(gr,{size:10})})]})]}),wk=()=>{const{id:a}=Oh(),n=Zt(),[i,s]=C.useState(!0),[o,c]=C.useState(!1),[p,g]=C.useState(""),[v,b]=C.useState(""),[S,j]=C.useState(!1),[T,A]=C.useState(""),[B,I]=C.useState([]),[V,ae]=C.useState([]);C.useEffect(()=>{(async()=>{if(!a)return;const[te,Ne]=await Promise.all([Ji.getRoutineDetail(a),Ft.getExercisesWithMeta()]);te&&(g(te.name),b(te.description||""),j(te.is_public),ae(te.exercises)),I(Ne),s(!1)})()},[a]);const K=C.useMemo(()=>{const ue={};return V.forEach(te=>{B.find(Le=>Le.id===(te.exercise_id||te.id))?.all_muscles?.filter(Le=>Le.role==="primary").forEach(Le=>{ue[Le.name]=(ue[Le.name]||0)+1})}),Object.entries(ue).sort((te,Ne)=>Ne[1]-te[1]).slice(0,3)},[V,B]),Y=ue=>{ae([...V,{...ue,exercise_id:ue.id,target_sets:3,target_reps:10}]),A("")},de=(ue,te,Ne)=>{ae(Le=>Le.map((yt,Nt)=>Nt===ue?{...yt,[te]:Ne}:yt))},Ee=async()=>{try{await Ji.updateRoutine(a,{name:p,description:v,is_public:S,updated_at:new Date().toISOString()},V.map(ue=>({exercise_id:ue.exercise_id||ue.id,target_sets:ue.target_sets,target_reps:ue.target_reps}))),n(-1)}catch{alert("Update failed.")}};return i?null:f.jsxs(Vn,{title:"Edit Routine",children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-6 pb-32",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-6 rounded-[2.2rem] space-y-6",children:[f.jsx("input",{type:"text",value:p,onChange:ue=>g(ue.target.value),className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter"}),f.jsx("textarea",{value:v,onChange:ue=>b(ue.target.value),placeholder:"ROUTINE DESCRIPTION",className:"w-full bg-[var(--bg-main)] border border-slate-800 rounded-2xl p-4 text-xs font-bold text-[var(--text-main)] outline-none resize-none h-24 placeholder:text-slate-700"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>j(!1),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${S?"border-slate-800 text-slate-500":"bg-white text-black border-white"}`,children:[f.jsx(Hc,{size:12})," Private"]}),f.jsxs("button",{onClick:()=>j(!0),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${S?"bg-[var(--brand-primary)] text-black border-[var(--brand-primary)] shadow-lg shadow-[var(--brand-primary)]/20":"border-slate-800 text-slate-500"}`,children:[f.jsx($c,{size:12})," Public"]})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(([ue])=>f.jsx("span",{className:"text-[8px] font-black uppercase px-3 py-1.5 bg-[var(--brand-primary)]/10 text-[var(--brand-primary)] rounded-full border border-[var(--brand-primary)]/20",children:ue},ue))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(vl,{size:16,className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500"}),f.jsx("input",{type:"text",value:T,onChange:ue=>A(ue.target.value),placeholder:"ADD TO ROUTINE...",className:"w-full bg-[var(--bg-surface)] border border-slate-800 rounded-2xl py-5 pl-14 text-xs font-black uppercase italic outline-none focus:border-[var(--brand-primary)]"}),T&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-slate-800 rounded-[2rem] shadow-2xl z-50 max-h-64 overflow-y-auto",children:B.filter(ue=>ue.name.toLowerCase().includes(T.toLowerCase())).map(ue=>f.jsx("button",{onClick:()=>Y(ue),className:"w-full p-5 text-left border-b border-slate-800 last:border-0 hover:bg-slate-900 font-black uppercase italic text-xs text-[var(--text-main)]",children:ue.name},ue.id))})]}),f.jsx("div",{className:"space-y-3",children:V.map((ue,te)=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 rounded-[1.8rem] p-5 flex flex-col gap-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Gv,{size:16,className:"text-slate-700"}),f.jsx("span",{className:"text-xs font-black uppercase italic text-[var(--text-main)]",children:ue.name||B.find(Ne=>Ne.id===ue.exercise_id)?.name})]}),f.jsx("button",{onClick:()=>ae(Ne=>Ne.filter((Le,yt)=>yt!==te)),className:"w-8 h-8 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center text-slate-500 hover:text-red-500",children:f.jsx(Ua,{size:14,strokeWidth:3})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Qy,{label:"Sets",value:ue.target_sets,onDec:()=>de(te,"target_sets",Math.max(1,ue.target_sets-1)),onInc:()=>de(te,"target_sets",ue.target_sets+1)}),f.jsx(Qy,{label:"Reps",value:ue.target_reps,onDec:()=>de(te,"target_reps",Math.max(1,ue.target_reps-1)),onInc:()=>de(te,"target_reps",ue.target_reps+1)})]})]},`${ue.exercise_id||ue.id}-${te}`))}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:Ee,className:"w-full py-5 bg-[var(--brand-primary)] text-black font-black uppercase italic rounded-3xl shadow-xl shadow-[var(--brand-primary)]/20 active:scale-[0.97] transition-all flex items-center justify-center gap-3 tracking-widest",children:[f.jsx(gl,{size:20,strokeWidth:4})," UPDATE TEMPLATE"]}),f.jsxs("button",{onClick:()=>c(!0),className:"w-full py-5 bg-red-500/10 text-red-500 font-black uppercase italic rounded-3xl flex items-center justify-center gap-3 border border-red-500/20 active:scale-95",children:[f.jsx(Vo,{size:20})," ARCHIVE ROUTINE"]})]}),f.jsx("div",{className:"flex-1"})]}),f.jsx(_k,{isOpen:o,onConfirm:()=>Ji.archiveRoutine(a).then(()=>n(-1)),onCancel:()=>c(!1)})]})},Qy=({label:a,value:n,onDec:i,onInc:s})=>f.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-3 flex items-center justify-between",children:[f.jsx("span",{className:"text-[8px] font-black uppercase text-slate-500",children:a}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:i,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(Ua,{size:10})}),f.jsx("span",{className:"text-xs font-black text-[var(--text-main)]",children:n}),f.jsx("button",{onClick:s,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(gr,{size:10})})]})]}),_k=({isOpen:a,onConfirm:n,onCancel:i})=>a?f.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[f.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:i}),f.jsxs("div",{className:"relative w-full max-w-sm bg-[var(--bg-surface)] border border-slate-800 rounded-[2.5rem] p-8 text-center animate-in zoom-in",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500 mb-6 mx-auto",children:f.jsx(Lh,{size:32})}),f.jsx("h3",{className:"text-xl font-black uppercase italic text-[var(--text-main)] mb-2",children:"Archive Routine?"}),f.jsx("p",{className:"text-xs font-bold text-slate-500 leading-relaxed mb-8",children:"This will hide the template from your library."}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsx("button",{onClick:n,className:"w-full py-5 bg-red-500 text-white rounded-2xl font-black uppercase italic tracking-widest active:scale-95 shadow-lg shadow-red-500/20",children:"Archive Now"}),f.jsx("button",{onClick:i,className:"w-full py-3 text-slate-500 font-black uppercase italic text-[10px]",children:"Cancel"})]})]})]}):null,Sk=({onClose:a,onAdd:n})=>{const[i,s]=C.useState(""),[o,c]=C.useState([]),p=ul(()=>fe.exercises.toArray())||[],g=ul(()=>fe.exercise_muscles.toArray())||[],v=ul(()=>fe.muscles.toArray())||[],b=C.useMemo(()=>{const j={};return p.forEach(T=>{const A=g.find(V=>V.exercise_id===T.id),I=v.find(V=>V.id===A?.muscle_id)?.parent||"Other";j[I]||(j[I]=[]),j[I].push(T)}),j},[p,g,v]),S=j=>{c(T=>T.includes(j)?T.filter(A=>A!==j):[...T,j])};return f.jsxs("div",{className:"fixed inset-0 z-[150] bg-black flex flex-col animate-in slide-in-from-bottom duration-300",children:[f.jsxs("header",{className:"p-6 flex items-center justify-between border-b border-slate-800 bg-black",children:[f.jsx("h2",{className:"text-lg font-black uppercase italic text-white",children:"Add Exercises"}),f.jsx("button",{onClick:a,className:"p-2 text-slate-500",children:f.jsx(Gc,{size:24})})]}),f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(vl,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),f.jsx("input",{autoFocus:!0,type:"text",value:i,onChange:j=>s(j.target.value),placeholder:"Search movements...",className:"w-full bg-slate-900 border border-slate-800 rounded-xl py-4 pl-12 text-xs font-black uppercase italic text-white outline-none"})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-40",children:Object.entries(b).map(([j,T])=>f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"h-[2px] w-4 bg-[var(--brand-primary)]"}),f.jsx("h3",{className:"text-[10px] font-black text-[var(--brand-primary)] uppercase tracking-[0.3em]",children:j})]}),f.jsx("div",{className:"space-y-2",children:T.filter(A=>A.name.toLowerCase().includes(i.toLowerCase())).map(A=>f.jsxs("button",{onClick:()=>S(A.id),className:`w-full p-4 rounded-xl border flex items-center justify-between transition-all ${o.includes(A.id)?"bg-[var(--brand-primary)] border-[var(--brand-primary)] text-black":"bg-slate-900 border-slate-800 text-slate-400"}`,children:[f.jsx("span",{className:"text-xs font-black uppercase italic",children:A.name}),o.includes(A.id)&&f.jsx("div",{className:"w-5 h-5 bg-black rounded-full flex items-center justify-center text-[var(--brand-primary)] text-[10px] font-black",children:o.indexOf(A.id)+1})]},A.id))})]},j))}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black to-transparent",children:f.jsxs("button",{onClick:()=>n(o),disabled:o.length===0,className:"w-full py-5 bg-white text-black rounded-3xl font-black uppercase italic tracking-widest shadow-2xl active:scale-95 disabled:opacity-20 transition-all",children:["Add ",o.length," Exercises"]})})]})},jk=()=>{const a=Zt(),[n]=aw(),i=n.get("mode")||"live",{user_id:s}=jn(),{activeWorkout:o,activeLogs:c}=$h(),p=Xi.getISTDate(),[g,v]=p.split("T"),b=v.substring(0,5),[S,j]=C.useState(0),[T,A]=C.useState(null),[B,I]=C.useState(!1),[V,ae]=C.useState(!1),[K,Y]=C.useState(""),[de,Ee]=C.useState(g),[ue,te]=C.useState(b),[Ne,Le]=C.useState(b),yt=qe=>{"vibrate"in navigator&&navigator.vibrate(qe)},Nt=()=>{const qe=new(window.AudioContext||window.webkitAudioContext),dt=qe.createOscillator(),Pt=qe.createGain();dt.connect(Pt),Pt.connect(qe.destination),dt.type="sine",dt.frequency.setValueAtTime(880,qe.currentTime),Pt.gain.setValueAtTime(.1,qe.currentTime),dt.start(),dt.stop(qe.currentTime+.2),yt([100,50,100])};C.useEffect(()=>{if(o&&i==="live"){const qe=new Date(o.start_time).getTime(),dt=setInterval(()=>{const Pt=new Date(Xi.getISTDate()).getTime();j(Math.floor((Pt-qe)/1e3))},1e3);return()=>clearInterval(dt)}},[o,i]),C.useEffect(()=>{let qe;return T!==null&&T>0?qe=setInterval(()=>{A(dt=>dt!==null&&dt>0?dt-1:null)},1e3):T===0&&(Nt(),A(null)),()=>clearInterval(qe)},[T]);const zt=C.useMemo(()=>{const qe={};return c.forEach(dt=>{qe[dt.exercise_id]||(qe[dt.exercise_id]=[]),qe[dt.exercise_id].push(dt)}),qe},[c]);return!o&&i==="past"?f.jsx(Vn,{title:"Log Previous",children:f.jsx("div",{className:"flex-1 flex flex-col justify-center items-center py-10 px-6",children:f.jsxs("div",{className:"w-full max-w-sm bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] space-y-6 shadow-2xl",children:[f.jsx("h2",{className:"text-xl font-black uppercase italic text-white text-center tracking-tight",children:"Manual Log"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("input",{type:"date",value:de,onChange:qe=>Ee(qe.target.value),className:"w-full bg-black border border-slate-800 p-4 rounded-2xl text-white font-black outline-none"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx("input",{type:"time",value:ue,onChange:qe=>te(qe.target.value),className:"bg-black border border-slate-800 p-4 rounded-2xl text-white font-black outline-none"}),f.jsx("input",{type:"time",value:Ne,onChange:qe=>Le(qe.target.value),className:"bg-black border border-slate-800 p-4 rounded-2xl text-white font-black outline-none"})]})]}),f.jsxs("button",{onClick:()=>s&&ht.startNewWorkout(s),className:"w-full py-5 bg-[var(--brand-primary)] text-black rounded-3xl font-black uppercase italic tracking-widest flex items-center justify-center gap-2 active:scale-95 shadow-xl transition-all",children:[f.jsx(Dc,{size:18,fill:"currentColor"})," Start Entry"]})]})})}):o?f.jsxs(Vn,{title:i==="live"?"Live session":"Past session",rightElement:f.jsxs("div",{className:"flex gap-4 items-center",children:[f.jsx("button",{onClick:()=>ht.discardWorkout(o.id).then(()=>a("/dashboard")),className:"text-red-500/50 hover:text-red-500 transition-colors",children:f.jsx(Vo,{size:18})}),f.jsx("button",{onClick:()=>ae(!0),className:"bg-[var(--brand-primary)] text-black px-4 py-1.5 rounded-lg text-[10px] font-black uppercase italic active:scale-95 shadow-sm",children:"Finish"})]}),children:[f.jsxs("div",{className:"flex flex-col gap-6 pb-48",children:[f.jsx("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-[2.2rem]",children:f.jsxs("div",{className:"flex justify-between items-center px-2",children:[f.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase italic tracking-widest",children:i==="live"?"Duration":"Logged on"}),f.jsx("div",{className:"text-2xl font-black italic text-[var(--brand-primary)] tabular-nums flex items-center gap-2",children:i==="live"?f.jsxs(f.Fragment,{children:[f.jsx(Kc,{size:18,className:"animate-pulse"}),Math.floor(S/60),"m ",S%60,"s"]}):f.jsx("span",{className:"text-sm text-white",children:Co(new Date(de),"MMM d, yyyy")})})]})}),f.jsx("div",{className:"space-y-10",children:Object.entries(zt).map(([qe,dt])=>f.jsx(kk,{exerciseId:qe,sets:dt,onRemove:()=>ht.deleteExercise(o.id,qe),onRest:()=>i==="live"&&A(60),activeWorkoutId:o.id},qe))})]}),B&&f.jsx(Sk,{onClose:()=>I(!1),onAdd:qe=>{ht.addExercisesToActive(o.id,qe),I(!1)}}),V&&f.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-end justify-center p-4",children:f.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-[3rem] p-8 animate-in slide-in-from-bottom",children:[f.jsx("h2",{className:"text-xl font-black uppercase italic text-white mb-6",children:"Workout Summary"}),f.jsx("textarea",{value:K,onChange:qe=>Y(qe.target.value),placeholder:"Session notes...",className:"w-full bg-black border border-slate-800 rounded-2xl p-5 text-xs text-white h-32 mb-8 outline-none focus:border-[var(--brand-primary)]"}),f.jsx("button",{onClick:()=>{const qe=i==="past"?{start:`${de}T${ue}:00`,end:`${de}T${Ne}:00`}:void 0;ht.finishWorkout(o.id,K,qe).then(()=>a("/dashboard"))},className:"w-full py-5 bg-[var(--brand-primary)] text-black rounded-3xl font-black uppercase italic shadow-xl",children:"Complete"})]})}),T!==null&&f.jsxs("div",{className:"fixed bottom-28 left-4 right-4 bg-[var(--brand-primary)] rounded-2xl p-4 flex justify-between items-center shadow-2xl animate-in slide-in-from-bottom z-50",children:[f.jsxs("div",{className:"flex items-center gap-4 text-black font-black italic",children:[f.jsxs("div",{className:"flex items-center bg-black/20 rounded-xl overflow-hidden",children:[f.jsx("button",{onClick:()=>A(Math.max(0,T-15)),className:"px-3 py-2",children:f.jsx(Ua,{size:16})}),f.jsxs("div",{className:"w-14 h-10 bg-black rounded-xl flex items-center justify-center text-[var(--brand-primary)] text-lg tabular-nums",children:[T,"s"]}),f.jsx("button",{onClick:()=>A(T+15),className:"px-3 py-2",children:f.jsx(gr,{size:16})})]}),f.jsx("span",{className:"text-[10px] uppercase tracking-tighter",children:"Resting"})]}),f.jsx("button",{onClick:()=>A(null),className:"p-2 bg-black/10 rounded-full text-black",children:f.jsx(Gc,{size:16})})]}),f.jsx("div",{className:"fixed bottom-10 right-6 z-40",children:f.jsx("button",{onClick:()=>I(!0),className:"w-14 h-14 bg-white text-black rounded-full flex items-center justify-center shadow-xl active:scale-90 transition-all",children:f.jsx(gr,{size:28})})})]}):null},kk=({exerciseId:a,sets:n,onRemove:i,onRest:s,activeWorkoutId:o})=>{const[c,p]=C.useState(!1),g=ul(()=>fe.exercises.get(a));return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsxs("div",{className:"flex justify-between items-center relative",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>p(!c),children:[f.jsx("h3",{className:"text-sm font-black uppercase italic text-[var(--brand-primary)] leading-tight",children:g?.name||"Loading..."}),c?f.jsx(yl,{size:14,className:"text-slate-600"}):f.jsx(S2,{size:14,className:"text-slate-600"})]}),f.jsx("button",{onClick:i,className:"text-slate-600 p-1",children:f.jsx(Vo,{size:16})})]}),!c&&f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr_55px] gap-2 px-1 mb-2 items-center text-center",children:[f.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase",children:"Set"}),g?.weight&&f.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase",children:"Weight"}),g?.distance&&f.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase",children:"KM"}),g?.reps&&f.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase",children:"Reps"}),g?.duration&&f.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase",children:"Min : Sec"}),f.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase text-right mr-1",children:"Done"})]}),n.map((v,b)=>f.jsx(Ek,{set:v,index:b,exercise:g,onRest:s},v.id)),f.jsx("button",{onClick:()=>ht.addSet(o,a,n.length+1),className:"w-full py-3 bg-slate-900/40 rounded-xl text-[10px] font-black uppercase text-slate-500 mt-2 hover:bg-slate-800 transition-colors",children:"+ Add Set"})]})]})},Ek=({set:a,index:n,exercise:i,onRest:s})=>{const[o,c]=C.useState(null),[p,g]=C.useState(null),[v,b]=C.useState(!1),S=70,j=V=>{g(null),c(V.targetTouches[0].clientX)},T=V=>g(V.targetTouches[0].clientX),A=()=>{if(!o||!p)return;o-p>S&&("vibrate"in navigator&&navigator.vibrate(50),b(!0),setTimeout(()=>ht.deleteSet(a.id),300))},B=Math.floor((a.duration||0)/60),I=(a.duration||0)%60;return f.jsxs("div",{onTouchStart:j,onTouchMove:T,onTouchEnd:A,className:`grid grid-cols-[30px_1fr_1fr_55px] gap-2 items-center py-2.5 rounded-2xl transition-all duration-300 ${v?"opacity-0 -translate-x-full":"opacity-100 translate-x-0"} ${a.completed===1?"bg-green-500/10":"bg-transparent"}`,children:[f.jsx("span",{className:"text-[11px] font-black text-slate-500 text-center",children:n+1}),i?.weight?f.jsxs("div",{className:"flex items-center bg-slate-900 rounded-xl overflow-hidden border border-slate-800 min-h-[48px]",children:[f.jsx("button",{onClick:()=>ht.updateLog({...a,weight:Math.max(0,(a.weight||0)-2.5)}),className:"px-3 h-full text-slate-500 active:bg-slate-800",children:f.jsx(Ua,{size:14})}),f.jsx("input",{type:"number",step:"any",inputMode:"decimal",value:a.weight||"",onChange:V=>ht.updateLog({...a,weight:parseFloat(V.target.value)}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none"}),f.jsx("button",{onClick:()=>ht.updateLog({...a,weight:(a.weight||0)+5}),className:"px-3 h-full text-slate-500 active:bg-slate-800",children:f.jsx(gr,{size:14})})]}):i?.distance?f.jsxs("div",{className:"flex items-center bg-slate-900 rounded-xl overflow-hidden border border-slate-800 min-h-[48px]",children:[f.jsx("button",{onClick:()=>ht.updateLog({...a,distance:Math.max(0,(a.distance||0)-.1)}),className:"px-3 h-full text-slate-500",children:f.jsx(Ua,{size:14})}),f.jsx("input",{type:"number",step:"any",inputMode:"decimal",value:a.distance||"",onChange:V=>ht.updateLog({...a,distance:parseFloat(V.target.value)}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none"}),f.jsx("button",{onClick:()=>ht.updateLog({...a,distance:(a.distance||0)+.5}),className:"px-3 h-full text-slate-500",children:f.jsx(gr,{size:14})})]}):f.jsx("div",{}),i?.reps?f.jsxs("div",{className:"flex items-center bg-slate-900 rounded-xl overflow-hidden border border-slate-800 min-h-[48px]",children:[f.jsx("button",{onClick:()=>ht.updateLog({...a,reps:Math.max(0,(a.reps||0)-1)}),className:"px-3 h-full text-slate-500",children:f.jsx(Ua,{size:14})}),f.jsx("input",{type:"number",step:"any",inputMode:"decimal",value:a.reps||"",onChange:V=>ht.updateLog({...a,reps:parseFloat(V.target.value)}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none"}),f.jsx("button",{onClick:()=>ht.updateLog({...a,reps:(a.reps||0)+2}),className:"px-3 h-full text-slate-500",children:f.jsx(gr,{size:14})})]}):i?.duration?f.jsxs("div",{className:"flex items-center bg-slate-900 rounded-xl overflow-hidden border border-slate-800 min-h-[48px] px-1",children:[f.jsx("input",{type:"number",inputMode:"decimal",placeholder:"MM",value:B||"",onChange:V=>ht.updateLog({...a,duration:(parseInt(V.target.value)||0)*60+I}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none py-2"}),f.jsx("span",{className:"text-slate-600 font-black",children:":"}),f.jsx("input",{type:"number",inputMode:"decimal",placeholder:"SS",max:"59",value:I||"",onChange:V=>ht.updateLog({...a,duration:B*60+(parseInt(V.target.value)||0)}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none py-2"})]}):f.jsx("div",{}),f.jsx("button",{onClick:()=>{"vibrate"in navigator&&navigator.vibrate(30);const V=a.completed===1?0:1;ht.updateLog({...a,completed:V}),V===1&&s()},className:`w-11 h-11 rounded-2xl flex items-center justify-center mx-auto transition-all active:scale-90 ${a.completed===1?"bg-green-500 text-black shadow-[0_0_15px_rgba(34,197,94,0.3)]":"bg-slate-800 text-slate-700"}`,children:f.jsx(gl,{size:20,strokeWidth:4})})]})},Nk=()=>{const{user_id:a,athlete:n,loading:i}=jn();return i?f.jsx("div",{className:"h-screen w-full bg-[var(--bg-main)] flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-[var(--brand-primary)] border-t-transparent rounded-full animate-spin"}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-muted)] animate-pulse",children:"Establishing Link..."})]})}):f.jsxs(Nx,{children:[!a&&f.jsxs(f.Fragment,{children:[f.jsx(qt,{path:"/login",element:f.jsx(e2,{})}),f.jsx(qt,{path:"*",element:f.jsx(Qf,{to:"/login",replace:!0})})]}),a&&!n&&f.jsxs(f.Fragment,{children:[f.jsx(qt,{path:"/onboarding",element:f.jsx($j,{})}),f.jsx(qt,{path:"*",element:f.jsx(Qf,{to:"/onboarding",replace:!0})})]}),a&&n&&f.jsxs(qt,{element:f.jsx(tk,{}),children:[f.jsxs(qt,{element:f.jsx(Zj,{}),children:[f.jsx(qt,{path:"/dashboard",element:f.jsx(Xj,{})}),f.jsx(qt,{path:"/profile",element:f.jsx(nk,{})}),f.jsx(qt,{path:"/library",element:f.jsx(hk,{})})]}),f.jsx(qt,{path:"/profile/details",element:f.jsx(ak,{})}),f.jsx(qt,{path:"/profile/metrics",element:f.jsx(rk,{})}),f.jsx(qt,{path:"/profile/level",element:f.jsx(lk,{})}),f.jsx(qt,{path:"/profile/theme",element:f.jsx(uk,{})}),f.jsx(qt,{path:"/library/muscles/add",element:f.jsx(mk,{})}),f.jsx(qt,{path:"/library/muscles/:id",element:f.jsx(gk,{})}),f.jsx(qt,{path:"/library/exercises/add",element:f.jsx(yk,{})}),f.jsx(qt,{path:"/library/exercises/:id",element:f.jsx(bk,{})}),f.jsx(qt,{path:"/library/routines/add",element:f.jsx(xk,{})}),f.jsx(qt,{path:"/library/routines/:id",element:f.jsx(wk,{})}),f.jsx(qt,{path:"/workout/active",element:f.jsx(jk,{})}),f.jsx(qt,{path:"*",element:f.jsx(Qf,{to:"/dashboard",replace:!0})})]})]})};function Tk(){const{user_id:a}=jn();C.useEffect(()=>{a&&(dl.watchConnection(),dl.reconcile())},[a]);function n(){C.useEffect(()=>{let i=0,s=0;const o=p=>{i=p.touches[0].clientX,s=p.touches[0].clientY},c=p=>{const g=Math.abs(p.touches[0].clientX-i),v=Math.abs(p.touches[0].clientY-s);g>v&&g>10&&(i<30||i>window.innerWidth-30)&&p.cancelable&&p.preventDefault()};return document.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),()=>{document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",c)}},[])}return n(),f.jsx("div",{className:"app-root min-h-screen bg-[var(--bg-main)] text-[var(--text-main)] overflow-x-hidden selection:bg-[var(--brand-primary)] selection:text-[var(--bg-main)]",children:f.jsx(Nk,{})})}const Ok="modulepreload",Ak=function(a){return"/fitnex/"+a},Xy={},Ck=function(n,i,s){let o=Promise.resolve();if(i&&i.length>0){let b=function(S){return Promise.all(S.map(j=>Promise.resolve(j).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var p=b;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=g?.nonce||g?.getAttribute("nonce");o=b(i.map(S=>{if(S=Ak(S),S in Xy)return;Xy[S]=!0;const j=S.endsWith(".css"),T=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${T}`))return;const A=document.createElement("link");if(A.rel=j?"stylesheet":Ok,j||(A.as="script"),A.crossOrigin="",A.href=S,v&&A.setAttribute("nonce",v),document.head.appendChild(A),j)return new Promise((B,I)=>{A.addEventListener("load",B),A.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${S}`)))})}))}function c(g){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g}return o.then(g=>{for(const v of g||[])v.status==="rejected"&&c(v.reason);return n().catch(c)})};function Rk(a={}){const{immediate:n=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:o,onRegisteredSW:c,onRegisterError:p}=a;let g,v;const b=async(j=!0)=>{await v};async function S(){if("serviceWorker"in navigator){if(g=await Ck(async()=>{const{Workbox:j}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:j}},[]).then(({Workbox:j})=>new j("/fitnex/sw.js",{scope:"/fitnex/",type:"classic"})).catch(j=>{p?.(j)}),!g)return;g.addEventListener("activated",j=>{(j.isUpdate||j.isExternal)&&window.location.reload()}),g.addEventListener("installed",j=>{j.isUpdate||s?.()}),g.register({immediate:n}).then(j=>{c?c("/fitnex/sw.js",j):o?.(j)}).catch(j=>{p?.(j)})}}return v=S(),b}const Dk=C.createContext(void 0),Mk=({children:a})=>{const[n,i]=C.useState("dark"),[s,o]=C.useState("#ff7f50");C.useEffect(()=>{(async()=>{const S=await fe.app_settings.get("global");S?(c(S.theme),p(S.brandColor),i(S.theme),o(S.brandColor)):(c("dark"),p("#ff7f50"))})()},[]);const c=b=>{const S=window.document.documentElement;b==="light"?S.classList.add("light-theme"):S.classList.remove("light-theme")},p=b=>{document.documentElement.style.setProperty("--brand-primary",b)},g=async b=>{i(b),c(b),await fe.app_settings.put({id:"global",theme:b,brandColor:s,unitSystem:"metric"})},v=async b=>{o(b),p(b),await fe.app_settings.put({id:"global",theme:n,brandColor:b,unitSystem:"metric"})};return f.jsx(Dk.Provider,{value:{theme:n,brandColor:s,setTheme:g,setBrandColor:v},children:a})};function Hh(){const a=window.visualViewport?.height||window.innerHeight;document.documentElement.style.setProperty("--app-height",`${a}px`)}Hh();window.visualViewport?.addEventListener("resize",Hh);window.addEventListener("orientationchange",Hh);const zk=Rk({immediate:!0,onNeedRefresh(){zk(!0)},onOfflineReady(){console.log("App ready offline")}});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});T0.createRoot(document.getElementById("root")).render(f.jsx(nl.StrictMode,{children:f.jsx(Fx,{basename:"/fitnex",children:f.jsx(ZS,{children:f.jsx(Mk,{children:f.jsx(Ij,{children:f.jsx(Tk,{})})})})})}));
