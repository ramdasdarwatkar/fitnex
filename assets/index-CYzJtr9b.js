(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var w0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Pf={exports:{}},No={};var Vg;function _0(){if(Vg)return No;Vg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(s,o,c){var p=null;if(c!==void 0&&(p=""+c),o.key!==void 0&&(p=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:a,type:s,key:p,ref:o!==void 0?o:null,props:c}}return No.Fragment=n,No.jsx=i,No.jsxs=i,No}var Yg;function S0(){return Yg||(Yg=1,Pf.exports=_0()),Pf.exports}var f=S0(),$f={exports:{}},Xe={};var Wg;function j0(){if(Wg)return Xe;Wg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),O=Symbol.iterator;function A(k){return k===null||typeof k!="object"?null:(k=O&&k[O]||k["@@iterator"],typeof k=="function"?k:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,G={};function ie(k,W,ue){this.props=k,this.context=W,this.refs=G,this.updater=ue||B}ie.prototype.isReactComponent={},ie.prototype.setState=function(k,W){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,W,"setState")},ie.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function I(){}I.prototype=ie.prototype;function V(k,W,ue){this.props=k,this.context=W,this.refs=G,this.updater=ue||B}var me=V.prototype=new I;me.constructor=V,F(me,ie.prototype),me.isPureReactComponent=!0;var Ae=Array.isArray;function ce(){}var ae={H:null,A:null,T:null,S:null},Me=Object.prototype.hasOwnProperty;function He(k,W,ue){var pe=ue.ref;return{$$typeof:a,type:k,key:W,ref:pe!==void 0?pe:null,props:ue}}function mt(k,W){return He(k.type,W,k.props)}function gt(k){return typeof k=="object"&&k!==null&&k.$$typeof===a}function xt(k){var W={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return W[ue]})}var Qt=/\/+/g;function jn(k,W){return typeof k=="object"&&k!==null&&k.key!=null?xt(""+k.key):W.toString(36)}function Kt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ce,ce):(k.status="pending",k.then(function(W){k.status==="pending"&&(k.status="fulfilled",k.value=W)},function(W){k.status==="pending"&&(k.status="rejected",k.reason=W)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function se(k,W,ue,pe,we){var ke=typeof k;(ke==="undefined"||ke==="boolean")&&(k=null);var xe=!1;if(k===null)xe=!0;else switch(ke){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(k.$$typeof){case a:case n:xe=!0;break;case S:return xe=k._init,se(xe(k._payload),W,ue,pe,we)}}if(xe)return we=we(k),xe=pe===""?"."+jn(k,0):pe,Ae(we)?(ue="",xe!=null&&(ue=xe.replace(Qt,"$&/")+"/"),se(we,W,ue,"",function(je){return je})):we!=null&&(gt(we)&&(we=mt(we,ue+(we.key==null||k&&k.key===we.key?"":(""+we.key).replace(Qt,"$&/")+"/")+xe)),W.push(we)),1;xe=0;var qe=pe===""?".":pe+":";if(Ae(k))for(var Ge=0;Ge<k.length;Ge++)pe=k[Ge],ke=qe+jn(pe,Ge),xe+=se(pe,W,ue,ke,we);else if(Ge=A(k),typeof Ge=="function")for(k=Ge.call(k),Ge=0;!(pe=k.next()).done;)pe=pe.value,ke=qe+jn(pe,Ge++),xe+=se(pe,W,ue,ke,we);else if(ke==="object"){if(typeof k.then=="function")return se(Kt(k),W,ue,pe,we);throw W=String(k),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return xe}function de(k,W,ue){if(k==null)return k;var pe=[],we=0;return se(k,pe,"","",function(ke){return W.call(ue,ke,we++)}),pe}function Ne(k){if(k._status===-1){var W=k._result;W=W(),W.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=W)}if(k._status===1)return k._result.default;throw k._result}var Ke=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},K={map:de,forEach:function(k,W,ue){de(k,function(){W.apply(this,arguments)},ue)},count:function(k){var W=0;return de(k,function(){W++}),W},toArray:function(k){return de(k,function(W){return W})||[]},only:function(k){if(!gt(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Xe.Activity=j,Xe.Children=K,Xe.Component=ie,Xe.Fragment=i,Xe.Profiler=o,Xe.PureComponent=V,Xe.StrictMode=s,Xe.Suspense=v,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return ae.H.useMemoCache(k)}},Xe.cache=function(k){return function(){return k.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(k,W,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var pe=F({},k.props),we=k.key;if(W!=null)for(ke in W.key!==void 0&&(we=""+W.key),W)!Me.call(W,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&W.ref===void 0||(pe[ke]=W[ke]);var ke=arguments.length-2;if(ke===1)pe.children=ue;else if(1<ke){for(var xe=Array(ke),qe=0;qe<ke;qe++)xe[qe]=arguments[qe+2];pe.children=xe}return He(k.type,we,pe)},Xe.createContext=function(k){return k={$$typeof:p,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},Xe.createElement=function(k,W,ue){var pe,we={},ke=null;if(W!=null)for(pe in W.key!==void 0&&(ke=""+W.key),W)Me.call(W,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=W[pe]);var xe=arguments.length-2;if(xe===1)we.children=ue;else if(1<xe){for(var qe=Array(xe),Ge=0;Ge<xe;Ge++)qe[Ge]=arguments[Ge+2];we.children=qe}if(k&&k.defaultProps)for(pe in xe=k.defaultProps,xe)we[pe]===void 0&&(we[pe]=xe[pe]);return He(k,ke,we)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(k){return{$$typeof:g,render:k}},Xe.isValidElement=gt,Xe.lazy=function(k){return{$$typeof:S,_payload:{_status:-1,_result:k},_init:Ne}},Xe.memo=function(k,W){return{$$typeof:b,type:k,compare:W===void 0?null:W}},Xe.startTransition=function(k){var W=ae.T,ue={};ae.T=ue;try{var pe=k(),we=ae.S;we!==null&&we(ue,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ce,Ke)}catch(ke){Ke(ke)}finally{W!==null&&ue.types!==null&&(W.types=ue.types),ae.T=W}},Xe.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Xe.use=function(k){return ae.H.use(k)},Xe.useActionState=function(k,W,ue){return ae.H.useActionState(k,W,ue)},Xe.useCallback=function(k,W){return ae.H.useCallback(k,W)},Xe.useContext=function(k){return ae.H.useContext(k)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(k,W){return ae.H.useDeferredValue(k,W)},Xe.useEffect=function(k,W){return ae.H.useEffect(k,W)},Xe.useEffectEvent=function(k){return ae.H.useEffectEvent(k)},Xe.useId=function(){return ae.H.useId()},Xe.useImperativeHandle=function(k,W,ue){return ae.H.useImperativeHandle(k,W,ue)},Xe.useInsertionEffect=function(k,W){return ae.H.useInsertionEffect(k,W)},Xe.useLayoutEffect=function(k,W){return ae.H.useLayoutEffect(k,W)},Xe.useMemo=function(k,W){return ae.H.useMemo(k,W)},Xe.useOptimistic=function(k,W){return ae.H.useOptimistic(k,W)},Xe.useReducer=function(k,W,ue){return ae.H.useReducer(k,W,ue)},Xe.useRef=function(k){return ae.H.useRef(k)},Xe.useState=function(k){return ae.H.useState(k)},Xe.useSyncExternalStore=function(k,W,ue){return ae.H.useSyncExternalStore(k,W,ue)},Xe.useTransition=function(){return ae.H.useTransition()},Xe.version="19.2.4",Xe}var Qg;function kh(){return Qg||(Qg=1,$f.exports=j0()),$f.exports}var R=kh();const ol=jh(R);var Hf={exports:{}},To={},Kf={exports:{}},If={};var Xg;function k0(){return Xg||(Xg=1,(function(a){function n(se,de){var Ne=se.length;se.push(de);e:for(;0<Ne;){var Ke=Ne-1>>>1,K=se[Ke];if(0<o(K,de))se[Ke]=de,se[Ne]=K,Ne=Ke;else break e}}function i(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var de=se[0],Ne=se.pop();if(Ne!==de){se[0]=Ne;e:for(var Ke=0,K=se.length,k=K>>>1;Ke<k;){var W=2*(Ke+1)-1,ue=se[W],pe=W+1,we=se[pe];if(0>o(ue,Ne))pe<K&&0>o(we,ue)?(se[Ke]=we,se[pe]=Ne,Ke=pe):(se[Ke]=ue,se[W]=Ne,Ke=W);else if(pe<K&&0>o(we,Ne))se[Ke]=we,se[pe]=Ne,Ke=pe;else break e}}return de}function o(se,de){var Ne=se.sortIndex-de.sortIndex;return Ne!==0?Ne:se.id-de.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var p=Date,g=p.now();a.unstable_now=function(){return p.now()-g}}var v=[],b=[],S=1,j=null,O=3,A=!1,B=!1,F=!1,G=!1,ie=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function me(se){for(var de=i(b);de!==null;){if(de.callback===null)s(b);else if(de.startTime<=se)s(b),de.sortIndex=de.expirationTime,n(v,de);else break;de=i(b)}}function Ae(se){if(F=!1,me(se),!B)if(i(v)!==null)B=!0,ce||(ce=!0,xt());else{var de=i(b);de!==null&&Kt(Ae,de.startTime-se)}}var ce=!1,ae=-1,Me=5,He=-1;function mt(){return G?!0:!(a.unstable_now()-He<Me)}function gt(){if(G=!1,ce){var se=a.unstable_now();He=se;var de=!0;try{e:{B=!1,F&&(F=!1,I(ae),ae=-1),A=!0;var Ne=O;try{t:{for(me(se),j=i(v);j!==null&&!(j.expirationTime>se&&mt());){var Ke=j.callback;if(typeof Ke=="function"){j.callback=null,O=j.priorityLevel;var K=Ke(j.expirationTime<=se);if(se=a.unstable_now(),typeof K=="function"){j.callback=K,me(se),de=!0;break t}j===i(v)&&s(v),me(se)}else s(v);j=i(v)}if(j!==null)de=!0;else{var k=i(b);k!==null&&Kt(Ae,k.startTime-se),de=!1}}break e}finally{j=null,O=Ne,A=!1}de=void 0}}finally{de?xt():ce=!1}}}var xt;if(typeof V=="function")xt=function(){V(gt)};else if(typeof MessageChannel<"u"){var Qt=new MessageChannel,jn=Qt.port2;Qt.port1.onmessage=gt,xt=function(){jn.postMessage(null)}}else xt=function(){ie(gt,0)};function Kt(se,de){ae=ie(function(){se(a.unstable_now())},de)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(se){se.callback=null},a.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<se?Math.floor(1e3/se):5},a.unstable_getCurrentPriorityLevel=function(){return O},a.unstable_next=function(se){switch(O){case 1:case 2:case 3:var de=3;break;default:de=O}var Ne=O;O=de;try{return se()}finally{O=Ne}},a.unstable_requestPaint=function(){G=!0},a.unstable_runWithPriority=function(se,de){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ne=O;O=se;try{return de()}finally{O=Ne}},a.unstable_scheduleCallback=function(se,de,Ne){var Ke=a.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Ke+Ne:Ke):Ne=Ke,se){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Ne+K,se={id:S++,callback:de,priorityLevel:se,startTime:Ne,expirationTime:K,sortIndex:-1},Ne>Ke?(se.sortIndex=Ne,n(b,se),i(v)===null&&se===i(b)&&(F?(I(ae),ae=-1):F=!0,Kt(Ae,Ne-Ke))):(se.sortIndex=K,n(v,se),B||A||(B=!0,ce||(ce=!0,xt()))),se},a.unstable_shouldYield=mt,a.unstable_wrapCallback=function(se){var de=O;return function(){var Ne=O;O=de;try{return se.apply(this,arguments)}finally{O=Ne}}}})(If)),If}var Fg;function E0(){return Fg||(Fg=1,Kf.exports=k0()),Kf.exports}var Gf={exports:{}},An={};var Jg;function N0(){if(Jg)return An;Jg=1;var a=kh();function n(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(v,b,S){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:j==null?null:""+j,children:v,containerInfo:b,implementation:S}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,An.createPortal=function(v,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return c(v,b,null,S)},An.flushSync=function(v){var b=p.T,S=s.p;try{if(p.T=null,s.p=2,v)return v()}finally{p.T=b,s.p=S,s.d.f()}},An.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(v,b))},An.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},An.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var S=b.as,j=g(S,b.crossOrigin),O=typeof b.integrity=="string"?b.integrity:void 0,A=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?s.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:j,integrity:O,fetchPriority:A}):S==="script"&&s.d.X(v,{crossOrigin:j,integrity:O,fetchPriority:A,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},An.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=g(b.as,b.crossOrigin);s.d.M(v,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(v)},An.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,j=g(S,b.crossOrigin);s.d.L(v,S,{crossOrigin:j,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},An.preloadModule=function(v,b){if(typeof v=="string")if(b){var S=g(b.as,b.crossOrigin);s.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(v)},An.requestFormReset=function(v){s.d.r(v)},An.unstable_batchedUpdates=function(v,b){return v(b)},An.useFormState=function(v,b,S){return p.H.useFormState(v,b,S)},An.useFormStatus=function(){return p.H.useHostTransitionStatus()},An.version="19.2.4",An}var Zg;function T0(){if(Zg)return Gf.exports;Zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Gf.exports=N0(),Gf.exports}var ey;function O0(){if(ey)return To;ey=1;var a=E0(),n=kh(),i=T0();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(c(e)!==e)throw Error(s(188))}function b(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,l=t;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){r=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return v(d),e;if(h===l)return v(d),t;h=h.sibling}throw Error(s(188))}if(r.return!==l.return)r=d,l=h;else{for(var w=!1,N=d.child;N;){if(N===r){w=!0,r=d,l=h;break}if(N===l){w=!0,l=d,r=h;break}N=N.sibling}if(!w){for(N=h.child;N;){if(N===r){w=!0,r=h,l=d;break}if(N===l){w=!0,l=h,r=d;break}N=N.sibling}if(!w)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,O=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),V=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),He=Symbol.for("react.activity"),mt=Symbol.for("react.memo_cache_sentinel"),gt=Symbol.iterator;function xt(e){return e===null||typeof e!="object"?null:(e=gt&&e[gt]||e["@@iterator"],typeof e=="function"?e:null)}var Qt=Symbol.for("react.client.reference");function jn(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case ie:return"Profiler";case G:return"StrictMode";case Ae:return"Suspense";case ce:return"SuspenseList";case He:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case V:return e.displayName||"Context";case I:return(e._context.displayName||"Context")+".Consumer";case me:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return t=e.displayName||null,t!==null?t:jn(e.type)||"Memo";case Me:t=e._payload,e=e._init;try{return jn(e(t))}catch{}}return null}var Kt=Array.isArray,se=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Ke=[],K=-1;function k(e){return{current:e}}function W(e){0>K||(e.current=Ke[K],Ke[K]=null,K--)}function ue(e,t){K++,Ke[K]=e.current,e.current=t}var pe=k(null),we=k(null),ke=k(null),xe=k(null);function qe(e,t){switch(ue(ke,t),ue(we,e),ue(pe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?pg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=pg(t),e=gg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(pe),ue(pe,e)}function Ge(){W(pe),W(we),W(ke)}function je(e){e.memoizedState!==null&&ue(xe,e);var t=pe.current,r=gg(t,e.type);t!==r&&(ue(we,e),ue(pe,r))}function ut(e){we.current===e&&(W(pe),W(we)),xe.current===e&&(W(xe),So._currentValue=Ne)}var Pe,Ot;function Fe(e){if(Pe===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pe=t&&t[1]||"",Ot=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+e+Ot}var At=!1;function mn(e,t){if(!e||At)return"";At=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ne=re}Reflect.construct(e,[],he)}else{try{he.call()}catch(re){ne=re}e.call(he.prototype)}}else{try{throw Error()}catch(re){ne=re}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),w=h[0],N=h[1];if(w&&N){var M=w.split(`
`),ee=N.split(`
`);for(d=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;d<ee.length&&!ee[d].includes("DetermineComponentFrameRoot");)d++;if(l===M.length||d===ee.length)for(l=M.length-1,d=ee.length-1;1<=l&&0<=d&&M[l]!==ee[d];)d--;for(;1<=l&&0<=d;l--,d--)if(M[l]!==ee[d]){if(l!==1||d!==1)do if(l--,d--,0>d||M[l]!==ee[d]){var oe=`
`+M[l].replace(" at new "," at ");return e.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",e.displayName)),oe}while(1<=l&&0<=d);break}}}finally{At=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Fe(r):""}function Rn(e,t){switch(e.tag){case 26:case 27:case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return e.child!==t&&t!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return mn(e.type,!1);case 11:return mn(e.type.render,!1);case 1:return mn(e.type,!0);case 31:return Fe("Activity");default:return""}}function Un(e){try{var t="",r=null;do t+=Rn(e,r),r=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Kn=Object.prototype.hasOwnProperty,un=a.unstable_scheduleCallback,kn=a.unstable_cancelCallback,os=a.unstable_shouldYield,Wa=a.unstable_requestPaint,rn=a.unstable_now,Qa=a.unstable_getCurrentPriorityLevel,sn=a.unstable_ImmediatePriority,aa=a.unstable_UserBlockingPriority,Ca=a.unstable_NormalPriority,Ra=a.unstable_LowPriority,Xa=a.unstable_IdlePriority,Ma=a.log,xa=a.unstable_setDisableYieldValue,ra=null,pn=null;function gn(e){if(typeof Ma=="function"&&xa(e),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(ra,e)}catch{}}var Oe=Math.clz32?Math.clz32:us,vi=Math.log,Fa=Math.LN2;function us(e){return e>>>=0,e===0?32:31-(vi(e)/Fa|0)|0}var Ee=256,Rr=262144,bi=4194304;function wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xi(e,t,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~h,l!==0?d=wa(l):(w&=N,w!==0?d=wa(w):r||(r=N&~e,r!==0&&(d=wa(r))))):(N=l&~h,N!==0?d=wa(N):w!==0?d=wa(w):r||(r=l&~e,r!==0&&(d=wa(r)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,r=t&-t,h>=r||h===32&&(r&4194048)!==0)?t:d}function Ja(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Vc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fo(){var e=bi;return bi<<=1,(bi&62914560)===0&&(bi=4194304),e}function Da(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ia(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function El(e,t,r,l,d,h){var w=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var N=e.entanglements,M=e.expirationTimes,ee=e.hiddenUpdates;for(r=w&~r;0<r;){var oe=31-Oe(r),he=1<<oe;N[oe]=0,M[oe]=-1;var ne=ee[oe];if(ne!==null)for(ee[oe]=null,oe=0;oe<ne.length;oe++){var re=ne[oe];re!==null&&(re.lane&=-536870913)}r&=~he}l!==0&&wi(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(w&~t))}function wi(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Oe(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Et(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var l=31-Oe(r),d=1<<l;d&t|e[l]&t&&(e[l]|=t),r&=~d}}function It(e,t){var r=t&-t;return r=(r&42)!==0?1:Nl(r),(r&(e.suspendedLanes|t))!==0?0:r}function Nl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Mr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function _i(){var e=de.p;return e!==0?e:(e=window.event,e===void 0?32:Bg(e.type))}function Si(e,t){var r=de.p;try{return de.p=e,t()}finally{de.p=r}}var za=Math.random().toString(36).slice(2),Ct="__reactFiber$"+za,Gt="__reactProps$"+za,Mn="__reactContainer$"+za,Dr="__reactEvents$"+za,Yc="__reactListeners$"+za,Ua="__reactHandles$"+za,Tl="__reactResources$"+za,In="__reactMarker$"+za;function cs(e){delete e[Ct],delete e[Gt],delete e[Dr],delete e[Yc],delete e[Ua]}function La(e){var t=e[Ct];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mn]||r[Ct]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Sg(e);e!==null;){if(r=e[Ct])return r;e=Sg(e)}return t}e=r,r=e.parentNode}return null}function wt(e){if(e=e[Ct]||e[Mn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Gn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function En(e){var t=e[Tl];return t||(t=e[Tl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Vt(e){e[In]=!0}var Za=new Set,ji={};function _a(e,t){qa(e,t),qa(e+"Capture",t)}function qa(e,t){for(ji[e]=t,e=0;e<t.length;e++)Za.add(t[e])}var er=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},ki={};function Jo(e){return Kn.call(ki,e)?!0:Kn.call(Ol,e)?!1:er.test(e)?ki[e]=!0:(Ol[e]=!0,!1)}function et(e,t,r){if(Jo(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Ei(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function sa(e,t,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+l)}}function yn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zo(e,t,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(w){r=""+w,h.call(this,w)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(w){r=""+w},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ds(e){if(!e._valueTracker){var t=zr(e)?"checked":"value";e._valueTracker=Zo(e,t,""+e[t])}}function Al(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=zr(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function ft(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ni=/[\n"\\]/g;function cn(e){return e.replace(Ni,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ba(e,t,r,l,d,h,w,N){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),t!=null?w==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+yn(t)):e.value!==""+yn(t)&&(e.value=""+yn(t)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),t!=null?Ti(e,w,yn(t)):r!=null?Ti(e,w,yn(r)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+yn(N):e.removeAttribute("name")}function fs(e,t,r,l,d,h,w,N){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){ds(e);return}r=r!=null?""+yn(r):"",t=t!=null?""+yn(t):r,N||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),ds(e)}function Ti(e,t,r){t==="number"&&ft(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Sa(e,t,r,l){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&l&&(e[r].defaultSelected=!0)}else{for(r=""+yn(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Cl(e,t,r){if(t!=null&&(t=""+yn(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+yn(r):""}function Oi(e,t,r,l){if(t==null){if(l!=null){if(r!=null)throw Error(s(92));if(Kt(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),t=r}r=yn(t),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),ds(e)}function tr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lt(e,t,r){var l=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,r):typeof r!="number"||r===0||Wc.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Rl(e,t,r){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&r[d]!==l&&lt(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&lt(e,h,t[h])}function Ml(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ja(e){return Dn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ln(){}var la=null;function hs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nr=null,Mt=null;function Vn(e){var t=wt(e);if(t&&(e=t.stateNode)){var r=e[Gt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ba(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+cn(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var d=l[Gt]||null;if(!d)throw Error(s(90));Ba(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)l=r[t],l.form===e.form&&Al(l)}break e;case"textarea":Cl(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Sa(e,!!r.multiple,t,!1)}}}var ar=!1;function Ur(e,t,r){if(ar)return e(t,r);ar=!0;try{var l=e(t);return l}finally{if(ar=!1,(nr!==null||Mt!==null)&&(Hu(),nr&&(t=nr,e=Mt,Mt=nr=null,Vn(t),e)))for(t=0;t<e.length;t++)Vn(e[t])}}function rr(e,t){var r=e.stateNode;if(r===null)return null;var l=r[Gt]||null;if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dl=!1;if(dn)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Dl=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Dl=!1}var oa=null,ms=null,Lr=null;function qr(){if(Lr)return Lr;var e,t=ms,r=t.length,l,d="value"in oa?oa.value:oa.textContent,h=d.length;for(e=0;e<r&&t[e]===d[e];e++);var w=r-e;for(l=1;l<=w&&t[r-l]===d[h-l];l++);return Lr=d.slice(e,1<l?1-l:void 0)}function Br(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ai(){return!0}function eu(){return!1}function Xt(e){function t(r,l,d,h,w){this._reactName=r,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=w,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(r=e[N],this[N]=r?r(h):h[N]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ai:eu,this.isPropagationStopped=eu,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),t}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ps=Xt(ir),Pa=j({},ir,{view:0,detail:0}),gs=Xt(Pa),Ci,zl,Ri,ys=j({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(Ci=e.screenX-Ri.screenX,zl=e.screenY-Ri.screenY):zl=Ci=0,Ri=e),Ci)},movementY:function(e){return"movementY"in e?e.movementY:zl}}),vs=Xt(ys),Ul=j({},ys,{dataTransfer:0}),tu=Xt(Ul),bs=j({},Pa,{relatedTarget:0}),Pr=Xt(bs),xs=j({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=Xt(xs),Xc=j({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$r=Xt(Xc),Ll=j({},ir,{data:0}),ws=Xt(Ll),ql={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fn[e])?!!t[e]:!1}function sr(){return Mi}var au=j({},Pa,{key:function(e){if(e.key){var t=ql[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Br(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(e){return e.type==="keypress"?Br(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Br(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_s=Xt(au),ru=j({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pl=Xt(ru),Ss=j({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),$l=Xt(Ss),lr=j({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hl=Xt(lr),Kl=j({},ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),js=Xt(Kl),Il=j({},ir,{newState:0,oldState:0}),iu=Xt(Il),Fc=[9,13,27,32],Di=dn&&"CompositionEvent"in window,$a=null;dn&&"documentMode"in document&&($a=document.documentMode);var Jc=dn&&"TextEvent"in window&&!$a,ks=dn&&(!Di||$a&&8<$a&&11>=$a),Es=" ",su=!1;function Gl(e,t){switch(e){case"keyup":return Fc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function ou(e,t){switch(e){case"compositionend":return lu(t);case"keypress":return t.which!==32?null:(su=!0,Es);case"textInput":return e=t.data,e===Es&&su?null:e;default:return null}}function Zc(e,t){if(or)return e==="compositionend"||!Di&&Gl(e,t)?(e=qr(),Lr=ms=oa=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ks&&t.locale!=="ko"?null:t.data;default:return null}}var uu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ns(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uu[e.type]:t==="textarea"}function Vl(e,t,r,l){nr?Mt?Mt.push(l):Mt=[l]:nr=l,t=Qu(t,"onChange"),0<t.length&&(r=new ps("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var Hr=null,zi=null;function ed(e){ug(e,0)}function Ts(e){var t=Gn(e);if(Al(t))return e}function Ui(e,t){if(e==="change")return t}var ua=!1;if(dn){var Dt;if(dn){var Kr="oninput"in document;if(!Kr){var ur=document.createElement("div");ur.setAttribute("oninput","return;"),Kr=typeof ur.oninput=="function"}Dt=Kr}else Dt=!1;ua=Dt&&(!document.documentMode||9<document.documentMode)}function cu(){Hr&&(Hr.detachEvent("onpropertychange",Os),zi=Hr=null)}function Os(e){if(e.propertyName==="value"&&Ts(zi)){var t=[];Vl(t,zi,e,hs(e)),Ur(ed,t)}}function du(e,t,r){e==="focusin"?(cu(),Hr=t,zi=r,Hr.attachEvent("onpropertychange",Os)):e==="focusout"&&cu()}function cr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ts(zi)}function Yl(e,t){if(e==="click")return Ts(t)}function Ir(e,t){if(e==="input"||e==="change")return Ts(t)}function Ha(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tn=typeof Object.is=="function"?Object.is:Ha;function u(e,t){if(Tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var d=r[l];if(!Kn.call(t,d)||!Tn(e[d],t[d]))return!1}return!0}function m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function y(e,t){var r=m(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=m(r)}}function x(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ft(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ft(e.document)}return t}function E(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var T=dn&&"documentMode"in document&&11>=document.documentMode,C=null,z=null,Q=null,U=!1;function D(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;U||C==null||C!==ft(l)||(l=C,"selectionStart"in l&&E(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Q&&u(Q,l)||(Q=l,l=Qu(z,"onSelect"),0<l.length&&(t=new ps("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=C)))}function P(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var H={animationend:P("Animation","AnimationEnd"),animationiteration:P("Animation","AnimationIteration"),animationstart:P("Animation","AnimationStart"),transitionrun:P("Transition","TransitionRun"),transitionstart:P("Transition","TransitionStart"),transitioncancel:P("Transition","TransitionCancel"),transitionend:P("Transition","TransitionEnd")},L={},q={};dn&&(q=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);function J(e){if(L[e])return L[e];if(!H[e])return e;var t=H[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in q)return L[e]=t[r];return e}var te=J("animationend"),X=J("animationiteration"),le=J("animationstart"),ye=J("transitionrun"),_e=J("transitionstart"),Se=J("transitioncancel"),ve=J("transitionend"),Ce=new Map,Te="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Te.push("scrollEnd");function be(e,t){Ce.set(e,t),_a(t,[e])}var Re=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},We=[],nt=0,Be=0;function Qe(){for(var e=nt,t=Be=nt=0;t<e;){var r=We[t];We[t++]=null;var l=We[t];We[t++]=null;var d=We[t];We[t++]=null;var h=We[t];if(We[t++]=null,l!==null&&d!==null){var w=l.pending;w===null?d.next=d:(d.next=w.next,w.next=d),l.pending=d}h!==0&&Ka(r,d,h)}}function _t(e,t,r,l){We[nt++]=e,We[nt++]=t,We[nt++]=r,We[nt++]=l,Be|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function On(e,t,r,l){return _t(e,t,r,l),Gr(e)}function pt(e,t){return _t(e,null,null,t),Gr(e)}function Ka(e,t,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,l=h.alternate,l!==null&&(l.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-Oe(r),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=r|536870912),h):null}function Gr(e){if(50<go)throw go=0,cf=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var As={};function rb(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,r,l){return new rb(e,t,r,l)}function td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dr(e,t){var r=e.alternate;return r===null?(r=Yn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Gh(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fu(e,t,r,l,d,h){var w=0;if(l=e,typeof e=="function")td(e)&&(w=1);else if(typeof e=="string")w=u0(e,r,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case He:return e=Yn(31,r,t,d),e.elementType=He,e.lanes=h,e;case F:return Li(r.children,d,h,t);case G:w=8,d|=24;break;case ie:return e=Yn(12,r,t,d|2),e.elementType=ie,e.lanes=h,e;case Ae:return e=Yn(13,r,t,d),e.elementType=Ae,e.lanes=h,e;case ce:return e=Yn(19,r,t,d),e.elementType=ce,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:w=10;break e;case I:w=9;break e;case me:w=11;break e;case ae:w=14;break e;case Me:w=16,l=null;break e}w=29,r=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=Yn(w,r,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function Li(e,t,r,l){return e=Yn(7,e,l,t),e.lanes=r,e}function nd(e,t,r){return e=Yn(6,e,null,t),e.lanes=r,e}function Vh(e){var t=Yn(18,null,null,0);return t.stateNode=e,t}function ad(e,t,r){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Yh=new WeakMap;function ca(e,t){if(typeof e=="object"&&e!==null){var r=Yh.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Un(t)},Yh.set(e,t),t)}return{value:e,source:t,stack:Un(t)}}var Cs=[],Rs=0,hu=null,Wl=0,da=[],fa=0,Vr=null,Ia=1,Ga="";function fr(e,t){Cs[Rs++]=Wl,Cs[Rs++]=hu,hu=e,Wl=t}function Wh(e,t,r){da[fa++]=Ia,da[fa++]=Ga,da[fa++]=Vr,Vr=e;var l=Ia;e=Ga;var d=32-Oe(l)-1;l&=~(1<<d),r+=1;var h=32-Oe(t)+d;if(30<h){var w=d-d%5;h=(l&(1<<w)-1).toString(32),l>>=w,d-=w,Ia=1<<32-Oe(t)+d|r<<d|l,Ga=h+e}else Ia=1<<h|r<<d|l,Ga=e}function rd(e){e.return!==null&&(fr(e,1),Wh(e,1,0))}function id(e){for(;e===hu;)hu=Cs[--Rs],Cs[Rs]=null,Wl=Cs[--Rs],Cs[Rs]=null;for(;e===Vr;)Vr=da[--fa],da[fa]=null,Ga=da[--fa],da[fa]=null,Ia=da[--fa],da[fa]=null}function Qh(e,t){da[fa++]=Ia,da[fa++]=Ga,da[fa++]=Vr,Ia=t.id,Ga=t.overflow,Vr=e}var vn=null,zt=null,ot=!1,Yr=null,ha=!1,sd=Error(s(519));function Wr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ql(ca(t,e)),sd}function Xh(e){var t=e.stateNode,r=e.type,l=e.memoizedProps;switch(t[Ct]=e,t[Gt]=l,r){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(r=0;r<vo.length;r++)rt(vo[r],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),fs(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),Oi(t,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||l.suppressHydrationWarning===!0||hg(t.textContent,r)?(l.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),l.onScroll!=null&&rt("scroll",t),l.onScrollEnd!=null&&rt("scrollend",t),l.onClick!=null&&(t.onclick=Ln),t=!0):t=!1,t||Wr(e,!0)}function Fh(e){for(vn=e.return;vn;)switch(vn.tag){case 5:case 31:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:vn=vn.return}}function Ms(e){if(e!==vn)return!1;if(!ot)return Fh(e),ot=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||kf(e.type,e.memoizedProps)),r=!r),r&&zt&&Wr(e),Fh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));zt=_g(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));zt=_g(e)}else t===27?(t=zt,oi(e.type)?(e=Af,Af=null,zt=e):zt=t):zt=vn?pa(e.stateNode.nextSibling):null;return!0}function qi(){zt=vn=null,ot=!1}function ld(){var e=Yr;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),Yr=null),e}function Ql(e){Yr===null?Yr=[e]:Yr.push(e)}var od=k(null),Bi=null,hr=null;function Qr(e,t,r){ue(od,t._currentValue),t._currentValue=r}function mr(e){e._currentValue=od.current,W(od)}function ud(e,t,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===r)break;e=e.return}}function cd(e,t,r,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var w=d.child;h=h.firstContext;e:for(;h!==null;){var N=h;h=d;for(var M=0;M<t.length;M++)if(N.context===t[M]){h.lanes|=r,N=h.alternate,N!==null&&(N.lanes|=r),ud(h.return,r,e),l||(w=null);break e}h=N.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(s(341));w.lanes|=r,h=w.alternate,h!==null&&(h.lanes|=r),ud(w,r,e),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===e){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function Ds(e,t,r,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var N=d.type;Tn(d.pendingProps.value,w.value)||(e!==null?e.push(N):e=[N])}}else if(d===xe.current){if(w=d.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(So):e=[So])}d=d.return}e!==null&&cd(t,e,r,l),t.flags|=262144}function mu(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Bi=e,hr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function bn(e){return Jh(Bi,e)}function pu(e,t){return Bi===null&&Pi(e),Jh(e,t)}function Jh(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},hr===null){if(e===null)throw Error(s(308));hr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hr=hr.next=t;return r}var ib=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},sb=a.unstable_scheduleCallback,lb=a.unstable_NormalPriority,Ft={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dd(){return{controller:new ib,data:new Map,refCount:0}}function Xl(e){e.refCount--,e.refCount===0&&sb(lb,function(){e.controller.abort()})}var Fl=null,fd=0,zs=0,Us=null;function ob(e,t){if(Fl===null){var r=Fl=[];fd=0,zs=gf(),Us={status:"pending",value:void 0,then:function(l){r.push(l)}}}return fd++,t.then(Zh,Zh),t}function Zh(){if(--fd===0&&Fl!==null){Us!==null&&(Us.status="fulfilled");var e=Fl;Fl=null,zs=0,Us=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ub(e,t){var r=[],l={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),l}var em=se.S;se.S=function(e,t){Lp=rn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ob(e,t),em!==null&&em(e,t)};var $i=k(null);function hd(){var e=$i.current;return e!==null?e:Nt.pooledCache}function gu(e,t){t===null?ue($i,$i.current):ue($i,t.pool)}function tm(){var e=hd();return e===null?null:{parent:Ft._currentValue,pool:e}}var Ls=Error(s(460)),md=Error(s(474)),yu=Error(s(542)),vu={then:function(){}};function nm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function am(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Ln,Ln),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,im(e),e;default:if(typeof t.status=="string")t.then(Ln,Ln);else{if(e=Nt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,im(e),e}throw Ki=t,Ls}}function Hi(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ki=r,Ls):r}}var Ki=null;function rm(){if(Ki===null)throw Error(s(459));var e=Ki;return Ki=null,e}function im(e){if(e===Ls||e===yu)throw Error(s(483))}var qs=null,Jl=0;function bu(e){var t=Jl;return Jl+=1,qs===null&&(qs=[]),am(qs,e,t)}function Zl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xu(e,t){throw t.$$typeof===O?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sm(e){function t(Y,$){if(e){var Z=Y.deletions;Z===null?(Y.deletions=[$],Y.flags|=16):Z.push($)}}function r(Y,$){if(!e)return null;for(;$!==null;)t(Y,$),$=$.sibling;return null}function l(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function d(Y,$){return Y=dr(Y,$),Y.index=0,Y.sibling=null,Y}function h(Y,$,Z){return Y.index=Z,e?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<$?(Y.flags|=67108866,$):Z):(Y.flags|=67108866,$)):(Y.flags|=1048576,$)}function w(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function N(Y,$,Z,fe){return $===null||$.tag!==6?($=nd(Z,Y.mode,fe),$.return=Y,$):($=d($,Z),$.return=Y,$)}function M(Y,$,Z,fe){var $e=Z.type;return $e===F?oe(Y,$,Z.props.children,fe,Z.key):$!==null&&($.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Me&&Hi($e)===$.type)?($=d($,Z.props),Zl($,Z),$.return=Y,$):($=fu(Z.type,Z.key,Z.props,null,Y.mode,fe),Zl($,Z),$.return=Y,$)}function ee(Y,$,Z,fe){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=ad(Z,Y.mode,fe),$.return=Y,$):($=d($,Z.children||[]),$.return=Y,$)}function oe(Y,$,Z,fe,$e){return $===null||$.tag!==7?($=Li(Z,Y.mode,fe,$e),$.return=Y,$):($=d($,Z),$.return=Y,$)}function he(Y,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=nd(""+$,Y.mode,Z),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return Z=fu($.type,$.key,$.props,null,Y.mode,Z),Zl(Z,$),Z.return=Y,Z;case B:return $=ad($,Y.mode,Z),$.return=Y,$;case Me:return $=Hi($),he(Y,$,Z)}if(Kt($)||xt($))return $=Li($,Y.mode,Z,null),$.return=Y,$;if(typeof $.then=="function")return he(Y,bu($),Z);if($.$$typeof===V)return he(Y,pu(Y,$),Z);xu(Y,$)}return null}function ne(Y,$,Z,fe){var $e=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return $e!==null?null:N(Y,$,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===$e?M(Y,$,Z,fe):null;case B:return Z.key===$e?ee(Y,$,Z,fe):null;case Me:return Z=Hi(Z),ne(Y,$,Z,fe)}if(Kt(Z)||xt(Z))return $e!==null?null:oe(Y,$,Z,fe,null);if(typeof Z.then=="function")return ne(Y,$,bu(Z),fe);if(Z.$$typeof===V)return ne(Y,$,pu(Y,Z),fe);xu(Y,Z)}return null}function re(Y,$,Z,fe,$e){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(Z)||null,N($,Y,""+fe,$e);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return Y=Y.get(fe.key===null?Z:fe.key)||null,M($,Y,fe,$e);case B:return Y=Y.get(fe.key===null?Z:fe.key)||null,ee($,Y,fe,$e);case Me:return fe=Hi(fe),re(Y,$,Z,fe,$e)}if(Kt(fe)||xt(fe))return Y=Y.get(Z)||null,oe($,Y,fe,$e,null);if(typeof fe.then=="function")return re(Y,$,Z,bu(fe),$e);if(fe.$$typeof===V)return re(Y,$,Z,pu($,fe),$e);xu($,fe)}return null}function De(Y,$,Z,fe){for(var $e=null,ct=null,ze=$,Ze=$=0,st=null;ze!==null&&Ze<Z.length;Ze++){ze.index>Ze?(st=ze,ze=null):st=ze.sibling;var dt=ne(Y,ze,Z[Ze],fe);if(dt===null){ze===null&&(ze=st);break}e&&ze&&dt.alternate===null&&t(Y,ze),$=h(dt,$,Ze),ct===null?$e=dt:ct.sibling=dt,ct=dt,ze=st}if(Ze===Z.length)return r(Y,ze),ot&&fr(Y,Ze),$e;if(ze===null){for(;Ze<Z.length;Ze++)ze=he(Y,Z[Ze],fe),ze!==null&&($=h(ze,$,Ze),ct===null?$e=ze:ct.sibling=ze,ct=ze);return ot&&fr(Y,Ze),$e}for(ze=l(ze);Ze<Z.length;Ze++)st=re(ze,Y,Ze,Z[Ze],fe),st!==null&&(e&&st.alternate!==null&&ze.delete(st.key===null?Ze:st.key),$=h(st,$,Ze),ct===null?$e=st:ct.sibling=st,ct=st);return e&&ze.forEach(function(hi){return t(Y,hi)}),ot&&fr(Y,Ze),$e}function Ie(Y,$,Z,fe){if(Z==null)throw Error(s(151));for(var $e=null,ct=null,ze=$,Ze=$=0,st=null,dt=Z.next();ze!==null&&!dt.done;Ze++,dt=Z.next()){ze.index>Ze?(st=ze,ze=null):st=ze.sibling;var hi=ne(Y,ze,dt.value,fe);if(hi===null){ze===null&&(ze=st);break}e&&ze&&hi.alternate===null&&t(Y,ze),$=h(hi,$,Ze),ct===null?$e=hi:ct.sibling=hi,ct=hi,ze=st}if(dt.done)return r(Y,ze),ot&&fr(Y,Ze),$e;if(ze===null){for(;!dt.done;Ze++,dt=Z.next())dt=he(Y,dt.value,fe),dt!==null&&($=h(dt,$,Ze),ct===null?$e=dt:ct.sibling=dt,ct=dt);return ot&&fr(Y,Ze),$e}for(ze=l(ze);!dt.done;Ze++,dt=Z.next())dt=re(ze,Y,Ze,dt.value,fe),dt!==null&&(e&&dt.alternate!==null&&ze.delete(dt.key===null?Ze:dt.key),$=h(dt,$,Ze),ct===null?$e=dt:ct.sibling=dt,ct=dt);return e&&ze.forEach(function(x0){return t(Y,x0)}),ot&&fr(Y,Ze),$e}function kt(Y,$,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var $e=Z.key;$!==null;){if($.key===$e){if($e=Z.type,$e===F){if($.tag===7){r(Y,$.sibling),fe=d($,Z.props.children),fe.return=Y,Y=fe;break e}}else if($.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Me&&Hi($e)===$.type){r(Y,$.sibling),fe=d($,Z.props),Zl(fe,Z),fe.return=Y,Y=fe;break e}r(Y,$);break}else t(Y,$);$=$.sibling}Z.type===F?(fe=Li(Z.props.children,Y.mode,fe,Z.key),fe.return=Y,Y=fe):(fe=fu(Z.type,Z.key,Z.props,null,Y.mode,fe),Zl(fe,Z),fe.return=Y,Y=fe)}return w(Y);case B:e:{for($e=Z.key;$!==null;){if($.key===$e)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){r(Y,$.sibling),fe=d($,Z.children||[]),fe.return=Y,Y=fe;break e}else{r(Y,$);break}else t(Y,$);$=$.sibling}fe=ad(Z,Y.mode,fe),fe.return=Y,Y=fe}return w(Y);case Me:return Z=Hi(Z),kt(Y,$,Z,fe)}if(Kt(Z))return De(Y,$,Z,fe);if(xt(Z)){if($e=xt(Z),typeof $e!="function")throw Error(s(150));return Z=$e.call(Z),Ie(Y,$,Z,fe)}if(typeof Z.then=="function")return kt(Y,$,bu(Z),fe);if(Z.$$typeof===V)return kt(Y,$,pu(Y,Z),fe);xu(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(r(Y,$.sibling),fe=d($,Z),fe.return=Y,Y=fe):(r(Y,$),fe=nd(Z,Y.mode,fe),fe.return=Y,Y=fe),w(Y)):r(Y,$)}return function(Y,$,Z,fe){try{Jl=0;var $e=kt(Y,$,Z,fe);return qs=null,$e}catch(ze){if(ze===Ls||ze===yu)throw ze;var ct=Yn(29,ze,null,Y.mode);return ct.lanes=fe,ct.return=Y,ct}}}var Ii=sm(!0),lm=sm(!1),Xr=!1;function pd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Jr(e,t,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ht&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=Gr(e),Ka(e,null,r),t}return _t(e,l,t,r),Gr(e)}function eo(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,Et(e,r)}}function yd(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var w={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=w:h=h.next=w,r=r.next}while(r!==null);h===null?d=h=t:h=h.next=t}else d=h=t;r={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var vd=!1;function to(){if(vd){var e=Us;if(e!==null)throw e}}function no(e,t,r,l){vd=!1;var d=e.updateQueue;Xr=!1;var h=d.firstBaseUpdate,w=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var M=N,ee=M.next;M.next=null,w===null?h=ee:w.next=ee,w=M;var oe=e.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==w&&(N===null?oe.firstBaseUpdate=ee:N.next=ee,oe.lastBaseUpdate=M))}if(h!==null){var he=d.baseState;w=0,oe=ee=M=null,N=h;do{var ne=N.lane&-536870913,re=ne!==N.lane;if(re?(it&ne)===ne:(l&ne)===ne){ne!==0&&ne===zs&&(vd=!0),oe!==null&&(oe=oe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var De=e,Ie=N;ne=t;var kt=r;switch(Ie.tag){case 1:if(De=Ie.payload,typeof De=="function"){he=De.call(kt,he,ne);break e}he=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ie.payload,ne=typeof De=="function"?De.call(kt,he,ne):De,ne==null)break e;he=j({},he,ne);break e;case 2:Xr=!0}}ne=N.callback,ne!==null&&(e.flags|=64,re&&(e.flags|=8192),re=d.callbacks,re===null?d.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(ee=oe=re,M=he):oe=oe.next=re,w|=ne;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;re=N,N=re.next,re.next=null,d.lastBaseUpdate=re,d.shared.pending=null}}while(!0);oe===null&&(M=he),d.baseState=M,d.firstBaseUpdate=ee,d.lastBaseUpdate=oe,h===null&&(d.shared.lanes=0),ai|=w,e.lanes=w,e.memoizedState=he}}function om(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function um(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)om(r[e],t)}var Bs=k(null),wu=k(0);function cm(e,t){e=Sr,ue(wu,e),ue(Bs,t),Sr=e|t.baseLanes}function bd(){ue(wu,Sr),ue(Bs,Bs.current)}function xd(){Sr=wu.current,W(Bs),W(wu)}var Wn=k(null),ma=null;function Zr(e){var t=e.alternate;ue(Yt,Yt.current&1),ue(Wn,e),ma===null&&(t===null||Bs.current!==null||t.memoizedState!==null)&&(ma=e)}function wd(e){ue(Yt,Yt.current),ue(Wn,e),ma===null&&(ma=e)}function dm(e){e.tag===22?(ue(Yt,Yt.current),ue(Wn,e),ma===null&&(ma=e)):ei()}function ei(){ue(Yt,Yt.current),ue(Wn,Wn.current)}function Qn(e){W(Wn),ma===e&&(ma=null),W(Yt)}var Yt=k(0);function _u(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Tf(r)||Of(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pr=0,Je=null,St=null,Jt=null,Su=!1,Ps=!1,Gi=!1,ju=0,ao=0,$s=null,cb=0;function Bt(){throw Error(s(321))}function _d(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Tn(e[r],t[r]))return!1;return!0}function Sd(e,t,r,l,d,h){return pr=h,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,se.H=e===null||e.memoizedState===null?Wm:qd,Gi=!1,h=r(l,d),Gi=!1,Ps&&(h=hm(t,r,l,d)),fm(e),h}function fm(e){se.H=so;var t=St!==null&&St.next!==null;if(pr=0,Jt=St=Je=null,Su=!1,ao=0,$s=null,t)throw Error(s(300));e===null||Zt||(e=e.dependencies,e!==null&&mu(e)&&(Zt=!0))}function hm(e,t,r,l){Je=e;var d=0;do{if(Ps&&($s=null),ao=0,Ps=!1,25<=d)throw Error(s(301));if(d+=1,Jt=St=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}se.H=Qm,h=t(r,l)}while(Ps);return h}function db(){var e=se.H,t=e.useState()[0];return t=typeof t.then=="function"?ro(t):t,e=e.useState()[0],(St!==null?St.memoizedState:null)!==e&&(Je.flags|=1024),t}function jd(){var e=ju!==0;return ju=0,e}function kd(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Ed(e){if(Su){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Su=!1}pr=0,Jt=St=Je=null,Ps=!1,ao=ju=0,$s=null}function zn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Je.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function Wt(){if(St===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=Jt===null?Je.memoizedState:Jt.next;if(t!==null)Jt=t,St=e;else{if(e===null)throw Je.alternate===null?Error(s(467)):Error(s(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Jt===null?Je.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ro(e){var t=ao;return ao+=1,$s===null&&($s=[]),e=am($s,e,t),t=Je,(Jt===null?t.memoizedState:Jt.next)===null&&(t=t.alternate,se.H=t===null||t.memoizedState===null?Wm:qd),e}function Eu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ro(e);if(e.$$typeof===V)return bn(e)}throw Error(s(438,String(e)))}function Nd(e){var t=null,r=Je.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var l=Je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=ku(),Je.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),l=0;l<e;l++)r[l]=mt;return t.index++,r}function gr(e,t){return typeof t=="function"?t(e):t}function Nu(e){var t=Wt();return Td(t,St,e)}function Td(e,t,r){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var w=d.next;d.next=h.next,h.next=w}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var N=w=null,M=null,ee=t,oe=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(it&he)===he:(pr&he)===he){var ne=ee.revertLane;if(ne===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===zs&&(oe=!0);else if((pr&ne)===ne){ee=ee.next,ne===zs&&(oe=!0);continue}else he={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},M===null?(N=M=he,w=h):M=M.next=he,Je.lanes|=ne,ai|=ne;he=ee.action,Gi&&r(h,he),h=ee.hasEagerState?ee.eagerState:r(h,he)}else ne={lane:he,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},M===null?(N=M=ne,w=h):M=M.next=ne,Je.lanes|=he,ai|=he;ee=ee.next}while(ee!==null&&ee!==t);if(M===null?w=h:M.next=N,!Tn(h,e.memoizedState)&&(Zt=!0,oe&&(r=Us,r!==null)))throw r;e.memoizedState=h,e.baseState=w,e.baseQueue=M,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Od(e){var t=Wt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var l=r.dispatch,d=r.pending,h=t.memoizedState;if(d!==null){r.pending=null;var w=d=d.next;do h=e(h,w.action),w=w.next;while(w!==d);Tn(h,t.memoizedState)||(Zt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,l]}function mm(e,t,r){var l=Je,d=Wt(),h=ot;if(h){if(r===void 0)throw Error(s(407));r=r()}else r=t();var w=!Tn((St||d).memoizedState,r);if(w&&(d.memoizedState=r,Zt=!0),d=d.queue,Rd(ym.bind(null,l,d,e),[e]),d.getSnapshot!==t||w||Jt!==null&&Jt.memoizedState.tag&1){if(l.flags|=2048,Hs(9,{destroy:void 0},gm.bind(null,l,d,r,t),null),Nt===null)throw Error(s(349));h||(pr&127)!==0||pm(l,t,r)}return r}function pm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Je.updateQueue,t===null?(t=ku(),Je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gm(e,t,r,l){t.value=r,t.getSnapshot=l,vm(t)&&bm(e)}function ym(e,t,r){return r(function(){vm(t)&&bm(e)})}function vm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Tn(e,r)}catch{return!0}}function bm(e){var t=pt(e,2);t!==null&&Hn(t,e,2)}function Ad(e){var t=zn();if(typeof e=="function"){var r=e;if(e=r(),Gi){gn(!0);try{r()}finally{gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:e},t}function xm(e,t,r,l){return e.baseState=r,Td(e,St,typeof l=="function"?l:gr)}function fb(e,t,r,l,d){if(Au(e))throw Error(s(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){h.listeners.push(w)}};se.T!==null?r(!0):h.isTransition=!1,l(h),r=t.pending,r===null?(h.next=t.pending=h,wm(t,h)):(h.next=r.next,t.pending=r.next=h)}}function wm(e,t){var r=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=se.T,w={};se.T=w;try{var N=r(d,l),M=se.S;M!==null&&M(w,N),_m(e,t,N)}catch(ee){Cd(e,t,ee)}finally{h!==null&&w.types!==null&&(h.types=w.types),se.T=h}}else try{h=r(d,l),_m(e,t,h)}catch(ee){Cd(e,t,ee)}}function _m(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Sm(e,t,l)},function(l){return Cd(e,t,l)}):Sm(e,t,r)}function Sm(e,t,r){t.status="fulfilled",t.value=r,jm(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,wm(e,r)))}function Cd(e,t,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=r,jm(t),t=t.next;while(t!==l)}e.action=null}function jm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function km(e,t){return t}function Em(e,t){if(ot){var r=Nt.formState;if(r!==null){e:{var l=Je;if(ot){if(zt){t:{for(var d=zt,h=ha;d.nodeType!==8;){if(!h){d=null;break t}if(d=pa(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){zt=pa(d.nextSibling),l=d.data==="F!";break e}}Wr(l)}l=!1}l&&(t=r[0])}}return r=zn(),r.memoizedState=r.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:t},r.queue=l,r=Gm.bind(null,Je,l),l.dispatch=r,l=Ad(!1),h=Ld.bind(null,Je,!1,l.queue),l=zn(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,r=fb.bind(null,Je,d,h,r),d.dispatch=r,l.memoizedState=e,[t,r,!1]}function Nm(e){var t=Wt();return Tm(t,St,e)}function Tm(e,t,r){if(t=Td(e,t,km)[0],e=Nu(gr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ro(t)}catch(w){throw w===Ls?yu:w}else l=t;t=Wt();var d=t.queue,h=d.dispatch;return r!==t.memoizedState&&(Je.flags|=2048,Hs(9,{destroy:void 0},hb.bind(null,d,r),null)),[l,h,e]}function hb(e,t){e.action=t}function Om(e){var t=Wt(),r=St;if(r!==null)return Tm(t,r,e);Wt(),t=t.memoizedState,r=Wt();var l=r.queue.dispatch;return r.memoizedState=e,[t,l,!1]}function Hs(e,t,r,l){return e={tag:e,create:r,deps:l,inst:t,next:null},t=Je.updateQueue,t===null&&(t=ku(),Je.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e),e}function Am(){return Wt().memoizedState}function Tu(e,t,r,l){var d=zn();Je.flags|=e,d.memoizedState=Hs(1|t,{destroy:void 0},r,l===void 0?null:l)}function Ou(e,t,r,l){var d=Wt();l=l===void 0?null:l;var h=d.memoizedState.inst;St!==null&&l!==null&&_d(l,St.memoizedState.deps)?d.memoizedState=Hs(t,h,r,l):(Je.flags|=e,d.memoizedState=Hs(1|t,h,r,l))}function Cm(e,t){Tu(8390656,8,e,t)}function Rd(e,t){Ou(2048,8,e,t)}function mb(e){Je.flags|=4;var t=Je.updateQueue;if(t===null)t=ku(),Je.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Rm(e){var t=Wt().memoizedState;return mb({ref:t,nextImpl:e}),function(){if((ht&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Mm(e,t){return Ou(4,2,e,t)}function Dm(e,t){return Ou(4,4,e,t)}function zm(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Um(e,t,r){r=r!=null?r.concat([e]):null,Ou(4,4,zm.bind(null,t,e),r)}function Md(){}function Lm(e,t){var r=Wt();t=t===void 0?null:t;var l=r.memoizedState;return t!==null&&_d(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function qm(e,t){var r=Wt();t=t===void 0?null:t;var l=r.memoizedState;if(t!==null&&_d(t,l[1]))return l[0];if(l=e(),Gi){gn(!0);try{e()}finally{gn(!1)}}return r.memoizedState=[l,t],l}function Dd(e,t,r){return r===void 0||(pr&1073741824)!==0&&(it&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=Bp(),Je.lanes|=e,ai|=e,r)}function Bm(e,t,r,l){return Tn(r,t)?r:Bs.current!==null?(e=Dd(e,r,l),Tn(e,t)||(Zt=!0),e):(pr&42)===0||(pr&1073741824)!==0&&(it&261930)===0?(Zt=!0,e.memoizedState=r):(e=Bp(),Je.lanes|=e,ai|=e,t)}function Pm(e,t,r,l,d){var h=de.p;de.p=h!==0&&8>h?h:8;var w=se.T,N={};se.T=N,Ld(e,!1,t,r);try{var M=d(),ee=se.S;if(ee!==null&&ee(N,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var oe=ub(M,l);io(e,t,oe,Jn(e))}else io(e,t,l,Jn(e))}catch(he){io(e,t,{then:function(){},status:"rejected",reason:he},Jn())}finally{de.p=h,w!==null&&N.types!==null&&(w.types=N.types),se.T=w}}function pb(){}function zd(e,t,r,l){if(e.tag!==5)throw Error(s(476));var d=$m(e).queue;Pm(e,d,t,Ne,r===null?pb:function(){return Hm(e),r(l)})}function $m(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:Ne},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Hm(e){var t=$m(e);t.next===null&&(t=e.alternate.memoizedState),io(e,t.next.queue,{},Jn())}function Ud(){return bn(So)}function Km(){return Wt().memoizedState}function Im(){return Wt().memoizedState}function gb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Jn();e=Fr(r);var l=Jr(t,e,r);l!==null&&(Hn(l,t,r),eo(l,t,r)),t={cache:dd()},e.payload=t;return}t=t.return}}function yb(e,t,r){var l=Jn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Au(e)?Vm(t,r):(r=On(e,t,r,l),r!==null&&(Hn(r,e,l),Ym(r,t,l)))}function Gm(e,t,r){var l=Jn();io(e,t,r,l)}function io(e,t,r,l){var d={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Au(e))Vm(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var w=t.lastRenderedState,N=h(w,r);if(d.hasEagerState=!0,d.eagerState=N,Tn(N,w))return _t(e,t,d,0),Nt===null&&Qe(),!1}catch{}if(r=On(e,t,d,l),r!==null)return Hn(r,e,l),Ym(r,t,l),!0}return!1}function Ld(e,t,r,l){if(l={lane:2,revertLane:gf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Au(e)){if(t)throw Error(s(479))}else t=On(e,r,l,2),t!==null&&Hn(t,e,2)}function Au(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Vm(e,t){Ps=Su=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ym(e,t,r){if((r&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,Et(e,r)}}var so={readContext:bn,use:Eu,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};so.useEffectEvent=Bt;var Wm={readContext:bn,use:Eu,useCallback:function(e,t){return zn().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:Cm,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,Tu(4194308,4,zm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Tu(4194308,4,e,t)},useInsertionEffect:function(e,t){Tu(4,2,e,t)},useMemo:function(e,t){var r=zn();t=t===void 0?null:t;var l=e();if(Gi){gn(!0);try{e()}finally{gn(!1)}}return r.memoizedState=[l,t],l},useReducer:function(e,t,r){var l=zn();if(r!==void 0){var d=r(t);if(Gi){gn(!0);try{r(t)}finally{gn(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=yb.bind(null,Je,e),[l.memoizedState,e]},useRef:function(e){var t=zn();return e={current:e},t.memoizedState=e},useState:function(e){e=Ad(e);var t=e.queue,r=Gm.bind(null,Je,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Md,useDeferredValue:function(e,t){var r=zn();return Dd(r,e,t)},useTransition:function(){var e=Ad(!1);return e=Pm.bind(null,Je,e.queue,!0,!1),zn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var l=Je,d=zn();if(ot){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),Nt===null)throw Error(s(349));(it&127)!==0||pm(l,t,r)}d.memoizedState=r;var h={value:r,getSnapshot:t};return d.queue=h,Cm(ym.bind(null,l,h,e),[e]),l.flags|=2048,Hs(9,{destroy:void 0},gm.bind(null,l,h,r,t),null),r},useId:function(){var e=zn(),t=Nt.identifierPrefix;if(ot){var r=Ga,l=Ia;r=(l&~(1<<32-Oe(l)-1)).toString(32)+r,t="_"+t+"R_"+r,r=ju++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=cb++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ud,useFormState:Em,useActionState:Em,useOptimistic:function(e){var t=zn();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Ld.bind(null,Je,!0,r),r.dispatch=t,[e,t]},useMemoCache:Nd,useCacheRefresh:function(){return zn().memoizedState=gb.bind(null,Je)},useEffectEvent:function(e){var t=zn(),r={impl:e};return t.memoizedState=r,function(){if((ht&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},qd={readContext:bn,use:Eu,useCallback:Lm,useContext:bn,useEffect:Rd,useImperativeHandle:Um,useInsertionEffect:Mm,useLayoutEffect:Dm,useMemo:qm,useReducer:Nu,useRef:Am,useState:function(){return Nu(gr)},useDebugValue:Md,useDeferredValue:function(e,t){var r=Wt();return Bm(r,St.memoizedState,e,t)},useTransition:function(){var e=Nu(gr)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:ro(e),t]},useSyncExternalStore:mm,useId:Km,useHostTransitionStatus:Ud,useFormState:Nm,useActionState:Nm,useOptimistic:function(e,t){var r=Wt();return xm(r,St,e,t)},useMemoCache:Nd,useCacheRefresh:Im};qd.useEffectEvent=Rm;var Qm={readContext:bn,use:Eu,useCallback:Lm,useContext:bn,useEffect:Rd,useImperativeHandle:Um,useInsertionEffect:Mm,useLayoutEffect:Dm,useMemo:qm,useReducer:Od,useRef:Am,useState:function(){return Od(gr)},useDebugValue:Md,useDeferredValue:function(e,t){var r=Wt();return St===null?Dd(r,e,t):Bm(r,St.memoizedState,e,t)},useTransition:function(){var e=Od(gr)[0],t=Wt().memoizedState;return[typeof e=="boolean"?e:ro(e),t]},useSyncExternalStore:mm,useId:Km,useHostTransitionStatus:Ud,useFormState:Om,useActionState:Om,useOptimistic:function(e,t){var r=Wt();return St!==null?xm(r,St,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Nd,useCacheRefresh:Im};Qm.useEffectEvent=Rm;function Bd(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:j({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pd={enqueueSetState:function(e,t,r){e=e._reactInternals;var l=Jn(),d=Fr(l);d.payload=t,r!=null&&(d.callback=r),t=Jr(e,d,l),t!==null&&(Hn(t,e,l),eo(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=Jn(),d=Fr(l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Jr(e,d,l),t!==null&&(Hn(t,e,l),eo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Jn(),l=Fr(r);l.tag=2,t!=null&&(l.callback=t),t=Jr(e,l,r),t!==null&&(Hn(t,e,r),eo(t,e,r))}};function Xm(e,t,r,l,d,h,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,w):t.prototype&&t.prototype.isPureReactComponent?!u(r,l)||!u(d,h):!0}function Fm(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&Pd.enqueueReplaceState(t,t.state,null)}function Vi(e,t){var r=t;if("ref"in t){r={};for(var l in t)l!=="ref"&&(r[l]=t[l])}if(e=e.defaultProps){r===t&&(r=j({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function Jm(e){Re(e)}function Zm(e){console.error(e)}function ep(e){Re(e)}function Cu(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function tp(e,t,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $d(e,t,r){return r=Fr(r),r.tag=3,r.payload={element:null},r.callback=function(){Cu(e,t)},r}function np(e){return e=Fr(e),e.tag=3,e}function ap(e,t,r,l){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){tp(t,r,l)}}var w=r.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){tp(t,r,l),typeof d!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function vb(e,t,r,l,d){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=r.alternate,t!==null&&Ds(t,r,d,!0),r=Wn.current,r!==null){switch(r.tag){case 31:case 13:return ma===null?Ku():r.alternate===null&&Pt===0&&(Pt=3),r.flags&=-257,r.flags|=65536,r.lanes=d,l===vu?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([l]):t.add(l),hf(e,l,d)),!1;case 22:return r.flags|=65536,l===vu?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([l]):r.add(l)),hf(e,l,d)),!1}throw Error(s(435,r.tag))}return hf(e,l,d),Ku(),!1}if(ot)return t=Wn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==sd&&(e=Error(s(422),{cause:l}),Ql(ca(e,r)))):(l!==sd&&(t=Error(s(423),{cause:l}),Ql(ca(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=ca(l,r),d=$d(e.stateNode,l,d),yd(e,d),Pt!==4&&(Pt=2)),!1;var h=Error(s(520),{cause:l});if(h=ca(h,r),po===null?po=[h]:po.push(h),Pt!==4&&(Pt=2),t===null)return!0;l=ca(l,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=$d(r.stateNode,l,e),yd(r,e),!1;case 1:if(t=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ri===null||!ri.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=np(d),ap(d,e,r,l),yd(r,d),!1}r=r.return}while(r!==null);return!1}var Hd=Error(s(461)),Zt=!1;function xn(e,t,r,l){t.child=e===null?lm(t,null,r,l):Ii(t,e.child,r,l)}function rp(e,t,r,l,d){r=r.render;var h=t.ref;if("ref"in l){var w={};for(var N in l)N!=="ref"&&(w[N]=l[N])}else w=l;return Pi(t),l=Sd(e,t,r,w,h,d),N=jd(),e!==null&&!Zt?(kd(e,t,d),yr(e,t,d)):(ot&&N&&rd(t),t.flags|=1,xn(e,t,l,d),t.child)}function ip(e,t,r,l,d){if(e===null){var h=r.type;return typeof h=="function"&&!td(h)&&h.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=h,sp(e,t,h,l,d)):(e=fu(r.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Xd(e,d)){var w=h.memoizedProps;if(r=r.compare,r=r!==null?r:u,r(w,l)&&e.ref===t.ref)return yr(e,t,d)}return t.flags|=1,e=dr(h,l),e.ref=t.ref,e.return=t,t.child=e}function sp(e,t,r,l,d){if(e!==null){var h=e.memoizedProps;if(u(h,l)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=l=h,Xd(e,d))(e.flags&131072)!==0&&(Zt=!0);else return t.lanes=e.lanes,yr(e,t,d)}return Kd(e,t,r,l,d)}function lp(e,t,r,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,t.child=null;return op(e,t,h,r,l)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&gu(t,h!==null?h.cachePool:null),h!==null?cm(t,h):bd(),dm(t);else return l=t.lanes=536870912,op(e,t,h!==null?h.baseLanes|r:r,r,l)}else h!==null?(gu(t,h.cachePool),cm(t,h),ei(),t.memoizedState=null):(e!==null&&gu(t,null),bd(),ei());return xn(e,t,d,r),t.child}function lo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function op(e,t,r,l,d){var h=hd();return h=h===null?null:{parent:Ft._currentValue,pool:h},t.memoizedState={baseLanes:r,cachePool:h},e!==null&&gu(t,null),bd(),dm(t),e!==null&&Ds(e,t,l,!0),t.childLanes=d,null}function Ru(e,t){return t=Du({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function up(e,t,r){return Ii(t,e.child,null,r),e=Ru(t,t.pendingProps),e.flags|=2,Qn(t),t.memoizedState=null,e}function bb(e,t,r){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ot){if(l.mode==="hidden")return e=Ru(t,l),t.lanes=536870912,lo(null,e);if(wd(t),(e=zt)?(e=wg(e,ha),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Vr!==null?{id:Ia,overflow:Ga}:null,retryLane:536870912,hydrationErrors:null},r=Vh(e),r.return=t,t.child=r,vn=t,zt=null)):e=null,e===null)throw Wr(t);return t.lanes=536870912,null}return Ru(t,l)}var h=e.memoizedState;if(h!==null){var w=h.dehydrated;if(wd(t),d)if(t.flags&256)t.flags&=-257,t=up(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Zt||Ds(e,t,r,!1),d=(r&e.childLanes)!==0,Zt||d){if(l=Nt,l!==null&&(w=It(l,r),w!==0&&w!==h.retryLane))throw h.retryLane=w,pt(e,w),Hn(l,e,w),Hd;Ku(),t=up(e,t,r)}else e=h.treeContext,zt=pa(w.nextSibling),vn=t,ot=!0,Yr=null,ha=!1,e!==null&&Qh(t,e),t=Ru(t,l),t.flags|=4096;return t}return e=dr(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Mu(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Kd(e,t,r,l,d){return Pi(t),r=Sd(e,t,r,l,void 0,d),l=jd(),e!==null&&!Zt?(kd(e,t,d),yr(e,t,d)):(ot&&l&&rd(t),t.flags|=1,xn(e,t,r,d),t.child)}function cp(e,t,r,l,d,h){return Pi(t),t.updateQueue=null,r=hm(t,l,r,d),fm(e),l=jd(),e!==null&&!Zt?(kd(e,t,h),yr(e,t,h)):(ot&&l&&rd(t),t.flags|=1,xn(e,t,r,h),t.child)}function dp(e,t,r,l,d){if(Pi(t),t.stateNode===null){var h=As,w=r.contextType;typeof w=="object"&&w!==null&&(h=bn(w)),h=new r(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Pd,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},pd(t),w=r.contextType,h.context=typeof w=="object"&&w!==null?bn(w):As,h.state=t.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(Bd(t,r,w,l),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(w=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),w!==h.state&&Pd.enqueueReplaceState(h,h.state,null),no(t,l,h,d),to(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var N=t.memoizedProps,M=Vi(r,N);h.props=M;var ee=h.context,oe=r.contextType;w=As,typeof oe=="object"&&oe!==null&&(w=bn(oe));var he=r.getDerivedStateFromProps;oe=typeof he=="function"||typeof h.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,oe||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(N||ee!==w)&&Fm(t,h,l,w),Xr=!1;var ne=t.memoizedState;h.state=ne,no(t,l,h,d),to(),ee=t.memoizedState,N||ne!==ee||Xr?(typeof he=="function"&&(Bd(t,r,he,l),ee=t.memoizedState),(M=Xr||Xm(t,r,M,l,ne,ee,w))?(oe||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=ee),h.props=l,h.state=ee,h.context=w,l=M):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,gd(e,t),w=t.memoizedProps,oe=Vi(r,w),h.props=oe,he=t.pendingProps,ne=h.context,ee=r.contextType,M=As,typeof ee=="object"&&ee!==null&&(M=bn(ee)),N=r.getDerivedStateFromProps,(ee=typeof N=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w!==he||ne!==M)&&Fm(t,h,l,M),Xr=!1,ne=t.memoizedState,h.state=ne,no(t,l,h,d),to();var re=t.memoizedState;w!==he||ne!==re||Xr||e!==null&&e.dependencies!==null&&mu(e.dependencies)?(typeof N=="function"&&(Bd(t,r,N,l),re=t.memoizedState),(oe=Xr||Xm(t,r,oe,l,ne,re,M)||e!==null&&e.dependencies!==null&&mu(e.dependencies))?(ee||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,re,M),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,re,M)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||w===e.memoizedProps&&ne===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&ne===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=re),h.props=l,h.state=re,h.context=M,l=oe):(typeof h.componentDidUpdate!="function"||w===e.memoizedProps&&ne===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&ne===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,Mu(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=Ii(t,e.child,null,d),t.child=Ii(t,null,r,d)):xn(e,t,r,d),t.memoizedState=h.state,e=t.child):e=yr(e,t,d),e}function fp(e,t,r,l){return qi(),t.flags|=256,xn(e,t,r,l),t.child}var Id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gd(e){return{baseLanes:e,cachePool:tm()}}function Vd(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Fn),e}function hp(e,t,r){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,w;if((w=h)||(w=e!==null&&e.memoizedState===null?!1:(Yt.current&2)!==0),w&&(d=!0,t.flags&=-129),w=(t.flags&32)!==0,t.flags&=-33,e===null){if(ot){if(d?Zr(t):ei(),(e=zt)?(e=wg(e,ha),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Vr!==null?{id:Ia,overflow:Ga}:null,retryLane:536870912,hydrationErrors:null},r=Vh(e),r.return=t,t.child=r,vn=t,zt=null)):e=null,e===null)throw Wr(t);return Of(e)?t.lanes=32:t.lanes=536870912,null}var N=l.children;return l=l.fallback,d?(ei(),d=t.mode,N=Du({mode:"hidden",children:N},d),l=Li(l,d,r,null),N.return=t,l.return=t,N.sibling=l,t.child=N,l=t.child,l.memoizedState=Gd(r),l.childLanes=Vd(e,w,r),t.memoizedState=Id,lo(null,l)):(Zr(t),Yd(t,N))}var M=e.memoizedState;if(M!==null&&(N=M.dehydrated,N!==null)){if(h)t.flags&256?(Zr(t),t.flags&=-257,t=Wd(e,t,r)):t.memoizedState!==null?(ei(),t.child=e.child,t.flags|=128,t=null):(ei(),N=l.fallback,d=t.mode,l=Du({mode:"visible",children:l.children},d),N=Li(N,d,r,null),N.flags|=2,l.return=t,N.return=t,l.sibling=N,t.child=l,Ii(t,e.child,null,r),l=t.child,l.memoizedState=Gd(r),l.childLanes=Vd(e,w,r),t.memoizedState=Id,t=lo(null,l));else if(Zr(t),Of(N)){if(w=N.nextSibling&&N.nextSibling.dataset,w)var ee=w.dgst;w=ee,l=Error(s(419)),l.stack="",l.digest=w,Ql({value:l,source:null,stack:null}),t=Wd(e,t,r)}else if(Zt||Ds(e,t,r,!1),w=(r&e.childLanes)!==0,Zt||w){if(w=Nt,w!==null&&(l=It(w,r),l!==0&&l!==M.retryLane))throw M.retryLane=l,pt(e,l),Hn(w,e,l),Hd;Tf(N)||Ku(),t=Wd(e,t,r)}else Tf(N)?(t.flags|=192,t.child=e.child,t=null):(e=M.treeContext,zt=pa(N.nextSibling),vn=t,ot=!0,Yr=null,ha=!1,e!==null&&Qh(t,e),t=Yd(t,l.children),t.flags|=4096);return t}return d?(ei(),N=l.fallback,d=t.mode,M=e.child,ee=M.sibling,l=dr(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,ee!==null?N=dr(ee,N):(N=Li(N,d,r,null),N.flags|=2),N.return=t,l.return=t,l.sibling=N,t.child=l,lo(null,l),l=t.child,N=e.child.memoizedState,N===null?N=Gd(r):(d=N.cachePool,d!==null?(M=Ft._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=tm(),N={baseLanes:N.baseLanes|r,cachePool:d}),l.memoizedState=N,l.childLanes=Vd(e,w,r),t.memoizedState=Id,lo(e.child,l)):(Zr(t),r=e.child,e=r.sibling,r=dr(r,{mode:"visible",children:l.children}),r.return=t,r.sibling=null,e!==null&&(w=t.deletions,w===null?(t.deletions=[e],t.flags|=16):w.push(e)),t.child=r,t.memoizedState=null,r)}function Yd(e,t){return t=Du({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Du(e,t){return e=Yn(22,e,null,t),e.lanes=0,e}function Wd(e,t,r){return Ii(t,e.child,null,r),e=Yd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mp(e,t,r){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ud(e.return,t,r)}function Qd(e,t,r,l,d,h){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:d,treeForkCount:h}:(w.isBackwards=t,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=r,w.tailMode=d,w.treeForkCount=h)}function pp(e,t,r){var l=t.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var w=Yt.current,N=(w&2)!==0;if(N?(w=w&1|2,t.flags|=128):w&=1,ue(Yt,w),xn(e,t,l,r),l=ot?Wl:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mp(e,r,t);else if(e.tag===19)mp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&_u(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Qd(t,!1,d,r,h,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&_u(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Qd(t,!0,r,null,h,l);break;case"together":Qd(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function yr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ai|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Ds(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=dr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&mu(e)))}function xb(e,t,r){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),Qr(t,Ft,e.memoizedState.cache),qi();break;case 27:case 5:je(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:Qr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,wd(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Zr(t),t.flags|=128,null):(r&t.child.childLanes)!==0?hp(e,t,r):(Zr(t),e=yr(e,t,r),e!==null?e.sibling:null);Zr(t);break;case 19:var d=(e.flags&128)!==0;if(l=(r&t.childLanes)!==0,l||(Ds(e,t,r,!1),l=(r&t.childLanes)!==0),d){if(l)return pp(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(Yt,Yt.current),l)break;return null;case 22:return t.lanes=0,lp(e,t,r,t.pendingProps);case 24:Qr(t,Ft,e.memoizedState.cache)}return yr(e,t,r)}function gp(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)Zt=!0;else{if(!Xd(e,r)&&(t.flags&128)===0)return Zt=!1,xb(e,t,r);Zt=(e.flags&131072)!==0}else Zt=!1,ot&&(t.flags&1048576)!==0&&Wh(t,Wl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Hi(t.elementType),t.type=e,typeof e=="function")td(e)?(l=Vi(e,l),t.tag=1,t=dp(null,t,e,l,r)):(t.tag=0,t=Kd(null,t,e,l,r));else{if(e!=null){var d=e.$$typeof;if(d===me){t.tag=11,t=rp(null,t,e,l,r);break e}else if(d===ae){t.tag=14,t=ip(null,t,e,l,r);break e}}throw t=jn(e)||e,Error(s(306,t,""))}}return t;case 0:return Kd(e,t,t.type,t.pendingProps,r);case 1:return l=t.type,d=Vi(l,t.pendingProps),dp(e,t,l,d,r);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,gd(e,t),no(t,l,null,r);var w=t.memoizedState;if(l=w.cache,Qr(t,Ft,l),l!==h.cache&&cd(t,[Ft],r,!0),to(),l=w.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:w.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=fp(e,t,l,r);break e}else if(l!==d){d=ca(Error(s(424)),t),Ql(d),t=fp(e,t,l,r);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,zt=pa(e.firstChild),vn=t,ot=!0,Yr=null,ha=!0,r=lm(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qi(),l===d){t=yr(e,t,r);break e}xn(e,t,l,r)}t=t.child}return t;case 26:return Mu(e,t),e===null?(r=Ng(t.type,null,t.pendingProps,null))?t.memoizedState=r:ot||(r=t.type,e=t.pendingProps,l=Xu(ke.current).createElement(r),l[Ct]=t,l[Gt]=e,wn(l,r,e),Vt(l),t.stateNode=l):t.memoizedState=Ng(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return je(t),e===null&&ot&&(l=t.stateNode=jg(t.type,t.pendingProps,ke.current),vn=t,ha=!0,d=zt,oi(t.type)?(Af=d,zt=pa(l.firstChild)):zt=d),xn(e,t,t.pendingProps.children,r),Mu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ot&&((d=l=zt)&&(l=Xb(l,t.type,t.pendingProps,ha),l!==null?(t.stateNode=l,vn=t,zt=pa(l.firstChild),ha=!1,d=!0):d=!1),d||Wr(t)),je(t),d=t.type,h=t.pendingProps,w=e!==null?e.memoizedProps:null,l=h.children,kf(d,h)?l=null:w!==null&&kf(d,w)&&(t.flags|=32),t.memoizedState!==null&&(d=Sd(e,t,db,null,null,r),So._currentValue=d),Mu(e,t),xn(e,t,l,r),t.child;case 6:return e===null&&ot&&((e=r=zt)&&(r=Fb(r,t.pendingProps,ha),r!==null?(t.stateNode=r,vn=t,zt=null,e=!0):e=!1),e||Wr(t)),null;case 13:return hp(e,t,r);case 4:return qe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ii(t,null,l,r):xn(e,t,l,r),t.child;case 11:return rp(e,t,t.type,t.pendingProps,r);case 7:return xn(e,t,t.pendingProps,r),t.child;case 8:return xn(e,t,t.pendingProps.children,r),t.child;case 12:return xn(e,t,t.pendingProps.children,r),t.child;case 10:return l=t.pendingProps,Qr(t,t.type,l.value),xn(e,t,l.children,r),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,Pi(t),d=bn(d),l=l(d),t.flags|=1,xn(e,t,l,r),t.child;case 14:return ip(e,t,t.type,t.pendingProps,r);case 15:return sp(e,t,t.type,t.pendingProps,r);case 19:return pp(e,t,r);case 31:return bb(e,t,r);case 22:return lp(e,t,r,t.pendingProps);case 24:return Pi(t),l=bn(Ft),e===null?(d=hd(),d===null&&(d=Nt,h=dd(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),t.memoizedState={parent:l,cache:d},pd(t),Qr(t,Ft,d)):((e.lanes&r)!==0&&(gd(e,t),no(t,null,null,r),to()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Qr(t,Ft,l)):(l=h.cache,Qr(t,Ft,l),l!==d.cache&&cd(t,[Ft],r,!0))),xn(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function vr(e){e.flags|=4}function Fd(e,t,r,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Kp())e.flags|=8192;else throw Ki=vu,md}else e.flags&=-16777217}function yp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rg(t))if(Kp())e.flags|=8192;else throw Ki=vu,md}function zu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Fo():536870912,e.lanes|=t,Vs|=t)}function oo(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=r,t}function wb(e,t,r){var l=t.pendingProps;switch(id(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Ut(t),null;case 3:return r=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),mr(Ft),Ge(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ms(t)?vr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ld())),Ut(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(vr(t),h!==null?(Ut(t),yp(t,h)):(Ut(t),Fd(t,d,null,l,r))):h?h!==e.memoizedState?(vr(t),Ut(t),yp(t,h)):(Ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&vr(t),Ut(t),Fd(t,d,e,l,r)),null;case 27:if(ut(t),r=ke.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&vr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ut(t),null}e=pe.current,Ms(t)?Xh(t):(e=jg(d,l,r),t.stateNode=e,vr(t))}return Ut(t),null;case 5:if(ut(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&vr(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return Ut(t),null}if(h=pe.current,Ms(t))Xh(t);else{var w=Xu(ke.current);switch(h){case 1:h=w.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=w.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=w.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=w.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?w.createElement(d,{is:l.is}):w.createElement(d)}}h[Ct]=t,h[Gt]=l;e:for(w=t.child;w!==null;){if(w.tag===5||w.tag===6)h.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}t.stateNode=h;e:switch(wn(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&vr(t)}}return Ut(t),Fd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&vr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=ke.current,Ms(t)){if(e=t.stateNode,r=t.memoizedProps,l=null,d=vn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Ct]=t,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||hg(e.nodeValue,r)),e||Wr(t,!0)}else e=Xu(e).createTextNode(l),e[Ct]=t,t.stateNode=e}return Ut(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ms(t),r!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ct]=t}else qi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),e=!1}else r=ld(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(Qn(t),t):(Qn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Ut(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ms(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Ct]=t}else qi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ut(t),d=!1}else d=ld(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Qn(t),t):(Qn(t),null)}return Qn(t),(t.flags&128)!==0?(t.lanes=r,t):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),zu(t,t.updateQueue),Ut(t),null);case 4:return Ge(),e===null&&xf(t.stateNode.containerInfo),Ut(t),null;case 10:return mr(t.type),Ut(t),null;case 19:if(W(Yt),l=t.memoizedState,l===null)return Ut(t),null;if(d=(t.flags&128)!==0,h=l.rendering,h===null)if(d)oo(l,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=_u(e),h!==null){for(t.flags|=128,oo(l,!1),e=h.updateQueue,t.updateQueue=e,zu(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)Gh(r,e),r=r.sibling;return ue(Yt,Yt.current&1|2),ot&&fr(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&rn()>Pu&&(t.flags|=128,d=!0,oo(l,!1),t.lanes=4194304)}else{if(!d)if(e=_u(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,zu(t,e),oo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!ot)return Ut(t),null}else 2*rn()-l.renderingStartTime>Pu&&r!==536870912&&(t.flags|=128,d=!0,oo(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=rn(),e.sibling=null,r=Yt.current,ue(Yt,d?r&1|2:r&1),ot&&fr(t,l.treeForkCount),e):(Ut(t),null);case 22:case 23:return Qn(t),xd(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(r&536870912)!==0&&(t.flags&128)===0&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),r=t.updateQueue,r!==null&&zu(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==r&&(t.flags|=2048),e!==null&&W($i),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),mr(Ft),Ut(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function _b(e,t){switch(id(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(Ft),Ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ut(t),null;case 31:if(t.memoizedState!==null){if(Qn(t),t.alternate===null)throw Error(s(340));qi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));qi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(Yt),null;case 4:return Ge(),null;case 10:return mr(t.type),null;case 22:case 23:return Qn(t),xd(),e!==null&&W($i),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return mr(Ft),null;case 25:return null;default:return null}}function vp(e,t){switch(id(t),t.tag){case 3:mr(Ft),Ge();break;case 26:case 27:case 5:ut(t);break;case 4:Ge();break;case 31:t.memoizedState!==null&&Qn(t);break;case 13:Qn(t);break;case 19:W(Yt);break;case 10:mr(t.type);break;case 22:case 23:Qn(t),xd(),e!==null&&W($i);break;case 24:mr(Ft)}}function uo(e,t){try{var r=t.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var d=l.next;r=d;do{if((r.tag&e)===e){l=void 0;var h=r.create,w=r.inst;l=h(),w.destroy=l}r=r.next}while(r!==d)}}catch(N){vt(t,t.return,N)}}function ti(e,t,r){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var w=l.inst,N=w.destroy;if(N!==void 0){w.destroy=void 0,d=t;var M=r,ee=N;try{ee()}catch(oe){vt(d,M,oe)}}}l=l.next}while(l!==h)}}catch(oe){vt(t,t.return,oe)}}function bp(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{um(t,r)}catch(l){vt(e,e.return,l)}}}function xp(e,t,r){r.props=Vi(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){vt(e,t,l)}}function co(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(d){vt(e,t,d)}}function Va(e,t){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(d){vt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){vt(e,t,d)}else r.current=null}function wp(e){var t=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(d){vt(e,e.return,d)}}function Jd(e,t,r){try{var l=e.stateNode;Ib(l,e.type,r,t),l[Gt]=t}catch(d){vt(e,e.return,d)}}function _p(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&oi(e.type)||e.tag===4}function Zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&oi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ef(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ln));else if(l!==4&&(l===27&&oi(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(ef(e,t,r),e=e.sibling;e!==null;)ef(e,t,r),e=e.sibling}function Uu(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(l===27&&oi(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Uu(e,t,r),e=e.sibling;e!==null;)Uu(e,t,r),e=e.sibling}function Sp(e){var t=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);wn(t,l,r),t[Ct]=e,t[Gt]=r}catch(h){vt(e,e.return,h)}}var br=!1,en=!1,tf=!1,jp=typeof WeakSet=="function"?WeakSet:Set,hn=null;function Sb(e,t){if(e=e.containerInfo,Sf=ac,e=_(e),E(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var w=0,N=-1,M=-1,ee=0,oe=0,he=e,ne=null;t:for(;;){for(var re;he!==r||d!==0&&he.nodeType!==3||(N=w+d),he!==h||l!==0&&he.nodeType!==3||(M=w+l),he.nodeType===3&&(w+=he.nodeValue.length),(re=he.firstChild)!==null;)ne=he,he=re;for(;;){if(he===e)break t;if(ne===r&&++ee===d&&(N=w),ne===h&&++oe===l&&(M=w),(re=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=re}r=N===-1||M===-1?null:{start:N,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(jf={focusedElem:e,selectionRange:r},ac=!1,hn=t;hn!==null;)if(t=hn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,hn=e;else for(;hn!==null;){switch(t=hn,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=t,d=h.memoizedProps,h=h.memoizedState,l=r.stateNode;try{var De=Vi(r.type,d);e=l.getSnapshotBeforeUpdate(De,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ie){vt(r,r.return,Ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)Nf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,hn=e;break}hn=t.return}}function kp(e,t,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:wr(e,r),l&4&&uo(5,r);break;case 1:if(wr(e,r),l&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(w){vt(r,r.return,w)}else{var d=Vi(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(w){vt(r,r.return,w)}}l&64&&bp(r),l&512&&co(r,r.return);break;case 3:if(wr(e,r),l&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{um(e,t)}catch(w){vt(r,r.return,w)}}break;case 27:t===null&&l&4&&Sp(r);case 26:case 5:wr(e,r),t===null&&l&4&&wp(r),l&512&&co(r,r.return);break;case 12:wr(e,r);break;case 31:wr(e,r),l&4&&Tp(e,r);break;case 13:wr(e,r),l&4&&Op(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Rb.bind(null,r),Jb(e,r))));break;case 22:if(l=r.memoizedState!==null||br,!l){t=t!==null&&t.memoizedState!==null||en,d=br;var h=en;br=l,(en=t)&&!h?_r(e,r,(r.subtreeFlags&8772)!==0):wr(e,r),br=d,en=h}break;case 30:break;default:wr(e,r)}}function Ep(e){var t=e.alternate;t!==null&&(e.alternate=null,Ep(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&cs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lt=null,qn=!1;function xr(e,t,r){for(r=r.child;r!==null;)Np(e,t,r),r=r.sibling}function Np(e,t,r){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ra,r)}catch{}switch(r.tag){case 26:en||Va(r,t),xr(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:en||Va(r,t);var l=Lt,d=qn;oi(r.type)&&(Lt=r.stateNode,qn=!1),xr(e,t,r),xo(r.stateNode),Lt=l,qn=d;break;case 5:en||Va(r,t);case 6:if(l=Lt,d=qn,Lt=null,xr(e,t,r),Lt=l,qn=d,Lt!==null)if(qn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(r.stateNode)}catch(h){vt(r,t,h)}else try{Lt.removeChild(r.stateNode)}catch(h){vt(r,t,h)}break;case 18:Lt!==null&&(qn?(e=Lt,bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),el(e)):bg(Lt,r.stateNode));break;case 4:l=Lt,d=qn,Lt=r.stateNode.containerInfo,qn=!0,xr(e,t,r),Lt=l,qn=d;break;case 0:case 11:case 14:case 15:ti(2,r,t),en||ti(4,r,t),xr(e,t,r);break;case 1:en||(Va(r,t),l=r.stateNode,typeof l.componentWillUnmount=="function"&&xp(r,t,l)),xr(e,t,r);break;case 21:xr(e,t,r);break;case 22:en=(l=en)||r.memoizedState!==null,xr(e,t,r),en=l;break;default:xr(e,t,r)}}function Tp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{el(e)}catch(r){vt(t,t.return,r)}}}function Op(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{el(e)}catch(r){vt(t,t.return,r)}}function jb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new jp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new jp),t;default:throw Error(s(435,e.tag))}}function Lu(e,t){var r=jb(e);t.forEach(function(l){if(!r.has(l)){r.add(l);var d=Mb.bind(null,e,l);l.then(d,d)}})}function Bn(e,t){var r=t.deletions;if(r!==null)for(var l=0;l<r.length;l++){var d=r[l],h=e,w=t,N=w;e:for(;N!==null;){switch(N.tag){case 27:if(oi(N.type)){Lt=N.stateNode,qn=!1;break e}break;case 5:Lt=N.stateNode,qn=!1;break e;case 3:case 4:Lt=N.stateNode.containerInfo,qn=!0;break e}N=N.return}if(Lt===null)throw Error(s(160));Np(h,w,d),Lt=null,qn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ap(t,e),t=t.sibling}var ka=null;function Ap(e,t){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Bn(t,e),Pn(e),l&4&&(ti(3,e,e.return),uo(3,e),ti(5,e,e.return));break;case 1:Bn(t,e),Pn(e),l&512&&(en||r===null||Va(r,r.return)),l&64&&br&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var d=ka;if(Bn(t,e),Pn(e),l&512&&(en||r===null||Va(r,r.return)),l&4){var h=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[In]||h[Ct]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),wn(h,l,r),h[Ct]=e,Vt(h),l=h;break e;case"link":var w=Ag("link","href",d).get(l+(r.href||""));if(w){for(var N=0;N<w.length;N++)if(h=w[N],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){w.splice(N,1);break t}}h=d.createElement(l),wn(h,l,r),d.head.appendChild(h);break;case"meta":if(w=Ag("meta","content",d).get(l+(r.content||""))){for(N=0;N<w.length;N++)if(h=w[N],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){w.splice(N,1);break t}}h=d.createElement(l),wn(h,l,r),d.head.appendChild(h);break;default:throw Error(s(468,l))}h[Ct]=e,Vt(h),l=h}e.stateNode=l}else Cg(d,e.type,e.stateNode);else e.stateNode=Og(d,l,e.memoizedProps);else h!==l?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,l===null?Cg(d,e.type,e.stateNode):Og(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Jd(e,e.memoizedProps,r.memoizedProps)}break;case 27:Bn(t,e),Pn(e),l&512&&(en||r===null||Va(r,r.return)),r!==null&&l&4&&Jd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Bn(t,e),Pn(e),l&512&&(en||r===null||Va(r,r.return)),e.flags&32){d=e.stateNode;try{tr(d,"")}catch(De){vt(e,e.return,De)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Jd(e,d,r!==null?r.memoizedProps:d)),l&1024&&(tf=!0);break;case 6:if(Bn(t,e),Pn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(De){vt(e,e.return,De)}}break;case 3:if(Zu=null,d=ka,ka=Fu(t.containerInfo),Bn(t,e),ka=d,Pn(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{el(t.containerInfo)}catch(De){vt(e,e.return,De)}tf&&(tf=!1,Cp(e));break;case 4:l=ka,ka=Fu(e.stateNode.containerInfo),Bn(t,e),Pn(e),ka=l;break;case 12:Bn(t,e),Pn(e);break;case 31:Bn(t,e),Pn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lu(e,l)));break;case 13:Bn(t,e),Pn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bu=rn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lu(e,l)));break;case 22:d=e.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,ee=br,oe=en;if(br=ee||d,en=oe||M,Bn(t,e),en=oe,br=ee,Pn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||M||br||en||Yi(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){M=r=t;try{if(h=M.stateNode,d)w=h.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{N=M.stateNode;var he=M.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;N.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(De){vt(M,M.return,De)}}}else if(t.tag===6){if(r===null){M=t;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(De){vt(M,M.return,De)}}}else if(t.tag===18){if(r===null){M=t;try{var re=M.stateNode;d?xg(re,!0):xg(M.stateNode,!1)}catch(De){vt(M,M.return,De)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Lu(e,r))));break;case 19:Bn(t,e),Pn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lu(e,l)));break;case 30:break;case 21:break;default:Bn(t,e),Pn(e)}}function Pn(e){var t=e.flags;if(t&2){try{for(var r,l=e.return;l!==null;){if(_p(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var d=r.stateNode,h=Zd(e);Uu(e,h,d);break;case 5:var w=r.stateNode;r.flags&32&&(tr(w,""),r.flags&=-33);var N=Zd(e);Uu(e,N,w);break;case 3:case 4:var M=r.stateNode.containerInfo,ee=Zd(e);ef(e,ee,M);break;default:throw Error(s(161))}}catch(oe){vt(e,e.return,oe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Cp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function wr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)kp(e,t.alternate,t),t=t.sibling}function Yi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ti(4,t,t.return),Yi(t);break;case 1:Va(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&xp(t,t.return,r),Yi(t);break;case 27:xo(t.stateNode);case 26:case 5:Va(t,t.return),Yi(t);break;case 22:t.memoizedState===null&&Yi(t);break;case 30:Yi(t);break;default:Yi(t)}e=e.sibling}}function _r(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,w=h.flags;switch(h.tag){case 0:case 11:case 15:_r(d,h,r),uo(4,h);break;case 1:if(_r(d,h,r),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ee){vt(l,l.return,ee)}if(l=h,d=l.updateQueue,d!==null){var N=l.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)om(M[d],N)}catch(ee){vt(l,l.return,ee)}}r&&w&64&&bp(h),co(h,h.return);break;case 27:Sp(h);case 26:case 5:_r(d,h,r),r&&l===null&&w&4&&wp(h),co(h,h.return);break;case 12:_r(d,h,r);break;case 31:_r(d,h,r),r&&w&4&&Tp(d,h);break;case 13:_r(d,h,r),r&&w&4&&Op(d,h);break;case 22:h.memoizedState===null&&_r(d,h,r),co(h,h.return);break;case 30:break;default:_r(d,h,r)}t=t.sibling}}function nf(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Xl(r))}function af(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xl(e))}function Ea(e,t,r,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rp(e,t,r,l),t=t.sibling}function Rp(e,t,r,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Ea(e,t,r,l),d&2048&&uo(9,t);break;case 1:Ea(e,t,r,l);break;case 3:Ea(e,t,r,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xl(e)));break;case 12:if(d&2048){Ea(e,t,r,l),e=t.stateNode;try{var h=t.memoizedProps,w=h.id,N=h.onPostCommit;typeof N=="function"&&N(w,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){vt(t,t.return,M)}}else Ea(e,t,r,l);break;case 31:Ea(e,t,r,l);break;case 13:Ea(e,t,r,l);break;case 23:break;case 22:h=t.stateNode,w=t.alternate,t.memoizedState!==null?h._visibility&2?Ea(e,t,r,l):fo(e,t):h._visibility&2?Ea(e,t,r,l):(h._visibility|=2,Ks(e,t,r,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&nf(w,t);break;case 24:Ea(e,t,r,l),d&2048&&af(t.alternate,t);break;default:Ea(e,t,r,l)}}function Ks(e,t,r,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,w=t,N=r,M=l,ee=w.flags;switch(w.tag){case 0:case 11:case 15:Ks(h,w,N,M,d),uo(8,w);break;case 23:break;case 22:var oe=w.stateNode;w.memoizedState!==null?oe._visibility&2?Ks(h,w,N,M,d):fo(h,w):(oe._visibility|=2,Ks(h,w,N,M,d)),d&&ee&2048&&nf(w.alternate,w);break;case 24:Ks(h,w,N,M,d),d&&ee&2048&&af(w.alternate,w);break;default:Ks(h,w,N,M,d)}t=t.sibling}}function fo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,l=t,d=l.flags;switch(l.tag){case 22:fo(r,l),d&2048&&nf(l.alternate,l);break;case 24:fo(r,l),d&2048&&af(l.alternate,l);break;default:fo(r,l)}t=t.sibling}}var ho=8192;function Is(e,t,r){if(e.subtreeFlags&ho)for(e=e.child;e!==null;)Mp(e,t,r),e=e.sibling}function Mp(e,t,r){switch(e.tag){case 26:Is(e,t,r),e.flags&ho&&e.memoizedState!==null&&c0(r,ka,e.memoizedState,e.memoizedProps);break;case 5:Is(e,t,r);break;case 3:case 4:var l=ka;ka=Fu(e.stateNode.containerInfo),Is(e,t,r),ka=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ho,ho=16777216,Is(e,t,r),ho=l):Is(e,t,r));break;default:Is(e,t,r)}}function Dp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function mo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];hn=l,Up(l,e)}Dp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zp(e),e=e.sibling}function zp(e){switch(e.tag){case 0:case 11:case 15:mo(e),e.flags&2048&&ti(9,e,e.return);break;case 3:mo(e);break;case 12:mo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,qu(e)):mo(e);break;default:mo(e)}}function qu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];hn=l,Up(l,e)}Dp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ti(8,t,t.return),qu(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,qu(t));break;default:qu(t)}e=e.sibling}}function Up(e,t){for(;hn!==null;){var r=hn;switch(r.tag){case 0:case 11:case 15:ti(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,hn=l;else e:for(r=e;hn!==null;){l=hn;var d=l.sibling,h=l.return;if(Ep(l),l===r){hn=null;break e}if(d!==null){d.return=h,hn=d;break e}hn=h}}}var kb={getCacheForType:function(e){var t=bn(Ft),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return bn(Ft).controller.signal}},Eb=typeof WeakMap=="function"?WeakMap:Map,ht=0,Nt=null,at=null,it=0,yt=0,Xn=null,ni=!1,Gs=!1,rf=!1,Sr=0,Pt=0,ai=0,Wi=0,sf=0,Fn=0,Vs=0,po=null,$n=null,lf=!1,Bu=0,Lp=0,Pu=1/0,$u=null,ri=null,ln=0,ii=null,Ys=null,jr=0,of=0,uf=null,qp=null,go=0,cf=null;function Jn(){return(ht&2)!==0&&it!==0?it&-it:se.T!==null?gf():_i()}function Bp(){if(Fn===0)if((it&536870912)===0||ot){var e=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),Fn=e}else Fn=536870912;return e=Wn.current,e!==null&&(e.flags|=32),Fn}function Hn(e,t,r){(e===Nt&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(Ws(e,0),si(e,it,Fn,!1)),ia(e,r),((ht&2)===0||e!==Nt)&&(e===Nt&&((ht&2)===0&&(Wi|=r),Pt===4&&si(e,it,Fn,!1)),Ya(e))}function Pp(e,t,r){if((ht&6)!==0)throw Error(s(327));var l=!r&&(t&127)===0&&(t&e.expiredLanes)===0||Ja(e,t),d=l?Ob(e,t):ff(e,t,!0),h=l;do{if(d===0){Gs&&!l&&si(e,t,0,!1);break}else{if(r=e.current.alternate,h&&!Nb(r)){d=ff(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){t=w;e:{var N=e;d=po;var M=N.current.memoizedState.isDehydrated;if(M&&(Ws(N,w).flags|=256),w=ff(N,w,!1),w!==2){if(rf&&!M){N.errorRecoveryDisabledLanes|=h,Wi|=h,d=4;break e}h=$n,$n=d,h!==null&&($n===null?$n=h:$n.push.apply($n,h))}d=w}if(h=!1,d!==2)continue}}if(d===1){Ws(e,0),si(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:si(l,t,Fn,!ni);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(d=Bu+300-rn(),10<d)){if(si(l,t,Fn,!ni),xi(l,0,!0)!==0)break e;jr=t,l.timeoutHandle=yg($p.bind(null,l,r,$n,$u,lf,t,Fn,Wi,Vs,ni,h,"Throttled",-0,0),d);break e}$p(l,r,$n,$u,lf,t,Fn,Wi,Vs,ni,h,null,-0,0)}}break}while(!0);Ya(e)}function $p(e,t,r,l,d,h,w,N,M,ee,oe,he,ne,re){if(e.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},Mp(t,h,he);var De=(h&62914560)===h?Bu-rn():(h&4194048)===h?Lp-rn():0;if(De=d0(he,De),De!==null){jr=h,e.cancelPendingCommit=De(Qp.bind(null,e,t,h,r,l,d,w,N,M,oe,he,null,ne,re)),si(e,h,w,!ee);return}}Qp(e,t,h,r,l,d,w,N,M)}function Nb(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var d=r[l],h=d.getSnapshot;d=d.value;try{if(!Tn(h(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function si(e,t,r,l){t&=~sf,t&=~Wi,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-Oe(d),w=1<<h;l[h]=-1,d&=~w}r!==0&&wi(e,r,t)}function Hu(){return(ht&6)===0?(yo(0),!1):!0}function df(){if(at!==null){if(yt===0)var e=at.return;else e=at,hr=Bi=null,Ed(e),qs=null,Jl=0,e=at;for(;e!==null;)vp(e.alternate,e),e=e.return;at=null}}function Ws(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Yb(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),jr=0,df(),Nt=e,at=r=dr(e.current,null),it=t,yt=0,Xn=null,ni=!1,Gs=Ja(e,t),rf=!1,Vs=Fn=sf=Wi=ai=Pt=0,$n=po=null,lf=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-Oe(l),h=1<<d;t|=e[d],l&=~h}return Sr=t,Qe(),r}function Hp(e,t){Je=null,se.H=so,t===Ls||t===yu?(t=rm(),yt=3):t===md?(t=rm(),yt=4):yt=t===Hd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xn=t,at===null&&(Pt=1,Cu(e,ca(t,e.current)))}function Kp(){var e=Wn.current;return e===null?!0:(it&4194048)===it?ma===null:(it&62914560)===it||(it&536870912)!==0?e===ma:!1}function Ip(){var e=se.H;return se.H=so,e===null?so:e}function Gp(){var e=se.A;return se.A=kb,e}function Ku(){Pt=4,ni||(it&4194048)!==it&&Wn.current!==null||(Gs=!0),(ai&134217727)===0&&(Wi&134217727)===0||Nt===null||si(Nt,it,Fn,!1)}function ff(e,t,r){var l=ht;ht|=2;var d=Ip(),h=Gp();(Nt!==e||it!==t)&&($u=null,Ws(e,t)),t=!1;var w=Pt;e:do try{if(yt!==0&&at!==null){var N=at,M=Xn;switch(yt){case 8:df(),w=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(t=!0);var ee=yt;if(yt=0,Xn=null,Qs(e,N,M,ee),r&&Gs){w=0;break e}break;default:ee=yt,yt=0,Xn=null,Qs(e,N,M,ee)}}Tb(),w=Pt;break}catch(oe){Hp(e,oe)}while(!0);return t&&e.shellSuspendCounter++,hr=Bi=null,ht=l,se.H=d,se.A=h,at===null&&(Nt=null,it=0,Qe()),w}function Tb(){for(;at!==null;)Vp(at)}function Ob(e,t){var r=ht;ht|=2;var l=Ip(),d=Gp();Nt!==e||it!==t?($u=null,Pu=rn()+500,Ws(e,t)):Gs=Ja(e,t);e:do try{if(yt!==0&&at!==null){t=at;var h=Xn;t:switch(yt){case 1:yt=0,Xn=null,Qs(e,t,h,1);break;case 2:case 9:if(nm(h)){yt=0,Xn=null,Yp(t);break}t=function(){yt!==2&&yt!==9||Nt!==e||(yt=7),Ya(e)},h.then(t,t);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:nm(h)?(yt=0,Xn=null,Yp(t)):(yt=0,Xn=null,Qs(e,t,h,7));break;case 5:var w=null;switch(at.tag){case 26:w=at.memoizedState;case 5:case 27:var N=at;if(w?Rg(w):N.stateNode.complete){yt=0,Xn=null;var M=N.sibling;if(M!==null)at=M;else{var ee=N.return;ee!==null?(at=ee,Iu(ee)):at=null}break t}}yt=0,Xn=null,Qs(e,t,h,5);break;case 6:yt=0,Xn=null,Qs(e,t,h,6);break;case 8:df(),Pt=6;break e;default:throw Error(s(462))}}Ab();break}catch(oe){Hp(e,oe)}while(!0);return hr=Bi=null,se.H=l,se.A=d,ht=r,at!==null?0:(Nt=null,it=0,Qe(),Pt)}function Ab(){for(;at!==null&&!os();)Vp(at)}function Vp(e){var t=gp(e.alternate,e,Sr);e.memoizedProps=e.pendingProps,t===null?Iu(e):at=t}function Yp(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=cp(r,t,t.pendingProps,t.type,void 0,it);break;case 11:t=cp(r,t,t.pendingProps,t.type.render,t.ref,it);break;case 5:Ed(t);default:vp(r,t),t=at=Gh(t,Sr),t=gp(r,t,Sr)}e.memoizedProps=e.pendingProps,t===null?Iu(e):at=t}function Qs(e,t,r,l){hr=Bi=null,Ed(t),qs=null,Jl=0;var d=t.return;try{if(vb(e,d,t,r,it)){Pt=1,Cu(e,ca(r,e.current)),at=null;return}}catch(h){if(d!==null)throw at=d,h;Pt=1,Cu(e,ca(r,e.current)),at=null;return}t.flags&32768?(ot||l===1?e=!0:Gs||(it&536870912)!==0?e=!1:(ni=e=!0,(l===2||l===9||l===3||l===6)&&(l=Wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wp(t,e)):Iu(t)}function Iu(e){var t=e;do{if((t.flags&32768)!==0){Wp(t,ni);return}e=t.return;var r=wb(t.alternate,t,Sr);if(r!==null){at=r;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);Pt===0&&(Pt=5)}function Wp(e,t){do{var r=_b(e.alternate,e);if(r!==null){r.flags&=32767,at=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){at=e;return}at=e=r}while(e!==null);Pt=6,at=null}function Qp(e,t,r,l,d,h,w,N,M){e.cancelPendingCommit=null;do Gu();while(ln!==0);if((ht&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(h=t.lanes|t.childLanes,h|=Be,El(e,r,h,w,N,M),e===Nt&&(at=Nt=null,it=0),Ys=t,ii=e,jr=r,of=h,uf=d,qp=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Db(Ca,function(){return eg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=se.T,se.T=null,d=de.p,de.p=2,w=ht,ht|=4;try{Sb(e,t,r)}finally{ht=w,de.p=d,se.T=l}}ln=1,Xp(),Fp(),Jp()}}function Xp(){if(ln===1){ln=0;var e=ii,t=Ys,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=se.T,se.T=null;var l=de.p;de.p=2;var d=ht;ht|=4;try{Ap(t,e);var h=jf,w=_(e.containerInfo),N=h.focusedElem,M=h.selectionRange;if(w!==N&&N&&N.ownerDocument&&x(N.ownerDocument.documentElement,N)){if(M!==null&&E(N)){var ee=M.start,oe=M.end;if(oe===void 0&&(oe=ee),"selectionStart"in N)N.selectionStart=ee,N.selectionEnd=Math.min(oe,N.value.length);else{var he=N.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),De=N.textContent.length,Ie=Math.min(M.start,De),kt=M.end===void 0?Ie:Math.min(M.end,De);!re.extend&&Ie>kt&&(w=kt,kt=Ie,Ie=w);var Y=y(N,Ie),$=y(N,kt);if(Y&&$&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var Z=he.createRange();Z.setStart(Y.node,Y.offset),re.removeAllRanges(),Ie>kt?(re.addRange(Z),re.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),re.addRange(Z))}}}}for(he=[],re=N;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<he.length;N++){var fe=he[N];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}ac=!!Sf,jf=Sf=null}finally{ht=d,de.p=l,se.T=r}}e.current=t,ln=2}}function Fp(){if(ln===2){ln=0;var e=ii,t=Ys,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=se.T,se.T=null;var l=de.p;de.p=2;var d=ht;ht|=4;try{kp(e,t.alternate,t)}finally{ht=d,de.p=l,se.T=r}}ln=3}}function Jp(){if(ln===4||ln===3){ln=0,Wa();var e=ii,t=Ys,r=jr,l=qp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ln=5:(ln=0,Ys=ii=null,Zp(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ri=null),Mr(r),t=t.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ra,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=se.T,d=de.p,de.p=2,se.T=null;try{for(var h=e.onRecoverableError,w=0;w<l.length;w++){var N=l[w];h(N.value,{componentStack:N.stack})}}finally{se.T=t,de.p=d}}(jr&3)!==0&&Gu(),Ya(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===cf?go++:(go=0,cf=e):go=0,yo(0)}}function Zp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Xl(t)))}function Gu(){return Xp(),Fp(),Jp(),eg()}function eg(){if(ln!==5)return!1;var e=ii,t=of;of=0;var r=Mr(jr),l=se.T,d=de.p;try{de.p=32>r?32:r,se.T=null,r=uf,uf=null;var h=ii,w=jr;if(ln=0,Ys=ii=null,jr=0,(ht&6)!==0)throw Error(s(331));var N=ht;if(ht|=4,zp(h.current),Rp(h,h.current,w,r),ht=N,yo(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ra,h)}catch{}return!0}finally{de.p=d,se.T=l,Zp(e,t)}}function tg(e,t,r){t=ca(r,t),t=$d(e.stateNode,t,2),e=Jr(e,t,2),e!==null&&(ia(e,2),Ya(e))}function vt(e,t,r){if(e.tag===3)tg(e,e,r);else for(;t!==null;){if(t.tag===3){tg(t,e,r);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ri===null||!ri.has(l))){e=ca(r,e),r=np(2),l=Jr(t,r,2),l!==null&&(ap(r,l,t,e),ia(l,2),Ya(l));break}}t=t.return}}function hf(e,t,r){var l=e.pingCache;if(l===null){l=e.pingCache=new Eb;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(r)||(rf=!0,d.add(r),e=Cb.bind(null,e,t,r),t.then(e,e))}function Cb(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Nt===e&&(it&r)===r&&(Pt===4||Pt===3&&(it&62914560)===it&&300>rn()-Bu?(ht&2)===0&&Ws(e,0):sf|=r,Vs===it&&(Vs=0)),Ya(e)}function ng(e,t){t===0&&(t=Fo()),e=pt(e,t),e!==null&&(ia(e,t),Ya(e))}function Rb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ng(e,r)}function Mb(e,t){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),ng(e,r)}function Db(e,t){return un(e,t)}var Vu=null,Xs=null,mf=!1,Yu=!1,pf=!1,li=0;function Ya(e){e!==Xs&&e.next===null&&(Xs===null?Vu=Xs=e:Xs=Xs.next=e),Yu=!0,mf||(mf=!0,Ub())}function yo(e,t){if(!pf&&Yu){pf=!0;do for(var r=!1,l=Vu;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var w=l.suspendedLanes,N=l.pingedLanes;h=(1<<31-Oe(42|e)+1)-1,h&=d&~(w&~N),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,sg(l,h))}else h=it,h=xi(l,l===Nt?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Ja(l,h)||(r=!0,sg(l,h));l=l.next}while(r);pf=!1}}function zb(){ag()}function ag(){Yu=mf=!1;var e=0;li!==0&&Vb()&&(e=li);for(var t=rn(),r=null,l=Vu;l!==null;){var d=l.next,h=rg(l,t);h===0?(l.next=null,r===null?Vu=d:r.next=d,d===null&&(Xs=r)):(r=l,(e!==0||(h&3)!==0)&&(Yu=!0)),l=d}ln!==0&&ln!==5||yo(e),li!==0&&(li=0)}function rg(e,t){for(var r=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var w=31-Oe(h),N=1<<w,M=d[w];M===-1?((N&r)===0||(N&l)!==0)&&(d[w]=Vc(N,t)):M<=t&&(e.expiredLanes|=N),h&=~N}if(t=Nt,r=it,r=xi(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&kn(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Ja(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(l!==null&&kn(l),Mr(r)){case 2:case 8:r=aa;break;case 32:r=Ca;break;case 268435456:r=Xa;break;default:r=Ca}return l=ig.bind(null,e),r=un(r,l),e.callbackPriority=t,e.callbackNode=r,t}return l!==null&&l!==null&&kn(l),e.callbackPriority=2,e.callbackNode=null,2}function ig(e,t){if(ln!==0&&ln!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Gu()&&e.callbackNode!==r)return null;var l=it;return l=xi(e,e===Nt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Pp(e,l,t),rg(e,rn()),e.callbackNode!=null&&e.callbackNode===r?ig.bind(null,e):null)}function sg(e,t){if(Gu())return null;Pp(e,t,!0)}function Ub(){Wb(function(){(ht&6)!==0?un(sn,zb):ag()})}function gf(){if(li===0){var e=zs;e===0&&(e=Ee,Ee<<=1,(Ee&261888)===0&&(Ee=256)),li=e}return li}function lg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ja(""+e)}function og(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function Lb(e,t,r,l,d){if(t==="submit"&&r&&r.stateNode===d){var h=lg((d[Gt]||null).action),w=l.submitter;w&&(t=(t=w[Gt]||null)?lg(t.formAction):w.getAttribute("formAction"),t!==null&&(h=t,w=null));var N=new ps("action","action",null,l,d);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(li!==0){var M=w?og(d,w):new FormData(d);zd(r,{pending:!0,data:M,method:d.method,action:h},null,M)}}else typeof h=="function"&&(N.preventDefault(),M=w?og(d,w):new FormData(d),zd(r,{pending:!0,data:M,method:d.method,action:h},h,M))},currentTarget:d}]})}}for(var yf=0;yf<Te.length;yf++){var vf=Te[yf],qb=vf.toLowerCase(),Bb=vf[0].toUpperCase()+vf.slice(1);be(qb,"on"+Bb)}be(te,"onAnimationEnd"),be(X,"onAnimationIteration"),be(le,"onAnimationStart"),be("dblclick","onDoubleClick"),be("focusin","onFocus"),be("focusout","onBlur"),be(ye,"onTransitionRun"),be(_e,"onTransitionStart"),be(Se,"onTransitionCancel"),be(ve,"onTransitionEnd"),qa("onMouseEnter",["mouseout","mouseover"]),qa("onMouseLeave",["mouseout","mouseover"]),qa("onPointerEnter",["pointerout","pointerover"]),qa("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vo));function ug(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var w=l.length-1;0<=w;w--){var N=l[w],M=N.instance,ee=N.currentTarget;if(N=N.listener,M!==h&&d.isPropagationStopped())break e;h=N,d.currentTarget=ee;try{h(d)}catch(oe){Re(oe)}d.currentTarget=null,h=M}else for(w=0;w<l.length;w++){if(N=l[w],M=N.instance,ee=N.currentTarget,N=N.listener,M!==h&&d.isPropagationStopped())break e;h=N,d.currentTarget=ee;try{h(d)}catch(oe){Re(oe)}d.currentTarget=null,h=M}}}}function rt(e,t){var r=t[Dr];r===void 0&&(r=t[Dr]=new Set);var l=e+"__bubble";r.has(l)||(cg(t,e,2,!1),r.add(l))}function bf(e,t,r){var l=0;t&&(l|=4),cg(r,e,l,t)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function xf(e){if(!e[Wu]){e[Wu]=!0,Za.forEach(function(r){r!=="selectionchange"&&(Pb.has(r)||bf(r,!1,e),bf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wu]||(t[Wu]=!0,bf("selectionchange",!1,t))}}function cg(e,t,r,l){switch(Bg(t)){case 2:var d=m0;break;case 8:d=p0;break;default:d=zf}r=d.bind(null,t,r,e),d=void 0,!Dl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function wf(e,t,r,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var N=l.stateNode.containerInfo;if(N===d)break;if(w===4)for(w=l.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;N!==null;){if(w=La(N),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){l=h=w;continue e}N=N.parentNode}}l=l.return}Ur(function(){var ee=h,oe=hs(r),he=[];e:{var ne=Ce.get(e);if(ne!==void 0){var re=ps,De=e;switch(e){case"keypress":if(Br(r)===0)break e;case"keydown":case"keyup":re=_s;break;case"focusin":De="focus",re=Pr;break;case"focusout":De="blur",re=Pr;break;case"beforeblur":case"afterblur":re=Pr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=$l;break;case te:case X:case le:re=nu;break;case ve:re=Hl;break;case"scroll":case"scrollend":re=gs;break;case"wheel":re=js;break;case"copy":case"cut":case"paste":re=$r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Pl;break;case"toggle":case"beforetoggle":re=iu}var Ie=(t&4)!==0,kt=!Ie&&(e==="scroll"||e==="scrollend"),Y=Ie?ne!==null?ne+"Capture":null:ne;Ie=[];for(var $=ee,Z;$!==null;){var fe=$;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||Y===null||(fe=rr($,Y),fe!=null&&Ie.push(bo($,fe,Z))),kt)break;$=$.return}0<Ie.length&&(ne=new re(ne,De,null,r,oe),he.push({event:ne,listeners:Ie}))}}if((t&7)===0){e:{if(ne=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",ne&&r!==la&&(De=r.relatedTarget||r.fromElement)&&(La(De)||De[Mn]))break e;if((re||ne)&&(ne=oe.window===oe?oe:(ne=oe.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(De=r.relatedTarget||r.toElement,re=ee,De=De?La(De):null,De!==null&&(kt=c(De),Ie=De.tag,De!==kt||Ie!==5&&Ie!==27&&Ie!==6)&&(De=null)):(re=null,De=ee),re!==De)){if(Ie=vs,fe="onMouseLeave",Y="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=Pl,fe="onPointerLeave",Y="onPointerEnter",$="pointer"),kt=re==null?ne:Gn(re),Z=De==null?ne:Gn(De),ne=new Ie(fe,$+"leave",re,r,oe),ne.target=kt,ne.relatedTarget=Z,fe=null,La(oe)===ee&&(Ie=new Ie(Y,$+"enter",De,r,oe),Ie.target=Z,Ie.relatedTarget=kt,fe=Ie),kt=fe,re&&De)t:{for(Ie=$b,Y=re,$=De,Z=0,fe=Y;fe;fe=Ie(fe))Z++;fe=0;for(var $e=$;$e;$e=Ie($e))fe++;for(;0<Z-fe;)Y=Ie(Y),Z--;for(;0<fe-Z;)$=Ie($),fe--;for(;Z--;){if(Y===$||$!==null&&Y===$.alternate){Ie=Y;break t}Y=Ie(Y),$=Ie($)}Ie=null}else Ie=null;re!==null&&dg(he,ne,re,Ie,!1),De!==null&&kt!==null&&dg(he,kt,De,Ie,!0)}}e:{if(ne=ee?Gn(ee):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var ct=Ui;else if(Ns(ne))if(ua)ct=Ir;else{ct=cr;var ze=du}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Ml(ee.elementType)&&(ct=Ui):ct=Yl;if(ct&&(ct=ct(e,ee))){Vl(he,ct,r,oe);break e}ze&&ze(e,ne,ee),e==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Ti(ne,"number",ne.value)}switch(ze=ee?Gn(ee):window,e){case"focusin":(Ns(ze)||ze.contentEditable==="true")&&(C=ze,z=ee,Q=null);break;case"focusout":Q=z=C=null;break;case"mousedown":U=!0;break;case"contextmenu":case"mouseup":case"dragend":U=!1,D(he,r,oe);break;case"selectionchange":if(T)break;case"keydown":case"keyup":D(he,r,oe)}var Ze;if(Di)e:{switch(e){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else or?Gl(e,r)&&(st="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(st="onCompositionStart");st&&(ks&&r.locale!=="ko"&&(or||st!=="onCompositionStart"?st==="onCompositionEnd"&&or&&(Ze=qr()):(oa=oe,ms="value"in oa?oa.value:oa.textContent,or=!0)),ze=Qu(ee,st),0<ze.length&&(st=new ws(st,e,null,r,oe),he.push({event:st,listeners:ze}),Ze?st.data=Ze:(Ze=lu(r),Ze!==null&&(st.data=Ze)))),(Ze=Jc?ou(e,r):Zc(e,r))&&(st=Qu(ee,"onBeforeInput"),0<st.length&&(ze=new ws("onBeforeInput","beforeinput",null,r,oe),he.push({event:ze,listeners:st}),ze.data=Ze)),Lb(he,e,ee,r,oe)}ug(he,t)})}function bo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qu(e,t){for(var r=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=rr(e,r),d!=null&&l.unshift(bo(e,d,h)),d=rr(e,t),d!=null&&l.push(bo(e,d,h))),e.tag===3)return l;e=e.return}return[]}function $b(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dg(e,t,r,l,d){for(var h=t._reactName,w=[];r!==null&&r!==l;){var N=r,M=N.alternate,ee=N.stateNode;if(N=N.tag,M!==null&&M===l)break;N!==5&&N!==26&&N!==27||ee===null||(M=ee,d?(ee=rr(r,h),ee!=null&&w.unshift(bo(r,ee,M))):d||(ee=rr(r,h),ee!=null&&w.push(bo(r,ee,M)))),r=r.return}w.length!==0&&e.push({event:t,listeners:w})}var Hb=/\r\n?/g,Kb=/\u0000|\uFFFD/g;function fg(e){return(typeof e=="string"?e:""+e).replace(Hb,`
`).replace(Kb,"")}function hg(e,t){return t=fg(t),fg(e)===t}function jt(e,t,r,l,d,h){switch(r){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||tr(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&tr(e,""+l);break;case"className":Ei(e,"class",l);break;case"tabIndex":Ei(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(e,r,l);break;case"style":Rl(e,l,h);break;case"data":if(t!=="object"){Ei(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ja(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(t!=="input"&&jt(e,t,"name",d.name,d,null),jt(e,t,"formEncType",d.formEncType,d,null),jt(e,t,"formMethod",d.formMethod,d,null),jt(e,t,"formTarget",d.formTarget,d,null)):(jt(e,t,"encType",d.encType,d,null),jt(e,t,"method",d.method,d,null),jt(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ja(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Ln);break;case"onScroll":l!=null&&rt("scroll",e);break;case"onScrollEnd":l!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=ja(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":rt("beforetoggle",e),rt("toggle",e),et(e,"popover",l);break;case"xlinkActuate":sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":sa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":sa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":sa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":sa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":et(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Qc.get(r)||r,et(e,r,l))}}function _f(e,t,r,l,d,h){switch(r){case"style":Rl(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof l=="string"?tr(e,l):(typeof l=="number"||typeof l=="bigint")&&tr(e,""+l);break;case"onScroll":l!=null&&rt("scroll",e);break;case"onScrollEnd":l!=null&&rt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ji.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),h=e[Gt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,l,d);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):et(e,r,l)}}}function wn(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var l=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var w=r[h];if(w!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:jt(e,t,h,w,r,null)}}d&&jt(e,t,"srcSet",r.srcSet,r,null),l&&jt(e,t,"src",r.src,r,null);return;case"input":rt("invalid",e);var N=h=w=d=null,M=null,ee=null;for(l in r)if(r.hasOwnProperty(l)){var oe=r[l];if(oe!=null)switch(l){case"name":d=oe;break;case"type":w=oe;break;case"checked":M=oe;break;case"defaultChecked":ee=oe;break;case"value":h=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,t));break;default:jt(e,t,l,oe,r,null)}}fs(e,h,N,M,ee,w,d,!1);return;case"select":rt("invalid",e),l=w=h=null;for(d in r)if(r.hasOwnProperty(d)&&(N=r[d],N!=null))switch(d){case"value":h=N;break;case"defaultValue":w=N;break;case"multiple":l=N;default:jt(e,t,d,N,r,null)}t=h,r=w,e.multiple=!!l,t!=null?Sa(e,!!l,t,!1):r!=null&&Sa(e,!!l,r,!0);return;case"textarea":rt("invalid",e),h=d=l=null;for(w in r)if(r.hasOwnProperty(w)&&(N=r[w],N!=null))switch(w){case"value":l=N;break;case"defaultValue":d=N;break;case"children":h=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:jt(e,t,w,N,r,null)}Oi(e,l,d,h);return;case"option":for(M in r)r.hasOwnProperty(M)&&(l=r[M],l!=null)&&(M==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":jt(e,t,M,l,r,null));return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(l=0;l<vo.length;l++)rt(vo[l],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in r)if(r.hasOwnProperty(ee)&&(l=r[ee],l!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:jt(e,t,ee,l,r,null)}return;default:if(Ml(t)){for(oe in r)r.hasOwnProperty(oe)&&(l=r[oe],l!==void 0&&_f(e,t,oe,l,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(l=r[N],l!=null&&jt(e,t,N,l,r,null))}function Ib(e,t,r,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,w=null,N=null,M=null,ee=null,oe=null;for(re in r){var he=r[re];if(r.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":M=he;default:l.hasOwnProperty(re)||jt(e,t,re,null,l,he)}}for(var ne in l){var re=l[ne];if(he=r[ne],l.hasOwnProperty(ne)&&(re!=null||he!=null))switch(ne){case"type":h=re;break;case"name":d=re;break;case"checked":ee=re;break;case"defaultChecked":oe=re;break;case"value":w=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,t));break;default:re!==he&&jt(e,t,ne,re,l,he)}}Ba(e,w,N,M,ee,oe,h,d);return;case"select":re=w=N=ne=null;for(h in r)if(M=r[h],r.hasOwnProperty(h)&&M!=null)switch(h){case"value":break;case"multiple":re=M;default:l.hasOwnProperty(h)||jt(e,t,h,null,l,M)}for(d in l)if(h=l[d],M=r[d],l.hasOwnProperty(d)&&(h!=null||M!=null))switch(d){case"value":ne=h;break;case"defaultValue":N=h;break;case"multiple":w=h;default:h!==M&&jt(e,t,d,h,l,M)}t=N,r=w,l=re,ne!=null?Sa(e,!!r,ne,!1):!!l!=!!r&&(t!=null?Sa(e,!!r,t,!0):Sa(e,!!r,r?[]:"",!1));return;case"textarea":re=ne=null;for(N in r)if(d=r[N],r.hasOwnProperty(N)&&d!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:jt(e,t,N,null,l,d)}for(w in l)if(d=l[w],h=r[w],l.hasOwnProperty(w)&&(d!=null||h!=null))switch(w){case"value":ne=d;break;case"defaultValue":re=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==h&&jt(e,t,w,d,l,h)}Cl(e,ne,re);return;case"option":for(var De in r)ne=r[De],r.hasOwnProperty(De)&&ne!=null&&!l.hasOwnProperty(De)&&(De==="selected"?e.selected=!1:jt(e,t,De,null,l,ne));for(M in l)ne=l[M],re=r[M],l.hasOwnProperty(M)&&ne!==re&&(ne!=null||re!=null)&&(M==="selected"?e.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":jt(e,t,M,ne,l,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in r)ne=r[Ie],r.hasOwnProperty(Ie)&&ne!=null&&!l.hasOwnProperty(Ie)&&jt(e,t,Ie,null,l,ne);for(ee in l)if(ne=l[ee],re=r[ee],l.hasOwnProperty(ee)&&ne!==re&&(ne!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,t));break;default:jt(e,t,ee,ne,l,re)}return;default:if(Ml(t)){for(var kt in r)ne=r[kt],r.hasOwnProperty(kt)&&ne!==void 0&&!l.hasOwnProperty(kt)&&_f(e,t,kt,void 0,l,ne);for(oe in l)ne=l[oe],re=r[oe],!l.hasOwnProperty(oe)||ne===re||ne===void 0&&re===void 0||_f(e,t,oe,ne,l,re);return}}for(var Y in r)ne=r[Y],r.hasOwnProperty(Y)&&ne!=null&&!l.hasOwnProperty(Y)&&jt(e,t,Y,null,l,ne);for(he in l)ne=l[he],re=r[he],!l.hasOwnProperty(he)||ne===re||ne==null&&re==null||jt(e,t,he,ne,l,re)}function mg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var d=r[l],h=d.transferSize,w=d.initiatorType,N=d.duration;if(h&&N&&mg(w)){for(w=0,N=d.responseEnd,l+=1;l<r.length;l++){var M=r[l],ee=M.startTime;if(ee>N)break;var oe=M.transferSize,he=M.initiatorType;oe&&mg(he)&&(M=M.responseEnd,w+=oe*(M<N?1:(N-ee)/(M-ee)))}if(--l,t+=8*(h+w)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sf=null,jf=null;function Xu(e){return e.nodeType===9?e:e.ownerDocument}function pg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function kf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ef=null;function Vb(){var e=window.event;return e&&e.type==="popstate"?e===Ef?!1:(Ef=e,!0):(Ef=null,!1)}var yg=typeof setTimeout=="function"?setTimeout:void 0,Yb=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(e){return vg.resolve(null).then(e).catch(Qb)}:yg;function Qb(e){setTimeout(function(){throw e})}function oi(e){return e==="head"}function bg(e,t){var r=t,l=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(d),el(t);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")xo(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,xo(r);for(var h=r.firstChild;h;){var w=h.nextSibling,N=h.nodeName;h[In]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=w}}else r==="body"&&xo(e.ownerDocument.body);r=d}while(r);el(t)}function xg(e,t){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function Nf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Nf(r),cs(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Xb(e,t,r,l){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[In])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=pa(e.nextSibling),e===null)break}return null}function Fb(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=pa(e.nextSibling),e===null))return null;return e}function wg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=pa(e.nextSibling),e===null))return null;return e}function Tf(e){return e.data==="$?"||e.data==="$~"}function Of(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jb(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var l=function(){t(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Af=null;function _g(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return pa(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function Sg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function jg(e,t,r){switch(t=Xu(r),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function xo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);cs(e)}var ga=new Map,kg=new Set;function Fu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var kr=de.d;de.d={f:Zb,r:e0,D:t0,C:n0,L:a0,m:r0,X:s0,S:i0,M:l0};function Zb(){var e=kr.f(),t=Hu();return e||t}function e0(e){var t=wt(e);t!==null&&t.tag===5&&t.type==="form"?Hm(t):kr.r(e)}var Fs=typeof document>"u"?null:document;function Eg(e,t,r){var l=Fs;if(l&&typeof t=="string"&&t){var d=cn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),kg.has(d)||(kg.add(d),e={rel:e,crossOrigin:r,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),wn(t,"link",e),Vt(t),l.head.appendChild(t)))}}function t0(e){kr.D(e),Eg("dns-prefetch",e,null)}function n0(e,t){kr.C(e,t),Eg("preconnect",e,t)}function a0(e,t,r){kr.L(e,t,r);var l=Fs;if(l&&e&&t){var d='link[rel="preload"][as="'+cn(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+cn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+cn(r.imageSizes)+'"]')):d+='[href="'+cn(e)+'"]';var h=d;switch(t){case"style":h=Js(e);break;case"script":h=Zs(e)}ga.has(h)||(e=j({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),ga.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(wo(h))||t==="script"&&l.querySelector(_o(h))||(t=l.createElement("link"),wn(t,"link",e),Vt(t),l.head.appendChild(t)))}}function r0(e,t){kr.m(e,t);var r=Fs;if(r&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+cn(l)+'"][href="'+cn(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Zs(e)}if(!ga.has(h)&&(e=j({rel:"modulepreload",href:e},t),ga.set(h,e),r.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(_o(h)))return}l=r.createElement("link"),wn(l,"link",e),Vt(l),r.head.appendChild(l)}}}function i0(e,t,r){kr.S(e,t,r);var l=Fs;if(l&&e){var d=En(l).hoistableStyles,h=Js(e);t=t||"default";var w=d.get(h);if(!w){var N={loading:0,preload:null};if(w=l.querySelector(wo(h)))N.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},r),(r=ga.get(h))&&Cf(e,r);var M=w=l.createElement("link");Vt(M),wn(M,"link",e),M._p=new Promise(function(ee,oe){M.onload=ee,M.onerror=oe}),M.addEventListener("load",function(){N.loading|=1}),M.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Ju(w,t,l)}w={type:"stylesheet",instance:w,count:1,state:N},d.set(h,w)}}}function s0(e,t){kr.X(e,t);var r=Fs;if(r&&e){var l=En(r).hoistableScripts,d=Zs(e),h=l.get(d);h||(h=r.querySelector(_o(d)),h||(e=j({src:e,async:!0},t),(t=ga.get(d))&&Rf(e,t),h=r.createElement("script"),Vt(h),wn(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function l0(e,t){kr.M(e,t);var r=Fs;if(r&&e){var l=En(r).hoistableScripts,d=Zs(e),h=l.get(d);h||(h=r.querySelector(_o(d)),h||(e=j({src:e,async:!0,type:"module"},t),(t=ga.get(d))&&Rf(e,t),h=r.createElement("script"),Vt(h),wn(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function Ng(e,t,r,l){var d=(d=ke.current)?Fu(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Js(r.href),r=En(d).hoistableStyles,l=r.get(t),l||(l={type:"style",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Js(r.href);var h=En(d).hoistableStyles,w=h.get(e);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,w),(h=d.querySelector(wo(e)))&&!h._p&&(w.instance=h,w.state.loading=5),ga.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ga.set(e,r),h||o0(d,e,r,w.state))),t&&l===null)throw Error(s(528,""));return w}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zs(r),r=En(d).hoistableScripts,l=r.get(t),l||(l={type:"script",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Js(e){return'href="'+cn(e)+'"'}function wo(e){return'link[rel="stylesheet"]['+e+"]"}function Tg(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function o0(e,t,r,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),wn(t,"link",r),Vt(t),e.head.appendChild(t))}function Zs(e){return'[src="'+cn(e)+'"]'}function _o(e){return"script[async]"+e}function Og(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+cn(r.href)+'"]');if(l)return t.instance=l,Vt(l),l;var d=j({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Vt(l),wn(l,"style",d),Ju(l,r.precedence,e),t.instance=l;case"stylesheet":d=Js(r.href);var h=e.querySelector(wo(d));if(h)return t.state.loading|=4,t.instance=h,Vt(h),h;l=Tg(r),(d=ga.get(d))&&Cf(l,d),h=(e.ownerDocument||e).createElement("link"),Vt(h);var w=h;return w._p=new Promise(function(N,M){w.onload=N,w.onerror=M}),wn(h,"link",l),t.state.loading|=4,Ju(h,r.precedence,e),t.instance=h;case"script":return h=Zs(r.src),(d=e.querySelector(_o(h)))?(t.instance=d,Vt(d),d):(l=r,(d=ga.get(h))&&(l=j({},r),Rf(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Vt(d),wn(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ju(l,r.precedence,e));return t.instance}function Ju(e,t,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,w=0;w<l.length;w++){var N=l[w];if(N.dataset.precedence===t)h=N;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Cf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zu=null;function Ag(e,t,r){if(Zu===null){var l=new Map,d=Zu=new Map;d.set(r,l)}else d=Zu,l=d.get(r),l||(l=new Map,d.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[In]||h[Ct]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var w=h.getAttribute(t)||"";w=e+w;var N=l.get(w);N?N.push(h):l.set(w,[h])}}return l}function Cg(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function u0(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Rg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function c0(e,t,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Js(l.href),h=t.querySelector(wo(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ec.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=h,Vt(h);return}h=t.ownerDocument||t,l=Tg(l),(d=ga.get(d))&&Cf(l,d),h=h.createElement("link"),Vt(h);var w=h;w._p=new Promise(function(N,M){w.onload=N,w.onerror=M}),wn(h,"link",l),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=ec.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var Mf=0;function d0(e,t){return e.stylesheets&&e.count===0&&nc(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&nc(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Mf===0&&(Mf=62500*Gb());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&nc(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Mf?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function ec(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var tc=null;function nc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,tc=new Map,t.forEach(f0,e),tc=null,ec.call(e))}function f0(e,t){if(!(t.state.loading&4)){var r=tc.get(e);if(r)var l=r.get(null);else{r=new Map,tc.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var w=d[h];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(r.set(w.dataset.precedence,w),l=w)}l&&r.set(null,l)}d=t.instance,w=d.getAttribute("data-precedence"),h=r.get(w)||l,h===l&&r.set(null,d),r.set(w,d),this.count++,l=ec.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var So={$$typeof:V,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function h0(e,t,r,l,d,h,w,N,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.hiddenUpdates=Da(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Mg(e,t,r,l,d,h,w,N,M,ee,oe,he){return e=new h0(e,t,r,w,M,ee,oe,he,N),t=1,h===!0&&(t|=24),h=Yn(3,null,null,t),e.current=h,h.stateNode=e,t=dd(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:r,cache:t},pd(h),e}function Dg(e){return e?(e=As,e):As}function zg(e,t,r,l,d,h){d=Dg(d),l.context===null?l.context=d:l.pendingContext=d,l=Fr(t),l.payload={element:r},h=h===void 0?null:h,h!==null&&(l.callback=h),r=Jr(e,l,t),r!==null&&(Hn(r,e,t),eo(r,e,t))}function Ug(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Df(e,t){Ug(e,t),(e=e.alternate)&&Ug(e,t)}function Lg(e){if(e.tag===13||e.tag===31){var t=pt(e,67108864);t!==null&&Hn(t,e,67108864),Df(e,67108864)}}function qg(e){if(e.tag===13||e.tag===31){var t=Jn();t=Nl(t);var r=pt(e,t);r!==null&&Hn(r,e,t),Df(e,t)}}var ac=!0;function m0(e,t,r,l){var d=se.T;se.T=null;var h=de.p;try{de.p=2,zf(e,t,r,l)}finally{de.p=h,se.T=d}}function p0(e,t,r,l){var d=se.T;se.T=null;var h=de.p;try{de.p=8,zf(e,t,r,l)}finally{de.p=h,se.T=d}}function zf(e,t,r,l){if(ac){var d=Uf(l);if(d===null)wf(e,t,l,rc,r),Pg(e,l);else if(y0(d,e,t,r,l))l.stopPropagation();else if(Pg(e,l),t&4&&-1<g0.indexOf(e)){for(;d!==null;){var h=wt(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var w=wa(h.pendingLanes);if(w!==0){var N=h;for(N.pendingLanes|=2,N.entangledLanes|=2;w;){var M=1<<31-Oe(w);N.entanglements[1]|=M,w&=~M}Ya(h),(ht&6)===0&&(Pu=rn()+500,yo(0))}}break;case 31:case 13:N=pt(h,2),N!==null&&Hn(N,h,2),Hu(),Df(h,2)}if(h=Uf(l),h===null&&wf(e,t,l,rc,r),h===d)break;d=h}d!==null&&l.stopPropagation()}else wf(e,t,l,null,r)}}function Uf(e){return e=hs(e),Lf(e)}var rc=null;function Lf(e){if(rc=null,e=La(e),e!==null){var t=c(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=p(t),e!==null)return e;e=null}else if(r===31){if(e=g(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rc=e,null}function Bg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qa()){case sn:return 2;case aa:return 8;case Ca:case Ra:return 32;case Xa:return 268435456;default:return 32}default:return 32}}var qf=!1,ui=null,ci=null,di=null,jo=new Map,ko=new Map,fi=[],g0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pg(e,t){switch(e){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":jo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(t.pointerId)}}function Eo(e,t,r,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=wt(t),t!==null&&Lg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function y0(e,t,r,l,d){switch(t){case"focusin":return ui=Eo(ui,e,t,r,l,d),!0;case"dragenter":return ci=Eo(ci,e,t,r,l,d),!0;case"mouseover":return di=Eo(di,e,t,r,l,d),!0;case"pointerover":var h=d.pointerId;return jo.set(h,Eo(jo.get(h)||null,e,t,r,l,d)),!0;case"gotpointercapture":return h=d.pointerId,ko.set(h,Eo(ko.get(h)||null,e,t,r,l,d)),!0}return!1}function $g(e){var t=La(e.target);if(t!==null){var r=c(t);if(r!==null){if(t=r.tag,t===13){if(t=p(r),t!==null){e.blockedOn=t,Si(e.priority,function(){qg(r)});return}}else if(t===31){if(t=g(r),t!==null){e.blockedOn=t,Si(e.priority,function(){qg(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ic(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Uf(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);la=l,r.target.dispatchEvent(l),la=null}else return t=wt(r),t!==null&&Lg(t),e.blockedOn=r,!1;t.shift()}return!0}function Hg(e,t,r){ic(e)&&r.delete(t)}function v0(){qf=!1,ui!==null&&ic(ui)&&(ui=null),ci!==null&&ic(ci)&&(ci=null),di!==null&&ic(di)&&(di=null),jo.forEach(Hg),ko.forEach(Hg)}function sc(e,t){e.blockedOn===t&&(e.blockedOn=null,qf||(qf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,v0)))}var lc=null;function Kg(e){lc!==e&&(lc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){lc===e&&(lc=null);for(var t=0;t<e.length;t+=3){var r=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(Lf(l||r)===null)continue;break}var h=wt(r);h!==null&&(e.splice(t,3),t-=3,zd(h,{pending:!0,data:d,method:r.method,action:l},l,d))}}))}function el(e){function t(M){return sc(M,e)}ui!==null&&sc(ui,e),ci!==null&&sc(ci,e),di!==null&&sc(di,e),jo.forEach(t),ko.forEach(t);for(var r=0;r<fi.length;r++){var l=fi[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<fi.length&&(r=fi[0],r.blockedOn===null);)$g(r),r.blockedOn===null&&fi.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var d=r[l],h=r[l+1],w=d[Gt]||null;if(typeof h=="function")w||Kg(r);else if(w){var N=null;if(h&&h.hasAttribute("formAction")){if(d=h,w=h[Gt]||null)N=w.formAction;else if(Lf(d)!==null)continue}else N=w.action;typeof N=="function"?r[l+1]=N:(r.splice(l,3),l-=3),Kg(r)}}}function Ig(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(w){return d=w})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function Bf(e){this._internalRoot=e}oc.prototype.render=Bf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var r=t.current,l=Jn();zg(r,l,e,t,null,null)},oc.prototype.unmount=Bf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zg(e.current,2,null,e,null,null),Hu(),t[Mn]=null}};function oc(e){this._internalRoot=e}oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_i();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fi.length&&t!==0&&t<fi[r].priority;r++);fi.splice(r,0,e),r===0&&$g(e)}};var Gg=n.version;if(Gg!=="19.2.4")throw Error(s(527,Gg,"19.2.4"));de.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var b0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{ra=uc.inject(b0),pn=uc}catch{}}return To.createRoot=function(e,t){if(!o(e))throw Error(s(299));var r=!1,l="",d=Jm,h=Zm,w=ep;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(w=t.onRecoverableError)),t=Mg(e,1,!1,null,null,r,l,null,d,h,w,Ig),e[Mn]=t.current,xf(e),new Bf(t)},To.hydrateRoot=function(e,t,r){if(!o(e))throw Error(s(299));var l=!1,d="",h=Jm,w=Zm,N=ep,M=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),t=Mg(e,1,!0,t,r??null,l,d,M,h,w,N,Ig),t.context=Dg(null),r=t.current,l=Jn(),l=Nl(l),d=Fr(l),d.callback=null,Jr(r,d,l),r=l,t.current.lanes=r,ia(t,r),Ya(t),e[Mn]=t.current,xf(e),new oc(t)},To.version="19.2.4",To}var ty;function A0(){if(ty)return Hf.exports;ty=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Hf.exports=O0(),Hf.exports}var C0=A0();const R0=jh(C0);var ny="popstate";function M0(a={}){function n(s,o){let{pathname:c,search:p,hash:g}=s.location;return oh("",{pathname:c,search:p,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(s,o){return typeof o=="string"?o:Lo(o)}return z0(n,i,null,a)}function qt(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function ya(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function D0(){return Math.random().toString(36).substring(2,10)}function ay(a,n){return{usr:a.state,key:a.key,idx:n}}function oh(a,n,i=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof n=="string"?vl(n):n,state:i,key:n&&n.key||s||D0()}}function Lo({pathname:a="/",search:n="",hash:i=""}){return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(a+=i.charAt(0)==="#"?i:"#"+i),a}function vl(a){let n={};if(a){let i=a.indexOf("#");i>=0&&(n.hash=a.substring(i),a=a.substring(0,i));let s=a.indexOf("?");s>=0&&(n.search=a.substring(s),a=a.substring(0,s)),a&&(n.pathname=a)}return n}function z0(a,n,i,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,p=o.history,g="POP",v=null,b=S();b==null&&(b=0,p.replaceState({...p.state,idx:b},""));function S(){return(p.state||{idx:null}).idx}function j(){g="POP";let G=S(),ie=G==null?null:G-b;b=G,v&&v({action:g,location:F.location,delta:ie})}function O(G,ie){g="PUSH";let I=oh(F.location,G,ie);b=S()+1;let V=ay(I,b),me=F.createHref(I);try{p.pushState(V,"",me)}catch(Ae){if(Ae instanceof DOMException&&Ae.name==="DataCloneError")throw Ae;o.location.assign(me)}c&&v&&v({action:g,location:F.location,delta:1})}function A(G,ie){g="REPLACE";let I=oh(F.location,G,ie);b=S();let V=ay(I,b),me=F.createHref(I);p.replaceState(V,"",me),c&&v&&v({action:g,location:F.location,delta:0})}function B(G){return U0(G)}let F={get action(){return g},get location(){return a(o,p)},listen(G){if(v)throw new Error("A history only accepts one active listener");return o.addEventListener(ny,j),v=G,()=>{o.removeEventListener(ny,j),v=null}},createHref(G){return n(o,G)},createURL:B,encodeLocation(G){let ie=B(G);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:O,replace:A,go(G){return p.go(G)}};return F}function U0(a,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),qt(i,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:Lo(a);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Zy(a,n,i="/"){return L0(a,n,i,!1)}function L0(a,n,i,s){let o=typeof n=="string"?vl(n):n,c=Tr(o.pathname||"/",i);if(c==null)return null;let p=ev(a);q0(p);let g=null;for(let v=0;g==null&&v<p.length;++v){let b=Q0(c);g=Y0(p[v],b,s)}return g}function ev(a,n=[],i=[],s="",o=!1){let c=(p,g,v=o,b)=>{let S={relativePath:b===void 0?p.path||"":b,caseSensitive:p.caseSensitive===!0,childrenIndex:g,route:p};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(s)&&v)return;qt(S.relativePath.startsWith(s),`Absolute route path "${S.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(s.length)}let j=Nr([s,S.relativePath]),O=i.concat(S);p.children&&p.children.length>0&&(qt(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${j}".`),ev(p.children,n,O,j,v)),!(p.path==null&&!p.index)&&n.push({path:j,score:G0(j,p.index),routesMeta:O})};return a.forEach((p,g)=>{if(p.path===""||!p.path?.includes("?"))c(p,g);else for(let v of tv(p.path))c(p,g,!0,v)}),n}function tv(a){let n=a.split("/");if(n.length===0)return[];let[i,...s]=n,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let p=tv(s.join("/")),g=[];return g.push(...p.map(v=>v===""?c:[c,v].join("/"))),o&&g.push(...p),g.map(v=>a.startsWith("/")&&v===""?"/":v)}function q0(a){a.sort((n,i)=>n.score!==i.score?i.score-n.score:V0(n.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var B0=/^:[\w-]+$/,P0=3,$0=2,H0=1,K0=10,I0=-2,ry=a=>a==="*";function G0(a,n){let i=a.split("/"),s=i.length;return i.some(ry)&&(s+=I0),n&&(s+=$0),i.filter(o=>!ry(o)).reduce((o,c)=>o+(B0.test(c)?P0:c===""?H0:K0),s)}function V0(a,n){return a.length===n.length&&a.slice(0,-1).every((s,o)=>s===n[o])?a[a.length-1]-n[n.length-1]:0}function Y0(a,n,i=!1){let{routesMeta:s}=a,o={},c="/",p=[];for(let g=0;g<s.length;++g){let v=s[g],b=g===s.length-1,S=c==="/"?n:n.slice(c.length)||"/",j=Tc({path:v.relativePath,caseSensitive:v.caseSensitive,end:b},S),O=v.route;if(!j&&b&&i&&!s[s.length-1].route.index&&(j=Tc({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!j)return null;Object.assign(o,j.params),p.push({params:o,pathname:Nr([c,j.pathname]),pathnameBase:Z0(Nr([c,j.pathnameBase])),route:O}),j.pathnameBase!=="/"&&(c=Nr([c,j.pathnameBase]))}return p}function Tc(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[i,s]=W0(a.path,a.caseSensitive,a.end),o=n.match(i);if(!o)return null;let c=o[0],p=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:s.reduce((b,{paramName:S,isOptional:j},O)=>{if(S==="*"){let B=g[O]||"";p=c.slice(0,c.length-B.length).replace(/(.)\/+$/,"$1")}const A=g[O];return j&&!A?b[S]=void 0:b[S]=(A||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:p,pattern:a}}function W0(a,n=!1,i=!0){ya(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,g,v)=>(s.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),s]}function Q0(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return ya(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),a}}function Tr(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,s=a.charAt(i);return s&&s!=="/"?null:a.slice(i)||"/"}var X0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function F0(a,n="/"){let{pathname:i,search:s="",hash:o=""}=typeof a=="string"?vl(a):a,c;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?c=iy(i.substring(1),"/"):c=iy(i,n)):c=n,{pathname:c,search:ex(s),hash:tx(o)}}function iy(a,n){let i=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function Vf(a,n,i,s){return`Cannot include a '${a}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function J0(a){return a.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Eh(a){let n=J0(a);return n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase)}function Nh(a,n,i,s=!1){let o;typeof a=="string"?o=vl(a):(o={...a},qt(!o.pathname||!o.pathname.includes("?"),Vf("?","pathname","search",o)),qt(!o.pathname||!o.pathname.includes("#"),Vf("#","pathname","hash",o)),qt(!o.search||!o.search.includes("#"),Vf("#","search","hash",o)));let c=a===""||o.pathname==="",p=c?"/":o.pathname,g;if(p==null)g=i;else{let j=n.length-1;if(!s&&p.startsWith("..")){let O=p.split("/");for(;O[0]==="..";)O.shift(),j-=1;o.pathname=O.join("/")}g=j>=0?n[j]:"/"}let v=F0(o,g),b=p&&p!=="/"&&p.endsWith("/"),S=(c||p===".")&&i.endsWith("/");return!v.pathname.endsWith("/")&&(b||S)&&(v.pathname+="/"),v}var Nr=a=>a.join("/").replace(/\/\/+/g,"/"),Z0=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),ex=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,tx=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,nx=class{constructor(a,n,i,s=!1){this.status=a,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function ax(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function rx(a){return a.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function av(a,n){let i=a;if(typeof i!="string"||!X0.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,o=!1;if(nv)try{let c=new URL(window.location.href),p=i.startsWith("//")?new URL(c.protocol+i):new URL(i),g=Tr(p.pathname,n);p.origin===c.origin&&g!=null?i=g+p.search+p.hash:o=!0}catch{ya(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rv=["POST","PUT","PATCH","DELETE"];new Set(rv);var ix=["GET",...rv];new Set(ix);var bl=R.createContext(null);bl.displayName="DataRouter";var zc=R.createContext(null);zc.displayName="DataRouterState";var sx=R.createContext(!1),iv=R.createContext({isTransitioning:!1});iv.displayName="ViewTransition";var lx=R.createContext(new Map);lx.displayName="Fetchers";var ox=R.createContext(null);ox.displayName="Await";var na=R.createContext(null);na.displayName="Navigation";var Vo=R.createContext(null);Vo.displayName="Location";var va=R.createContext({outlet:null,matches:[],isDataRoute:!1});va.displayName="Route";var Th=R.createContext(null);Th.displayName="RouteError";var sv="REACT_ROUTER_ERROR",ux="REDIRECT",cx="ROUTE_ERROR_RESPONSE";function dx(a){if(a.startsWith(`${sv}:${ux}:{`))try{let n=JSON.parse(a.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function fx(a){if(a.startsWith(`${sv}:${cx}:{`))try{let n=JSON.parse(a.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new nx(n.status,n.statusText,n.data)}catch{}}function hx(a,{relative:n}={}){qt(xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=R.useContext(na),{hash:o,pathname:c,search:p}=Yo(a,{relative:n}),g=c;return i!=="/"&&(g=c==="/"?i:Nr([i,c])),s.createHref({pathname:g,search:p,hash:o})}function xl(){return R.useContext(Vo)!=null}function Aa(){return qt(xl(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Vo).location}var lv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ov(a){R.useContext(na).static||R.useLayoutEffect(a)}function an(){let{isDataRoute:a}=R.useContext(va);return a?Tx():mx()}function mx(){qt(xl(),"useNavigate() may be used only in the context of a <Router> component.");let a=R.useContext(bl),{basename:n,navigator:i}=R.useContext(na),{matches:s}=R.useContext(va),{pathname:o}=Aa(),c=JSON.stringify(Eh(s)),p=R.useRef(!1);return ov(()=>{p.current=!0}),R.useCallback((v,b={})=>{if(ya(p.current,lv),!p.current)return;if(typeof v=="number"){i.go(v);return}let S=Nh(v,JSON.parse(c),o,b.relative==="path");a==null&&n!=="/"&&(S.pathname=S.pathname==="/"?n:Nr([n,S.pathname])),(b.replace?i.replace:i.push)(S,b.state,b)},[n,i,c,o,a])}var px=R.createContext(null);function gx(a){let n=R.useContext(va).outlet;return R.useMemo(()=>n&&R.createElement(px.Provider,{value:a},n),[n,a])}function Oh(){let{matches:a}=R.useContext(va),n=a[a.length-1];return n?n.params:{}}function Yo(a,{relative:n}={}){let{matches:i}=R.useContext(va),{pathname:s}=Aa(),o=JSON.stringify(Eh(i));return R.useMemo(()=>Nh(a,JSON.parse(o),s,n==="path"),[a,o,s,n])}function yx(a,n){return uv(a,n)}function uv(a,n,i,s,o){qt(xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=R.useContext(na),{matches:p}=R.useContext(va),g=p[p.length-1],v=g?g.params:{},b=g?g.pathname:"/",S=g?g.pathnameBase:"/",j=g&&g.route;{let I=j&&j.path||"";dv(b,!j||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let O=Aa(),A;if(n){let I=typeof n=="string"?vl(n):n;qt(S==="/"||I.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${I.pathname}" was given in the \`location\` prop.`),A=I}else A=O;let B=A.pathname||"/",F=B;if(S!=="/"){let I=S.replace(/^\//,"").split("/");F="/"+B.replace(/^\//,"").split("/").slice(I.length).join("/")}let G=Zy(a,{pathname:F});ya(j||G!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ya(G==null||G[G.length-1].route.element!==void 0||G[G.length-1].route.Component!==void 0||G[G.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=_x(G&&G.map(I=>Object.assign({},I,{params:Object.assign({},v,I.params),pathname:Nr([S,c.encodeLocation?c.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?S:Nr([S,c.encodeLocation?c.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),p,i,s,o);return n&&ie?R.createElement(Vo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},ie):ie}function vx(){let a=Nx(),n=ax(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),i=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",a),p=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:c},"ErrorBoundary")," or"," ",R.createElement("code",{style:c},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},n),i?R.createElement("pre",{style:o},i):null,p)}var bx=R.createElement(vx,null),cv=class extends R.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,n){return n.location!==a.location||n.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:n.error,location:n.location,revalidation:a.revalidation||n.revalidation}}componentDidCatch(a,n){this.props.onError?this.props.onError(a,n):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const i=fx(a.digest);i&&(a=i)}let n=a!==void 0?R.createElement(va.Provider,{value:this.props.routeContext},R.createElement(Th.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?R.createElement(xx,{error:a},n):n}};cv.contextType=sx;var Yf=new WeakMap;function xx({children:a,error:n}){let{basename:i}=R.useContext(na);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=dx(n.digest);if(s){let o=Yf.get(n);if(o)throw o;let c=av(s.location,i);if(nv&&!Yf.get(n))if(c.isExternal||s.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:s.replace}));throw Yf.set(n,p),p}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return a}function wx({routeContext:a,match:n,children:i}){let s=R.useContext(bl);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(va.Provider,{value:a},i)}function _x(a,n=[],i=null,s=null,o=null){if(a==null){if(!i)return null;if(i.errors)a=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)a=i.matches;else return null}let c=a,p=i?.errors;if(p!=null){let S=c.findIndex(j=>j.route.id&&p?.[j.route.id]!==void 0);qt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),c=c.slice(0,Math.min(c.length,S+1))}let g=!1,v=-1;if(i)for(let S=0;S<c.length;S++){let j=c[S];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(v=S),j.route.id){let{loaderData:O,errors:A}=i,B=j.route.loader&&!O.hasOwnProperty(j.route.id)&&(!A||A[j.route.id]===void 0);if(j.route.lazy||B){g=!0,v>=0?c=c.slice(0,v+1):c=[c[0]];break}}}let b=i&&s?(S,j)=>{s(S,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:rx(i.matches),errorInfo:j})}:void 0;return c.reduceRight((S,j,O)=>{let A,B=!1,F=null,G=null;i&&(A=p&&j.route.id?p[j.route.id]:void 0,F=j.route.errorElement||bx,g&&(v<0&&O===0?(dv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,G=null):v===O&&(B=!0,G=j.route.hydrateFallbackElement||null)));let ie=n.concat(c.slice(0,O+1)),I=()=>{let V;return A?V=F:B?V=G:j.route.Component?V=R.createElement(j.route.Component,null):j.route.element?V=j.route.element:V=S,R.createElement(wx,{match:j,routeContext:{outlet:S,matches:ie,isDataRoute:i!=null},children:V})};return i&&(j.route.ErrorBoundary||j.route.errorElement||O===0)?R.createElement(cv,{location:i.location,revalidation:i.revalidation,component:F,error:A,children:I(),routeContext:{outlet:null,matches:ie,isDataRoute:!0},onError:b}):I()},null)}function Ah(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sx(a){let n=R.useContext(bl);return qt(n,Ah(a)),n}function jx(a){let n=R.useContext(zc);return qt(n,Ah(a)),n}function kx(a){let n=R.useContext(va);return qt(n,Ah(a)),n}function Ch(a){let n=kx(a),i=n.matches[n.matches.length-1];return qt(i.route.id,`${a} can only be used on routes that contain a unique "id"`),i.route.id}function Ex(){return Ch("useRouteId")}function Nx(){let a=R.useContext(Th),n=jx("useRouteError"),i=Ch("useRouteError");return a!==void 0?a:n.errors?.[i]}function Tx(){let{router:a}=Sx("useNavigate"),n=Ch("useNavigate"),i=R.useRef(!1);return ov(()=>{i.current=!0}),R.useCallback(async(o,c={})=>{ya(i.current,lv),i.current&&(typeof o=="number"?await a.navigate(o):await a.navigate(o,{fromRouteId:n,...c}))},[a,n])}var sy={};function dv(a,n,i){!n&&!sy[a]&&(sy[a]=!0,ya(!1,i))}R.memo(Ox);function Ox({routes:a,future:n,state:i,onError:s}){return uv(a,void 0,i,s,n)}function Wf({to:a,replace:n,state:i,relative:s}){qt(xl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(na);ya(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=R.useContext(va),{pathname:p}=Aa(),g=an(),v=Nh(a,Eh(c),p,s==="path"),b=JSON.stringify(v);return R.useEffect(()=>{g(JSON.parse(b),{replace:n,state:i,relative:s})},[g,b,s,n,i]),null}function fv(a){return gx(a.context)}function $t(a){qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ax({basename:a="/",children:n=null,location:i,navigationType:s="POP",navigator:o,static:c=!1,unstable_useTransitions:p}){qt(!xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=a.replace(/^\/*/,"/"),v=R.useMemo(()=>({basename:g,navigator:o,static:c,unstable_useTransitions:p,future:{}}),[g,o,c,p]);typeof i=="string"&&(i=vl(i));let{pathname:b="/",search:S="",hash:j="",state:O=null,key:A="default"}=i,B=R.useMemo(()=>{let F=Tr(b,g);return F==null?null:{location:{pathname:F,search:S,hash:j,state:O,key:A},navigationType:s}},[g,b,S,j,O,A,s]);return ya(B!=null,`<Router basename="${g}"> is not able to match the URL "${b}${S}${j}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:R.createElement(na.Provider,{value:v},R.createElement(Vo.Provider,{children:n,value:B}))}function Cx({children:a,location:n}){return yx(uh(a),n)}function uh(a,n=[]){let i=[];return R.Children.forEach(a,(s,o)=>{if(!R.isValidElement(s))return;let c=[...n,o];if(s.type===R.Fragment){i.push.apply(i,uh(s.props.children,c));return}qt(s.type===$t,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=uh(s.props.children,c)),i.push(p)}),i}var kc="get",Ec="application/x-www-form-urlencoded";function Uc(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function Rx(a){return Uc(a)&&a.tagName.toLowerCase()==="button"}function Mx(a){return Uc(a)&&a.tagName.toLowerCase()==="form"}function Dx(a){return Uc(a)&&a.tagName.toLowerCase()==="input"}function zx(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Ux(a,n){return a.button===0&&(!n||n==="_self")&&!zx(a)}function ch(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((n,i)=>{let s=a[i];return n.concat(Array.isArray(s)?s.map(o=>[i,o]):[[i,s]])},[]))}function Lx(a,n){let i=ch(a);return n&&n.forEach((s,o)=>{i.has(o)||n.getAll(o).forEach(c=>{i.append(o,c)})}),i}var cc=null;function qx(){if(cc===null)try{new FormData(document.createElement("form"),0),cc=!1}catch{cc=!0}return cc}var Bx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qf(a){return a!=null&&!Bx.has(a)?(ya(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ec}"`),null):a}function Px(a,n){let i,s,o,c,p;if(Mx(a)){let g=a.getAttribute("action");s=g?Tr(g,n):null,i=a.getAttribute("method")||kc,o=Qf(a.getAttribute("enctype"))||Ec,c=new FormData(a)}else if(Rx(a)||Dx(a)&&(a.type==="submit"||a.type==="image")){let g=a.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=a.getAttribute("formaction")||g.getAttribute("action");if(s=v?Tr(v,n):null,i=a.getAttribute("formmethod")||g.getAttribute("method")||kc,o=Qf(a.getAttribute("formenctype"))||Qf(g.getAttribute("enctype"))||Ec,c=new FormData(g,a),!qx()){let{name:b,type:S,value:j}=a;if(S==="image"){let O=b?`${b}.`:"";c.append(`${O}x`,"0"),c.append(`${O}y`,"0")}else b&&c.append(b,j)}}else{if(Uc(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=kc,s=null,o=Ec,p=a}return c&&o==="text/plain"&&(p=c,c=void 0),{action:s,method:i.toLowerCase(),encType:o,formData:c,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rh(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function $x(a,n,i,s){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return i?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:n&&Tr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function Hx(a,n){if(a.id in n)return n[a.id];try{let i=await import(a.module);return n[a.id]=i,i}catch(i){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kx(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Ix(a,n,i){let s=await Promise.all(a.map(async o=>{let c=n.routes[o.route.id];if(c){let p=await Hx(c,i);return p.links?p.links():[]}return[]}));return Wx(s.flat(1).filter(Kx).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ly(a,n,i,s,o,c){let p=(v,b)=>i[b]?v.route.id!==i[b].route.id:!0,g=(v,b)=>i[b].pathname!==v.pathname||i[b].route.path?.endsWith("*")&&i[b].params["*"]!==v.params["*"];return c==="assets"?n.filter((v,b)=>p(v,b)||g(v,b)):c==="data"?n.filter((v,b)=>{let S=s.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(p(v,b)||g(v,b))return!0;if(v.route.shouldRevalidate){let j=v.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function Gx(a,n,{includeHydrateFallback:i}={}){return Vx(a.map(s=>{let o=n.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function Vx(a){return[...new Set(a)]}function Yx(a){let n={},i=Object.keys(a).sort();for(let s of i)n[s]=a[s];return n}function Wx(a,n){let i=new Set;return new Set(n),a.reduce((s,o)=>{let c=JSON.stringify(Yx(o));return i.has(c)||(i.add(c),s.push({key:c,link:o})),s},[])}function hv(){let a=R.useContext(bl);return Rh(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Qx(){let a=R.useContext(zc);return Rh(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Mh=R.createContext(void 0);Mh.displayName="FrameworkContext";function mv(){let a=R.useContext(Mh);return Rh(a,"You must render this element inside a <HydratedRouter> element"),a}function Xx(a,n){let i=R.useContext(Mh),[s,o]=R.useState(!1),[c,p]=R.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:b,onMouseLeave:S,onTouchStart:j}=n,O=R.useRef(null);R.useEffect(()=>{if(a==="render"&&p(!0),a==="viewport"){let F=ie=>{ie.forEach(I=>{p(I.isIntersecting)})},G=new IntersectionObserver(F,{threshold:.5});return O.current&&G.observe(O.current),()=>{G.disconnect()}}},[a]),R.useEffect(()=>{if(s){let F=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(F)}}},[s]);let A=()=>{o(!0)},B=()=>{o(!1),p(!1)};return i?a!=="intent"?[c,O,{}]:[c,O,{onFocus:Oo(g,A),onBlur:Oo(v,B),onMouseEnter:Oo(b,A),onMouseLeave:Oo(S,B),onTouchStart:Oo(j,A)}]:[!1,O,{}]}function Oo(a,n){return i=>{a&&a(i),i.defaultPrevented||n(i)}}function Fx({page:a,...n}){let{router:i}=hv(),s=R.useMemo(()=>Zy(i.routes,a,i.basename),[i.routes,a,i.basename]);return s?R.createElement(Zx,{page:a,matches:s,...n}):null}function Jx(a){let{manifest:n,routeModules:i}=mv(),[s,o]=R.useState([]);return R.useEffect(()=>{let c=!1;return Ix(a,n,i).then(p=>{c||o(p)}),()=>{c=!0}},[a,n,i]),s}function Zx({page:a,matches:n,...i}){let s=Aa(),{future:o,manifest:c,routeModules:p}=mv(),{basename:g}=hv(),{loaderData:v,matches:b}=Qx(),S=R.useMemo(()=>ly(a,n,b,c,s,"data"),[a,n,b,c,s]),j=R.useMemo(()=>ly(a,n,b,c,s,"assets"),[a,n,b,c,s]),O=R.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let F=new Set,G=!1;if(n.forEach(I=>{let V=c.routes[I.route.id];!V||!V.hasLoader||(!S.some(me=>me.route.id===I.route.id)&&I.route.id in v&&p[I.route.id]?.shouldRevalidate||V.hasClientLoader?G=!0:F.add(I.route.id))}),F.size===0)return[];let ie=$x(a,g,o.unstable_trailingSlashAwareDataRequests,"data");return G&&F.size>0&&ie.searchParams.set("_routes",n.filter(I=>F.has(I.route.id)).map(I=>I.route.id).join(",")),[ie.pathname+ie.search]},[g,o.unstable_trailingSlashAwareDataRequests,v,s,c,S,n,a,p]),A=R.useMemo(()=>Gx(j,c),[j,c]),B=Jx(j);return R.createElement(R.Fragment,null,O.map(F=>R.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...i})),A.map(F=>R.createElement("link",{key:F,rel:"modulepreload",href:F,...i})),B.map(({key:F,link:G})=>R.createElement("link",{key:F,nonce:i.nonce,...G,crossOrigin:G.crossOrigin??i.crossOrigin})))}function ew(...a){return n=>{a.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var tw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tw&&(window.__reactRouterVersion="7.13.0")}catch{}function nw({basename:a,children:n,unstable_useTransitions:i,window:s}){let o=R.useRef();o.current==null&&(o.current=M0({window:s,v5Compat:!0}));let c=o.current,[p,g]=R.useState({action:c.action,location:c.location}),v=R.useCallback(b=>{i===!1?g(b):R.startTransition(()=>g(b))},[i]);return R.useLayoutEffect(()=>c.listen(v),[c,v]),R.createElement(Ax,{basename:a,children:n,location:p.location,navigationType:p.action,navigator:c,unstable_useTransitions:i})}var pv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gv=R.forwardRef(function({onClick:n,discover:i="render",prefetch:s="none",relative:o,reloadDocument:c,replace:p,state:g,target:v,to:b,preventScrollReset:S,viewTransition:j,unstable_defaultShouldRevalidate:O,...A},B){let{basename:F,unstable_useTransitions:G}=R.useContext(na),ie=typeof b=="string"&&pv.test(b),I=av(b,F);b=I.to;let V=hx(b,{relative:o}),[me,Ae,ce]=Xx(s,A),ae=sw(b,{replace:p,state:g,target:v,preventScrollReset:S,relative:o,viewTransition:j,unstable_defaultShouldRevalidate:O,unstable_useTransitions:G});function Me(mt){n&&n(mt),mt.defaultPrevented||ae(mt)}let He=R.createElement("a",{...A,...ce,href:I.absoluteURL||V,onClick:I.isExternal||c?n:Me,ref:ew(B,Ae),target:v,"data-discover":!ie&&i==="render"?"true":void 0});return me&&!ie?R.createElement(R.Fragment,null,He,R.createElement(Fx,{page:V})):He});gv.displayName="Link";var aw=R.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:c,to:p,viewTransition:g,children:v,...b},S){let j=Yo(p,{relative:b.relative}),O=Aa(),A=R.useContext(zc),{navigator:B,basename:F}=R.useContext(na),G=A!=null&&fw(j)&&g===!0,ie=B.encodeLocation?B.encodeLocation(j).pathname:j.pathname,I=O.pathname,V=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(I=I.toLowerCase(),V=V?V.toLowerCase():null,ie=ie.toLowerCase()),V&&F&&(V=Tr(V,F)||V);const me=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let Ae=I===ie||!o&&I.startsWith(ie)&&I.charAt(me)==="/",ce=V!=null&&(V===ie||!o&&V.startsWith(ie)&&V.charAt(ie.length)==="/"),ae={isActive:Ae,isPending:ce,isTransitioning:G},Me=Ae?n:void 0,He;typeof s=="function"?He=s(ae):He=[s,Ae?"active":null,ce?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let mt=typeof c=="function"?c(ae):c;return R.createElement(gv,{...b,"aria-current":Me,className:He,ref:S,style:mt,to:p,viewTransition:g},typeof v=="function"?v(ae):v)});aw.displayName="NavLink";var rw=R.forwardRef(({discover:a="render",fetcherKey:n,navigate:i,reloadDocument:s,replace:o,state:c,method:p=kc,action:g,onSubmit:v,relative:b,preventScrollReset:S,viewTransition:j,unstable_defaultShouldRevalidate:O,...A},B)=>{let{unstable_useTransitions:F}=R.useContext(na),G=cw(),ie=dw(g,{relative:b}),I=p.toLowerCase()==="get"?"get":"post",V=typeof g=="string"&&pv.test(g),me=Ae=>{if(v&&v(Ae),Ae.defaultPrevented)return;Ae.preventDefault();let ce=Ae.nativeEvent.submitter,ae=ce?.getAttribute("formmethod")||p,Me=()=>G(ce||Ae.currentTarget,{fetcherKey:n,method:ae,navigate:i,replace:o,state:c,relative:b,preventScrollReset:S,viewTransition:j,unstable_defaultShouldRevalidate:O});F&&i!==!1?R.startTransition(()=>Me()):Me()};return R.createElement("form",{ref:B,method:I,action:ie,onSubmit:s?v:me,...A,"data-discover":!V&&a==="render"?"true":void 0})});rw.displayName="Form";function iw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yv(a){let n=R.useContext(bl);return qt(n,iw(a)),n}function sw(a,{target:n,replace:i,state:s,preventScrollReset:o,relative:c,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v}={}){let b=an(),S=Aa(),j=Yo(a,{relative:c});return R.useCallback(O=>{if(Ux(O,n)){O.preventDefault();let A=i!==void 0?i:Lo(S)===Lo(j),B=()=>b(a,{replace:A,state:s,preventScrollReset:o,relative:c,viewTransition:p,unstable_defaultShouldRevalidate:g});v?R.startTransition(()=>B()):B()}},[S,b,j,i,s,n,a,o,c,p,g,v])}function lw(a){ya(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=R.useRef(ch(a)),i=R.useRef(!1),s=Aa(),o=R.useMemo(()=>Lx(s.search,i.current?null:n.current),[s.search]),c=an(),p=R.useCallback((g,v)=>{const b=ch(typeof g=="function"?g(new URLSearchParams(o)):g);i.current=!0,c("?"+b,v)},[c,o]);return[o,p]}var ow=0,uw=()=>`__${String(++ow)}__`;function cw(){let{router:a}=yv("useSubmit"),{basename:n}=R.useContext(na),i=Ex(),s=a.fetch,o=a.navigate;return R.useCallback(async(c,p={})=>{let{action:g,method:v,encType:b,formData:S,body:j}=Px(c,n);if(p.navigate===!1){let O=p.fetcherKey||uw();await s(O,i,p.action||g,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:S,body:j,formMethod:p.method||v,formEncType:p.encType||b,flushSync:p.flushSync})}else await o(p.action||g,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:S,body:j,formMethod:p.method||v,formEncType:p.encType||b,replace:p.replace,state:p.state,fromRouteId:i,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,o,n,i])}function dw(a,{relative:n}={}){let{basename:i}=R.useContext(na),s=R.useContext(va);qt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Yo(a||".",{relative:n})},p=Aa();if(a==null){c.search=p.search;let g=new URLSearchParams(c.search),v=g.getAll("index");if(v.some(S=>S==="")){g.delete("index"),v.filter(j=>j).forEach(j=>g.append("index",j));let S=g.toString();c.search=S?`?${S}`:""}}return(!a||a===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:Nr([i,c.pathname])),Lo(c)}function fw(a,{relative:n}={}){let i=R.useContext(iv);qt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=yv("useViewTransitionState"),o=Yo(a,{relative:n});if(!i.isTransitioning)return!1;let c=Tr(i.currentLocation.pathname,s)||i.currentLocation.pathname,p=Tr(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Tc(o.pathname,p)!=null||Tc(o.pathname,c)!=null}function Lc(a,n){var i={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(i[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(a);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(a,s[o])&&(i[s[o]]=a[s[o]]);return i}function hw(a,n,i,s){function o(c){return c instanceof i?c:new i(function(p){p(c)})}return new(i||(i=Promise))(function(c,p){function g(S){try{b(s.next(S))}catch(j){p(j)}}function v(S){try{b(s.throw(S))}catch(j){p(j)}}function b(S){S.done?c(S.value):o(S.value).then(g,v)}b((s=s.apply(a,n||[])).next())})}const mw=a=>a?(...n)=>a(...n):(...n)=>fetch(...n);class Dh extends Error{constructor(n,i="FunctionsError",s){super(n),this.name=i,this.context=s}}class pw extends Dh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class oy extends Dh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class uy extends Dh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var dh;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(dh||(dh={}));class gw{constructor(n,{headers:i={},customFetch:s,region:o=dh.Any}={}){this.url=n,this.headers=i,this.region=o,this.fetch=mw(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return hw(this,arguments,void 0,function*(i,s={}){var o;let c,p;try{const{headers:g,method:v,body:b,signal:S,timeout:j}=s;let O={},{region:A}=s;A||(A=this.region);const B=new URL(`${this.url}/${i}`);A&&A!=="any"&&(O["x-region"]=A,B.searchParams.set("forceFunctionRegion",A));let F;b&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(O["Content-Type"]="application/octet-stream",F=b):typeof b=="string"?(O["Content-Type"]="text/plain",F=b):typeof FormData<"u"&&b instanceof FormData?F=b:(O["Content-Type"]="application/json",F=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?F=JSON.stringify(b):F=b;let G=S;j&&(p=new AbortController,c=setTimeout(()=>p.abort(),j),S?(G=p.signal,S.addEventListener("abort",()=>p.abort())):G=p.signal);const ie=yield this.fetch(B.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},O),this.headers),g),body:F,signal:G}).catch(Ae=>{throw new pw(Ae)}),I=ie.headers.get("x-relay-error");if(I&&I==="true")throw new oy(ie);if(!ie.ok)throw new uy(ie);let V=((o=ie.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),me;return V==="application/json"?me=yield ie.json():V==="application/octet-stream"||V==="application/pdf"?me=yield ie.blob():V==="text/event-stream"?me=ie:V==="multipart/form-data"?me=yield ie.formData():me=yield ie.text(),{data:me,error:null,response:ie}}catch(g){return{data:null,error:g,response:g instanceof uy||g instanceof oy?g.context:void 0}}finally{c&&clearTimeout(c)}})}}var yw=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},vw=class{constructor(a){var n,i,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(n=a.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=a.signal,this.isMaybeSingle=(i=a.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(s=a.urlLengthLimit)!==null&&s!==void 0?s:8e3,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,n){return this.headers=new Headers(this.headers),this.headers.set(a,n),this}then(a,n){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let p=null,g=null,v=null,b=c.status,S=c.statusText;if(c.ok){var j,O;if(i.method!=="HEAD"){var A;const ie=await c.text();ie===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((A=i.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?g=ie:g=JSON.parse(ie))}const F=(j=i.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),G=(O=c.headers.get("content-range"))===null||O===void 0?void 0:O.split("/");F&&G&&G.length>1&&(v=parseInt(G[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,b=406,S="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var B;const F=await c.text();try{p=JSON.parse(F),Array.isArray(p)&&c.status===404&&(g=[],p=null,b=200,S="OK")}catch{c.status===404&&F===""?(b=204,S="No Content"):p={message:F}}if(p&&i.isMaybeSingle&&(!(p==null||(B=p.details)===null||B===void 0)&&B.includes("0 rows"))&&(p=null,b=200,S="OK"),p&&i.shouldThrowOnError)throw new yw(p)}return{error:p,data:g,count:v,status:b,statusText:S}});return this.shouldThrowOnError||(o=o.catch(c=>{var p;let g="",v="",b="";const S=c?.cause;if(S){var j,O,A,B;const ie=(j=S?.message)!==null&&j!==void 0?j:"",I=(O=S?.code)!==null&&O!==void 0?O:"";g=`${(A=c?.name)!==null&&A!==void 0?A:"FetchError"}: ${c?.message}`,g+=`

Caused by: ${(B=S?.name)!==null&&B!==void 0?B:"Error"}: ${ie}`,I&&(g+=` (${I})`),S?.stack&&(g+=`
${S.stack}`)}else{var F;g=(F=c?.stack)!==null&&F!==void 0?F:""}const G=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(b="",v="Request was aborted (timeout or manual cancellation)",G>this.urlLengthLimit&&(v+=`. Note: Your request URL is ${G} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(S?.name==="HeadersOverflowError"||S?.code==="UND_ERR_HEADERS_OVERFLOW")&&(b="",v="HTTP headers exceeded server limits (typically 16KB)",G>this.urlLengthLimit&&(v+=`. Your request URL is ${G} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(p=c?.name)!==null&&p!==void 0?p:"FetchError"}: ${c?.message}`,details:g,hint:v,code:b},data:null,count:null,status:0,statusText:""}})),o.then(a,n)}returns(){return this}overrideTypes(){return this}},bw=class extends vw{select(a){let n=!1;const i=(a??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:n=!0,nullsFirst:i,foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.order`:"order",p=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${p?`${p},`:""}${a}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${a}`),this}range(a,n,{foreignTable:i,referencedTable:s=i}={}){const o=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(c,`${n-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:n=!1,settings:i=!1,buffers:s=!1,wal:o=!1,format:c="text"}={}){var p;const g=[a?"analyze":null,n?"verbose":null,i?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),v=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${v}"; options=${g};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const cy=new RegExp("[,()]");var ul=class extends bw{eq(a,n){return this.url.searchParams.append(a,`eq.${n}`),this}neq(a,n){return this.url.searchParams.append(a,`neq.${n}`),this}gt(a,n){return this.url.searchParams.append(a,`gt.${n}`),this}gte(a,n){return this.url.searchParams.append(a,`gte.${n}`),this}lt(a,n){return this.url.searchParams.append(a,`lt.${n}`),this}lte(a,n){return this.url.searchParams.append(a,`lte.${n}`),this}like(a,n){return this.url.searchParams.append(a,`like.${n}`),this}likeAllOf(a,n){return this.url.searchParams.append(a,`like(all).{${n.join(",")}}`),this}likeAnyOf(a,n){return this.url.searchParams.append(a,`like(any).{${n.join(",")}}`),this}ilike(a,n){return this.url.searchParams.append(a,`ilike.${n}`),this}ilikeAllOf(a,n){return this.url.searchParams.append(a,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(a,n){return this.url.searchParams.append(a,`ilike(any).{${n.join(",")}}`),this}regexMatch(a,n){return this.url.searchParams.append(a,`match.${n}`),this}regexIMatch(a,n){return this.url.searchParams.append(a,`imatch.${n}`),this}is(a,n){return this.url.searchParams.append(a,`is.${n}`),this}isDistinct(a,n){return this.url.searchParams.append(a,`isdistinct.${n}`),this}in(a,n){const i=Array.from(new Set(n)).map(s=>typeof s=="string"&&cy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`in.(${i})`),this}notIn(a,n){const i=Array.from(new Set(n)).map(s=>typeof s=="string"&&cy.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(a,`not.in.(${i})`),this}contains(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cs.{${n.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(n)}`),this}containedBy(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cd.{${n.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(n)}`),this}rangeGt(a,n){return this.url.searchParams.append(a,`sr.${n}`),this}rangeGte(a,n){return this.url.searchParams.append(a,`nxl.${n}`),this}rangeLt(a,n){return this.url.searchParams.append(a,`sl.${n}`),this}rangeLte(a,n){return this.url.searchParams.append(a,`nxr.${n}`),this}rangeAdjacent(a,n){return this.url.searchParams.append(a,`adj.${n}`),this}overlaps(a,n){return typeof n=="string"?this.url.searchParams.append(a,`ov.${n}`):this.url.searchParams.append(a,`ov.{${n.join(",")}}`),this}textSearch(a,n,{config:i,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(a,`${o}fts${c}.${n}`),this}match(a){return Object.entries(a).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(a,n,i){return this.url.searchParams.append(a,`not.${n}.${i}`),this}or(a,{foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${a})`),this}filter(a,n,i){return this.url.searchParams.append(a,`${n}.${i}`),this}},xw=class{constructor(a,{headers:n={},schema:i,fetch:s,urlLengthLimit:o=8e3}){this.url=a,this.headers=new Headers(n),this.schema=i,this.fetch=s,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,n){const{head:i=!1,count:s}=n??{},o=i?"HEAD":"GET";let c=!1;const p=(a??"*").split("").map(b=>/\s/.test(b)&&!c?"":(b==='"'&&(c=!c),b)).join(""),{url:g,headers:v}=this.cloneRequestState();return g.searchParams.set("select",p),s&&v.append("Prefer",`count=${s}`),new ul({method:o,url:g,headers:v,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(a,{count:n,defaultToNull:i=!0}={}){var s;const o="POST",{url:c,headers:p}=this.cloneRequestState();if(n&&p.append("Prefer",`count=${n}`),i||p.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(g.length>0){const v=[...new Set(g)].map(b=>`"${b}"`);c.searchParams.set("columns",v.join(","))}}return new ul({method:o,url:c,headers:p,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(a,{onConflict:n,ignoreDuplicates:i=!1,count:s,defaultToNull:o=!0}={}){var c;const p="POST",{url:g,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),n!==void 0&&g.searchParams.set("on_conflict",n),s&&v.append("Prefer",`count=${s}`),o||v.append("Prefer","missing=default"),Array.isArray(a)){const b=a.reduce((S,j)=>S.concat(Object.keys(j)),[]);if(b.length>0){const S=[...new Set(b)].map(j=>`"${j}"`);g.searchParams.set("columns",S.join(","))}}return new ul({method:p,url:g,headers:v,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(a,{count:n}={}){var i;const s="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new ul({method:s,url:o,headers:c,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:a}={}){var n;const i="DELETE",{url:s,headers:o}=this.cloneRequestState();return a&&o.append("Prefer",`count=${a}`),new ul({method:i,url:s,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function qo(a){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qo(a)}function ww(a,n){if(qo(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var s=i.call(a,n);if(qo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function _w(a){var n=ww(a,"string");return qo(n)=="symbol"?n:n+""}function Sw(a,n,i){return(n=_w(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}function dy(a,n){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,s)}return i}function dc(a){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?dy(Object(i),!0).forEach(function(s){Sw(a,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):dy(Object(i)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(i,s))})}return a}var jw=class vv{constructor(n,{headers:i={},schema:s,fetch:o,timeout:c,urlLengthLimit:p=8e3}={}){this.url=n,this.headers=new Headers(i),this.schemaName=s,this.urlLengthLimit=p;const g=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(v,b)=>{const S=new AbortController,j=setTimeout(()=>S.abort(),c),O=b?.signal;if(O){if(O.aborted)return clearTimeout(j),g(v,b);const A=()=>{clearTimeout(j),S.abort()};return O.addEventListener("abort",A,{once:!0}),g(v,dc(dc({},b),{},{signal:S.signal})).finally(()=>{clearTimeout(j),O.removeEventListener("abort",A)})}return g(v,dc(dc({},b),{},{signal:S.signal})).finally(()=>clearTimeout(j))}:this.fetch=g}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new xw(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new vv(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,i={},{head:s=!1,get:o=!1,count:c}={}){var p;let g;const v=new URL(`${this.url}/rpc/${n}`);let b;const S=A=>A!==null&&typeof A=="object"&&(!Array.isArray(A)||A.some(S)),j=s&&Object.values(i).some(S);j?(g="POST",b=i):s||o?(g=s?"HEAD":"GET",Object.entries(i).filter(([A,B])=>B!==void 0).map(([A,B])=>[A,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([A,B])=>{v.searchParams.append(A,B)})):(g="POST",b=i);const O=new Headers(this.headers);return j?O.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&O.set("Prefer",`count=${c}`),new ul({method:g,url:v,headers:O,schema:this.schemaName,body:b,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch,urlLengthLimit:this.urlLengthLimit})}};class kw{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const s=i.versions;if(s&&s.node){const o=s.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let i=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(i+=`

Suggested solution: ${n.workaround}`),new Error(i)}static createWebSocket(n,i){const s=this.getWebSocketConstructor();return new s(n,i)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Ew="2.95.3",Nw=`realtime-js/${Ew}`,Tw="1.0.0",bv="2.0.0",fy=bv,fh=1e4,Ow=1e3,Aw=100;var pi;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(pi||(pi={}));var on;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(on||(on={}));var Oa;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(Oa||(Oa={}));var hh;(function(a){a.websocket="websocket"})(hh||(hh={}));var Zi;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Zi||(Zi={}));class Cw{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,i){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var i;return this._isArrayBuffer((i=n.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var i,s;const o=(s=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var i,s;const o=(s=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},p=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,p)}_encodeUserBroadcastPush(n,i,s){var o,c;const p=n.topic,g=(o=n.ref)!==null&&o!==void 0?o:"",v=(c=n.join_ref)!==null&&c!==void 0?c:"",b=n.payload.event,S=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},j=Object.keys(S).length===0?"":JSON.stringify(S);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`topic length ${p.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`metadata length ${j.length} exceeds maximum of 255`);const O=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+g.length+p.length+b.length+j.length,A=new ArrayBuffer(this.HEADER_LENGTH+O);let B=new DataView(A),F=0;B.setUint8(F++,this.KINDS.userBroadcastPush),B.setUint8(F++,v.length),B.setUint8(F++,g.length),B.setUint8(F++,p.length),B.setUint8(F++,b.length),B.setUint8(F++,j.length),B.setUint8(F++,i),Array.from(v,ie=>B.setUint8(F++,ie.charCodeAt(0))),Array.from(g,ie=>B.setUint8(F++,ie.charCodeAt(0))),Array.from(p,ie=>B.setUint8(F++,ie.charCodeAt(0))),Array.from(b,ie=>B.setUint8(F++,ie.charCodeAt(0))),Array.from(j,ie=>B.setUint8(F++,ie.charCodeAt(0)));var G=new Uint8Array(A.byteLength+s.byteLength);return G.set(new Uint8Array(A),0),G.set(new Uint8Array(s),A.byteLength),G.buffer}decode(n,i){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return i(s)}if(typeof n=="string"){const s=JSON.parse(n),[o,c,p,g,v]=s;return i({join_ref:o,ref:c,topic:p,event:g,payload:v})}return i({})}_binaryDecode(n){const i=new DataView(n),s=i.getUint8(0),o=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,i,o)}_decodeUserBroadcast(n,i,s){const o=i.getUint8(1),c=i.getUint8(2),p=i.getUint8(3),g=i.getUint8(4);let v=this.HEADER_LENGTH+4;const b=s.decode(n.slice(v,v+o));v=v+o;const S=s.decode(n.slice(v,v+c));v=v+c;const j=s.decode(n.slice(v,v+p));v=v+p;const O=n.slice(v,n.byteLength),A=g===this.JSON_ENCODING?JSON.parse(s.decode(O)):O,B={type:this.BROADCAST_EVENT,event:S,payload:A};return p>0&&(B.meta=JSON.parse(j)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:B}}_isArrayBuffer(n){var i;return n instanceof ArrayBuffer||((i=n?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(n,i){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>i.includes(s)))}}let xv=class{constructor(n,i){this.callback=n,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Rt;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Rt||(Rt={}));const hy=(a,n,i={})=>{var s;const o=(s=i.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((c,p)=>(c[p]=Rw(p,a,n,o),c),{}):{}},Rw=(a,n,i,s)=>{const o=n.find(g=>g.name===a),c=o?.type,p=i[a];return c&&!s.includes(c)?wv(c,p):mh(p)},wv=(a,n)=>{if(a.charAt(0)==="_"){const i=a.slice(1,a.length);return Uw(n,i)}switch(a){case Rt.bool:return Mw(n);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return Dw(n);case Rt.json:case Rt.jsonb:return zw(n);case Rt.timestamp:return Lw(n);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return mh(n);default:return mh(n)}},mh=a=>a,Mw=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Dw=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},zw=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},Uw=(a,n)=>{if(typeof a!="string")return a;const i=a.length-1,s=a[i];if(a[0]==="{"&&s==="}"){let c;const p=a.slice(1,i);try{c=JSON.parse("["+p+"]")}catch{c=p?p.split(","):[]}return c.map(g=>wv(n,g))}return a},Lw=a=>typeof a=="string"?a.replace(" ","T"):a,_v=a=>{const n=new URL(a);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Xf{constructor(n,i,s={},o=fh){this.channel=n,this.event=i,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,i){var s;return this._hasReceived(n)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:i}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(i))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var my;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(my||(my={}));class zo{constructor(n,i){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:p,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zo.syncState(this.state,o,c,p),this.pendingDiffs.forEach(v=>{this.state=zo.syncDiff(this.state,v,c,p)}),this.pendingDiffs=[],g()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:p,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=zo.syncDiff(this.state,o,c,p),g())}),this.onJoin((o,c,p)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:p})}),this.onLeave((o,c,p)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:p})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,i,s,o){const c=this.cloneDeep(n),p=this.transformState(i),g={},v={};return this.map(c,(b,S)=>{p[b]||(v[b]=S)}),this.map(p,(b,S)=>{const j=c[b];if(j){const O=S.map(G=>G.presence_ref),A=j.map(G=>G.presence_ref),B=S.filter(G=>A.indexOf(G.presence_ref)<0),F=j.filter(G=>O.indexOf(G.presence_ref)<0);B.length>0&&(g[b]=B),F.length>0&&(v[b]=F)}else g[b]=S}),this.syncDiff(c,{joins:g,leaves:v},s,o)}static syncDiff(n,i,s,o){const{joins:c,leaves:p}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(g,v)=>{var b;const S=(b=n[g])!==null&&b!==void 0?b:[];if(n[g]=this.cloneDeep(v),S.length>0){const j=n[g].map(A=>A.presence_ref),O=S.filter(A=>j.indexOf(A.presence_ref)<0);n[g].unshift(...O)}s(g,S,v)}),this.map(p,(g,v)=>{let b=n[g];if(!b)return;const S=v.map(j=>j.presence_ref);b=b.filter(j=>S.indexOf(j.presence_ref)<0),n[g]=b,o(g,b,v),b.length===0&&delete n[g]}),n}static map(n,i){return Object.getOwnPropertyNames(n).map(s=>i(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((i,s)=>{const o=n[s];return"metas"in o?i[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):i[s]=o,i},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var py;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(py||(py={}));var Uo;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Uo||(Uo={}));var Er;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(Er||(Er={}));class fl{constructor(n,i={config:{}},s){var o,c;if(this.topic=n,this.params=i,this.socket=s,this.bindings={},this.state=on.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Xf(this,Oa.join,this.params,this.timeout),this.rejoinTimer=new xv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=on.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(p=>p.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=on.closed,this.socket._remove(this)}),this._onError(p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Oa.reply,{},(p,g)=>{this._trigger(this._replyEventName(g),p)}),this.presence=new zo(this),this.broadcastEndpointURL=_v(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,i=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==on.closed){const{config:{broadcast:p,presence:g,private:v}}=this.params,b=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(A=>A.filter))!==null&&o!==void 0?o:[],S=!!this.bindings[Uo.PRESENCE]&&this.bindings[Uo.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,j={},O={broadcast:p,presence:Object.assign(Object.assign({},g),{enabled:S}),postgres_changes:b,private:v};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(A=>n?.(Er.CHANNEL_ERROR,A)),this._onClose(()=>n?.(Er.CLOSED)),this.updateJoinPayload(Object.assign({config:O},j)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:A})=>{var B;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){n?.(Er.SUBSCRIBED);return}else{const F=this.bindings.postgres_changes,G=(B=F?.length)!==null&&B!==void 0?B:0,ie=[];for(let I=0;I<G;I++){const V=F[I],{filter:{event:me,schema:Ae,table:ce,filter:ae}}=V,Me=A&&A[I];if(Me&&Me.event===me&&fl.isFilterValueEqual(Me.schema,Ae)&&fl.isFilterValueEqual(Me.table,ce)&&fl.isFilterValueEqual(Me.filter,ae))ie.push(Object.assign(Object.assign({},V),{id:Me.id}));else{this.unsubscribe(),this.state=on.errored,n?.(Er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ie,n&&n(Er.SUBSCRIBED);return}}).receive("error",A=>{this.state=on.errored,n?.(Er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{n?.(Er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,i={}){return await this.send({type:"presence",event:"track",payload:n},i.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,i,s){return this.state===on.joined&&n===Uo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,i,s)}async httpSend(n,i,s={}){var o;if(i==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(g.status===202)return{success:!0};let v=g.statusText;try{const b=await g.json();v=b.error||b.message||v}catch{}return Promise.reject(new Error(v))}async send(n,i={}){var s,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:p}=n,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:p,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=b.body)===null||o===void 0?void 0:o.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var p,g,v;const b=this._push(n.type,n,i.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(g=(p=this.params)===null||p===void 0?void 0:p.config)===null||g===void 0?void 0:g.broadcast)===null||v===void 0)&&v.ack)&&c("ok"),b.receive("ok",()=>c("ok")),b.receive("error",()=>c("error")),b.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=on.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Oa.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Xf(this,Oa.leave,{},n),s.receive("ok",()=>{i(),o("ok")}).receive("timeout",()=>{i(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=on.closed,this.bindings={}}async _fetchWithTimeout(n,i,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),p=await this.socket.fetch(n,Object.assign(Object.assign({},i),{signal:o.signal}));return clearTimeout(c),p}_push(n,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Xf(this,n,i,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Aw){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(n,i,s){return i}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,i,s){var o,c;const p=n.toLocaleLowerCase(),{close:g,error:v,leave:b,join:S}=Oa;if(s&&[g,v,b,S].indexOf(p)>=0&&s!==this._joinRef())return;let O=this._onMessage(p,i,s);if(i&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(p)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var B,F,G;return((B=A.filter)===null||B===void 0?void 0:B.event)==="*"||((G=(F=A.filter)===null||F===void 0?void 0:F.event)===null||G===void 0?void 0:G.toLocaleLowerCase())===p}).map(A=>A.callback(O,s)):(c=this.bindings[p])===null||c===void 0||c.filter(A=>{var B,F,G,ie,I,V;if(["broadcast","presence","postgres_changes"].includes(p))if("id"in A){const me=A.id,Ae=(B=A.filter)===null||B===void 0?void 0:B.event;return me&&((F=i.ids)===null||F===void 0?void 0:F.includes(me))&&(Ae==="*"||Ae?.toLocaleLowerCase()===((G=i.data)===null||G===void 0?void 0:G.type.toLocaleLowerCase()))}else{const me=(I=(ie=A?.filter)===null||ie===void 0?void 0:ie.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return me==="*"||me===((V=i?.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===p}).map(A=>{if(typeof O=="object"&&"ids"in O){const B=O.data,{schema:F,table:G,commit_timestamp:ie,type:I,errors:V}=B;O=Object.assign(Object.assign({},{schema:F,table:G,commit_timestamp:ie,eventType:I,new:{},old:{},errors:V}),this._getPayloadRecords(B))}A.callback(O,s)})}_isClosed(){return this.state===on.closed}_isJoined(){return this.state===on.joined}_isJoining(){return this.state===on.joining}_isLeaving(){return this.state===on.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,i,s){const o=n.toLocaleLowerCase(),c={type:o,filter:i,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,i){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&fl.isEqual(o.filter,i))})),this}static isEqual(n,i){if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const s in n)if(n[s]!==i[s])return!1;return!0}static isFilterValueEqual(n,i){return(n??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Oa.close,{},n)}_onError(n){this._on(Oa.error,{},i=>n(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=on.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const i={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(i.new=hy(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(i.old=hy(n.columns,n.old_record)),i}}const Ff=()=>{},fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qw=[1e3,2e3,5e3,1e4],Bw=1e4,Pw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $w{constructor(n,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ff,this.ref=0,this.reconnectTimer=null,this.vsn=fy,this.logger=Ff,this.conn=null,this.sendBuffer=[],this.serializer=new Cw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((s=i?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${n}/${hh.websocket}`,this.httpEndpoint=_v(n),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kw.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const i=n.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const i=await n.unsubscribe();return i==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const n=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,i,s){this.logger(n,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return Zi.Connecting;case pi.open:return Zi.Open;case pi.closing:return Zi.Closing;default:return Zi.Closed}}isConnected(){return this.connectionState()===Zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,i={config:{}}){const s=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new fl(`realtime:${n}`,i,this);return this.channels.push(c),c}}push(n){const{topic:i,event:s,payload:o,ref:c}=n,p=()=>{this.encode(n,g=>{var v;(v=this.conn)===null||v===void 0||v.send(g)})};this.log("push",`${i} ${s} (${c})`,o),this.isConnected()?p():this.sendBuffer.push(p)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Ow,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let i=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${n}"`),i.unsubscribe())}_remove(n){this.channels=this.channels.filter(i=>i.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",b)}catch(S){this.log("error","error in heartbeat callback",S)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:o,payload:c,ref:p}=i,g=p?`(${p})`:"",v=c.status||"";this.log("receive",`${v} ${s} ${o} ${g}`.trim(),c),this.channels.filter(b=>b._isMember(s)).forEach(b=>b._trigger(o,c,p)),this._triggerStateCallbacks("message",i)})}_clearTimer(n){var i;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===pi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pi.open||this.conn.readyState===pi.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var i;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(Oa.error))}_appendParams(n,i){if(Object.keys(i).length===0)return n;const s=n.match(/\?/)?"&":"?",o=new URLSearchParams(i);return`${n}${s}${o}`}_workerObjectUrl(n){let i;if(n)i=n;else{const s=new Blob([Pw],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(n,i=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(n=null){let i,s=!1;if(n)i=n,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const c={access_token:i,version:Nw};i&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(Oa.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${n}`,i)})}_triggerStateCallbacks(n,i){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(i)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new xv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var i,s,o,c,p,g,v,b,S,j,O,A;switch(this.transport=(i=n?.transport)!==null&&i!==void 0?i:null,this.timeout=(s=n?.timeout)!==null&&s!==void 0?s:fh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:fc.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(p=n?.accessToken)!==null&&p!==void 0?p:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:Ff,this.vsn=(v=n?.vsn)!==null&&v!==void 0?v:fy,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=n?.reconnectAfterMs)!==null&&b!==void 0?b:(B=>qw[B-1]||Bw),this.vsn){case Tw:this.encode=(S=n?.encode)!==null&&S!==void 0?S:((B,F)=>F(JSON.stringify(B))),this.decode=(j=n?.decode)!==null&&j!==void 0?j:((B,F)=>F(JSON.parse(B)));break;case bv:this.encode=(O=n?.encode)!==null&&O!==void 0?O:this.serializer.encode.bind(this.serializer),this.decode=(A=n?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Bo=class extends Error{constructor(a,n){super(a),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Hw(a,n,i){const s=new URL(n,a);if(i)for(const[o,c]of Object.entries(i))c!==void 0&&s.searchParams.set(o,c);return s.toString()}async function Kw(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function Iw(a){const n=a.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:o,body:c,headers:p}){const g=Hw(a.baseUrl,s,o),v=await Kw(a.auth),b=await n(g,{method:i,headers:{...c?{"Content-Type":"application/json"}:{},...v,...p},body:c?JSON.stringify(c):void 0}),S=await b.text(),j=(b.headers.get("content-type")||"").includes("application/json"),O=j&&S?JSON.parse(S):S;if(!b.ok){const A=j?O:void 0,B=A?.error;throw new Bo(B?.message??`Request failed with status ${b.status}`,{status:b.status,icebergType:B?.type,icebergCode:B?.code,details:A})}return{status:b.status,headers:b.headers,data:O}}}}function hc(a){return a.join("")}var Gw=class{constructor(a,n=""){this.client=a,this.prefix=n}async listNamespaces(a){const n=a?{parent:hc(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(a,n){const i={namespace:a.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hc(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hc(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hc(a.namespace)}`}),!0}catch(n){if(n instanceof Bo&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(a,n){try{return await this.createNamespace(a,n)}catch(i){if(i instanceof Bo&&i.status===409)return;throw i}}};function tl(a){return a.join("")}var Vw=class{constructor(a,n="",i){this.client=a,this.prefix=n,this.accessDelegation=i}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tl(a.namespace)}/tables`})).data.identifiers}async createTable(a,n){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tl(a.namespace)}/tables`,body:n,headers:i})).data.metadata}async updateTable(a,n){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${tl(a.namespace)}/tables/${a.name}`,body:n});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(a,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tl(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tl(a.namespace)}/tables/${a.name}`,headers:n})).data.metadata}async tableExists(a){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tl(a.namespace)}/tables/${a.name}`,headers:n}),!0}catch(i){if(i instanceof Bo&&i.status===404)return!1;throw i}}async createTableIfNotExists(a,n){try{return await this.createTable(a,n)}catch(i){if(i instanceof Bo&&i.status===409)return await this.loadTable({namespace:a.namespace,name:n.name});throw i}}},Yw=class{constructor(a){let n="v1";a.catalogName&&(n+=`/${a.catalogName}`);const i=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=Iw({baseUrl:i,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new Gw(this.client,n),this.tableOps=new Vw(this.client,n,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,n){return this.namespaceOps.createNamespace(a,n)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,n){return this.tableOps.createTable(a,n)}async updateTable(a,n){return this.tableOps.updateTable(a,n)}async dropTable(a,n){await this.tableOps.dropTable(a,n)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,n){return this.namespaceOps.createNamespaceIfNotExists(a,n)}async createTableIfNotExists(a,n){return this.tableOps.createTableIfNotExists(a,n)}},qc=class extends Error{constructor(a,n="storage",i,s){super(a),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=s}};function Bc(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var mc=class extends qc{constructor(a,n,i,s="storage"){super(a,s,n,i),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Sv=class extends qc{constructor(a,n,i="storage"){super(a,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const Ww=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),Qw=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},ph=a=>{if(Array.isArray(a))return a.map(i=>ph(i));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([i,s])=>{const o=i.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=ph(s)}),n},Xw=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function Po(a){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Po(a)}function Fw(a,n){if(Po(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var s=i.call(a,n);if(Po(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Jw(a){var n=Fw(a,"string");return Po(n)=="symbol"?n:n+""}function Zw(a,n,i){return(n=Jw(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}function gy(a,n){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,s)}return i}function Ye(a){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?gy(Object(i),!0).forEach(function(s){Zw(a,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):gy(Object(i)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(i,s))})}return a}const yy=a=>{var n;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(n=a.error)===null||n===void 0?void 0:n.message)||JSON.stringify(a)},e_=async(a,n,i,s)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!i?.noResolveJson){const o=a,c=o.status||500;if(typeof o.json=="function")o.json().then(p=>{const g=p?.statusCode||p?.code||c+"";n(new mc(yy(p),c,g,s))}).catch(()=>{if(s==="vectors"){const p=c+"";n(new mc(o.statusText||`HTTP ${c} error`,c,p,s))}else{const p=c+"";n(new mc(o.statusText||`HTTP ${c} error`,c,p,s))}});else{const p=c+"";n(new mc(o.statusText||`HTTP ${c} error`,c,p,s))}}else n(new Sv(yy(a),a,s))},t_=(a,n,i,s)=>{const o={method:a,headers:n?.headers||{}};return a==="GET"||a==="HEAD"||!s?Ye(Ye({},o),i):(Qw(s)?(o.headers=Ye({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,n?.duplex&&(o.duplex=n.duplex),Ye(Ye({},o),i))};async function Ao(a,n,i,s,o,c,p){return new Promise((g,v)=>{a(i,t_(n,s,o,c)).then(b=>{if(!b.ok)throw b;if(s?.noResolveJson)return b;if(p==="vectors"){const S=b.headers.get("content-type");if(b.headers.get("content-length")==="0"||b.status===204)return{};if(!S||!S.includes("application/json"))return{}}return b.json()}).then(b=>g(b)).catch(b=>e_(b,v,s,p))})}function jv(a="storage"){return{get:async(n,i,s,o)=>Ao(n,"GET",i,s,o,void 0,a),post:async(n,i,s,o,c)=>Ao(n,"POST",i,o,c,s,a),put:async(n,i,s,o,c)=>Ao(n,"PUT",i,o,c,s,a),head:async(n,i,s,o)=>Ao(n,"HEAD",i,Ye(Ye({},s),{},{noResolveJson:!0}),o,void 0,a),remove:async(n,i,s,o,c)=>Ao(n,"DELETE",i,o,c,s,a)}}const n_=jv("storage"),{get:$o,post:Ta,put:gh,head:a_,remove:zh}=n_,ea=jv("vectors");var wl=class{constructor(a,n={},i,s="storage"){this.shouldThrowOnError=!1,this.url=a,this.headers=n,this.fetch=Ww(i),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(a){var n=this;try{return{data:await a(),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Bc(i))return{data:null,error:i};throw i}}},r_=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n}then(a,n){return this.execute().then(a,n)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Bc(n))return{data:null,error:n};throw n}}};let kv;kv=Symbol.toStringTag;var i_=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n,this[kv]="BlobDownloadBuilder",this.promise=null}asStream(){return new r_(this.downloadFn,this.shouldThrowOnError)}then(a,n){return this.getPromise().then(a,n)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Bc(n))return{data:null,error:n};throw n}}};const s_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var l_=class extends wl{constructor(a,n={},i,s){super(a,n,s,"storage"),this.bucketId=i}async uploadOrUpdate(a,n,i,s){var o=this;return o.handleOperation(async()=>{let c;const p=Ye(Ye({},vy),s);let g=Ye(Ye({},o.headers),a==="POST"&&{"x-upsert":String(p.upsert)});const v=p.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",p.cacheControl),v&&c.append("metadata",o.encodeMetadata(v)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.has("cacheControl")||c.append("cacheControl",p.cacheControl),v&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(v))):(c=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType,v&&(g["x-metadata"]=o.toBase64(o.encodeMetadata(v))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!p.duplex&&(p.duplex="half")),s?.headers&&(g=Ye(Ye({},g),s.headers));const b=o._removeEmptyFolders(n),S=o._getFinalPath(b),j=await(a=="PUT"?gh:Ta)(o.fetch,`${o.url}/object/${S}`,c,Ye({headers:g},p?.duplex?{duplex:p.duplex}:{}));return{path:b,id:j.Id,fullPath:j.Key}})}async upload(a,n,i){return this.uploadOrUpdate("POST",a,n,i)}async uploadToSignedUrl(a,n,i,s){var o=this;const c=o._removeEmptyFolders(a),p=o._getFinalPath(c),g=new URL(o.url+`/object/upload/sign/${p}`);return g.searchParams.set("token",n),o.handleOperation(async()=>{let v;const b=Ye({upsert:vy.upsert},s),S=Ye(Ye({},o.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&i instanceof Blob?(v=new FormData,v.append("cacheControl",b.cacheControl),v.append("",i)):typeof FormData<"u"&&i instanceof FormData?(v=i,v.append("cacheControl",b.cacheControl)):(v=i,S["cache-control"]=`max-age=${b.cacheControl}`,S["content-type"]=b.contentType),{path:c,fullPath:(await gh(o.fetch,g.toString(),v,{headers:S})).Key}})}async createSignedUploadUrl(a,n){var i=this;return i.handleOperation(async()=>{let s=i._getFinalPath(a);const o=Ye({},i.headers);n?.upsert&&(o["x-upsert"]="true");const c=await Ta(i.fetch,`${i.url}/object/upload/sign/${s}`,{},{headers:o}),p=new URL(i.url+c.url),g=p.searchParams.get("token");if(!g)throw new qc("No token returned by API");return{signedUrl:p.toString(),path:a,token:g}})}async update(a,n,i){return this.uploadOrUpdate("PUT",a,n,i)}async move(a,n,i){var s=this;return s.handleOperation(async()=>await Ta(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:a,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:s.headers}))}async copy(a,n,i){var s=this;return s.handleOperation(async()=>({path:(await Ta(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:a,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(a,n,i){var s=this;return s.handleOperation(async()=>{let o=s._getFinalPath(a),c=await Ta(s.fetch,`${s.url}/object/sign/${o}`,Ye({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:s.headers});const p=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${s.url}${c.signedURL}${p}`)}})}async createSignedUrls(a,n,i){var s=this;return s.handleOperation(async()=>{const o=await Ta(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:a},{headers:s.headers}),c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o.map(p=>Ye(Ye({},p),{},{signedUrl:p.signedURL?encodeURI(`${s.url}${p.signedURL}${c}`):null}))})}download(a,n,i){const s=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",p=this._getFinalPath(a),g=()=>$o(this.fetch,`${this.url}/${s}/${p}${c}`,{headers:this.headers,noResolveJson:!0},i);return new i_(g,this.shouldThrowOnError)}async info(a){var n=this;const i=n._getFinalPath(a);return n.handleOperation(async()=>ph(await $o(n.fetch,`${n.url}/object/info/${i}`,{headers:n.headers})))}async exists(a){var n=this;const i=n._getFinalPath(a);try{return await a_(n.fetch,`${n.url}/object/${i}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Bc(s)&&s instanceof Sv){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}}getPublicUrl(a,n){const i=this._getFinalPath(a),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const c=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&s.push(p);let g=s.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${g}`)}}}async remove(a){var n=this;return n.handleOperation(async()=>await zh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:a},{headers:n.headers}))}async list(a,n,i){var s=this;return s.handleOperation(async()=>{const o=Ye(Ye(Ye({},s_),n),{},{prefix:a||""});return await Ta(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},i)})}async listV2(a,n){var i=this;return i.handleOperation(async()=>{const s=Ye({},a);return await Ta(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,s,{headers:i.headers},n)})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}};const o_="2.95.3",Wo={"X-Client-Info":`storage-js/${o_}`};var u_=class extends wl{constructor(a,n={},i,s){const o=new URL(a);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),p=Ye(Ye({},Wo),n);super(c,p,i,"storage")}async listBuckets(a){var n=this;return n.handleOperation(async()=>{const i=n.listBucketOptionsToQueryString(a);return await $o(n.fetch,`${n.url}/bucket${i}`,{headers:n.headers})})}async getBucket(a){var n=this;return n.handleOperation(async()=>await $o(n.fetch,`${n.url}/bucket/${a}`,{headers:n.headers}))}async createBucket(a,n={public:!1}){var i=this;return i.handleOperation(async()=>await Ta(i.fetch,`${i.url}/bucket`,{id:a,name:a,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}))}async updateBucket(a,n){var i=this;return i.handleOperation(async()=>await gh(i.fetch,`${i.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(a){var n=this;return n.handleOperation(async()=>await Ta(n.fetch,`${n.url}/bucket/${a}/empty`,{},{headers:n.headers}))}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await zh(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(a){const n={};return a&&("limit"in a&&(n.limit=String(a.limit)),"offset"in a&&(n.offset=String(a.offset)),a.search&&(n.search=a.search),a.sortColumn&&(n.sortColumn=a.sortColumn),a.sortOrder&&(n.sortOrder=a.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},c_=class extends wl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Ye(Ye({},Wo),n);super(s,o,i,"storage")}async createBucket(a){var n=this;return n.handleOperation(async()=>await Ta(n.fetch,`${n.url}/bucket`,{name:a},{headers:n.headers}))}async listBuckets(a){var n=this;return n.handleOperation(async()=>{const i=new URLSearchParams;a?.limit!==void 0&&i.set("limit",a.limit.toString()),a?.offset!==void 0&&i.set("offset",a.offset.toString()),a?.sortColumn&&i.set("sortColumn",a.sortColumn),a?.sortOrder&&i.set("sortOrder",a.sortOrder),a?.search&&i.set("search",a.search);const s=i.toString(),o=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return await $o(n.fetch,o,{headers:n.headers})})}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await zh(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}))}from(a){var n=this;if(!Xw(a))throw new qc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new Yw({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(o,c){const p=o[c];return typeof p!="function"?p:async(...g)=>{try{return{data:await p.apply(o,g),error:null}}catch(v){if(s)throw v;return{data:null,error:v}}}}})}},d_=class extends wl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Ye(Ye({},Wo),{},{"Content-Type":"application/json"},n);super(s,o,i,"vectors")}async createIndex(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/CreateIndex`,a,{headers:n.headers})||{})}async getIndex(a,n){var i=this;return i.handleOperation(async()=>await ea.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:a,indexName:n},{headers:i.headers}))}async listIndexes(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/ListIndexes`,a,{headers:n.headers}))}async deleteIndex(a,n){var i=this;return i.handleOperation(async()=>await ea.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:a,indexName:n},{headers:i.headers})||{})}},f_=class extends wl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Ye(Ye({},Wo),{},{"Content-Type":"application/json"},n);super(s,o,i,"vectors")}async putVectors(a){var n=this;if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/PutVectors`,a,{headers:n.headers})||{})}async getVectors(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/GetVectors`,a,{headers:n.headers}))}async listVectors(a){var n=this;if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/ListVectors`,a,{headers:n.headers}))}async queryVectors(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/QueryVectors`,a,{headers:n.headers}))}async deleteVectors(a){var n=this;if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/DeleteVectors`,a,{headers:n.headers})||{})}},h_=class extends wl{constructor(a,n={},i){const s=a.replace(/\/$/,""),o=Ye(Ye({},Wo),{},{"Content-Type":"application/json"},n);super(s,o,i,"vectors")}async createBucket(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{})}async getBucket(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:a},{headers:n.headers}))}async listBuckets(a={}){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/ListVectorBuckets`,a,{headers:n.headers}))}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await ea.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{})}},m_=class extends h_{constructor(a,n={}){super(a,n.headers||{},n.fetch)}from(a){return new p_(this.url,this.headers,a,this.fetch)}async createBucket(a){var n=()=>super.createBucket,i=this;return n().call(i,a)}async getBucket(a){var n=()=>super.getBucket,i=this;return n().call(i,a)}async listBuckets(a={}){var n=()=>super.listBuckets,i=this;return n().call(i,a)}async deleteBucket(a){var n=()=>super.deleteBucket,i=this;return n().call(i,a)}},p_=class extends d_{constructor(a,n,i,s){super(a,n,s),this.vectorBucketName=i}async createIndex(a){var n=()=>super.createIndex,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(a={}){var n=()=>super.listIndexes,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(a){var n=()=>super.getIndex,i=this;return n().call(i,i.vectorBucketName,a)}async deleteIndex(a){var n=()=>super.deleteIndex,i=this;return n().call(i,i.vectorBucketName,a)}index(a){return new g_(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},g_=class extends f_{constructor(a,n,i,s,o){super(a,n,o),this.vectorBucketName=i,this.indexName=s}async putVectors(a){var n=()=>super.putVectors,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(a){var n=()=>super.getVectors,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(a={}){var n=()=>super.listVectors,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(a){var n=()=>super.queryVectors,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(a){var n=()=>super.deleteVectors,i=this;return n().call(i,Ye(Ye({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},y_=class extends u_{constructor(a,n={},i,s){super(a,n,i,s)}from(a){return new l_(this.url,this.headers,a,this.fetch)}get vectors(){return new m_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new c_(this.url+"/iceberg",this.headers,this.fetch)}};const Ev="2.95.3",cl=30*1e3,yh=3,Jf=yh*cl,v_="http://localhost:9999",b_="supabase.auth.token",x_={"X-Client-Info":`gotrue-js/${Ev}`},vh="X-Supabase-Api-Version",Nv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},w_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,__=600*1e3;class Ho extends Error{constructor(n,i,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function Le(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class S_ extends Ho{constructor(n,i,s){super(n,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function j_(a){return Le(a)&&a.name==="AuthApiError"}class es extends Ho{constructor(n,i){super(n),this.name="AuthUnknownError",this.originalError=i}}class Cr extends Ho{constructor(n,i,s,o){super(n,s,o),this.name=i,this.status=s}}class Zn extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zf(a){return Le(a)&&a.name==="AuthSessionMissingError"}class nl extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pc extends Cr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class gc extends Cr{constructor(n,i=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function k_(a){return Le(a)&&a.name==="AuthImplicitGrantRedirectError"}class by extends Cr{constructor(n,i=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class E_ extends Cr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bh extends Cr{constructor(n,i){super(n,"AuthRetryableFetchError",i,void 0)}}function eh(a){return Le(a)&&a.name==="AuthRetryableFetchError"}class xy extends Cr{constructor(n,i,s){super(n,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class xh extends Cr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wy=` 	
\r=`.split(""),N_=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<wy.length;n+=1)a[wy[n].charCodeAt(0)]=-2;for(let n=0;n<Oc.length;n+=1)a[Oc[n].charCodeAt(0)]=n;return a})();function _y(a,n,i){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;i(Oc[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;i(Oc[s]),n.queuedBits-=6}}function Tv(a,n,i){const s=N_[a];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)i(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Sy(a){const n=[],i=p=>{n.push(String.fromCodePoint(p))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=p=>{A_(p,s,i)};for(let p=0;p<a.length;p+=1)Tv(a.charCodeAt(p),o,c);return n.join("")}function T_(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function O_(a,n){for(let i=0;i<a.length;i+=1){let s=a.charCodeAt(i);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(a.charCodeAt(i+1)-56320&65535|o)+65536,i+=1}T_(s,n)}}function A_(a,n,i){if(n.utf8seq===0){if(a<=127){i(a);return}for(let s=1;s<6;s+=1)if((a>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&i(n.codepoint)}}function ml(a){const n=[],i={queue:0,queuedBits:0},s=o=>{n.push(o)};for(let o=0;o<a.length;o+=1)Tv(a.charCodeAt(o),i,s);return new Uint8Array(n)}function C_(a){const n=[];return O_(a,i=>n.push(i)),new Uint8Array(n)}function ns(a){const n=[],i={queue:0,queuedBits:0},s=o=>{n.push(o)};return a.forEach(o=>_y(o,i,s)),_y(null,i,s),n.join("")}function R_(a){return Math.round(Date.now()/1e3)+a}function M_(){return Symbol("auth-callback")}const Sn=()=>typeof window<"u"&&typeof document<"u",Qi={tested:!1,writable:!1},Ov=()=>{if(!Sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qi.tested)return Qi.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Qi.tested=!0,Qi.writable=!0}catch{Qi.tested=!0,Qi.writable=!1}return Qi.writable};function D_(a){const n={},i=new URL(a);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return i.searchParams.forEach((s,o)=>{n[o]=s}),n}const Av=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),z_=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",dl=async(a,n,i)=>{await a.setItem(n,JSON.stringify(i))},Xi=async(a,n)=>{const i=await a.getItem(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}},_n=async(a,n)=>{await a.removeItem(n)};class Pc{constructor(){this.promise=new Pc.promiseConstructor((n,i)=>{this.resolve=n,this.reject=i})}}Pc.promiseConstructor=Promise;function yc(a){const n=a.split(".");if(n.length!==3)throw new xh("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!w_.test(n[s]))throw new xh("JWT not in base64url format");return{header:JSON.parse(Sy(n[0])),payload:JSON.parse(Sy(n[1])),signature:ml(n[2]),raw:{header:n[0],payload:n[1]}}}async function U_(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function L_(a,n){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const p=await a(c);if(!n(c,null,p)){s(p);return}}catch(p){if(!n(c,p)){o(p);return}}})()})}function q_(a){return("0"+a.toString(16)).substr(-2)}function B_(){const n=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let o="";for(let c=0;c<56;c++)o+=i.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(n),Array.from(n,q_).join("")}async function P_(a){const i=new TextEncoder().encode(a),s=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function $_(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const i=await P_(a);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function al(a,n,i=!1){const s=B_();let o=s;i&&(o+="/PASSWORD_RECOVERY"),await dl(a,`${n}-code-verifier`,o);const c=await $_(s);return[c,s===c?"plain":"s256"]}const H_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K_(a){const n=a.headers.get(vh);if(!n||!n.match(H_))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function I_(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function G_(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const V_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rl(a){if(!V_.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function th(){const a={};return new Proxy(a,{get:(n,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Y_(a,n){return new Proxy(a,{get:(i,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const c=s.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,o)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(i,s,o)}})}function jy(a){return JSON.parse(JSON.stringify(a))}const Fi=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),W_=[502,503,504];async function ky(a){var n;if(!z_(a))throw new bh(Fi(a),0);if(W_.includes(a.status))throw new bh(Fi(a),a.status);let i;try{i=await a.json()}catch(c){throw new es(Fi(c),c)}let s;const o=K_(a);if(o&&o.getTime()>=Nv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new xy(Fi(i),a.status,((n=i.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Zn}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((c,p)=>c&&typeof p=="string",!0))throw new xy(Fi(i),a.status,i.weak_password.reasons);throw new S_(Fi(i),a.status||500,s)}const Q_=(a,n,i,s)=>{const o={method:a,headers:n?.headers||{}};return a==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),i))};async function Ve(a,n,i,s){var o;const c=Object.assign({},s?.headers);c[vh]||(c[vh]=Nv["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const p=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(p.redirect_to=s.redirectTo);const g=Object.keys(p).length?"?"+new URLSearchParams(p).toString():"",v=await X_(a,n,i+g,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(v):{data:Object.assign({},v),error:null}}async function X_(a,n,i,s,o,c){const p=Q_(n,s,o,c);let g;try{g=await a(i,Object.assign({},p))}catch(v){throw console.error(v),new bh(Fi(v),0)}if(g.ok||await ky(g),s?.noResolveJson)return g;try{return await g.json()}catch(v){await ky(v)}}function Na(a){var n;let i=null;Z_(a)&&(i=Object.assign({},a),a.expires_at||(i.expires_at=R_(a.expires_in)));const s=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:i,user:s},error:null}}function Ey(a){const n=Na(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(n.data.weak_password=a.weak_password),n}function gi(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function F_(a){return{data:a,error:null}}function J_(a){const{action_link:n,email_otp:i,hashed_token:s,redirect_to:o,verification_type:c}=a,p=Lc(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:i,hashed_token:s,redirect_to:o,verification_type:c},v=Object.assign({},p);return{data:{properties:g,user:v},error:null}}function Ny(a){return a}function Z_(a){return a.access_token&&a.refresh_token&&a.expires_in}const nh=["global","local","others"];class e1{constructor({url:n="",headers:i={},fetch:s}){this.url=n,this.headers=i,this.fetch=Av(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,i=nh[0]){if(nh.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nh.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,i={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:gi})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:i}=n,s=Lc(n,["options"]),o=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:J_,redirectTo:i?.redirectTo})}catch(i){if(Le(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(n){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:gi})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async listUsers(n){var i,s,o,c,p,g,v;try{const b={nextPage:null,lastPage:0,total:0},S=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Ny});if(S.error)throw S.error;const j=await S.json(),O=(p=S.headers.get("x-total-count"))!==null&&p!==void 0?p:0,A=(v=(g=S.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return A.length>0&&(A.forEach(B=>{const F=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),G=JSON.parse(B.split(";")[1].split("=")[1]);b[`${G}Page`]=F}),b.total=parseInt(O)),{data:Object.assign(Object.assign({},j),b),error:null}}catch(b){if(Le(b))return{data:{users:[]},error:b};throw b}}async getUserById(n){rl(n);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:gi})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async updateUserById(n,i){rl(n);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:i,headers:this.headers,xform:gi})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,i=!1){rl(n);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:i},xform:gi})}catch(s){if(Le(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){rl(n.userId);try{const{data:i,error:s}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:i,error:s}}catch(i){if(Le(i))return{data:null,error:i};throw i}}async _deleteFactor(n){rl(n.userId),rl(n.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}}async _listOAuthClients(n){var i,s,o,c,p,g,v;try{const b={nextPage:null,lastPage:0,total:0},S=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Ny});if(S.error)throw S.error;const j=await S.json(),O=(p=S.headers.get("x-total-count"))!==null&&p!==void 0?p:0,A=(v=(g=S.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return A.length>0&&(A.forEach(B=>{const F=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),G=JSON.parse(B.split(";")[1].split("=")[1]);b[`${G}Page`]=F}),b.total=parseInt(O)),{data:Object.assign(Object.assign({},j),b),error:null}}catch(b){if(Le(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(n){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Le(i))return{data:null,error:i};throw i}}async _getOAuthClient(n){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Le(i))return{data:null,error:i};throw i}}async _updateOAuthClient(n,i){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Le(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(n){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Le(i))return{data:null,error:i};throw i}}}function Ty(a={}){return{getItem:n=>a[n]||null,setItem:(n,i)=>{a[n]=i},removeItem:n=>{delete a[n]}}}const il={debug:!!(globalThis&&Ov()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Cv extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class t1 extends Cv{}async function n1(a,n,i){il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,o.name);try{return await i()}finally{il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,o.name)}}else{if(n===0)throw il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new t1(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(il.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function a1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rv(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function r1(a){return parseInt(a,16)}function i1(a){const n=new TextEncoder().encode(a);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function s1(a){var n;const{chainId:i,domain:s,expirationTime:o,issuedAt:c=new Date,nonce:p,notBefore:g,requestId:v,resources:b,scheme:S,uri:j,version:O}=a;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(p&&p.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${p}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(O!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${O}`);if(!((n=a.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const A=Rv(a.address),B=S?`${S}://${s}`:s,F=a.statement?`${a.statement}
`:"",G=`${B} wants you to sign in with your Ethereum account:
${A}

${F}`;let ie=`URI: ${j}
Version: ${O}
Chain ID: ${i}${p?`
Nonce: ${p}`:""}
Issued At: ${c.toISOString()}`;if(o&&(ie+=`
Expiration Time: ${o.toISOString()}`),g&&(ie+=`
Not Before: ${g.toISOString()}`),v&&(ie+=`
Request ID: ${v}`),b){let I=`
Resources:`;for(const V of b){if(!V||typeof V!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${V}`);I+=`
- ${V}`}ie+=I}return`${G}
${ie}`}class tn extends Error{constructor({message:n,code:i,cause:s,name:o}){var c;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(c=o??(s instanceof Error?s.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=i}}class Ac extends tn{constructor(n,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:n}),this.name="WebAuthnUnknownError",this.originalError=i}}function l1({error:a,options:n}){var i,s,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new tn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((i=c.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new tn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(n.mediation==="conditional"&&((s=c.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new tn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new tn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new tn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new tn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return c.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new tn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new tn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const p=window.location.hostname;if(Mv(p)){if(c.rp.id!==p)return new tn({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new tn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new tn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function o1({error:a,options:n}){const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new tn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new tn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const s=window.location.hostname;if(Mv(s)){if(i.rpId!==s)return new tn({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new tn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new tn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new tn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class u1{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const c1=new u1;function d1(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:n,user:i,excludeCredentials:s}=a,o=Lc(a,["challenge","user","excludeCredentials"]),c=ml(n).buffer,p=Object.assign(Object.assign({},i),{id:ml(i.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:c,user:p});if(s&&s.length>0){g.excludeCredentials=new Array(s.length);for(let v=0;v<s.length;v++){const b=s[v];g.excludeCredentials[v]=Object.assign(Object.assign({},b),{id:ml(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return g}function f1(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:n,allowCredentials:i}=a,s=Lc(a,["challenge","allowCredentials"]),o=ml(n).buffer,c=Object.assign(Object.assign({},s),{challenge:o});if(i&&i.length>0){c.allowCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const g=i[p];c.allowCredentials[p]=Object.assign(Object.assign({},g),{id:ml(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return c}function h1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a;return{id:a.id,rawId:a.id,response:{attestationObject:ns(new Uint8Array(a.response.attestationObject)),clientDataJSON:ns(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function m1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a,s=a.getClientExtensionResults(),o=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:ns(new Uint8Array(o.authenticatorData)),clientDataJSON:ns(new Uint8Array(o.clientDataJSON)),signature:ns(new Uint8Array(o.signature)),userHandle:o.userHandle?ns(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Mv(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function Oy(){var a,n;return!!(Sn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function p1(a){try{const n=await navigator.credentials.create(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",n)}:{data:null,error:new Ac("Empty credential response",n)}}catch(n){return{data:null,error:l1({error:n,options:a})}}}async function g1(a){try{const n=await navigator.credentials.get(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",n)}:{data:null,error:new Ac("Empty credential response",n)}}catch(n){return{data:null,error:o1({error:n,options:a})}}}const y1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},v1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cc(...a){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),i=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of a)if(o)for(const c in o){const p=o[c];if(p!==void 0)if(Array.isArray(p))s[c]=p;else if(i(p))s[c]=p;else if(n(p)){const g=s[c];n(g)?s[c]=Cc(g,p):s[c]=Cc(p)}else s[c]=p}return s}function b1(a,n){return Cc(y1,a,n||{})}function x1(a,n){return Cc(v1,a,n||{})}class w1{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:i,friendlyName:s,signal:o},c){var p;try{const{data:g,error:v}=await this.client.mfa.challenge({factorId:n,webauthn:i});if(!g)return{data:null,error:v};const b=o??c1.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:S}=g.webauthn.credential_options.publicKey;if(!S.name){const j=s;if(j)S.name=`${S.id}:${j}`;else{const A=(await this.client.getUser()).data.user,B=((p=A?.user_metadata)===null||p===void 0?void 0:p.name)||A?.email||A?.id||"User";S.name=`${S.id}:${B}`}}S.displayName||(S.displayName=S.name)}switch(g.webauthn.type){case"create":{const S=b1(g.webauthn.credential_options.publicKey,c?.create),{data:j,error:O}=await p1({publicKey:S,signal:b});return j?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:j}},error:null}:{data:null,error:O}}case"request":{const S=x1(g.webauthn.credential_options.publicKey,c?.request),{data:j,error:O}=await g1(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:S,signal:b}));return j?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:j}},error:null}:{data:null,error:O}}}}catch(g){return Le(g)?{data:null,error:g}:{data:null,error:new es("Unexpected error in challenge",g)}}}async _verify({challengeId:n,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new Ho("rpId is required for WebAuthn authentication")};try{if(!Oy())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:p,error:g}=await this.challenge({factorId:n,webauthn:{rpId:i,rpOrigins:s},signal:o},{request:c});if(!p)return{data:null,error:g};const{webauthn:v}=p;return this._verify({factorId:n,challengeId:p.challengeId,webauthn:{type:v.type,rpId:i,rpOrigins:s,credential_response:v.credential_response}})}catch(p){return Le(p)?{data:null,error:p}:{data:null,error:new es("Unexpected error in authenticate",p)}}}async _register({friendlyName:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new Ho("rpId is required for WebAuthn registration")};try{if(!Oy())return{data:null,error:new es("Browser does not support WebAuthn",null)};const{data:p,error:g}=await this._enroll({friendlyName:n});if(!p)return await this.client.mfa.listFactors().then(S=>{var j;return(j=S.data)===null||j===void 0?void 0:j.all.find(O=>O.factor_type==="webauthn"&&O.friendly_name===n&&O.status!=="unverified")}).then(S=>S?this.client.mfa.unenroll({factorId:S?.id}):void 0),{data:null,error:g};const{data:v,error:b}=await this._challenge({factorId:p.id,friendlyName:p.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:o},{create:c});return v?this._verify({factorId:p.id,challengeId:v.challengeId,webauthn:{rpId:i,rpOrigins:s,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:b}}catch(p){return Le(p)?{data:null,error:p}:{data:null,error:new es("Unexpected error in register",p)}}}}a1();const _1={url:v_,storageKey:b_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:x_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ay(a,n,i){return await i()}const sl={};class Ko{get jwks(){var n,i;return(i=(n=sl[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(n){sl[this.storageKey]=Object.assign(Object.assign({},sl[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,i;return(i=(n=sl[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){sl[this.storageKey]=Object.assign(Object.assign({},sl[this.storageKey]),{cachedAt:n})}constructor(n){var i,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},_1),n);if(this.storageKey=c.storageKey,this.instanceID=(i=Ko.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Ko.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Sn()){const p=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(p),this.logDebugMessages&&console.trace(p)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new e1({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Av(c.fetch),this.lock=c.lock||Ay,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&Sn()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=n1:this.lock=Ay,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new w1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Ov()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ty(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Ty(this.memoryStorage)),Sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(p){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",p)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async p=>{this._debug("received broadcast notification from other tab or client",p);try{await this._notifyAllSubscribers(p.data.event,p.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}this.initialize().catch(p=>{this._debug("#initialize()","error",p)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ev}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let i={},s="none";if(Sn()&&(i=D_(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),Sn()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(i,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),k_(c)){const v=(n=c.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:p,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",p,"redirect type",g),await this._saveSession(p),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",p):await this._notifyAllSubscribers("SIGNED_IN",p)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return Le(i)?this._returnResult({error:i}):this._returnResult({error:new es("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var i,s,o;try{const c=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=n?.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Na}),{data:p,error:g}=c;if(g||!p)return this._returnResult({data:{user:null,session:null},error:g});const v=p.session,b=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(c){if(Le(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var i,s,o;try{let c;if("email"in n){const{email:S,password:j,options:O}=n;let A=null,B=null;this.flowType==="pkce"&&([A,B]=await al(this.storage,this.storageKey)),c=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O?.emailRedirectTo,body:{email:S,password:j,data:(i=O?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:O?.captchaToken},code_challenge:A,code_challenge_method:B},xform:Na})}else if("phone"in n){const{phone:S,password:j,options:O}=n;c=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:j,data:(s=O?.data)!==null&&s!==void 0?s:{},channel:(o=O?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:O?.captchaToken}},xform:Na})}else throw new pc("You must provide either an email or phone number and a password");const{data:p,error:g}=c;if(g||!p)return await _n(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const v=p.session,b=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(c){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let i;if("email"in n){const{email:c,password:p,options:g}=n;i=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ey})}else if("phone"in n){const{phone:c,password:p,options:g}=n;i=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:p,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ey})}else throw new pc("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const c=new nl;return this._returnResult({data:{user:null,session:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(i){if(Le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(n){var i,s,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(i=n.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:i}=n;switch(i){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(n){var i,s,o,c,p,g,v,b,S,j,O;let A,B;if("message"in n)A=n.message,B=n.signature;else{const{chain:F,wallet:G,statement:ie,options:I}=n;let V;if(Sn())if(typeof G=="object")V=G;else{const He=window;if("ethereum"in He&&typeof He.ethereum=="object"&&"request"in He.ethereum&&typeof He.ethereum.request=="function")V=He.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=G}const me=new URL((i=I?.url)!==null&&i!==void 0?i:window.location.href),Ae=await V.request({method:"eth_requestAccounts"}).then(He=>He).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ae||Ae.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ce=Rv(Ae[0]);let ae=(s=I?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!ae){const He=await V.request({method:"eth_chainId"});ae=r1(He)}const Me={domain:me.host,address:ce,statement:ie,uri:me.href,version:"1",chainId:ae,nonce:(o=I?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(p=(c=I?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&p!==void 0?p:new Date,expirationTime:(g=I?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(v=I?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(b=I?.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(S=I?.signInWithEthereum)===null||S===void 0?void 0:S.resources};A=s1(Me),B=await V.request({method:"personal_sign",params:[i1(A),ce]})}try{const{data:F,error:G}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:B},!((j=n.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(O=n.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:Na});if(G)throw G;if(!F||!F.session||!F.user){const ie=new nl;return this._returnResult({data:{user:null,session:null},error:ie})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:G})}catch(F){if(Le(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async signInWithSolana(n){var i,s,o,c,p,g,v,b,S,j,O,A;let B,F;if("message"in n)B=n.message,F=n.signature;else{const{chain:G,wallet:ie,statement:I,options:V}=n;let me;if(Sn())if(typeof ie=="object")me=ie;else{const ce=window;if("solana"in ce&&typeof ce.solana=="object"&&("signIn"in ce.solana&&typeof ce.solana.signIn=="function"||"signMessage"in ce.solana&&typeof ce.solana.signMessage=="function"))me=ce.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ie!="object"||!V?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");me=ie}const Ae=new URL((i=V?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in me&&me.signIn){const ce=await me.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},V?.signInWithSolana),{version:"1",domain:Ae.host,uri:Ae.href}),I?{statement:I}:null));let ae;if(Array.isArray(ce)&&ce[0]&&typeof ce[0]=="object")ae=ce[0];else if(ce&&typeof ce=="object"&&"signedMessage"in ce&&"signature"in ce)ae=ce;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ae&&"signature"in ae&&(typeof ae.signedMessage=="string"||ae.signedMessage instanceof Uint8Array)&&ae.signature instanceof Uint8Array)B=typeof ae.signedMessage=="string"?ae.signedMessage:new TextDecoder().decode(ae.signedMessage),F=ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in me)||typeof me.signMessage!="function"||!("publicKey"in me)||typeof me!="object"||!me.publicKey||!("toBase58"in me.publicKey)||typeof me.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");B=[`${Ae.host} wants you to sign in with your Solana account:`,me.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${Ae.href}`,`Issued At: ${(o=(s=V?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=V?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${V.signInWithSolana.notBefore}`]:[],...!((p=V?.signInWithSolana)===null||p===void 0)&&p.expirationTime?[`Expiration Time: ${V.signInWithSolana.expirationTime}`]:[],...!((g=V?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${V.signInWithSolana.chainId}`]:[],...!((v=V?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${V.signInWithSolana.nonce}`]:[],...!((b=V?.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${V.signInWithSolana.requestId}`]:[],...!((j=(S=V?.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||j===void 0)&&j.length?["Resources",...V.signInWithSolana.resources.map(ae=>`- ${ae}`)]:[]].join(`
`);const ce=await me.signMessage(new TextEncoder().encode(B),"utf8");if(!ce||!(ce instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");F=ce}}try{const{data:G,error:ie}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:B,signature:ns(F)},!((O=n.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(A=n.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Na});if(ie)throw ie;if(!G||!G.session||!G.user){const I=new nl;return this._returnResult({data:{user:null,session:null},error:I})}return G.session&&(await this._saveSession(G.session),await this._notifyAllSubscribers("SIGNED_IN",G.session)),this._returnResult({data:Object.assign({},G),error:ie})}catch(G){if(Le(G))return this._returnResult({data:{user:null,session:null},error:G});throw G}}async _exchangeCodeForSession(n){const i=await Xi(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(i??"").split("/");try{if(!s&&this.flowType==="pkce")throw new E_;const{data:c,error:p}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:Na});if(await _n(this.storage,`${this.storageKey}-code-verifier`),p)throw p;if(!c||!c.session||!c.user){const g=new nl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:p})}catch(c){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:i,provider:s,token:o,access_token:c,nonce:p}=n,g=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:p,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Na}),{data:v,error:b}=g;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!v||!v.session||!v.user){const S=new nl;return this._returnResult({data:{user:null,session:null},error:S})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:b})}catch(i){if(Le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(n){var i,s,o,c,p;try{if("email"in n){const{email:g,options:v}=n;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await al(this.storage,this.storageKey));const{error:j}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(i=v?.data)!==null&&i!==void 0?i:{},create_user:(s=v?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}if("phone"in n){const{phone:g,options:v}=n,{data:b,error:S}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=v?.data)!==null&&o!==void 0?o:{},create_user:(c=v?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(p=v?.channel)!==null&&p!==void 0?p:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:S})}throw new pc("You must provide either an email or phone number.")}catch(g){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(n){var i,s;try{let o,c;"options"in n&&(o=(i=n.options)===null||i===void 0?void 0:i.redirectTo,c=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:p,error:g}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:Na});if(g)throw g;if(!p)throw new Error("An error occurred on token verification.");const v=p.session,b=p.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:b,session:v},error:null})}catch(o){if(Le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var i,s,o,c,p;try{let g=null,v=null;this.flowType==="pkce"&&([g,v]=await al(this.storage,this.storageKey));const b=await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(i=n.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:v}),headers:this.headers,xform:F_});return!((c=b.data)===null||c===void 0)&&c.url&&Sn()&&!(!((p=n.options)===null||p===void 0)&&p.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(g){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)throw s;if(!i)throw new Zn;const{error:o}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(Le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const i=`${this.url}/resend`;if("email"in n){const{email:s,type:o,options:c}=n,{error:p}=await Ve(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}else if("phone"in n){const{phone:s,type:o,options:c}=n,{data:p,error:g}=await Ve(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:g})}throw new pc("You must provide either an email or phone number and a type")}catch(i){if(Le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(n,i){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await n(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const i=await Xi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?n=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<Jf:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const p=await Xi(this.userStorage,this.storageKey+"-user");p?.user?n.user=p.user:n.user=th()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const p={value:this.suppressGetSessionWarning};n.user=Y_(n.user,p),p.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(n){try{return n?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:gi}):await this._useSession(async i=>{var s,o,c;const{data:p,error:g}=i;if(g)throw g;return!(!((s=p.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zn}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=p.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:gi})})}catch(i){if(Le(i))return Zf(i)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(n,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,i))}async _updateUser(n,i={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Zn;const p=o.session;let g=null,v=null;this.flowType==="pkce"&&n.email!=null&&([g,v]=await al(this.storage,this.storageKey));const{data:b,error:S}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:v}),jwt:p.access_token,xform:gi});if(S)throw S;return p.user=b.user,await this._saveSession(p),await this._notifyAllSubscribers("USER_UPDATED",p),this._returnResult({data:{user:p.user},error:null})})}catch(s){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Zn;const i=Date.now()/1e3;let s=i,o=!0,c=null;const{payload:p}=yc(n.access_token);if(p.exp&&(s=p.exp,o=s<=i),o){const{data:g,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g)return{data:{user:null,session:null},error:null};c=g}else{const{data:g,error:v}=await this._getUser(n.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});c={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(i){if(Le(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async i=>{var s;if(!n){const{data:p,error:g}=i;if(g)throw g;n=(s=p.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new Zn;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(Le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(n,i){try{if(!Sn())throw new gc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new gc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new by("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gc("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new by("No code detected.");const{data:I,error:V}=await this._exchangeCodeForSession(n.code);if(V)throw V;const me=new URL(window.location.href);return me.searchParams.delete("code"),window.history.replaceState(window.history.state,"",me.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:p,expires_in:g,expires_at:v,token_type:b}=n;if(!c||!g||!p||!b)throw new gc("No session defined in URL");const S=Math.round(Date.now()/1e3),j=parseInt(g);let O=S+j;v&&(O=parseInt(v));const A=O-S;A*1e3<=cl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${j}s`);const B=O-j;S-B>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",B,O,S):S-B<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",B,O,S);const{data:F,error:G}=await this._getUser(c);if(G)throw G;const ie={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:j,expires_at:O,refresh_token:p,token_type:b,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ie,redirectType:n.type},error:null})}catch(s){if(Le(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const i=await Xi(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&i)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:o,error:c}=i;if(c&&!Zf(c))return this._returnResult({error:c});const p=(s=o.session)===null||s===void 0?void 0:s.access_token;if(p){const{error:g}=await this.admin.signOut(p,n);if(g&&!(j_(g)&&(g.status===404||g.status===401||g.status===403)||Zf(g)))return this._returnResult({error:g})}return n!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const i=M_(),s={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async i=>{var s,o;try{const{data:{session:c},error:p}=i;if(p)throw p;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,i={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await al(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=i.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var i;try{const{data:s,error:o}=await this._useSession(async c=>{var p,g,v,b,S;const{data:j,error:O}=c;if(O)throw O;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(p=n.options)===null||p===void 0?void 0:p.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",A,{headers:this.headers,jwt:(S=(b=j.session)===null||b===void 0?void 0:b.access_token)!==null&&S!==void 0?S:void 0})});if(o)throw o;return Sn()&&!(!((i=n.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:n.provider,url:s?.url},error:null})}catch(s){if(Le(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async i=>{var s;try{const{error:o,data:{session:c}}=i;if(o)throw o;const{options:p,provider:g,token:v,access_token:b,nonce:S}=n,j=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=c?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:g,id_token:v,access_token:b,nonce:S,link_identity:!0,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Na}),{data:O,error:A}=j;return A?this._returnResult({data:{user:null,session:null},error:A}):!O||!O.session||!O.user?this._returnResult({data:{user:null,session:null},error:new nl}):(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("USER_UPDATED",O.session)),this._returnResult({data:O,error:A}))}catch(o){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async i=>{var s,o;const{data:c,error:p}=i;if(p)throw p;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(n){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await L_(async o=>(o>0&&await U_(200*Math.pow(2,o-1)),this._debug(i,"refreshing attempt",o),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Na})),(o,c)=>{const p=200*Math.pow(2,o);return c&&eh(c)&&Date.now()+p-s<cl})}catch(s){if(this._debug(i,"error",s),Le(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",i,"url",s),Sn()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Xi(this.storage,this.storageKey);if(o&&this.userStorage){let p=await Xi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!p&&(p={user:o.user},await dl(this.userStorage,this.storageKey+"-user",p)),o.user=(n=p?.user)!==null&&n!==void 0?n:th()}else if(o&&!o.user&&!o.user){const p=await Xi(this.storage,this.storageKey+"-user");p&&p?.user?(o.user=p.user,await _n(this.storage,this.storageKey+"-user"),await dl(this.storage,this.storageKey,o)):o.user=th()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Jf;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${Jf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:p}=await this._callRefreshToken(o.refresh_token);p&&(console.error(p),eh(p)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",p),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:p,error:g}=await this._getUser(o.access_token);!g&&p?.user?(o.user=p.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(p){console.error("Error getting user data:",p),this._debug(s,"error getting user data, skipping SIGNED_IN notification",p)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var i,s;if(!n)throw new Zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Pc;const{data:c,error:p}=await this._refreshAccessToken(n);if(p)throw p;if(!c.session)throw new Zn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const g={data:c.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(c){if(this._debug(o,"error",c),Le(c)){const p={data:null,error:c};return eh(c)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(p),p}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,i,s=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:i});const c=[],p=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,i)}catch(v){c.push(v)}});if(await Promise.all(p),c.length>0){for(let g=0;g<c.length;g+=1)console.error(c[g]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _n(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},n),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await dl(this.userStorage,this.storageKey+"-user",{user:i.user});const o=Object.assign({},i);delete o.user;const c=jy(o);await dl(this.storage,this.storageKey,c)}else{const o=jy(i);await dl(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Sn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),cl);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-n)/cl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${cl}ms, refresh threshold is ${yh} ticks`),o<=yh&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Cv)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Sn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const i=`#_onVisibilityChanged(${n})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,i,s){const o=[`provider=${encodeURIComponent(i)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,p]=await al(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(p)}`});o.push(g.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async i=>{var s;const{data:o,error:c}=i;return c?this._returnResult({data:null,error:c}):await Ve(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(n){try{return await this._useSession(async i=>{var s,o;const{data:c,error:p}=i;if(p)return this._returnResult({data:null,error:p});const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:b}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return b?this._returnResult({data:null,error:b}):(n.factorType==="totp"&&v.type==="totp"&&(!((o=v?.totp)===null||o===void 0)&&o.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const p=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?h1(n.webauthn.credential_response):m1(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:v}=await Ve(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:p,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:v}))})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const p=await Ve(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(p.error)return p;const{data:g}=p;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:d1(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:f1(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(n){const{data:i,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:i.id,code:n.code})}async _listFactors(){var n;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=i?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var i,s,o,c;if(n)try{const{payload:A}=yc(n);let B=null;A.aal&&(B=A.aal);let F=B;const{data:{user:G},error:ie}=await this.getUser(n);if(ie)return this._returnResult({data:null,error:ie});((s=(i=G?.factors)===null||i===void 0?void 0:i.filter(me=>me.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(F="aal2");const V=A.amr||[];return{data:{currentLevel:B,nextLevel:F,currentAuthenticationMethods:V},error:null}}catch(A){if(Le(A))return this._returnResult({data:null,error:A});throw A}const{data:{session:p},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!p)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=yc(p.access_token);let b=null;v.aal&&(b=v.aal);let S=b;((c=(o=p.user.factors)===null||o===void 0?void 0:o.filter(A=>A.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(S="aal2");const O=v.amr||[];return{data:{currentLevel:b,nextLevel:S,currentAuthenticationMethods:O},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;return o?this._returnResult({data:null,error:o}):s?await Ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Zn})})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(n,i){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Zn});const p=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return p.data&&p.data.redirect_url&&Sn()&&!i?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(s){if(Le(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,i){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Zn});const p=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return p.data&&p.data.redirect_url&&Sn()&&!i?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(s){if(Le(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;return s?this._returnResult({data:null,error:s}):i?await Ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Zn})})}catch(n){if(Le(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;return o?this._returnResult({data:null,error:o}):s?(await Ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Zn})})}catch(i){if(Le(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(n,i={keys:[]}){let s=i.keys.find(g=>g.kid===n);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(g=>g.kid===n),s&&this.jwks_cached_at+__>o)return s;const{data:c,error:p}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(p)throw p;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(g=>g.kid===n),!s)?null:s}async getClaims(n,i={}){try{let s=n;if(!s){const{data:A,error:B}=await this.getSession();if(B||!A.session)return this._returnResult({data:null,error:B});s=A.session.access_token}const{header:o,payload:c,signature:p,raw:{header:g,payload:v}}=yc(s);i?.allowExpired||I_(c.exp);const b=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!b){const{error:A}=await this.getUser(s);if(A)throw A;return{data:{claims:c,header:o,signature:p},error:null}}const S=G_(o.alg),j=await crypto.subtle.importKey("jwk",b,S,!0,["verify"]);if(!await crypto.subtle.verify(S,j,p,C_(`${g}.${v}`)))throw new xh("Invalid JWT signature");return{data:{claims:c,header:o,signature:p},error:null}}catch(s){if(Le(s))return this._returnResult({data:null,error:s});throw s}}}Ko.nextInstanceID={};const S1=Ko,j1="2.95.3";let Do="";typeof Deno<"u"?Do="deno":typeof document<"u"?Do="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Do="react-native":Do="node";const k1={"X-Client-Info":`supabase-js-${Do}/${j1}`},E1={headers:k1},N1={schema:"public"},T1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O1={};function Io(a){"@babel/helpers - typeof";return Io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Io(a)}function A1(a,n){if(Io(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var s=i.call(a,n);if(Io(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function C1(a){var n=A1(a,"string");return Io(n)=="symbol"?n:n+""}function R1(a,n,i){return(n=C1(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}function Cy(a,n){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),i.push.apply(i,s)}return i}function Ht(a){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Cy(Object(i),!0).forEach(function(s){R1(a,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):Cy(Object(i)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(i,s))})}return a}const M1=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),D1=()=>Headers,z1=(a,n,i)=>{const s=M1(i),o=D1();return async(c,p)=>{var g;const v=(g=await n())!==null&&g!==void 0?g:a;let b=new o(p?.headers);return b.has("apikey")||b.set("apikey",a),b.has("Authorization")||b.set("Authorization",`Bearer ${v}`),s(c,Ht(Ht({},p),{},{headers:b}))}};function U1(a){return a.endsWith("/")?a:a+"/"}function L1(a,n){var i,s;const{db:o,auth:c,realtime:p,global:g}=a,{db:v,auth:b,realtime:S,global:j}=n,O={db:Ht(Ht({},v),o),auth:Ht(Ht({},b),c),realtime:Ht(Ht({},S),p),storage:{},global:Ht(Ht(Ht({},j),g),{},{headers:Ht(Ht({},(i=j?.headers)!==null&&i!==void 0?i:{}),(s=g?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return a.accessToken?O.accessToken=a.accessToken:delete O.accessToken,O}function q1(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U1(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var B1=class extends S1{constructor(a){super(a)}},P1=class{constructor(a,n,i){var s,o;this.supabaseUrl=a,this.supabaseKey=n;const c=q1(a);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const p=`sb-${c.hostname.split(".")[0]}-auth-token`,g={db:N1,realtime:O1,auth:Ht(Ht({},T1),{},{storageKey:p}),global:E1},v=L1(i??{},g);if(this.storageKey=(s=v.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(S,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=v.auth)!==null&&b!==void 0?b:{},this.headers,v.global.fetch)}this.fetch=z1(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Ht({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new jw(new URL("rest/v1",c).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch,timeout:v.db.timeout,urlLengthLimit:v.db.urlLengthLimit}),this.storage=new y_(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new gw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,n,i)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,n,i;if(a.accessToken)return await a.accessToken();const{data:s}=await a.auth.getSession();return(n=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:o,storageKey:c,flowType:p,lock:g,debug:v,throwOnError:b},S,j){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new B1({url:this.authUrl.href,headers:Ht(Ht({},O),S),storageKey:c,autoRefreshToken:a,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:o,flowType:p,lock:g,debug:v,throwOnError:b,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new $w(this.realtimeUrl.href,Ht(Ht({},a),{},{params:Ht(Ht({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,n)=>{this._handleTokenChanged(a,"CLIENT",n?.access_token)})}_handleTokenChanged(a,n,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $1=(a,n,i)=>new P1(a,n,i);function H1(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const n=a.version;if(n==null)return!1;const i=n.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}H1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const K1="https://uzkgrywvntdvfznbzydv.supabase.co",I1="sb_publishable_WSUDdU7NLCftdEhrKiFPqQ_9JrD0djr",tt=$1(K1,I1);var Nc={exports:{}},G1=Nc.exports,Ry;function V1(){return Ry||(Ry=1,(function(a,n){((i,s)=>{a.exports=s()})(G1,function(){var i=function(u,m){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(y,x){y.__proto__=x}:function(y,x){for(var _ in x)Object.prototype.hasOwnProperty.call(x,_)&&(y[_]=x[_])}))(u,m)},s=function(){return(s=Object.assign||function(u){for(var m,y=1,x=arguments.length;y<x;y++)for(var _ in m=arguments[y])Object.prototype.hasOwnProperty.call(m,_)&&(u[_]=m[_]);return u}).apply(this,arguments)};function o(u,m,y){for(var x,_=0,E=m.length;_<E;_++)!x&&_ in m||((x=x||Array.prototype.slice.call(m,0,_))[_]=m[_]);return u.concat(x||Array.prototype.slice.call(m))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:w0,p=Object.keys,g=Array.isArray;function v(u,m){return typeof m=="object"&&p(m).forEach(function(y){u[y]=m[y]}),u}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var b=Object.getPrototypeOf,S={}.hasOwnProperty;function j(u,m){return S.call(u,m)}function O(u,m){typeof m=="function"&&(m=m(b(u))),(typeof Reflect>"u"?p:Reflect.ownKeys)(m).forEach(function(y){B(u,y,m[y])})}var A=Object.defineProperty;function B(u,m,y,x){A(u,m,v(y&&j(y,"get")&&typeof y.get=="function"?{get:y.get,set:y.set,configurable:!0}:{value:y,configurable:!0,writable:!0},x))}function F(u){return{from:function(m){return u.prototype=Object.create(m.prototype),B(u.prototype,"constructor",u),{extend:O.bind(null,u.prototype)}}}}var G=Object.getOwnPropertyDescriptor,ie=[].slice;function I(u,m,y){return ie.call(u,m,y)}function V(u,m){return m(u)}function me(u){if(!u)throw new Error("Assertion Failed")}function Ae(u){c.setImmediate?setImmediate(u):setTimeout(u,0)}function ce(u,m){if(typeof m=="string"&&j(u,m))return u[m];if(!m)return u;if(typeof m!="string"){for(var y=[],x=0,_=m.length;x<_;++x){var E=ce(u,m[x]);y.push(E)}return y}var T,C=m.indexOf(".");return C===-1||(T=u[m.substr(0,C)])==null?void 0:ce(T,m.substr(C+1))}function ae(u,m,y){if(u&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof m!="string"&&"length"in m){me(typeof y!="string"&&"length"in y);for(var x=0,_=m.length;x<_;++x)ae(u,m[x],y[x])}else{var E,T,C=m.indexOf(".");C!==-1?(E=m.substr(0,C),(C=m.substr(C+1))===""?y===void 0?g(u)&&!isNaN(parseInt(E))?u.splice(E,1):delete u[E]:u[E]=y:ae(T=(T=u[E])&&j(u,E)?T:u[E]={},C,y)):y===void 0?g(u)&&!isNaN(parseInt(m))?u.splice(m,1):delete u[m]:u[m]=y}}function Me(u){var m,y={};for(m in u)j(u,m)&&(y[m]=u[m]);return y}var He=[].concat;function mt(u){return He.apply([],u)}var W="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(mt([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(m){return m+u+"Array"})}))).filter(function(u){return c[u]}),gt=new Set(W.map(function(u){return c[u]})),xt=null;function Qt(u){return xt=new WeakMap,u=(function m(y){if(!y||typeof y!="object")return y;var x=xt.get(y);if(x)return x;if(g(y)){x=[],xt.set(y,x);for(var _=0,E=y.length;_<E;++_)x.push(m(y[_]))}else if(gt.has(y.constructor))x=y;else{var T,C=b(y);for(T in x=C===Object.prototype?{}:Object.create(C),xt.set(y,x),y)j(y,T)&&(x[T]=m(y[T]))}return x})(u),xt=null,u}var jn={}.toString;function Kt(u){return jn.call(u).slice(8,-1)}var se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof se=="symbol"?function(u){var m;return u!=null&&(m=u[se])&&m.apply(u)}:function(){return null};function Ne(u,m){m=u.indexOf(m),0<=m&&u.splice(m,1)}var Ke={};function K(u){var m,y,x,_;if(arguments.length===1){if(g(u))return u.slice();if(this===Ke&&typeof u=="string")return[u];if(_=de(u))for(y=[];!(x=_.next()).done;)y.push(x.value);else{if(u==null)return[u];if(typeof(m=u.length)!="number")return[u];for(y=new Array(m);m--;)y[m]=u[m]}}else for(m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];return y}var k=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],sn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pe(u,m){this.name=u,this.message=m}function we(u,m){return u+". Errors: "+Object.keys(m).map(function(y){return m[y].toString()}).filter(function(y,x,_){return _.indexOf(y)===x}).join(`
`)}function ke(u,m,y,x){this.failures=m,this.failedKeys=x,this.successCount=y,this.message=we(u,m)}function xe(u,m){this.name="BulkError",this.failures=Object.keys(m).map(function(y){return m[y]}),this.failuresByPos=m,this.message=we(u,this.failures)}F(pe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),F(ke).from(pe),F(xe).from(pe);var qe=sn.reduce(function(u,m){return u[m]=m+"Error",u},{}),Ge=pe,je=sn.reduce(function(u,m){var y=m+"Error";function x(_,E){this.name=y,_?typeof _=="string"?(this.message="".concat(_).concat(E?`
 `+E:""),this.inner=E||null):typeof _=="object"&&(this.message="".concat(_.name," ").concat(_.message),this.inner=_):(this.message=ue[m]||y,this.inner=null)}return F(x).from(Ge),u[m]=x,u},{}),ut=(je.Syntax=SyntaxError,je.Type=TypeError,je.Range=RangeError,W.reduce(function(u,m){return u[m+"Error"]=je[m],u},{}));W=sn.reduce(function(u,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(u[m+"Error"]=je[m]),u},{});function Pe(){}function Ot(u){return u}function Fe(u,m){return u==null||u===Ot?m:function(y){return m(u(y))}}function At(u,m){return function(){u.apply(this,arguments),m.apply(this,arguments)}}function mn(u,m){return u===Pe?m:function(){var y=u.apply(this,arguments),x=(y!==void 0&&(arguments[0]=y),this.onsuccess),_=this.onerror,E=(this.onsuccess=null,this.onerror=null,m.apply(this,arguments));return x&&(this.onsuccess=this.onsuccess?At(x,this.onsuccess):x),_&&(this.onerror=this.onerror?At(_,this.onerror):_),E!==void 0?E:y}}function Rn(u,m){return u===Pe?m:function(){u.apply(this,arguments);var y=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),y&&(this.onsuccess=this.onsuccess?At(y,this.onsuccess):y),x&&(this.onerror=this.onerror?At(x,this.onerror):x)}}function Un(u,m){return u===Pe?m:function(_){var x=u.apply(this,arguments),_=(v(_,x),this.onsuccess),E=this.onerror,T=(this.onsuccess=null,this.onerror=null,m.apply(this,arguments));return _&&(this.onsuccess=this.onsuccess?At(_,this.onsuccess):_),E&&(this.onerror=this.onerror?At(E,this.onerror):E),x===void 0?T===void 0?void 0:T:v(x,T)}}function Kn(u,m){return u===Pe?m:function(){return m.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function un(u,m){return u===Pe?m:function(){var y=u.apply(this,arguments);if(y&&typeof y.then=="function"){for(var x=this,_=arguments.length,E=new Array(_);_--;)E[_]=arguments[_];return y.then(function(){return m.apply(x,E)})}return m.apply(this,arguments)}}W.ModifyError=ke,W.DexieError=pe,W.BulkError=xe;var kn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function os(u){kn=u}var Wa={},rn=100,Qa=typeof Promise>"u"?[]:(sn=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Qa=crypto.subtle.digest("SHA-512",new Uint8Array([0])),b(Qa),sn]:[sn,b(sn),sn]),sn=Qa[0],ur=Qa[1],ur=ur&&ur.then,aa=sn&&sn.constructor,Ca=!!Qa[2],Ra=function(u,m){vi.push([u,m]),Ma&&(queueMicrotask(Fo),Ma=!1)},Xa=!0,Ma=!0,xa=[],ra=[],pn=Ot,gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pe,pgp:!1,env:{},finalize:Pe},Oe=gn,vi=[],Fa=0,us=[];function Ee(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Oe;if(typeof u!="function"){if(u!==Wa)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&wa(this,this._value)}else this._state=null,this._value=null,++m.ref,(function y(x,_){try{_(function(E){if(x._state===null){if(E===x)throw new TypeError("A promise cannot be resolved with itself.");var T=x._lib&&Da();E&&typeof E.then=="function"?y(x,function(C,z){E instanceof Ee?E._then(C,z):E.then(C,z)}):(x._state=!0,x._value=E,xi(x)),T&&ia()}},wa.bind(null,x))}catch(E){wa(x,E)}})(this,u)}var Rr={get:function(){var u=Oe,m=Si;function y(x,_){var E=this,T=!u.global&&(u!==Oe||m!==Si),C=T&&!Mn(),z=new Ee(function(Q,U){Ja(E,new bi(cs(x,u,T,C),cs(_,u,T,C),Q,U,u))});return this._consoleTask&&(z._consoleTask=this._consoleTask),z}return y.prototype=Wa,y},set:function(u){B(this,"then",u&&u.prototype===Wa?Rr:{get:function(){return u},set:Rr.set})}};function bi(u,m,y,x,_){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof m=="function"?m:null,this.resolve=y,this.reject=x,this.psd=_}function wa(u,m){var y,x;ra.push(m),u._state===null&&(y=u._lib&&Da(),m=pn(m),u._state=!1,u._value=m,x=u,xa.some(function(_){return _._value===x._value})||xa.push(x),xi(u),y)&&ia()}function xi(u){var m=u._listeners;u._listeners=[];for(var y=0,x=m.length;y<x;++y)Ja(u,m[y]);var _=u._PSD;--_.ref||_.finalize(),Fa===0&&(++Fa,Ra(function(){--Fa==0&&El()},[]))}function Ja(u,m){if(u._state===null)u._listeners.push(m);else{var y=u._state?m.onFulfilled:m.onRejected;if(y===null)return(u._state?m.resolve:m.reject)(u._value);++m.psd.ref,++Fa,Ra(Vc,[y,u,m])}}function Vc(u,m,y){try{var x,_=m._value;!m._state&&ra.length&&(ra=[]),x=kn&&m._consoleTask?m._consoleTask.run(function(){return u(_)}):u(_),m._state||ra.indexOf(_)!==-1||(E=>{for(var T=xa.length;T;)if(xa[--T]._value===E._value)return xa.splice(T,1)})(m),y.resolve(x)}catch(E){y.reject(E)}finally{--Fa==0&&El(),--y.psd.ref||y.psd.finalize()}}function Fo(){In(gn,function(){Da()&&ia()})}function Da(){var u=Xa;return Ma=Xa=!1,u}function ia(){var u,m,y;do for(;0<vi.length;)for(u=vi,vi=[],y=u.length,m=0;m<y;++m){var x=u[m];x[0].apply(null,x[1])}while(0<vi.length);Ma=Xa=!0}function El(){for(var u=xa,m=(xa=[],u.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)}),us.slice(0)),y=m.length;y;)m[--y]()}function wi(u){return new Ee(Wa,!1,u)}function Et(u,m){var y=Oe;return function(){var x=Da(),_=Oe;try{return Ua(y,!0),u.apply(this,arguments)}catch(E){m&&m(E)}finally{Ua(_,!1),x&&ia()}}}O(Ee.prototype,{then:Rr,_then:function(u,m){Ja(this,new bi(null,null,u,m,Oe))},catch:function(u){var m,y;return arguments.length===1?this.then(null,u):(m=u,y=arguments[1],typeof m=="function"?this.then(null,function(x){return(x instanceof m?y:wi)(x)}):this.then(null,function(x){return(x&&x.name===m?y:wi)(x)}))},finally:function(u){return this.then(function(m){return Ee.resolve(u()).then(function(){return m})},function(m){return Ee.resolve(u()).then(function(){return wi(m)})})},timeout:function(u,m){var y=this;return u<1/0?new Ee(function(x,_){var E=setTimeout(function(){return _(new je.Timeout(m))},u);y.then(x,_).finally(clearTimeout.bind(null,E))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(Ee.prototype,Symbol.toStringTag,"Dexie.Promise"),gn.env=Tl(),O(Ee,{all:function(){var u=K.apply(null,arguments).map(Dr);return new Ee(function(m,y){u.length===0&&m([]);var x=u.length;u.forEach(function(_,E){return Ee.resolve(_).then(function(T){u[E]=T,--x||m(u)},y)})})},resolve:function(u){return u instanceof Ee?u:u&&typeof u.then=="function"?new Ee(function(m,y){u.then(m,y)}):new Ee(Wa,!0,u)},reject:wi,race:function(){var u=K.apply(null,arguments).map(Dr);return new Ee(function(m,y){u.map(function(x){return Ee.resolve(x).then(m,y)})})},PSD:{get:function(){return Oe},set:function(u){return Oe=u}},totalEchoes:{get:function(){return Si}},newPSD:Ct,usePSD:In,scheduler:{get:function(){return Ra},set:function(u){Ra=u}},rejectionMapper:{get:function(){return pn},set:function(u){pn=u}},follow:function(u,m){return new Ee(function(y,x){return Ct(function(_,E){var T=Oe;T.unhandleds=[],T.onunhandled=E,T.finalize=At(function(){var C,z=this;C=function(){z.unhandleds.length===0?_():E(z.unhandleds[0])},us.push(function Q(){C(),us.splice(us.indexOf(Q),1)}),++Fa,Ra(function(){--Fa==0&&El()},[])},T.finalize),u()},m,y,x)})}}),aa&&(aa.allSettled&&B(Ee,"allSettled",function(){var u=K.apply(null,arguments).map(Dr);return new Ee(function(m){u.length===0&&m([]);var y=u.length,x=new Array(y);u.forEach(function(_,E){return Ee.resolve(_).then(function(T){return x[E]={status:"fulfilled",value:T}},function(T){return x[E]={status:"rejected",reason:T}}).then(function(){return--y||m(x)})})})}),aa.any&&typeof AggregateError<"u"&&B(Ee,"any",function(){var u=K.apply(null,arguments).map(Dr);return new Ee(function(m,y){u.length===0&&y(new AggregateError([]));var x=u.length,_=new Array(x);u.forEach(function(E,T){return Ee.resolve(E).then(function(C){return m(C)},function(C){_[T]=C,--x||y(new AggregateError(_))})})})}),aa.withResolvers)&&(Ee.withResolvers=aa.withResolvers);var It={awaits:0,echoes:0,id:0},Nl=0,Mr=[],_i=0,Si=0,za=0;function Ct(u,T,y,x){var _=Oe,E=Object.create(_),T=(E.parent=_,E.ref=0,E.global=!1,E.id=++za,gn.env,E.env=Ca?{Promise:Ee,PromiseProp:{value:Ee,configurable:!0,writable:!0},all:Ee.all,race:Ee.race,allSettled:Ee.allSettled,any:Ee.any,resolve:Ee.resolve,reject:Ee.reject}:{},T&&v(E,T),++_.ref,E.finalize=function(){--this.parent.ref||this.parent.finalize()},In(E,u,y,x));return E.ref===0&&E.finalize(),T}function Gt(){return It.id||(It.id=++Nl),++It.awaits,It.echoes+=rn,It.id}function Mn(){return!!It.awaits&&(--It.awaits==0&&(It.id=0),It.echoes=It.awaits*rn,!0)}function Dr(u){return It.echoes&&u&&u.constructor===aa?(Gt(),u.then(function(m){return Mn(),m},function(m){return Mn(),wt(m)})):u}function Yc(){var u=Mr[Mr.length-1];Mr.pop(),Ua(u,!1)}function Ua(u,m){var y,x,_=Oe;(m?!It.echoes||_i++&&u===Oe:!_i||--_i&&u===Oe)||queueMicrotask(m?(function(E){++Si,It.echoes&&--It.echoes!=0||(It.echoes=It.awaits=It.id=0),Mr.push(Oe),Ua(E,!0)}).bind(null,u):Yc),u!==Oe&&(Oe=u,_===gn&&(gn.env=Tl()),Ca)&&(y=gn.env.Promise,x=u.env,_.global||u.global)&&(Object.defineProperty(c,"Promise",x.PromiseProp),y.all=x.all,y.race=x.race,y.resolve=x.resolve,y.reject=x.reject,x.allSettled&&(y.allSettled=x.allSettled),x.any)&&(y.any=x.any)}function Tl(){var u=c.Promise;return Ca?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function In(u,m,y,x,_){var E=Oe;try{return Ua(u,!0),m(y,x,_)}finally{Ua(E,!1)}}function cs(u,m,y,x){return typeof u!="function"?u:function(){var _=Oe;y&&Gt(),Ua(m,!0);try{return u.apply(this,arguments)}finally{Ua(_,!1),x&&queueMicrotask(Mn)}}}function La(u){Promise===aa&&It.echoes===0?_i===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+ur).indexOf("[native code]")===-1&&(Gt=Mn=Pe);var wt=Ee.reject,Gn="",En="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vt="String expected.",Za=[],ji="__dbnames",_a="readonly",qa="readwrite";function er(u,m){return u?m?function(){return u.apply(this,arguments)&&m.apply(this,arguments)}:u:m}var Ol={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ki(u){return typeof u!="string"||/\./.test(u)?function(m){return m}:function(m){return m[u]===void 0&&u in m&&delete(m=Qt(m))[u],m}}function Jo(){throw je.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function et(u,m){try{var y=Ei(u),x=Ei(m);if(y!==x)return y==="Array"?1:x==="Array"?-1:y==="binary"?1:x==="binary"?-1:y==="string"?1:x==="string"?-1:y==="Date"?1:x!=="Date"?NaN:-1;switch(y){case"number":case"Date":case"string":return m<u?1:u<m?-1:0;case"binary":for(var _=sa(u),E=sa(m),T=_.length,C=E.length,z=T<C?T:C,Q=0;Q<z;++Q)if(_[Q]!==E[Q])return _[Q]<E[Q]?-1:1;return T===C?0:T<C?-1:1;case"Array":for(var U=u,D=m,P=U.length,H=D.length,L=P<H?P:H,q=0;q<L;++q){var J=et(U[q],D[q]);if(J!==0)return J}return P===H?0:P<H?-1:1}}catch{}return NaN}function Ei(u){var m=typeof u;return m=="object"&&(ArrayBuffer.isView(u)||(m=Kt(u))==="ArrayBuffer")?"binary":m}function sa(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function yn(u,m,y){var x=u.schema.yProps;return x?(m&&0<y.numFailures&&(m=m.filter(function(_,E){return!y.failures[E]})),Promise.all(x.map(function(_){return _=_.updatesTable,m?u.db.table(_).where("k").anyOf(m).delete():u.db.table(_).clear()})).then(function(){return y})):y}Zo.prototype.execute=function(u){var m=this["@@propmod"];if(m.add!==void 0){var y=m.add;if(g(y))return o(o([],g(u)?u:[],!0),y).sort();if(typeof y=="number")return(Number(u)||0)+y;if(typeof y=="bigint")try{return BigInt(u)+y}catch{return BigInt(0)+y}throw new TypeError("Invalid term ".concat(y))}if(m.remove!==void 0){var x=m.remove;if(g(x))return g(u)?u.filter(function(_){return!x.includes(_)}).sort():[];if(typeof x=="number")return Number(u)-x;if(typeof x=="bigint")try{return BigInt(u)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return y=(y=m.replacePrefix)==null?void 0:y[0],y&&typeof u=="string"&&u.startsWith(y)?m.replacePrefix[1]+u.substring(y.length):u};var zr=Zo;function Zo(u){this["@@propmod"]=u}function ds(u,m){for(var y=p(m),x=y.length,_=!1,E=0;E<x;++E){var T=y[E],C=m[T],z=ce(u,T);C instanceof zr?(ae(u,T,C.execute(z)),_=!0):z!==C&&(ae(u,T,C),_=!0)}return _}ft.prototype._trans=function(u,m,y){var x=this._tx||Oe.trans,_=this.name,E=kn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function T(Q,U,D){if(D.schema[_])return m(D.idbtrans,D);throw new je.NotFound("Table "+_+" not part of transaction")}var C=Da();try{var z=x&&x.db._novip===this.db._novip?x===Oe.trans?x._promise(u,T,y):Ct(function(){return x._promise(u,T,y)},{trans:x,transless:Oe.transless||Oe}):(function Q(U,D,P,H){if(U.idbdb&&(U._state.openComplete||Oe.letThrough||U._vip)){var L=U._createTransaction(D,P,U._dbSchema);try{L.create(),U._state.PR1398_maxLoop=3}catch(q){return q.name===qe.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return Q(U,D,P,H)})):wt(q)}return L._promise(D,function(q,J){return Ct(function(){return Oe.trans=L,H(q,J,L)})}).then(function(q){if(D==="readwrite")try{L.idbtrans.commit()}catch{}return D==="readonly"?q:L._completion.then(function(){return q})})}if(U._state.openComplete)return wt(new je.DatabaseClosed(U._state.dbOpenError));if(!U._state.isBeingOpened){if(!U._state.autoOpen)return wt(new je.DatabaseClosed);U.open().catch(Pe)}return U._state.dbReadyPromise.then(function(){return Q(U,D,P,H)})})(this.db,u,[this.name],T);return E&&(z._consoleTask=E,z=z.catch(function(Q){return console.trace(Q),wt(Q)})),z}finally{C&&ia()}},ft.prototype.get=function(u,m){var y=this;return u&&u.constructor===Object?this.where(u).first(m):u==null?wt(new je.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return y.core.get({trans:x,key:u}).then(function(_){return y.hook.reading.fire(_)})}).then(m)},ft.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(g(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var m=p(u);if(m.length===1)return this.where(m[0]).equals(u[m[0]]);var y=this.schema.indexes.concat(this.schema.primKey).filter(function(C){if(C.compound&&m.every(function(Q){return 0<=C.keyPath.indexOf(Q)})){for(var z=0;z<m.length;++z)if(m.indexOf(C.keyPath[z])===-1)return!1;return!0}return!1}).sort(function(C,z){return C.keyPath.length-z.keyPath.length})[0];if(y&&this.db._maxKey!==Gn)return T=y.keyPath.slice(0,m.length),this.where(T).equals(T.map(function(C){return u[C]}));!y&&kn&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var x=this.schema.idxByName;function _(C,z){return et(C,z)===0}var T=m.reduce(function(U,z){var Q=U[0],U=U[1],D=x[z],P=u[z];return[Q||D,Q||!D?er(U,D&&D.multi?function(H){return H=ce(H,z),g(H)&&H.some(function(L){return _(P,L)})}:function(H){return _(P,ce(H,z))}):U]},[null,null]),E=T[0],T=T[1];return E?this.where(E.name).equals(u[E.keyPath]).filter(T):y?this.filter(T):this.where(m).equals("")},ft.prototype.filter=function(u){return this.toCollection().and(u)},ft.prototype.count=function(u){return this.toCollection().count(u)},ft.prototype.offset=function(u){return this.toCollection().offset(u)},ft.prototype.limit=function(u){return this.toCollection().limit(u)},ft.prototype.each=function(u){return this.toCollection().each(u)},ft.prototype.toArray=function(u){return this.toCollection().toArray(u)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,g(u)?"[".concat(u.join("+"),"]"):u))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(u){for(var m=this.db,y=this.name,x=((this.schema.mappedClass=u).prototype instanceof Jo&&(u=(T=>{var C=U,z=T;if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function Q(){this.constructor=C}function U(){return T!==null&&T.apply(this,arguments)||this}return i(C,z),C.prototype=z===null?Object.create(z):(Q.prototype=z.prototype,new Q),Object.defineProperty(U.prototype,"db",{get:function(){return m},enumerable:!1,configurable:!0}),U.prototype.table=function(){return y},U})(u)),new Set),_=u.prototype;_;_=b(_))Object.getOwnPropertyNames(_).forEach(function(T){return x.add(T)});function E(T){if(!T)return T;var C,z=Object.create(u.prototype);for(C in T)if(!x.has(C))try{z[C]=T[C]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),u},ft.prototype.defineClass=function(){return this.mapToClass(function(u){v(this,u)})},ft.prototype.add=function(u,m){var y=this,x=this.schema.primKey,_=x.auto,E=x.keyPath,T=u;return E&&_&&(T=ki(E)(u)),this._trans("readwrite",function(C){return y.core.mutate({trans:C,type:"add",keys:m!=null?[m]:null,values:[T]})}).then(function(C){return C.numFailures?Ee.reject(C.failures[0]):C.lastResult}).then(function(C){if(E)try{ae(u,E,C)}catch{}return C})},ft.prototype.upsert=function(u,m){var y=this,x=this.schema.primKey.keyPath;return this._trans("readwrite",function(_){return y.core.get({trans:_,key:u}).then(function(E){var T=E??{};return ds(T,m),x&&ae(T,x,u),y.core.mutate({trans:_,type:"put",values:[T],keys:[u],upsert:!0,updates:{keys:[u],changeSpecs:[m]}}).then(function(C){return C.numFailures?Ee.reject(C.failures[0]):!!E})})})},ft.prototype.update=function(u,m){return typeof u!="object"||g(u)?this.where(":id").equals(u).modify(m):(u=ce(u,this.schema.primKey.keyPath))===void 0?wt(new je.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(m)},ft.prototype.put=function(u,m){var y=this,x=this.schema.primKey,_=x.auto,E=x.keyPath,T=u;return E&&_&&(T=ki(E)(u)),this._trans("readwrite",function(C){return y.core.mutate({trans:C,type:"put",values:[T],keys:m!=null?[m]:null})}).then(function(C){return C.numFailures?Ee.reject(C.failures[0]):C.lastResult}).then(function(C){if(E)try{ae(u,E,C)}catch{}return C})},ft.prototype.delete=function(u){var m=this;return this._trans("readwrite",function(y){return m.core.mutate({trans:y,type:"delete",keys:[u]}).then(function(x){return yn(m,[u],x)}).then(function(x){return x.numFailures?Ee.reject(x.failures[0]):void 0})})},ft.prototype.clear=function(){var u=this;return this._trans("readwrite",function(m){return u.core.mutate({trans:m,type:"deleteRange",range:Ol}).then(function(y){return yn(u,null,y)})}).then(function(m){return m.numFailures?Ee.reject(m.failures[0]):void 0})},ft.prototype.bulkGet=function(u){var m=this;return this._trans("readonly",function(y){return m.core.getMany({keys:u,trans:y}).then(function(x){return x.map(function(_){return m.hook.reading.fire(_)})})})},ft.prototype.bulkAdd=function(u,m,y){var x=this,_=Array.isArray(m)?m:void 0,E=(y=y||(_?void 0:m))?y.allKeys:void 0;return this._trans("readwrite",function(T){var C=x.schema.primKey,Q=C.auto,C=C.keyPath;if(C&&_)throw new je.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(_&&_.length!==u.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");var z=u.length,Q=C&&Q?u.map(ki(C)):u;return x.core.mutate({trans:T,type:"add",keys:_,values:Q,wantResults:E}).then(function(U){var D=U.numFailures,P=U.failures;if(D===0)return E?U.results:U.lastResult;throw new xe("".concat(x.name,".bulkAdd(): ").concat(D," of ").concat(z," operations failed"),P)})})},ft.prototype.bulkPut=function(u,m,y){var x=this,_=Array.isArray(m)?m:void 0,E=(y=y||(_?void 0:m))?y.allKeys:void 0;return this._trans("readwrite",function(T){var C=x.schema.primKey,Q=C.auto,C=C.keyPath;if(C&&_)throw new je.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(_&&_.length!==u.length)throw new je.InvalidArgument("Arguments objects and keys must have the same length");var z=u.length,Q=C&&Q?u.map(ki(C)):u;return x.core.mutate({trans:T,type:"put",keys:_,values:Q,wantResults:E}).then(function(U){var D=U.numFailures,P=U.failures;if(D===0)return E?U.results:U.lastResult;throw new xe("".concat(x.name,".bulkPut(): ").concat(D," of ").concat(z," operations failed"),P)})})},ft.prototype.bulkUpdate=function(u){var m=this,y=this.core,x=u.map(function(T){return T.key}),_=u.map(function(T){return T.changes}),E=[];return this._trans("readwrite",function(T){return y.getMany({trans:T,keys:x,cache:"clone"}).then(function(C){var z=[],Q=[],U=(u.forEach(function(D,P){var H=D.key,L=D.changes,q=C[P];if(q){for(var J=0,te=Object.keys(L);J<te.length;J++){var X=te[J],le=L[X];if(X===m.schema.primKey.keyPath){if(et(le,H)!==0)throw new je.Constraint("Cannot update primary key in bulkUpdate()")}else ae(q,X,le)}E.push(P),z.push(H),Q.push(q)}}),z.length);return y.mutate({trans:T,type:"put",keys:z,values:Q,updates:{keys:x,changeSpecs:_}}).then(function(D){var P=D.numFailures,H=D.failures;if(P===0)return U;for(var L=0,q=Object.keys(H);L<q.length;L++){var J,te=q[L],X=E[Number(te)];X!=null&&(J=H[te],delete H[te],H[X]=J)}throw new xe("".concat(m.name,".bulkUpdate(): ").concat(P," of ").concat(U," operations failed"),H)})})})},ft.prototype.bulkDelete=function(u){var m=this,y=u.length;return this._trans("readwrite",function(x){return m.core.mutate({trans:x,type:"delete",keys:u}).then(function(_){return yn(m,u,_)})}).then(function(x){var _=x.numFailures,E=x.failures;if(_===0)return x.lastResult;throw new xe("".concat(m.name,".bulkDelete(): ").concat(_," of ").concat(y," operations failed"),E)})};var Al=ft;function ft(){}function Ni(u){function m(T,C){if(C){for(var z=arguments.length,Q=new Array(z-1);--z;)Q[z-1]=arguments[z];return y[T].subscribe.apply(null,Q),u}if(typeof T=="string")return y[T]}var y={};m.addEventType=E;for(var x=1,_=arguments.length;x<_;++x)E(arguments[x]);return m;function E(T,C,z){var Q,U;if(typeof T!="object")return C=C||Kn,U={subscribers:[],fire:z=z||Pe,subscribe:function(D){U.subscribers.indexOf(D)===-1&&(U.subscribers.push(D),U.fire=C(U.fire,D))},unsubscribe:function(D){U.subscribers=U.subscribers.filter(function(P){return P!==D}),U.fire=U.subscribers.reduce(C,z)}},y[T]=m[T]=U;p(Q=T).forEach(function(D){var P=Q[D];if(g(P))E(D,Q[D][0],Q[D][1]);else{if(P!=="asap")throw new je.InvalidArgument("Invalid event config");var H=E(D,Ot,function(){for(var L=arguments.length,q=new Array(L);L--;)q[L]=arguments[L];H.subscribers.forEach(function(J){Ae(function(){J.apply(null,q)})})})}})}}function cn(u,m){return F(m).from({prototype:u}),m}function Ba(u,m){return!(u.filter||u.algorithm||u.or)&&(m?u.justLimit:!u.replayFilter)}function fs(u,m){u.filter=er(u.filter,m)}function Ti(u,m,y){var x=u.replayFilter;u.replayFilter=x?function(){return er(x(),m())}:m,u.justLimit=y&&!x}function Sa(u,m){if(u.isPrimKey)return m.primaryKey;var y=m.getIndexByKeyPath(u.index);if(y)return y;throw new je.Schema("KeyPath "+u.index+" on object store "+m.name+" is not indexed")}function Cl(u,m,y){var x=Sa(u,m.schema);return m.openCursor({trans:y,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:x,range:u.range}})}function Oi(u,m,y,x){var _,E,T=u.replayFilter?er(u.filter,u.replayFilter()):u.filter;return u.or?(_={},E=function(C,z,Q){var U,D;T&&!T(z,Q,function(P){return z.stop(P)},function(P){return z.fail(P)})||((D=""+(U=z.primaryKey))=="[object ArrayBuffer]"&&(D=""+new Uint8Array(U)),j(_,D))||(_[D]=!0,m(C,z,Q))},Promise.all([u.or._iterate(E,y),tr(Cl(u,x,y),u.algorithm,E,!u.keysOnly&&u.valueMapper)])):tr(Cl(u,x,y),er(u.algorithm,T),m,!u.keysOnly&&u.valueMapper)}function tr(u,m,y,x){var _=Et(x?function(E,T,C){return y(x(E),T,C)}:y);return u.then(function(E){if(E)return E.start(function(){var T=function(){return E.continue()};m&&!m(E,function(C){return T=C},function(C){E.stop(C),T=Pe},function(C){E.fail(C),T=Pe})||_(E.value,E,function(C){return T=C}),T()})})}lt.prototype._read=function(u,m){var y=this._ctx;return y.error?y.table._trans(null,wt.bind(null,y.error)):y.table._trans("readonly",u).then(m)},lt.prototype._write=function(u){var m=this._ctx;return m.error?m.table._trans(null,wt.bind(null,m.error)):m.table._trans("readwrite",u,"locked")},lt.prototype._addAlgorithm=function(u){var m=this._ctx;m.algorithm=er(m.algorithm,u)},lt.prototype._iterate=function(u,m){return Oi(this._ctx,u,m,this._ctx.table.core)},lt.prototype.clone=function(u){var m=Object.create(this.constructor.prototype),y=Object.create(this._ctx);return u&&v(y,u),m._ctx=y,m},lt.prototype.raw=function(){return this._ctx.valueMapper=null,this},lt.prototype.each=function(u){var m=this._ctx;return this._read(function(y){return Oi(m,u,y,m.table.core)})},lt.prototype.count=function(u){var m=this;return this._read(function(y){var x,_=m._ctx,E=_.table.core;return Ba(_,!0)?E.count({trans:y,query:{index:Sa(_,E.schema),range:_.range}}).then(function(T){return Math.min(T,_.limit)}):(x=0,Oi(_,function(){return++x,!1},y,E).then(function(){return x}))}).then(u)},lt.prototype.sortBy=function(u,m){var y=u.split(".").reverse(),x=y[0],_=y.length-1;function E(z,Q){return Q?E(z[y[Q]],Q-1):z[x]}var T=this._ctx.dir==="next"?1:-1;function C(z,Q){return et(E(z,_),E(Q,_))*T}return this.toArray(function(z){return z.sort(C)}).then(m)},lt.prototype.toArray=function(u){var m=this;return this._read(function(y){var x,_,E,T=m._ctx;return T.dir==="next"&&Ba(T,!0)&&0<T.limit?(x=T.valueMapper,_=Sa(T,T.table.core.schema),T.table.core.query({trans:y,limit:T.limit,values:!0,query:{index:_,range:T.range}}).then(function(C){return C=C.result,x?C.map(x):C})):(E=[],Oi(T,function(C){return E.push(C)},y,T.table.core).then(function(){return E}))},u)},lt.prototype.offset=function(u){var m=this._ctx;return u<=0||(m.offset+=u,Ba(m)?Ti(m,function(){var y=u;return function(x,_){return y===0||(y===1?--y:_(function(){x.advance(y),y=0}),!1)}}):Ti(m,function(){var y=u;return function(){return--y<0}})),this},lt.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),Ti(this._ctx,function(){var m=u;return function(y,x,_){return--m<=0&&x(_),0<=m}},!0),this},lt.prototype.until=function(u,m){return fs(this._ctx,function(y,x,_){return!u(y.value)||(x(_),m)}),this},lt.prototype.first=function(u){return this.limit(1).toArray(function(m){return m[0]}).then(u)},lt.prototype.last=function(u){return this.reverse().first(u)},lt.prototype.filter=function(u){var m;return fs(this._ctx,function(y){return u(y.value)}),(m=this._ctx).isMatch=er(m.isMatch,u),this},lt.prototype.and=function(u){return this.filter(u)},lt.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},lt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},lt.prototype.desc=function(){return this.reverse()},lt.prototype.eachKey=function(u){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(y,x){u(x.key,x)})},lt.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},lt.prototype.eachPrimaryKey=function(u){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(y,x){u(x.primaryKey,x)})},lt.prototype.keys=function(u){var m=this._ctx,y=(m.keysOnly=!m.isMatch,[]);return this.each(function(x,_){y.push(_.key)}).then(function(){return y}).then(u)},lt.prototype.primaryKeys=function(u){var m=this._ctx;if(m.dir==="next"&&Ba(m,!0)&&0<m.limit)return this._read(function(x){var _=Sa(m,m.table.core.schema);return m.table.core.query({trans:x,values:!1,limit:m.limit,query:{index:_,range:m.range}})}).then(function(x){return x.result}).then(u);m.keysOnly=!m.isMatch;var y=[];return this.each(function(x,_){y.push(_.primaryKey)}).then(function(){return y}).then(u)},lt.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},lt.prototype.firstKey=function(u){return this.limit(1).keys(function(m){return m[0]}).then(u)},lt.prototype.lastKey=function(u){return this.reverse().firstKey(u)},lt.prototype.distinct=function(){var u,m=this._ctx,m=m.index&&m.table.schema.idxByName[m.index];return m&&m.multi&&(u={},fs(this._ctx,function(x){var x=x.primaryKey.toString(),_=j(u,x);return u[x]=!0,!_})),this},lt.prototype.modify=function(u){var m=this,y=this._ctx;return this._write(function(x){function _(q,J){var te=J.failures;P+=q-J.numFailures;for(var X=0,le=p(te);X<le.length;X++){var ye=le[X];D.push(te[ye])}}var E=typeof u=="function"?u:function(q){return ds(q,u)},T=y.table.core,U=T.schema.primaryKey,C=U.outbound,z=U.extractKey,Q=200,U=m.db._options.modifyChunkSize,D=(U&&(Q=typeof U=="object"?U[T.name]||U["*"]||200:U),[]),P=0,H=[],L=u===Rl;return m.clone().primaryKeys().then(function(q){function J(X){var le=Math.min(Q,q.length-X),ye=q.slice(X,X+le);return(L?Promise.resolve([]):T.getMany({trans:x,keys:ye,cache:"immutable"})).then(function(_e){var Se=[],ve=[],Ce=C?[]:null,Te=L?ye:[];if(!L)for(var be=0;be<le;++be){var Re=_e[be],We={value:Qt(Re),primKey:q[X+be]};E.call(We,We.value,We)!==!1&&(We.value==null?Te.push(q[X+be]):C||et(z(Re),z(We.value))===0?(ve.push(We.value),C&&Ce.push(q[X+be])):(Te.push(q[X+be]),Se.push(We.value)))}return Promise.resolve(0<Se.length&&T.mutate({trans:x,type:"add",values:Se}).then(function(nt){for(var Be in nt.failures)Te.splice(parseInt(Be),1);_(Se.length,nt)})).then(function(){return(0<ve.length||te&&typeof u=="object")&&T.mutate({trans:x,type:"put",keys:Ce,values:ve,criteria:te,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<X}).then(function(nt){return _(ve.length,nt)})}).then(function(){return(0<Te.length||te&&L)&&T.mutate({trans:x,type:"delete",keys:Te,criteria:te,isAdditionalChunk:0<X}).then(function(nt){return yn(y.table,Te,nt)}).then(function(nt){return _(Te.length,nt)})}).then(function(){return q.length>X+le&&J(X+Q)})})}var te=Ba(y)&&y.limit===1/0&&(typeof u!="function"||L)&&{index:y.index,range:y.range};return J(0).then(function(){if(0<D.length)throw new ke("Error modifying one or more objects",D,P,H);return q.length})})})},lt.prototype.delete=function(){var u=this._ctx,m=u.range;return!Ba(u)||u.table.schema.yProps||!u.isPrimKey&&m.type!==3?this.modify(Rl):this._write(function(y){var x=u.table.core.schema.primaryKey,_=m;return u.table.core.count({trans:y,query:{index:x,range:_}}).then(function(E){return u.table.core.mutate({trans:y,type:"deleteRange",range:_}).then(function(z){var C=z.failures,z=z.numFailures;if(z)throw new ke("Could not delete some values",Object.keys(C).map(function(Q){return C[Q]}),E-z);return E-z})})})};var Wc=lt;function lt(){}var Rl=function(u,m){return m.value=null};function Ml(u,m){return u<m?-1:u===m?0:1}function Qc(u,m){return m<u?-1:u===m?0:1}function Dn(u,m,y){return u=u instanceof nr?new u.Collection(u):u,u._ctx.error=new(y||TypeError)(m),u}function ja(u){return new u.Collection(u,function(){return hs("")}).limit(0)}function Ln(H,m,y,x){var _,E,T,C,z,Q,U,D=y.length;if(!y.every(function(q){return typeof q=="string"}))return Dn(H,Vt);function P(q){_=q==="next"?function(te){return te.toUpperCase()}:function(te){return te.toLowerCase()},E=q==="next"?function(te){return te.toLowerCase()}:function(te){return te.toUpperCase()},T=q==="next"?Ml:Qc;var J=y.map(function(te){return{lower:E(te),upper:_(te)}}).sort(function(te,X){return T(te.lower,X.lower)});C=J.map(function(te){return te.upper}),z=J.map(function(te){return te.lower}),U=(Q=q)==="next"?"":x}P("next");var H=new H.Collection(H,function(){return la(C[0],z[D-1]+x)}),L=(H._ondirectionchange=function(q){P(q)},0);return H._addAlgorithm(function(q,J,te){var X=q.key;if(typeof X=="string"){var le=E(X);if(m(le,z,L))return!0;for(var ye=null,_e=L;_e<D;++_e){var Se=((ve,Ce,Te,be,Re,We)=>{for(var nt=Math.min(ve.length,be.length),Be=-1,Qe=0;Qe<nt;++Qe){var _t=Ce[Qe];if(_t!==be[Qe])return Re(ve[Qe],Te[Qe])<0?ve.substr(0,Qe)+Te[Qe]+Te.substr(Qe+1):Re(ve[Qe],be[Qe])<0?ve.substr(0,Qe)+be[Qe]+Te.substr(Qe+1):0<=Be?ve.substr(0,Be)+Ce[Be]+Te.substr(Be+1):null;Re(ve[Qe],_t)<0&&(Be=Qe)}return nt<be.length&&We==="next"?ve+Te.substr(ve.length):nt<ve.length&&We==="prev"?ve.substr(0,Te.length):Be<0?null:ve.substr(0,Be)+be[Be]+Te.substr(Be+1)})(X,le,C[_e],z[_e],T,Q);Se===null&&ye===null?L=_e+1:(ye===null||0<T(ye,Se))&&(ye=Se)}J(ye!==null?function(){q.continue(ye+U)}:te)}return!1}),H}function la(u,m,y,x){return{type:2,lower:u,upper:m,lowerOpen:y,upperOpen:x}}function hs(u){return{type:1,lower:u,upper:u}}Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(u,m,y,x){y=y!==!1,x=x===!0;try{return 0<this._cmp(u,m)||this._cmp(u,m)===0&&(y||x)&&(!y||!x)?ja(this):new this.Collection(this,function(){return la(u,m,!y,!x)})}catch{return Dn(this,En)}},Mt.prototype.equals=function(u){return u==null?Dn(this,En):new this.Collection(this,function(){return hs(u)})},Mt.prototype.above=function(u){return u==null?Dn(this,En):new this.Collection(this,function(){return la(u,void 0,!0)})},Mt.prototype.aboveOrEqual=function(u){return u==null?Dn(this,En):new this.Collection(this,function(){return la(u,void 0,!1)})},Mt.prototype.below=function(u){return u==null?Dn(this,En):new this.Collection(this,function(){return la(void 0,u,!1,!0)})},Mt.prototype.belowOrEqual=function(u){return u==null?Dn(this,En):new this.Collection(this,function(){return la(void 0,u)})},Mt.prototype.startsWith=function(u){return typeof u!="string"?Dn(this,Vt):this.between(u,u+Gn,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):Ln(this,function(m,y){return m.indexOf(y[0])===0},[u],Gn)},Mt.prototype.equalsIgnoreCase=function(u){return Ln(this,function(m,y){return m===y[0]},[u],"")},Mt.prototype.anyOfIgnoreCase=function(){var u=K.apply(Ke,arguments);return u.length===0?ja(this):Ln(this,function(m,y){return y.indexOf(m)!==-1},u,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var u=K.apply(Ke,arguments);return u.length===0?ja(this):Ln(this,function(m,y){return y.some(function(x){return m.indexOf(x)===0})},u,Gn)},Mt.prototype.anyOf=function(){var u,m,y=this,x=K.apply(Ke,arguments),_=this._cmp;try{x.sort(_)}catch{return Dn(this,En)}return x.length===0?ja(this):((u=new this.Collection(this,function(){return la(x[0],x[x.length-1])}))._ondirectionchange=function(E){_=E==="next"?y._ascending:y._descending,x.sort(_)},m=0,u._addAlgorithm(function(E,T,C){for(var z=E.key;0<_(z,x[m]);)if(++m===x.length)return T(C),!1;return _(z,x[m])===0||(T(function(){E.continue(x[m])}),!1)}),u)},Mt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var u=K.apply(Ke,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return Dn(this,En)}var m=u.reduce(function(y,x){return y?y.concat([[y[y.length-1][1],x]]):[[-1/0,x]]},null);return m.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(u,te){var y=this,x=this._cmp,_=this._ascending,E=this._descending,T=this._min,C=this._max;if(u.length===0)return ja(this);if(!u.every(function(X){return X[0]!==void 0&&X[1]!==void 0&&_(X[0],X[1])<=0}))return Dn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",je.InvalidArgument);var z=!te||te.includeLowers!==!1,Q=te&&te.includeUppers===!0,U,D=_;function P(X,le){return D(X[0],le[0])}try{(U=u.reduce(function(X,le){for(var ye=0,_e=X.length;ye<_e;++ye){var Se=X[ye];if(x(le[0],Se[1])<0&&0<x(le[1],Se[0])){Se[0]=T(Se[0],le[0]),Se[1]=C(Se[1],le[1]);break}}return ye===_e&&X.push(le),X},[])).sort(P)}catch{return Dn(this,En)}var H=0,L=Q?function(X){return 0<_(X,U[H][1])}:function(X){return 0<=_(X,U[H][1])},q=z?function(X){return 0<E(X,U[H][0])}:function(X){return 0<=E(X,U[H][0])},J=L,te=new this.Collection(this,function(){return la(U[0][0],U[U.length-1][1],!z,!Q)});return te._ondirectionchange=function(X){D=X==="next"?(J=L,_):(J=q,E),U.sort(P)},te._addAlgorithm(function(X,le,ye){for(var _e,Se=X.key;J(Se);)if(++H===U.length)return le(ye),!1;return!L(_e=Se)&&!q(_e)||(y._cmp(Se,U[H][1])===0||y._cmp(Se,U[H][0])===0||le(function(){D===_?X.continue(U[H][0]):X.continue(U[H][1])}),!1)}),te},Mt.prototype.startsWithAnyOf=function(){var u=K.apply(Ke,arguments);return u.every(function(m){return typeof m=="string"})?u.length===0?ja(this):this.inAnyRange(u.map(function(m){return[m,m+Gn]})):Dn(this,"startsWithAnyOf() only works with strings")};var nr=Mt;function Mt(){}function Vn(u){return Et(function(m){return ar(m),u(m.target.error),!1})}function ar(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var Ur="storagemutated",rr="x-storagemutated-1",dn=Ni(null,Ur),Dl=(Nn.prototype._lock=function(){return me(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this},Nn.prototype._unlock=function(){if(me(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{In(u[1],u[0])}catch{}}return this},Nn.prototype._locked=function(){return this._reculock&&Oe.lockOwnerFor!==this},Nn.prototype.create=function(u){var m=this;if(this.mode){var y=this.db.idbdb,x=this.db._state.dbOpenError;if(me(!this.idbtrans),!u&&!y)switch(x&&x.name){case"DatabaseClosedError":throw new je.DatabaseClosed(x);case"MissingAPIError":throw new je.MissingAPI(x.message,x);default:throw new je.OpenFailed(x)}if(!this.active)throw new je.TransactionInactive;me(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Et(function(_){ar(_),m._reject(u.error)}),u.onabort=Et(function(_){ar(_),m.active&&m._reject(new je.Abort(u.error)),m.active=!1,m.on("abort").fire(_)}),u.oncomplete=Et(function(){m.active=!1,m._resolve(),"mutatedParts"in u&&dn.storagemutated.fire(u.mutatedParts)})}return this},Nn.prototype._promise=function(u,m,y){var x,_=this;return u==="readwrite"&&this.mode!=="readwrite"?wt(new je.ReadOnly("Transaction is readonly")):this.active?this._locked()?new Ee(function(E,T){_._blockedFuncs.push([function(){_._promise(u,m,y).then(E,T)},Oe])}):y?Ct(function(){var E=new Ee(function(T,C){_._lock();var z=m(T,C,_);z&&z.then&&z.then(T,C)});return E.finally(function(){return _._unlock()}),E._lib=!0,E}):((x=new Ee(function(E,T){var C=m(E,T,_);C&&C.then&&C.then(E,T)}))._lib=!0,x):wt(new je.TransactionInactive)},Nn.prototype._root=function(){return this.parent?this.parent._root():this},Nn.prototype.waitFor=function(u){var m,y=this._root(),x=Ee.resolve(u),_=(y._waitingFor?y._waitingFor=y._waitingFor.then(function(){return x}):(y._waitingFor=x,y._waitingQueue=[],m=y.idbtrans.objectStore(y.storeNames[0]),(function E(){for(++y._spinCount;y._waitingQueue.length;)y._waitingQueue.shift()();y._waitingFor&&(m.get(-1/0).onsuccess=E)})()),y._waitingFor);return new Ee(function(E,T){x.then(function(C){return y._waitingQueue.push(Et(E.bind(null,C)))},function(C){return y._waitingQueue.push(Et(T.bind(null,C)))}).finally(function(){y._waitingFor===_&&(y._waitingFor=null)})})},Nn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new je.Abort))},Nn.prototype.table=function(u){var m=this._memoizedTables||(this._memoizedTables={});if(j(m,u))return m[u];var y=this.schema[u];if(y)return(y=new this.db.Table(u,y,this)).core=this.db.core.table(u),m[u]=y;throw new je.NotFound("Table "+u+" not part of transaction")},Nn);function Nn(){}function oa(u,m,y,x,_,E,T,C){return{name:u,keyPath:m,unique:y,multi:x,auto:_,compound:E,src:(y&&!T?"&":"")+(x?"*":"")+(_?"++":"")+ms(m),type:C}}function ms(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function Lr(u,m,y){return{name:u,primKey:m,indexes:y,mappedClass:null,idxByName:(x=function(_){return[_.name,_]},y.reduce(function(_,E,T){return E=x(E,T),E&&(_[E[0]]=E[1]),_},{}))};var x}var qr=function(u){try{return u.only([[]]),qr=function(){return[[]]},[[]]}catch{return qr=function(){return Gn},Gn}};function Br(u){return u==null?function(){}:typeof u=="string"?(m=u).split(".").length===1?function(y){return y[m]}:function(y){return ce(y,m)}:function(y){return ce(y,u)};var m}function Ai(u){return[].slice.call(u)}var eu=0;function Xt(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function ir(u,m,z){function x(L){if(L.type===3)return null;if(L.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var D=L.lower,P=L.upper,H=L.lowerOpen,L=L.upperOpen;return D===void 0?P===void 0?null:m.upperBound(P,!!L):P===void 0?m.lowerBound(D,!!H):m.bound(D,P,!!H,!!L)}function _(U){var D,P=U.name;return{name:P,schema:U,mutate:function(H){var L=H.trans,q=H.type,J=H.keys,te=H.values,X=H.range;return new Promise(function(le,ye){le=Et(le);var _e=L.objectStore(P),Se=_e.keyPath==null,ve=q==="put"||q==="add";if(!ve&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var Ce,Te=(J||te||{length:1}).length;if(J&&te&&J.length!==te.length)throw new Error("Given keys array must have same length as given values array.");if(Te===0)return le({numFailures:0,failures:{},results:[],lastResult:void 0});function be(pt){++nt,ar(pt)}var Re=[],We=[],nt=0;if(q==="deleteRange"){if(X.type===4)return le({numFailures:nt,failures:We,results:[],lastResult:void 0});X.type===3?Re.push(Ce=_e.clear()):Re.push(Ce=_e.delete(x(X)))}else{var Se=ve?Se?[te,J]:[te,null]:[J,null],Be=Se[0],Qe=Se[1];if(ve)for(var _t=0;_t<Te;++_t)Re.push(Ce=Qe&&Qe[_t]!==void 0?_e[q](Be[_t],Qe[_t]):_e[q](Be[_t])),Ce.onerror=be;else for(_t=0;_t<Te;++_t)Re.push(Ce=_e[q](Be[_t])),Ce.onerror=be}function On(pt){pt=pt.target.result,Re.forEach(function(Ka,Gr){return Ka.error!=null&&(We[Gr]=Ka.error)}),le({numFailures:nt,failures:We,results:q==="delete"?J:Re.map(function(Ka){return Ka.result}),lastResult:pt})}Ce.onerror=function(pt){be(pt),On(pt)},Ce.onsuccess=On})},getMany:function(H){var L=H.trans,q=H.keys;return new Promise(function(J,te){J=Et(J);for(var X,le=L.objectStore(P),ye=q.length,_e=new Array(ye),Se=0,ve=0,Ce=function(Re){Re=Re.target,_e[Re._pos]=Re.result,++ve===Se&&J(_e)},Te=Vn(te),be=0;be<ye;++be)q[be]!=null&&((X=le.get(q[be]))._pos=be,X.onsuccess=Ce,X.onerror=Te,++Se);Se===0&&J(_e)})},get:function(H){var L=H.trans,q=H.key;return new Promise(function(J,te){J=Et(J);var X=L.objectStore(P).get(q);X.onsuccess=function(le){return J(le.target.result)},X.onerror=Vn(te)})},query:(D=C,function(H){return new Promise(function(L,q){L=Et(L);var J,te,X,ve=H.trans,le=H.values,ye=H.limit,Se=H.query,_e=ye===1/0?void 0:ye,Ce=Se.index,Se=Se.range,ve=ve.objectStore(P),ve=Ce.isPrimaryKey?ve:ve.index(Ce.name),Ce=x(Se);if(ye===0)return L({result:[]});D?((Se=le?ve.getAll(Ce,_e):ve.getAllKeys(Ce,_e)).onsuccess=function(Te){return L({result:Te.target.result})},Se.onerror=Vn(q)):(J=0,te=!le&&"openKeyCursor"in ve?ve.openKeyCursor(Ce):ve.openCursor(Ce),X=[],te.onsuccess=function(Te){var be=te.result;return!be||(X.push(le?be.value:be.primaryKey),++J===ye)?L({result:X}):void be.continue()},te.onerror=Vn(q))})}),openCursor:function(H){var L=H.trans,q=H.values,J=H.query,te=H.reverse,X=H.unique;return new Promise(function(le,ye){le=Et(le);var ve=J.index,_e=J.range,Se=L.objectStore(P),Se=ve.isPrimaryKey?Se:Se.index(ve.name),ve=te?X?"prevunique":"prev":X?"nextunique":"next",Ce=!q&&"openKeyCursor"in Se?Se.openKeyCursor(x(_e),ve):Se.openCursor(x(_e),ve);Ce.onerror=Vn(ye),Ce.onsuccess=Et(function(Te){var be,Re,We,nt,Be=Ce.result;Be?(Be.___id=++eu,Be.done=!1,be=Be.continue.bind(Be),Re=(Re=Be.continuePrimaryKey)&&Re.bind(Be),We=Be.advance.bind(Be),nt=function(){throw new Error("Cursor not stopped")},Be.trans=L,Be.stop=Be.continue=Be.continuePrimaryKey=Be.advance=function(){throw new Error("Cursor not started")},Be.fail=Et(ye),Be.next=function(){var Qe=this,_t=1;return this.start(function(){return _t--?Qe.continue():Qe.stop()}).then(function(){return Qe})},Be.start=function(Qe){function _t(){if(Ce.result)try{Qe()}catch(pt){Be.fail(pt)}else Be.done=!0,Be.start=function(){throw new Error("Cursor behind last entry")},Be.stop()}var On=new Promise(function(pt,Ka){pt=Et(pt),Ce.onerror=Vn(Ka),Be.fail=Ka,Be.stop=function(Gr){Be.stop=Be.continue=Be.continuePrimaryKey=Be.advance=nt,pt(Gr)}});return Ce.onsuccess=Et(function(pt){Ce.onsuccess=_t,_t()}),Be.continue=be,Be.continuePrimaryKey=Re,Be.advance=We,_t(),On},le(Be)):le(null)},ye)})},count:function(H){var L=H.query,q=H.trans,J=L.index,te=L.range;return new Promise(function(X,le){var ye=q.objectStore(P),ye=J.isPrimaryKey?ye:ye.index(J.name),_e=x(te),_e=_e?ye.count(_e):ye.count();_e.onsuccess=Et(function(Se){return X(Se.target.result)}),_e.onerror=Vn(le)})}}}E=z,T=Ai((z=u).objectStoreNames);var E,z={schema:{name:z.name,tables:T.map(function(U){return E.objectStore(U)}).map(function(U){var D=U.keyPath,P=U.autoIncrement,L=g(D),H={},L={name:U.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:D==null,compound:L,keyPath:D,autoIncrement:P,unique:!0,extractKey:Br(D)},indexes:Ai(U.indexNames).map(function(q){return U.index(q)}).map(function(X){var le=X.name,J=X.unique,te=X.multiEntry,X=X.keyPath,le={name:le,compound:g(X),keyPath:X,unique:J,multiEntry:te,extractKey:Br(X)};return H[Xt(X)]=le}),getIndexByKeyPath:function(q){return H[Xt(q)]}};return H[":id"]=L.primaryKey,D!=null&&(H[Xt(D)]=L.primaryKey),L})},hasGetAll:0<T.length&&"getAll"in E.objectStore(T[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},T=z.schema,C=z.hasGetAll,z=T.tables.map(_),Q={};return z.forEach(function(U){return Q[U.name]=U}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(U){if(Q[U])return Q[U];throw new Error("Table '".concat(U,"' not found"))},MIN_KEY:-1/0,MAX_KEY:qr(m),schema:T}}function ps(u,m,y,x){return y=y.IDBKeyRange,m=ir(m,y,x),{dbcore:u.dbcore.reduce(function(_,E){return E=E.create,s(s({},_),E(_))},m)}}function Pa(u,m){var y=m.db,y=ps(u._middlewares,y,u._deps,m);u.core=y.dbcore,u.tables.forEach(function(x){var _=x.name;u.core.schema.tables.some(function(E){return E.name===_})&&(x.core=u.core.table(_),u[_]instanceof u.Table)&&(u[_].core=x.core)})}function gs(u,m,y,x){y.forEach(function(_){var E=x[_];m.forEach(function(T){var C=(function z(Q,U){return G(Q,U)||(Q=b(Q))&&z(Q,U)})(T,_);(!C||"value"in C&&C.value===void 0)&&(T===u.Transaction.prototype||T instanceof u.Transaction?B(T,_,{get:function(){return this.table(_)},set:function(z){A(this,_,{value:z,writable:!0,configurable:!0,enumerable:!0})}}):T[_]=new u.Table(_,E))})})}function Ci(u,m){m.forEach(function(y){for(var x in y)y[x]instanceof u.Table&&delete y[x]})}function zl(u,m){return u._cfg.version-m._cfg.version}function Ri(u,m,y,x){var _=u._dbSchema,E=(y.objectStoreNames.contains("$meta")&&!_.$meta&&(_.$meta=Lr("$meta",nu("")[0],[]),u._storeNames.push("$meta")),u._createTransaction("readwrite",u._storeNames,_)),T=(E.create(y),E._completion.catch(x),E._reject.bind(E)),C=Oe.transless||Oe;Ct(function(){if(Oe.trans=E,Oe.transless=C,m!==0)return Pa(u,y),Q=m,((z=E).storeNames.includes("$meta")?z.table("$meta").get("version").then(function(U){return U??Q}):Ee.resolve(Q)).then(function(J){var D=u,P=J,H=E,L=y,q=[],J=D._versions,te=D._dbSchema=Pr(0,D.idbdb,L);return(J=J.filter(function(X){return X._cfg.version>=P})).length===0?Ee.resolve():(J.forEach(function(X){q.push(function(){var le,ye,_e,Se=te,ve=X._cfg.dbschema,Ce=(xs(D,Se,L),xs(D,ve,L),te=D._dbSchema=ve,vs(Se,ve)),Te=(Ce.add.forEach(function(be){Ul(L,be[0],be[1].primKey,be[1].indexes)}),Ce.change.forEach(function(be){if(be.recreate)throw new je.Upgrade("Not yet support for changing primary key");var Re=L.objectStore(be.name);be.add.forEach(function(We){return bs(Re,We)}),be.change.forEach(function(We){Re.deleteIndex(We.name),bs(Re,We)}),be.del.forEach(function(We){return Re.deleteIndex(We)})}),X._cfg.contentUpgrade);if(Te&&X._cfg.version>P)return Pa(D,L),H._memoizedTables={},le=Me(ve),Ce.del.forEach(function(be){le[be]=Se[be]}),Ci(D,[D.Transaction.prototype]),gs(D,[D.Transaction.prototype],p(le),le),H.schema=le,(ye=k(Te))&&Gt(),ve=Ee.follow(function(){var be;(_e=Te(H))&&ye&&(be=Mn.bind(null,null),_e.then(be,be))}),_e&&typeof _e.then=="function"?Ee.resolve(_e):ve.then(function(){return _e})}),q.push(function(le){var ye,_e,Se=X._cfg.dbschema;ye=Se,_e=le,[].slice.call(_e.db.objectStoreNames).forEach(function(ve){return ye[ve]==null&&_e.db.deleteObjectStore(ve)}),Ci(D,[D.Transaction.prototype]),gs(D,[D.Transaction.prototype],D._storeNames,D._dbSchema),H.schema=D._dbSchema}),q.push(function(le){D.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(D.idbdb.version/10)===X._cfg.version?(D.idbdb.deleteObjectStore("$meta"),delete D._dbSchema.$meta,D._storeNames=D._storeNames.filter(function(ye){return ye!=="$meta"})):le.objectStore("$meta").put(X._cfg.version,"version"))})}),(function X(){return q.length?Ee.resolve(q.shift()(H.idbtrans)).then(X):Ee.resolve()})().then(function(){tu(te,L)}))}).catch(T);var z,Q;p(_).forEach(function(U){Ul(y,U,_[U].primKey,_[U].indexes)}),Pa(u,y),Ee.follow(function(){return u.on.populate.fire(E)}).catch(T)})}function ys(u,m){tu(u._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var y=Pr(0,u.idbdb,m);xs(u,u._dbSchema,m);for(var x=0,_=vs(y,u._dbSchema).change;x<_.length;x++){var E=(T=>{if(T.change.length||T.recreate)return console.warn("Unable to patch indexes of table ".concat(T.name," because it has changes on the type of index or primary key.")),{value:void 0};var C=m.objectStore(T.name);T.add.forEach(function(z){kn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(T.name,".").concat(z.src)),bs(C,z)})})(_[x]);if(typeof E=="object")return E.value}}function vs(u,m){var y,x={del:[],add:[],change:[]};for(y in u)m[y]||x.del.push(y);for(y in m){var _=u[y],E=m[y];if(_){var T={name:y,def:E,recreate:!1,del:[],add:[],change:[]};if(""+(_.primKey.keyPath||"")!=""+(E.primKey.keyPath||"")||_.primKey.auto!==E.primKey.auto)T.recreate=!0,x.change.push(T);else{var C=_.idxByName,z=E.idxByName,Q=void 0;for(Q in C)z[Q]||T.del.push(Q);for(Q in z){var U=C[Q],D=z[Q];U?U.src!==D.src&&T.change.push(D):T.add.push(D)}(0<T.del.length||0<T.add.length||0<T.change.length)&&x.change.push(T)}}else x.add.push([y,E])}return x}function Ul(u,m,y,x){var _=u.db.createObjectStore(m,y.keyPath?{keyPath:y.keyPath,autoIncrement:y.auto}:{autoIncrement:y.auto});x.forEach(function(E){return bs(_,E)})}function tu(u,m){p(u).forEach(function(y){m.db.objectStoreNames.contains(y)||(kn&&console.debug("Dexie: Creating missing table",y),Ul(m,y,u[y].primKey,u[y].indexes))})}function bs(u,m){u.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function Pr(u,m,y){var x={};return I(m.objectStoreNames,0).forEach(function(_){for(var E=y.objectStore(_),T=oa(ms(Q=E.keyPath),Q||"",!0,!1,!!E.autoIncrement,Q&&typeof Q!="string",!0),C=[],z=0;z<E.indexNames.length;++z){var U=E.index(E.indexNames[z]),Q=U.keyPath,U=oa(U.name,Q,!!U.unique,!!U.multiEntry,!1,Q&&typeof Q!="string",!1);C.push(U)}x[_]=Lr(_,T,C)}),x}function xs(u,m,y){for(var x=y.db.objectStoreNames,_=0;_<x.length;++_){var E=x[_],T=y.objectStore(E);u._hasGetAll="getAll"in T;for(var C=0;C<T.indexNames.length;++C){var z,Q=T.indexNames[C],U=T.index(Q).keyPath,U=typeof U=="string"?U:"["+I(U).join("+")+"]";m[E]&&(z=m[E].idxByName[U])&&(z.name=Q,delete m[E].idxByName[U],m[E].idxByName[Q]=z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function nu(u){return u.split(",").map(function(m,y){var _=m.split(":"),x=(x=_[1])==null?void 0:x.trim(),_=(m=_[0].trim()).replace(/([&*]|\+\+)/g,""),E=/^\[/.test(_)?_.match(/^\[(.*)\]$/)[1].split("+"):_;return oa(_,E||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),g(E),y===0,x)})}$r.prototype._createTableSchema=Lr,$r.prototype._parseIndexSyntax=nu,$r.prototype._parseStoresSpec=function(u,m){var y=this;p(u).forEach(function(x){if(u[x]!==null){var _=y._parseIndexSyntax(u[x]),E=_.shift();if(!E)throw new je.Schema("Invalid schema for table "+x+": "+u[x]);if(E.unique=!0,E.multi)throw new je.Schema("Primary key cannot be multiEntry*");_.forEach(function(T){if(T.auto)throw new je.Schema("Only primary key can be marked as autoIncrement (++)");if(!T.keyPath)throw new je.Schema("Index must have a name and cannot be an empty string")}),E=y._createTableSchema(x,E,_),m[x]=E}})},$r.prototype.stores=function(y){var m=this.db,y=(this._cfg.storesSource=this._cfg.storesSource?v(this._cfg.storesSource,y):y,m._versions),x={},_={};return y.forEach(function(E){v(x,E._cfg.storesSource),_=E._cfg.dbschema={},E._parseStoresSpec(x,_)}),m._dbSchema=_,Ci(m,[m._allTables,m,m.Transaction.prototype]),gs(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],p(_),_),m._storeNames=p(_),this},$r.prototype.upgrade=function(u){return this._cfg.contentUpgrade=un(this._cfg.contentUpgrade||Pe,u),this};var Xc=$r;function $r(){}function Ll(u,m){var y=u._dbNamesDB;return y||(y=u._dbNamesDB=new ua(ji,{addons:[],indexedDB:u,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),y.table("dbnames")}function ws(u){return u&&typeof u.databases=="function"}function ql(u){return Ct(function(){return Oe.letThrough=!0,u()})}function Bl(u){return!("from"in u)}var fn=function(u,m){var y;if(!this)return y=new fn,u&&"d"in u&&v(y,u),y;v(this,arguments.length?{d:1,from:u,to:1<arguments.length?m:u}:{d:0})};function Mi(u,m,y){var x=et(m,y);if(!isNaN(x)){if(0<x)throw RangeError();if(Bl(u))return v(u,{from:m,to:y,d:1});var x=u.l,_=u.r;if(et(y,u.from)<0)return x?Mi(x,m,y):u.l={from:m,to:y,d:1,l:null,r:null},ru(u);if(0<et(m,u.to))return _?Mi(_,m,y):u.r={from:m,to:y,d:1,l:null,r:null},ru(u);et(m,u.from)<0&&(u.from=m,u.l=null,u.d=_?_.d+1:1),0<et(y,u.to)&&(u.to=y,u.r=null,u.d=u.l?u.l.d+1:1),m=!u.r,x&&!u.l&&sr(u,x),_&&m&&sr(u,_)}}function sr(u,m){Bl(m)||(function y(x,_){var E=_.from,T=_.l,C=_.r;Mi(x,E,_.to),T&&y(x,T),C&&y(x,C)})(u,m)}function au(u,m){var y=_s(m),x=y.next();if(!x.done)for(var _=x.value,E=_s(u),T=E.next(_.from),C=T.value;!x.done&&!T.done;){if(et(C.from,_.to)<=0&&0<=et(C.to,_.from))return!0;et(_.from,C.from)<0?_=(x=y.next(C.from)).value:C=(T=E.next(_.from)).value}return!1}function _s(u){var m=Bl(u)?null:{s:0,n:u};return{next:function(y){for(var x=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,x)for(;m.n.l&&et(y,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!x||et(y,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function ru(u){var m,y,x,_=(((_=u.r)==null?void 0:_.d)||0)-(((_=u.l)==null?void 0:_.d)||0),_=1<_?"r":_<-1?"l":"";_&&(m=_=="r"?"l":"r",y=s({},u),x=u[_],u.from=x.from,u.to=x.to,u[_]=x[_],y[_]=x[m],(u[m]=y).d=Pl(y)),u.d=Pl(u)}function Pl(y){var m=y.r,y=y.l;return(m?y?Math.max(m.d,y.d):m.d:y?y.d:0)+1}function Ss(u,m){return p(m).forEach(function(y){u[y]?sr(u[y],m[y]):u[y]=(function x(_){var E,T,C={};for(E in _)j(_,E)&&(T=_[E],C[E]=!T||typeof T!="object"||gt.has(T.constructor)?T:x(T));return C})(m[y])}),u}function $l(u,m){return u.all||m.all||Object.keys(u).some(function(y){return m[y]&&au(m[y],u[y])})}O(fn.prototype,((sn={add:function(u){return sr(this,u),this},addKey:function(u){return Mi(this,u,u),this},addKeys:function(u){var m=this;return u.forEach(function(y){return Mi(m,y,y)}),this},hasKey:function(u){var m=_s(this).next(u).value;return m&&et(m.from,u)<=0&&0<=et(m.to,u)}})[se]=function(){return _s(this)},sn));var lr={},Hl={},Kl=!1;function js(u){Ss(Hl,u),Kl||(Kl=!0,setTimeout(function(){Kl=!1,Il(Hl,!(Hl={}))},0))}function Il(u,m){m===void 0&&(m=!1);var y=new Set;if(u.all)for(var x=0,_=Object.values(lr);x<_.length;x++)iu(C=_[x],u,y,m);else for(var E in u){var T,C,E=/^idb\:\/\/(.*)\/(.*)\//.exec(E);E&&(T=E[1],E=E[2],C=lr["idb://".concat(T,"/").concat(E)])&&iu(C,u,y,m)}y.forEach(function(z){return z()})}function iu(u,m,y,x){for(var _=[],E=0,T=Object.entries(u.queries.query);E<T.length;E++){for(var C=T[E],z=C[0],Q=[],U=0,D=C[1];U<D.length;U++){var P=D[U];$l(m,P.obsSet)?P.subscribers.forEach(function(J){return y.add(J)}):x&&Q.push(P)}x&&_.push([z,Q])}if(x)for(var H=0,L=_;H<L.length;H++){var q=L[H],z=q[0],Q=q[1];u.queries.query[z]=Q}}function Fc(u){var m=u._state,y=u._deps.indexedDB;if(m.isBeingOpened||u.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?wt(m.dbOpenError):u});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var x=m.openCanceller,_=Math.round(10*u.verno),E=!1;function T(){if(m.openCanceller!==x)throw new je.DatabaseClosed("db.open() was cancelled")}function C(){return new Ee(function(P,H){if(T(),!y)throw new je.MissingAPI;var L=u.name,q=m.autoSchema||!_?y.open(L):y.open(L,_);if(!q)throw new je.MissingAPI;q.onerror=Vn(H),q.onblocked=Et(u._fireOnBlocked),q.onupgradeneeded=Et(function(J){var te;U=q.transaction,m.autoSchema&&!u._options.allowEmptyDB?(q.onerror=ar,U.abort(),q.result.close(),(te=y.deleteDatabase(L)).onsuccess=te.onerror=Et(function(){H(new je.NoSuchDatabase("Database ".concat(L," doesnt exist")))})):(U.onerror=Vn(H),te=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,D=te<1,u.idbdb=q.result,E&&ys(u,U),Ri(u,te/10,U,H))},H),q.onsuccess=Et(function(){U=null;var J,te,X,le,ye,_e,Se=u.idbdb=q.result,ve=I(Se.objectStoreNames);if(0<ve.length)try{var Ce=Se.transaction((ye=ve).length===1?ye[0]:ye,"readonly");if(m.autoSchema)_e=Se,le=Ce,(X=u).verno=_e.version/10,le=X._dbSchema=Pr(0,_e,le),X._storeNames=I(_e.objectStoreNames,0),gs(X,[X._allTables],p(le),le);else if(xs(u,u._dbSchema,Ce),te=Ce,((te=vs(Pr(0,(J=u).idbdb,te),J._dbSchema)).add.length||te.change.some(function(Te){return Te.add.length||Te.change.length}))&&!E)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),_=Se.version+1,E=!0,P(C());Pa(u,Ce)}catch{}Za.push(u),Se.onversionchange=Et(function(Te){m.vcFired=!0,u.on("versionchange").fire(Te)}),Se.onclose=Et(function(){u.close({disableAutoOpen:!1})}),D&&(ve=u._deps,ye=L,ws(_e=ve.indexedDB)||ye===ji||Ll(_e,ve.IDBKeyRange).put({name:ye}).catch(Pe)),P()},H)}).catch(function(P){switch(P?.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),C();break;case"VersionError":if(0<_)return _=0,C()}return Ee.reject(P)})}var z,Q=m.dbReadyResolve,U=null,D=!1;return Ee.race([x,(typeof navigator>"u"?Ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(P){function H(){return indexedDB.databases().finally(P)}z=setInterval(H,100),H()}).finally(function(){return clearInterval(z)}):Promise.resolve()).then(C)]).then(function(){return T(),m.onReadyBeingFired=[],Ee.resolve(ql(function(){return u.on.ready.fire(u.vip)})).then(function P(){var H;if(0<m.onReadyBeingFired.length)return H=m.onReadyBeingFired.reduce(un,Pe),m.onReadyBeingFired=[],Ee.resolve(ql(function(){return H(u.vip)})).then(P)})}).finally(function(){m.openCanceller===x&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(P){m.dbOpenError=P;try{U&&U.abort()}catch{}return x===m.openCanceller&&u._close(),wt(P)}).finally(function(){m.openComplete=!0,Q()}).then(function(){var P;return D&&(P={},u.tables.forEach(function(H){H.schema.indexes.forEach(function(L){L.name&&(P["idb://".concat(u.name,"/").concat(H.name,"/").concat(L.name)]=new fn(-1/0,[[[]]]))}),P["idb://".concat(u.name,"/").concat(H.name,"/")]=P["idb://".concat(u.name,"/").concat(H.name,"/:dels")]=new fn(-1/0,[[[]]])}),dn(Ur).fire(P),Il(P,!0)),u})}function Di(u){function m(E){return u.next(E)}var y=_(m),x=_(function(E){return u.throw(E)});function _(E){return function(C){var C=E(C),z=C.value;return C.done?z:z&&typeof z.then=="function"?z.then(y,x):g(z)?Promise.all(z).then(y,x):y(z)}}return _(m)()}function $a(u,m,y){for(var x=g(u)?u.slice():[u],_=0;_<y;++_)x.push(m);return x}var Jc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return s(s({},u),{table:function(x){var y=u.table(x),x=y.schema,_={},E=[];function T(P,H,L){var X=Xt(P),q=_[X]=_[X]||[],J=P==null?0:typeof P=="string"?1:P.length,te=0<H,X=s(s({},L),{name:te?"".concat(X,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:te,keyTail:H,keyLength:J,extractKey:Br(P),unique:!te&&L.unique});return q.push(X),X.isPrimaryKey||E.push(X),1<J&&T(J===2?P[0]:P.slice(0,J-1),H+1,L),q.sort(function(le,ye){return le.keyTail-ye.keyTail}),X}var C=T(x.primaryKey.keyPath,0,x.primaryKey);_[":id"]=[C];for(var z=0,Q=x.indexes;z<Q.length;z++){var U=Q[z];T(U.keyPath,0,U)}function D(P){var H,L=P.query.index;return L.isVirtual?s(s({},P),{query:{index:L.lowLevelIndex,range:(H=P.query.range,L=L.keyTail,{type:H.type===1?2:H.type,lower:$a(H.lower,H.lowerOpen?u.MAX_KEY:u.MIN_KEY,L),lowerOpen:!0,upper:$a(H.upper,H.upperOpen?u.MIN_KEY:u.MAX_KEY,L),upperOpen:!0})}}):P}return s(s({},y),{schema:s(s({},x),{primaryKey:C,indexes:E,getIndexByKeyPath:function(P){return(P=_[Xt(P)])&&P[0]}}),count:function(P){return y.count(D(P))},query:function(P){return y.query(D(P))},openCursor:function(P){var H=P.query.index,L=H.keyTail,q=H.keyLength;return H.isVirtual?y.openCursor(D(P)).then(function(te){return te&&J(te)}):y.openCursor(P);function J(te){return Object.create(te,{continue:{value:function(X){X!=null?te.continue($a(X,P.reverse?u.MAX_KEY:u.MIN_KEY,L)):P.unique?te.continue(te.key.slice(0,q).concat(P.reverse?u.MIN_KEY:u.MAX_KEY,L)):te.continue()}},continuePrimaryKey:{value:function(X,le){te.continuePrimaryKey($a(X,u.MAX_KEY,L),le)}},primaryKey:{get:function(){return te.primaryKey}},key:{get:function(){var X=te.key;return q===1?X[0]:X.slice(0,q)}},value:{get:function(){return te.value}}})}}})}})}};function ks(u,m,y,x){return y=y||{},x=x||"",p(u).forEach(function(_){var E,T,C;j(m,_)?(E=u[_],T=m[_],typeof E=="object"&&typeof T=="object"&&E&&T?(C=Kt(E))!==Kt(T)?y[x+_]=m[_]:C==="Object"?ks(E,T,y,x+_+"."):E!==T&&(y[x+_]=m[_]):E!==T&&(y[x+_]=m[_])):y[x+_]=void 0}),p(m).forEach(function(_){j(u,_)||(y[x+_]=m[_])}),y}function Es(u,m){return m.type==="delete"?m.keys:m.keys||m.values.map(u.extractKey)}var su={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return s(s({},u),{table:function(m){var y=u.table(m),x=y.schema.primaryKey;return s(s({},y),{mutate:function(_){var E=Oe.trans,T=E.table(m).hook,C=T.deleting,z=T.creating,Q=T.updating;switch(_.type){case"add":if(z.fire===Pe)break;return E._promise("readwrite",function(){return U(_)},!0);case"put":if(z.fire===Pe&&Q.fire===Pe)break;return E._promise("readwrite",function(){return U(_)},!0);case"delete":if(C.fire===Pe)break;return E._promise("readwrite",function(){return U(_)},!0);case"deleteRange":if(C.fire===Pe)break;return E._promise("readwrite",function(){return(function D(P,H,L){return y.query({trans:P,values:!1,query:{index:x,range:H},limit:L}).then(function(q){var J=q.result;return U({type:"delete",keys:J,trans:P}).then(function(te){return 0<te.numFailures?Promise.reject(te.failures[0]):J.length<L?{failures:[],numFailures:0,lastResult:void 0}:D(P,s(s({},H),{lower:J[J.length-1],lowerOpen:!0}),L)})})})(_.trans,_.range,1e4)},!0)}return y.mutate(_);function U(D){var P,H,L,q=Oe.trans,J=D.keys||Es(x,D);if(J)return(D=D.type==="add"||D.type==="put"?s(s({},D),{keys:J}):s({},D)).type!=="delete"&&(D.values=o([],D.values)),D.keys&&(D.keys=o([],D.keys)),P=y,L=J,((H=D).type==="add"?Promise.resolve([]):P.getMany({trans:H.trans,keys:L,cache:"immutable"})).then(function(te){var X=J.map(function(le,ye){var _e,Se,ve,Ce=te[ye],Te={onerror:null,onsuccess:null};return D.type==="delete"?C.fire.call(Te,le,Ce,q):D.type==="add"||Ce===void 0?(_e=z.fire.call(Te,le,D.values[ye],q),le==null&&_e!=null&&(D.keys[ye]=le=_e,x.outbound||ae(D.values[ye],x.keyPath,le))):(_e=ks(Ce,D.values[ye]),(Se=Q.fire.call(Te,_e,le,Ce,q))&&(ve=D.values[ye],Object.keys(Se).forEach(function(be){j(ve,be)?ve[be]=Se[be]:ae(ve,be,Se[be])}))),Te});return y.mutate(D).then(function(le){for(var ye=le.failures,_e=le.results,Se=le.numFailures,le=le.lastResult,ve=0;ve<J.length;++ve){var Ce=(_e||J)[ve],Te=X[ve];Ce==null?Te.onerror&&Te.onerror(ye[ve]):Te.onsuccess&&Te.onsuccess(D.type==="put"&&te[ve]?D.values[ve]:Ce)}return{failures:ye,results:_e,numFailures:Se,lastResult:le}}).catch(function(le){return X.forEach(function(ye){return ye.onerror&&ye.onerror(le)}),Promise.reject(le)})});throw new Error("Keys missing")}}})}})}};function Gl(u,m,y){try{if(!m||m.keys.length<u.length)return null;for(var x=[],_=0,E=0;_<m.keys.length&&E<u.length;++_)et(m.keys[_],u[E])===0&&(x.push(y?Qt(m.values[_]):m.values[_]),++E);return x.length===u.length?x:null}catch{return null}}var lu={stack:"dbcore",level:-1,create:function(u){return{table:function(m){var y=u.table(m);return s(s({},y),{getMany:function(x){var _;return x.cache?(_=Gl(x.keys,x.trans._cache,x.cache==="clone"))?Ee.resolve(_):y.getMany(x).then(function(E){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?Qt(E):E},E}):y.getMany(x)},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),y.mutate(x)}})}}}};function or(u,m){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function ou(u,m){switch(u){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Zc={stack:"dbcore",level:0,name:"Observability",create:function(u){var m=u.schema.name,y=new fn(u.MIN_KEY,u.MAX_KEY);return s(s({},u),{transaction:function(x,_,E){if(Oe.subscr&&_!=="readonly")throw new je.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Oe.querier));return u.transaction(x,_,E)},table:function(x){function _(J){var q,J=J.query;return[q=J.index,new fn((q=(J=J.range).lower)!=null?q:u.MIN_KEY,(q=J.upper)!=null?q:u.MAX_KEY)]}var E=u.table(x),T=E.schema,C=T.primaryKey,z=T.indexes,Q=C.extractKey,U=C.outbound,D=C.autoIncrement&&z.filter(function(L){return L.compound&&L.keyPath.includes(C.keyPath)}),P=s(s({},E),{mutate:function(L){function q(Re){return Re="idb://".concat(m,"/").concat(x,"/").concat(Re),ye[Re]||(ye[Re]=new fn)}var J,te,X,le=L.trans,ye=L.mutatedParts||(L.mutatedParts={}),_e=q(""),Se=q(":dels"),ve=L.type,Te=L.type==="deleteRange"?[L.range]:L.type==="delete"?[L.keys]:L.values.length<50?[Es(C,L).filter(function(Re){return Re}),L.values]:[],Ce=Te[0],Te=Te[1],be=L.trans._cache;return g(Ce)?(_e.addKeys(Ce),(ve=ve==="delete"||Ce.length===Te.length?Gl(Ce,be):null)||Se.addKeys(Ce),(ve||Te)&&(J=q,te=ve,X=Te,T.indexes.forEach(function(Re){var We=J(Re.name||"");function nt(Qe){return Qe!=null?Re.extractKey(Qe):null}function Be(Qe){Re.multiEntry&&g(Qe)?Qe.forEach(function(_t){return We.addKey(_t)}):We.addKey(Qe)}(te||X).forEach(function(Qe,pt){var On=te&&nt(te[pt]),pt=X&&nt(X[pt]);et(On,pt)!==0&&(On!=null&&Be(On),pt!=null)&&Be(pt)})}))):Ce?(Te={from:(be=Ce.lower)!=null?be:u.MIN_KEY,to:(ve=Ce.upper)!=null?ve:u.MAX_KEY},Se.add(Te),_e.add(Te)):(_e.add(y),Se.add(y),T.indexes.forEach(function(Re){return q(Re.name).add(y)})),E.mutate(L).then(function(Re){return!Ce||L.type!=="add"&&L.type!=="put"||(_e.addKeys(Re.results),D&&D.forEach(function(We){for(var nt=L.values.map(function(On){return We.extractKey(On)}),Be=We.keyPath.findIndex(function(On){return On===C.keyPath}),Qe=0,_t=Re.results.length;Qe<_t;++Qe)nt[Qe][Be]=Re.results[Qe];q(We.name).addKeys(nt)})),le.mutatedParts=Ss(le.mutatedParts||{},ye),Re})}}),H={get:function(L){return[C,new fn(L.key)]},getMany:function(L){return[C,new fn().addKeys(L.keys)]},count:_,query:_,openCursor:_};return p(H).forEach(function(L){P[L]=function(q){var J=Oe.subscr,te=!!J,X=or(Oe,E)&&ou(L,q)?q.obsSet={}:J;if(te){var le,J=function(Te){return Te="idb://".concat(m,"/").concat(x,"/").concat(Te),X[Te]||(X[Te]=new fn)},ye=J(""),_e=J(":dels"),te=H[L](q),Se=te[0],te=te[1];if((L==="query"&&Se.isPrimaryKey&&!q.values?_e:J(Se.name||"")).add(te),!Se.isPrimaryKey){if(L!=="count")return le=L==="query"&&U&&q.values&&E.query(s(s({},q),{values:!1})),E[L].apply(this,arguments).then(function(Te){if(L==="query"){if(U&&q.values)return le.then(function(nt){return nt=nt.result,ye.addKeys(nt),Te});var be=q.values?Te.result.map(Q):Te.result;(q.values?ye:_e).addKeys(be)}else{var Re,We;if(L==="openCursor")return We=q.values,(Re=Te)&&Object.create(Re,{key:{get:function(){return _e.addKey(Re.primaryKey),Re.key}},primaryKey:{get:function(){var nt=Re.primaryKey;return _e.addKey(nt),nt}},value:{get:function(){return We&&ye.addKey(Re.primaryKey),Re.value}}})}return Te});_e.add(y)}}return E[L].apply(this,arguments)}}),P}})}};function uu(u,m,y){var x;return y.numFailures===0?m:m.type==="deleteRange"||(x=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1,y.numFailures===x)?null:(x=s({},m),g(x.keys)&&(x.keys=x.keys.filter(function(_,E){return!(E in y.failures)})),"values"in x&&g(x.values)&&(x.values=x.values.filter(function(_,E){return!(E in y.failures)})),x)}function Ns(u,m){return y=u,((x=m).lower===void 0||(x.lowerOpen?0<et(y,x.lower):0<=et(y,x.lower)))&&(y=u,(x=m).upper===void 0||(x.upperOpen?et(y,x.upper)<0:et(y,x.upper)<=0));var y,x}function Vl(u,m,y,x,_,E){var T,C,z,Q,U,D;return!y||y.length===0||(T=m.query.index,C=T.multiEntry,z=m.query.range,Q=x.schema.primaryKey.extractKey,U=T.extractKey,D=(T.lowLevelIndex||T).extractKey,(x=y.reduce(function(P,H){var L=P,q=[];if(H.type==="add"||H.type==="put")for(var J=new fn,te=H.values.length-1;0<=te;--te){var X,le=H.values[te],ye=Q(le);!J.hasKey(ye)&&(X=U(le),C&&g(X)?X.some(function(Te){return Ns(Te,z)}):Ns(X,z))&&(J.addKey(ye),q.push(le))}switch(H.type){case"add":var _e=new fn().addKeys(m.values?P.map(function(be){return Q(be)}):P),L=P.concat(m.values?q.filter(function(be){return be=Q(be),!_e.hasKey(be)&&(_e.addKey(be),!0)}):q.map(function(be){return Q(be)}).filter(function(be){return!_e.hasKey(be)&&(_e.addKey(be),!0)}));break;case"put":var Se=new fn().addKeys(H.values.map(function(be){return Q(be)}));L=P.filter(function(be){return!Se.hasKey(m.values?Q(be):be)}).concat(m.values?q:q.map(function(be){return Q(be)}));break;case"delete":var ve=new fn().addKeys(H.keys);L=P.filter(function(be){return!ve.hasKey(m.values?Q(be):be)});break;case"deleteRange":var Ce=H.range;L=P.filter(function(be){return!Ns(Q(be),Ce)})}return L},u))===u)?u:(x.sort(function(P,H){return et(D(P),D(H))||et(Q(P),Q(H))}),m.limit&&m.limit<1/0&&(x.length>m.limit?x.length=m.limit:u.length===m.limit&&x.length<m.limit&&(_.dirty=!0)),E?Object.freeze(x):x)}function Hr(u,m){return et(u.lower,m.lower)===0&&et(u.upper,m.upper)===0&&!!u.lowerOpen==!!m.lowerOpen&&!!u.upperOpen==!!m.upperOpen}function zi(u,m){return((y,x,_,E)=>{if(y===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((y=et(y,x))===0){if(_&&E)return 0;if(_)return 1;if(E)return-1}return y})(u.lower,m.lower,u.lowerOpen,m.lowerOpen)<=0&&0<=((y,x,_,E)=>{if(y===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((y=et(y,x))===0){if(_&&E)return 0;if(_)return-1;if(E)return 1}return y})(u.upper,m.upper,u.upperOpen,m.upperOpen)}function ed(u,m,y,x){u.subscribers.add(y),x.addEventListener("abort",function(){var _,E;u.subscribers.delete(y),u.subscribers.size===0&&(_=u,E=m,setTimeout(function(){_.subscribers.size===0&&Ne(E,_)},3e3))})}var Ts={stack:"dbcore",level:0,name:"Cache",create:function(u){var m=u.schema.name;return s(s({},u),{transaction:function(y,x,_){var E,T,C=u.transaction(y,x,_);return x==="readwrite"&&(_=(E=new AbortController).signal,C.addEventListener("abort",(T=function(z){return function(){if(E.abort(),x==="readwrite"){for(var Q=new Set,U=0,D=y;U<D.length;U++){var P=D[U],H=lr["idb://".concat(m,"/").concat(P)];if(H){var L=u.table(P),q=H.optimisticOps.filter(function(Re){return Re.trans===C});if(C._explicit&&z&&C.mutatedParts)for(var J=0,te=Object.values(H.queries.query);J<te.length;J++)for(var X=0,le=(Se=te[J]).slice();X<le.length;X++)$l((ve=le[X]).obsSet,C.mutatedParts)&&(Ne(Se,ve),ve.subscribers.forEach(function(Re){return Q.add(Re)}));else if(0<q.length){H.optimisticOps=H.optimisticOps.filter(function(Re){return Re.trans!==C});for(var ye=0,_e=Object.values(H.queries.query);ye<_e.length;ye++)for(var Se,ve,Ce,Te=0,be=(Se=_e[ye]).slice();Te<be.length;Te++)(ve=be[Te]).res!=null&&C.mutatedParts&&(z&&!ve.dirty?(Ce=Object.isFrozen(ve.res),Ce=Vl(ve.res,ve.req,q,L,ve,Ce),ve.dirty?(Ne(Se,ve),ve.subscribers.forEach(function(Re){return Q.add(Re)})):Ce!==ve.res&&(ve.res=Ce,ve.promise=Ee.resolve({result:Ce}))):(ve.dirty&&Ne(Se,ve),ve.subscribers.forEach(function(Re){return Q.add(Re)})))}}}Q.forEach(function(Re){return Re()})}}})(!1),{signal:_}),C.addEventListener("error",T(!1),{signal:_}),C.addEventListener("complete",T(!0),{signal:_})),C},table:function(y){var x=u.table(y),_=x.schema.primaryKey;return s(s({},x),{mutate:function(E){var T,C=Oe.trans;return!_.outbound&&C.db._options.cache!=="disabled"&&!C.explicit&&C.idbtrans.mode==="readwrite"&&(T=lr["idb://".concat(m,"/").concat(y)])?(C=x.mutate(E),E.type!=="add"&&E.type!=="put"||!(50<=E.values.length||Es(_,E).some(function(z){return z==null}))?(T.optimisticOps.push(E),E.mutatedParts&&js(E.mutatedParts),C.then(function(z){0<z.numFailures&&(Ne(T.optimisticOps,E),(z=uu(0,E,z))&&T.optimisticOps.push(z),E.mutatedParts)&&js(E.mutatedParts)}),C.catch(function(){Ne(T.optimisticOps,E),E.mutatedParts&&js(E.mutatedParts)})):C.then(function(z){var Q=uu(0,s(s({},E),{values:E.values.map(function(U,D){var P;return z.failures[D]?U:(ae(P=(P=_.keyPath)!=null&&P.includes(".")?Qt(U):s({},U),_.keyPath,z.results[D]),P)})}),z);T.optimisticOps.push(Q),queueMicrotask(function(){return E.mutatedParts&&js(E.mutatedParts)})}),C):x.mutate(E)},query:function(E){var T,C,z,Q,U,D,P;return or(Oe,x)&&ou("query",E)?(T=((z=Oe.trans)==null?void 0:z.db._options.cache)==="immutable",C=(z=Oe).requery,z=z.signal,D=((H,L,q,J)=>{var te=lr["idb://".concat(H,"/").concat(L)];if(!te)return[];if(!(H=te.queries[q]))return[null,!1,te,null];var X=H[(J.query?J.query.index.name:null)||""];if(!X)return[null,!1,te,null];switch(q){case"query":var le=X.find(function(ye){return ye.req.limit===J.limit&&ye.req.values===J.values&&Hr(ye.req.query.range,J.query.range)});return le?[le,!0,te,X]:[X.find(function(ye){return("limit"in ye.req?ye.req.limit:1/0)>=J.limit&&(!J.values||ye.req.values)&&zi(ye.req.query.range,J.query.range)}),!1,te,X];case"count":return le=X.find(function(ye){return Hr(ye.req.query.range,J.query.range)}),[le,!!le,te,X]}})(m,y,"query",E),P=D[0],Q=D[2],U=D[3],P&&D[1]?P.obsSet=E.obsSet:(D=x.query(E).then(function(H){var L=H.result;if(P&&(P.res=L),T){for(var q=0,J=L.length;q<J;++q)Object.freeze(L[q]);Object.freeze(L)}else H.result=Qt(L);return H}).catch(function(H){return U&&P&&Ne(U,P),Promise.reject(H)}),P={obsSet:E.obsSet,promise:D,subscribers:new Set,type:"query",req:E,dirty:!1},U?U.push(P):(U=[P],(Q=Q||(lr["idb://".concat(m,"/").concat(y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[E.query.index.name||""]=U)),ed(P,U,C,z),P.promise.then(function(H){return{result:Vl(H.result,E,Q?.optimisticOps,x,P,T)}})):x.query(E)}})}})}};function Ui(u,m){return new Proxy(u,{get:function(y,x,_){return x==="db"?m:Reflect.get(y,x,_)}})}Dt.prototype.version=function(u){if(isNaN(u)||u<.1)throw new je.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new je.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var m=this._versions,y=m.filter(function(x){return x._cfg.version===u})[0];return y||(y=new this.Version(u),m.push(y),m.sort(zl),y.stores({}),this._state.autoSchema=!1),y},Dt.prototype._whenReady=function(u){var m=this;return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?u():new Ee(function(y,x){if(m._state.openComplete)return x(new je.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void x(new je.DatabaseClosed);m.open().catch(Pe)}m._state.dbReadyPromise.then(y,x)}).then(u)},Dt.prototype.use=function(_){var m=_.stack,y=_.create,x=_.level,_=_.name,E=(_&&this.unuse({stack:m,name:_}),this._middlewares[m]||(this._middlewares[m]=[]));return E.push({stack:m,create:y,level:x??10,name:_}),E.sort(function(T,C){return T.level-C.level}),this},Dt.prototype.unuse=function(u){var m=u.stack,y=u.name,x=u.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(_){return x?_.create!==x:!!y&&_.name!==y})),this},Dt.prototype.open=function(){var u=this;return In(gn,function(){return Fc(u)})},Dt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var u=this._state,m=Za.indexOf(this);if(0<=m&&Za.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new Ee(function(y){u.dbReadyResolve=y}),u.openCanceller=new Ee(function(y,x){u.cancelOpen=x}))},Dt.prototype.close=function(m){var m=(m===void 0?{disableAutoOpen:!0}:m).disableAutoOpen,y=this._state;m?(y.isBeingOpened&&y.cancelOpen(new je.DatabaseClosed),this._close(),y.autoOpen=!1,y.dbOpenError=new je.DatabaseClosed):(this._close(),y.autoOpen=this._options.autoOpen||y.isBeingOpened,y.openComplete=!1,y.dbOpenError=null)},Dt.prototype.delete=function(u){var m=this,y=(u===void 0&&(u={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),x=this._state;return new Ee(function(_,E){function T(){m.close(u);var C=m._deps.indexedDB.deleteDatabase(m.name);C.onsuccess=Et(function(){var z,Q,U;z=m._deps,Q=m.name,ws(U=z.indexedDB)||Q===ji||Ll(U,z.IDBKeyRange).delete(Q).catch(Pe),_()}),C.onerror=Vn(E),C.onblocked=m._fireOnBlocked}if(y)throw new je.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(T):T()})},Dt.prototype.backendDB=function(){return this.idbdb},Dt.prototype.isOpen=function(){return this.idbdb!==null},Dt.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},Dt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Dt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dt.prototype,"tables",{get:function(){var u=this;return p(this._allTables).map(function(m){return u._allTables[m]})},enumerable:!1,configurable:!0}),Dt.prototype.transaction=function(){var u=(function(m,y,x){var _=arguments.length;if(_<2)throw new je.InvalidArgument("Too few arguments");for(var E=new Array(_-1);--_;)E[_-1]=arguments[_];return x=E.pop(),[m,mt(E),x]}).apply(this,arguments);return this._transaction.apply(this,u)},Dt.prototype._transaction=function(u,m,y){var x,_,E=this,T=Oe.trans,C=(T&&T.db===this&&u.indexOf("!")===-1||(T=null),u.indexOf("?")!==-1);u=u.replace("!","").replace("?","");try{if(_=m.map(function(Q){if(Q=Q instanceof E.Table?Q.name:Q,typeof Q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Q}),u=="r"||u===_a)x=_a;else{if(u!="rw"&&u!=qa)throw new je.InvalidArgument("Invalid transaction mode: "+u);x=qa}if(T){if(T.mode===_a&&x===qa){if(!C)throw new je.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");T=null}T&&_.forEach(function(Q){if(T&&T.storeNames.indexOf(Q)===-1){if(!C)throw new je.SubTransaction("Table "+Q+" not included in parent transaction.");T=null}}),C&&T&&!T.active&&(T=null)}}catch(Q){return T?T._promise(null,function(U,D){D(Q)}):wt(Q)}var z=(function Q(U,D,P,H,L){return Ee.resolve().then(function(){var X=Oe.transless||Oe,q=U._createTransaction(D,P,U._dbSchema,H),X=(q.explicit=!0,{trans:q,transless:X});if(H)q.idbtrans=H.idbtrans;else try{q.create(),q.idbtrans._explicit=!0,U._state.PR1398_maxLoop=3}catch(le){return le.name===qe.InvalidState&&U.isOpen()&&0<--U._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),U.close({disableAutoOpen:!1}),U.open().then(function(){return Q(U,D,P,null,L)})):wt(le)}var J,te=k(L),X=(te&&Gt(),Ee.follow(function(){var le;(J=L.call(q,q))&&(te?(le=Mn.bind(null,null),J.then(le,le)):typeof J.next=="function"&&typeof J.throw=="function"&&(J=Di(J)))},X));return(J&&typeof J.then=="function"?Ee.resolve(J).then(function(le){return q.active?le:wt(new je.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return J})).then(function(le){return H&&q._resolve(),q._completion.then(function(){return le})}).catch(function(le){return q._reject(le),wt(le)})})}).bind(null,this,x,_,T,y);return T?T._promise(x,z,"lock"):Oe.trans?In(Oe.transless,function(){return E._whenReady(z)}):this._whenReady(z)},Dt.prototype.table=function(u){if(j(this._allTables,u))return this._allTables[u];throw new je.InvalidTable("Table ".concat(u," does not exist"))};var ua=Dt;function Dt(u,m){var y,x,_,E,T,C=this,z=(this._middlewares={},this.verno=0,Dt.dependencies),z=(this._options=m=s({addons:Dt.addons,autoOpen:!0,indexedDB:z.indexedDB,IDBKeyRange:z.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},m.addons),Q=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Pe,dbReadyPromise:null,cancelOpen:Pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen}),U=(Q.dbReadyPromise=new Ee(function(D){Q.dbReadyResolve=D}),Q.openCanceller=new Ee(function(D,P){Q.cancelOpen=P}),this._state=Q,this.name=u,this.on=Ni(this,"populate","blocked","versionchange","close",{ready:[un,Pe]}),this.once=function(D,P){var H=function(){for(var L=[],q=0;q<arguments.length;q++)L[q]=arguments[q];C.on(D).unsubscribe(H),P.apply(C,L)};return C.on(D,H)},this.on.ready.subscribe=V(this.on.ready.subscribe,function(D){return function(P,H){Dt.vip(function(){var L,q=C._state;q.openComplete?(q.dbOpenError||Ee.resolve().then(P),H&&D(P)):q.onReadyBeingFired?(q.onReadyBeingFired.push(P),H&&D(P)):(D(P),L=C,H||D(function J(){L.on.ready.unsubscribe(P),L.on.ready.unsubscribe(J)}))})}}),this.Collection=(y=this,cn(Wc.prototype,function(J,q){this.db=y;var H=Ol,L=null;if(q)try{H=q()}catch(X){L=X}var q=J._ctx,J=q.table,te=J.hook.reading.fire;this._ctx={table:J,index:q.index,isPrimKey:!q.index||J.schema.primKey.keyPath&&q.index===J.schema.primKey.name,range:H,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:L,or:q.or,valueMapper:te!==Ot?te:null}})),this.Table=(x=this,cn(Al.prototype,function(D,P,H){this.db=x,this._tx=H,this.name=D,this.schema=P,this.hook=x._allTables[D]?x._allTables[D].hook:Ni(null,{creating:[mn,Pe],reading:[Fe,Ot],updating:[Un,Pe],deleting:[Rn,Pe]})})),this.Transaction=(_=this,cn(Dl.prototype,function(D,P,H,L,q){var J=this;D!=="readonly"&&P.forEach(function(te){te=(te=H[te])==null?void 0:te.yProps,te&&(P=P.concat(te.map(function(X){return X.updatesTable})))}),this.db=_,this.mode=D,this.storeNames=P,this.schema=H,this.chromeTransactionDurability=L,this.idbtrans=null,this.on=Ni(this,"complete","error","abort"),this.parent=q||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ee(function(te,X){J._resolve=te,J._reject=X}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(te){var X=J.active;return J.active=!1,J.on.error.fire(te),J.parent?J.parent._reject(te):X&&J.idbtrans&&J.idbtrans.abort(),wt(te)})})),this.Version=(E=this,cn(Xc.prototype,function(D){this.db=E,this._cfg={version:D,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(T=this,cn(nr.prototype,function(D,P,H){if(this.db=T,this._ctx={table:D,index:P===":id"?null:P,or:H},this._cmp=this._ascending=et,this._descending=function(L,q){return et(q,L)},this._max=function(L,q){return 0<et(L,q)?L:q},this._min=function(L,q){return et(L,q)<0?L:q},this._IDBKeyRange=T._deps.IDBKeyRange,!this._IDBKeyRange)throw new je.MissingAPI})),this.on("versionchange",function(D){0<D.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(D){!D.newVersion||D.newVersion<D.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(D.oldVersion/10))}),this._maxKey=qr(m.IDBKeyRange),this._createTransaction=function(D,P,H,L){return new C.Transaction(D,P,H,C._options.chromeTransactionDurability,L)},this._fireOnBlocked=function(D){C.on("blocked").fire(D),Za.filter(function(P){return P.name===C.name&&P!==C&&!P._state.vcFired}).map(function(P){return P.on("versionchange").fire(D)})},this.use(lu),this.use(Ts),this.use(Zc),this.use(Jc),this.use(su),new Proxy(this,{get:function(D,P,H){var L;return P==="_vip"||(P==="table"?function(q){return Ui(C.table(q),U)}:(L=Reflect.get(D,P,H))instanceof Al?Ui(L,U):P==="tables"?L.map(function(q){return Ui(q,U)}):P==="_createTransaction"?function(){return Ui(L.apply(this,arguments),U)}:L)}}));this.vip=U,z.forEach(function(D){return D(C)})}var Kr,ur=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",cu=(Os.prototype.subscribe=function(u,m,y){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:m,complete:y})},Os.prototype[ur]=function(){return this},Os);function Os(u){this._subscribe=u}try{Kr={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{Kr={indexedDB:null,IDBKeyRange:null}}function du(u){var m,y=!1,x=new cu(function(_){var E=k(u),T,C=!1,z={},Q={},U={get closed(){return C},unsubscribe:function(){C||(C=!0,T&&T.abort(),D&&dn.storagemutated.unsubscribe(H))}},D=(_.start&&_.start(U),!1),P=function(){return La(L)},H=function(q){Ss(z,q),$l(Q,z)&&P()},L=function(){var q,J,te;!C&&Kr.indexedDB&&(z={},q={},T&&T.abort(),T=new AbortController,te=(X=>{var le=Da();try{E&&Gt();var ye=Ct(u,X);return ye=E?ye.finally(Mn):ye}finally{le&&ia()}})(J={subscr:q,signal:T.signal,requery:P,querier:u,trans:null}),Promise.resolve(te).then(function(X){y=!0,m=X,C||J.signal.aborted||(z={},(le=>{for(var ye in le)if(j(le,ye))return;return 1})(Q=q)||D||(dn(Ur,H),D=!0),La(function(){return!C&&_.next&&_.next(X)}))},function(X){y=!1,["DatabaseClosedError","AbortError"].includes(X?.name)||C||La(function(){C||_.error&&_.error(X)})}))};return setTimeout(P,0),U});return x.hasValue=function(){return y},x.getValue=function(){return m},x}var cr=ua;function Yl(u){var m=Ha;try{Ha=!0,dn.storagemutated.fire(u),Il(u,!0)}finally{Ha=m}}O(cr,s(s({},W),{delete:function(u){return new cr(u,{addons:[]}).delete()},exists:function(u){return new cr(u,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return m=cr.dependencies,y=m.indexedDB,m=m.IDBKeyRange,(ws(y)?Promise.resolve(y.databases()).then(function(x){return x.map(function(_){return _.name}).filter(function(_){return _!==ji})}):Ll(y,m).toCollection().primaryKeys()).then(u)}catch{return wt(new je.MissingAPI)}var m,y},defineClass:function(){return function(u){v(this,u)}},ignoreTransaction:function(u){return Oe.trans?In(Oe.transless,u):u()},vip:ql,async:function(u){return function(){try{var m=Di(u.apply(this,arguments));return m&&typeof m.then=="function"?m:Ee.resolve(m)}catch(y){return wt(y)}}},spawn:function(u,m,y){try{var x=Di(u.apply(y,m||[]));return x&&typeof x.then=="function"?x:Ee.resolve(x)}catch(_){return wt(_)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(u,m){return u=Ee.resolve(typeof u=="function"?cr.ignoreTransaction(u):u).timeout(m||6e4),Oe.trans?Oe.trans.waitFor(u):u},Promise:Ee,debug:{get:function(){return kn},set:function(u){os(u)}},derive:F,extend:v,props:O,override:V,Events:Ni,on:dn,liveQuery:du,extendObservabilitySet:Ss,getByKeyPath:ce,setByKeyPath:ae,delByKeyPath:function(u,m){typeof m=="string"?ae(u,m,void 0):"length"in m&&[].map.call(m,function(y){ae(u,y,void 0)})},shallowClone:Me,deepClone:Qt,getObjectDiff:ks,cmp:et,asap:Ae,minKey:-1/0,addons:[],connections:Za,errnames:qe,dependencies:Kr,cache:lr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(u){return parseInt(u)}).reduce(function(u,m,y){return u+m/Math.pow(10,2*y)})})),cr.maxKey=qr(cr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(dn(Ur,function(u){Ha||(u=new CustomEvent(rr,{detail:u}),Ha=!0,dispatchEvent(u),Ha=!1)}),addEventListener(rr,function(u){u=u.detail,Ha||Yl(u)}));var Ir,Ha=!1,Tn=function(){};return typeof BroadcastChannel<"u"&&((Tn=function(){(Ir=new BroadcastChannel(rr)).onmessage=function(u){return u.data&&Yl(u.data)}})(),typeof Ir.unref=="function"&&Ir.unref(),dn(Ur,function(u){Ha||Ir.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!ua.disableBfCache&&u.persisted){kn&&console.debug("Dexie: handling persisted pagehide"),Ir?.close();for(var m=0,y=Za;m<y.length;m++)y[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!ua.disableBfCache&&u.persisted&&(kn&&console.debug("Dexie: handling persisted pageshow"),Tn(),Yl({all:new fn(-1/0,[[]])}))})),Ee.rejectionMapper=function(u,m){return!u||u instanceof pe||u instanceof TypeError||u instanceof SyntaxError||!u.name||!ut[u.name]?u:(m=new ut[u.name](m||u.message,u),"stack"in u&&B(m,"stack",{get:function(){return this.inner.stack}}),m)},os(kn),s(ua,Object.freeze({__proto__:null,Dexie:ua,Entity:Jo,PropModification:zr,RangeSet:fn,add:function(u){return new zr({add:u})},cmp:et,default:ua,liveQuery:du,mergeRanges:sr,rangesOverlap:au,remove:function(u){return new zr({remove:u})},replacePrefix:function(u,m){return new zr({replacePrefix:[u,m]})}}),{default:ua}),ua})})(Nc)),Nc.exports}var Y1=V1();const wh=jh(Y1),My=Symbol.for("Dexie"),gl=globalThis[My]||(globalThis[My]=wh);if(wh.semVer!==gl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${wh.semVer} and ${gl.semVer}`);const{liveQuery:Bk,mergeRanges:Pk,rangesOverlap:$k,RangeSet:Hk,cmp:Kk,Entity:Ik,PropModification:Gk,replacePrefix:Vk,add:Yk,remove:Wk,DexieYProvider:Qk}=gl;class W1 extends gl{athlete_summary;latest_personal_record;app_settings;athlete_levels_lookup;personal_records;muscles;equipment;exercises;exercise_muscles;exercise_equipment;routines;routine_exercises;workouts;workout_logs;constructor(){super("FitnexDB"),this.version(3).stores({athlete_summary:"user_id",latest_personal_record:"exercise_id",app_settings:"id",athlete_levels_lookup:"id, level_name",personal_records:"[user_id+exercise_id]",muscles:"id, name, parent",equipment:"id, name",exercises:"id, name",exercise_muscles:"[exercise_id+muscle_id], muscle_id",exercise_equipment:"[exercise_id+equipment_id], equipment_id",routines:"id, name",routine_exercises:"[routine_id+exercise_id], exercise_id",workouts:"id, user_id, start_time, status, is_synced",workout_logs:"id, workout_id, exercise_id, exercise_order, is_synced, [workout_id+exercise_id+set_number]"})}}const ge=new W1,Q1={async syncSummary(a){const{data:n,error:i}=await tt.from("v_user_dashboard").select("*").eq("user_id",a).maybeSingle();if(i)throw i;return n?(await ge.athlete_summary.put(n),n):null}};let vc=!1;const nn={async syncLibrary(a=!1){if(vc&&!a)return;if(await ge.muscles.count()>0&&!a){vc=!0;return}const[i,s,o,c,p,g]=await Promise.all([tt.from("muscles").select("*"),tt.from("equipment").select("*"),tt.from("exercises").select("*"),tt.from("exercise_muscles").select("*"),tt.from("exercise_equipment").select("*"),tt.from("routine_exercises").select("*")]);await ge.transaction("rw",[ge.muscles,ge.equipment,ge.exercises,ge.exercise_muscles,ge.exercise_equipment,ge.routine_exercises],async()=>{i.data&&await ge.muscles.bulkPut(i.data),s.data&&await ge.equipment.bulkPut(s.data),o.data&&await ge.exercises.bulkPut(o.data),c.data&&await ge.exercise_muscles.bulkPut(c.data),p.data&&await ge.exercise_equipment.bulkPut(p.data),g.data&&await ge.routine_exercises.bulkPut(g.data)}),vc=!0},async getActiveWorkout(){return await ge.workouts.filter(a=>!a.end_time).first()},async getActiveMuscles(){return await ge.muscles.filter(a=>a.status!==!1).toArray()},async getMuscleById(a){return await ge.muscles.get(a)},async getAllEquipment(){return await ge.equipment.toArray()},async getExercisesWithMeta(){const[a,n,i,s,o]=await Promise.all([ge.exercises.filter(c=>c.status!==!1).toArray(),ge.exercise_muscles.toArray(),ge.exercise_equipment.toArray(),ge.muscles.toArray(),ge.equipment.toArray()]);return a.map(c=>{const g=n.filter(S=>S.exercise_id===c.id).map(S=>{const j=s.find(A=>A.id===S.muscle_id),O=j?.parent?s.find(A=>A.id===j.parent):null;return{name:j?.name||"Unknown",parent_name:O?.name||null,role:S.role}}),v=i.find(S=>S.exercise_id===c.id),b=o.find(S=>S.id===v?.equipment_id);return{...c,all_muscles:g,equipment_name:b?.name||"None"}})},async getExerciseDetail(a){const[n,i,s,o,c]=await Promise.all([ge.exercises.get(a),ge.exercise_muscles.where("exercise_id").equals(a).toArray(),ge.exercise_equipment.where("exercise_id").equals(a).toArray(),ge.muscles.toArray(),ge.equipment.toArray()]);return n?{...n,muscles:i.map(p=>({id:p.muscle_id,name:o.find(g=>g.id===p.muscle_id)?.name||"Unknown",role:p.role})),equipmentId:s[0]?.equipment_id?.toString()||""}:null},async addMuscle(a,n){const i={name:a,parent:n||null},{data:s,error:o}=await tt.from("muscles").insert([i]).select().single();if(o)throw o;return await ge.muscles.put(s),s},async updateMuscle(a,n,i){const s={name:n,parent:i||null,updated_at:new Date().toISOString()},{data:o,error:c}=await tt.from("muscles").update(s).eq("id",a).select().single();if(c)throw c;await ge.muscles.put(o)},async archiveMuscle(a){const{data:n,error:i}=await tt.from("muscles").update({status:!1}).eq("id",a).select().single();if(i)throw i;await ge.muscles.put(n)},async addExercise(a,n,i){const{data:s,error:o}=await tt.from("exercises").insert([a]).select().single();if(o)throw o;await ge.exercises.put(s);const c=[];if(n.length>0){const p=n.map(g=>({exercise_id:s.id,muscle_id:g.id,role:g.role}));c.push(tt.from("exercise_muscles").insert(p).then(()=>ge.exercise_muscles.bulkPut(p)))}if(i){const p={exercise_id:s.id,equipment_id:parseInt(i)};c.push(tt.from("exercise_equipment").insert([p]).then(()=>ge.exercise_equipment.put(p)))}return await Promise.all(c),s},async updateExercise(a,n,i,s){const{data:o,error:c}=await tt.from("exercises").update(n).eq("id",a).select().single();if(c)throw c;if(await ge.exercises.put(o),await Promise.all([tt.from("exercise_muscles").delete().eq("exercise_id",a),ge.exercise_muscles.where("exercise_id").equals(a).delete()]),i.length>0){const p=i.map(g=>({exercise_id:a,muscle_id:g.id,role:g.role}));await tt.from("exercise_muscles").insert(p),await ge.exercise_muscles.bulkPut(p)}if(await Promise.all([tt.from("exercise_equipment").delete().eq("exercise_id",a),ge.exercise_equipment.where("exercise_id").equals(a).delete()]),s){const p={exercise_id:a,equipment_id:parseInt(s)};await tt.from("exercise_equipment").insert([p]),await ge.exercise_equipment.put(p)}},async archiveExercise(a){const{data:n,error:i}=await tt.from("exercises").update({status:!1}).eq("id",a).select().single();if(i)throw i;await ge.exercises.put(n)},resetLock(){vc=!1}},Dv=6048e5,X1=864e5,Dy=Symbol.for("constructDateFrom");function Or(a,n){return typeof a=="function"?a(n):a&&typeof a=="object"&&Dy in a?a[Dy](n):a instanceof Date?new a.constructor(n):new Date(n)}function ba(a,n){return Or(n||a,a)}function F1(a,n,i){const s=ba(a,i?.in);return isNaN(n)?Or(a,NaN):(n&&s.setDate(s.getDate()+n),s)}let J1={};function $c(){return J1}function rs(a,n){const i=$c(),s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=ba(a,n?.in),c=o.getDay(),p=(c<s?7:0)+c-s;return o.setDate(o.getDate()-p),o.setHours(0,0,0,0),o}function Rc(a,n){return rs(a,{...n,weekStartsOn:1})}function zv(a,n){const i=ba(a,n?.in),s=i.getFullYear(),o=Or(i,0);o.setFullYear(s+1,0,4),o.setHours(0,0,0,0);const c=Rc(o),p=Or(i,0);p.setFullYear(s,0,4),p.setHours(0,0,0,0);const g=Rc(p);return i.getTime()>=c.getTime()?s+1:i.getTime()>=g.getTime()?s:s-1}function zy(a){const n=ba(a),i=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return i.setUTCFullYear(n.getFullYear()),+a-+i}function Uv(a,...n){const i=Or.bind(null,n.find(s=>typeof s=="object"));return n.map(i)}function Mc(a,n){const i=ba(a,n?.in);return i.setHours(0,0,0,0),i}function Z1(a,n,i){const[s,o]=Uv(i?.in,a,n),c=Mc(s),p=Mc(o),g=+c-zy(c),v=+p-zy(p);return Math.round((g-v)/X1)}function eS(a,n){const i=zv(a,n),s=Or(a,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Rc(s)}function tS(a,n,i){const[s,o]=Uv(i?.in,a,n);return+Mc(s)==+Mc(o)}function nS(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function aS(a){return!(!nS(a)&&typeof a!="number"||isNaN(+ba(a)))}function rS(a,n){const i=ba(a,n?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const iS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sS=(a,n,i)=>{let s;const o=iS[a];return typeof o=="string"?s=o:n===1?s=o.one:s=o.other.replace("{{count}}",n.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};function ah(a){return(n={})=>{const i=n.width?String(n.width):a.defaultWidth;return a.formats[i]||a.formats[a.defaultWidth]}}const lS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cS={date:ah({formats:lS,defaultWidth:"full"}),time:ah({formats:oS,defaultWidth:"full"}),dateTime:ah({formats:uS,defaultWidth:"full"})},dS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fS=(a,n,i,s)=>dS[a];function Co(a){return(n,i)=>{const s=i?.context?String(i.context):"standalone";let o;if(s==="formatting"&&a.formattingValues){const p=a.defaultFormattingWidth||a.defaultWidth,g=i?.width?String(i.width):p;o=a.formattingValues[g]||a.formattingValues[p]}else{const p=a.defaultWidth,g=i?.width?String(i.width):a.defaultWidth;o=a.values[g]||a.values[p]}const c=a.argumentCallback?a.argumentCallback(n):n;return o[c]}}const hS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bS=(a,n)=>{const i=Number(a),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},xS={ordinalNumber:bS,era:Co({values:hS,defaultWidth:"wide"}),quarter:Co({values:mS,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Co({values:pS,defaultWidth:"wide"}),day:Co({values:gS,defaultWidth:"wide"}),dayPeriod:Co({values:yS,defaultWidth:"wide",formattingValues:vS,defaultFormattingWidth:"wide"})};function Ro(a){return(n,i={})=>{const s=i.width,o=s&&a.matchPatterns[s]||a.matchPatterns[a.defaultMatchWidth],c=n.match(o);if(!c)return null;const p=c[0],g=s&&a.parsePatterns[s]||a.parsePatterns[a.defaultParseWidth],v=Array.isArray(g)?_S(g,j=>j.test(p)):wS(g,j=>j.test(p));let b;b=a.valueCallback?a.valueCallback(v):v,b=i.valueCallback?i.valueCallback(b):b;const S=n.slice(p.length);return{value:b,rest:S}}}function wS(a,n){for(const i in a)if(Object.prototype.hasOwnProperty.call(a,i)&&n(a[i]))return i}function _S(a,n){for(let i=0;i<a.length;i++)if(n(a[i]))return i}function SS(a){return(n,i={})=>{const s=n.match(a.matchPattern);if(!s)return null;const o=s[0],c=n.match(a.parsePattern);if(!c)return null;let p=a.valueCallback?a.valueCallback(c[0]):c[0];p=i.valueCallback?i.valueCallback(p):p;const g=n.slice(o.length);return{value:p,rest:g}}}const jS=/^(\d+)(th|st|nd|rd)?/i,kS=/\d+/i,ES={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},NS={any:[/^b/i,/^(a|c)/i]},TS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OS={any:[/1/i,/2/i,/3/i,/4/i]},AS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},DS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},US={ordinalNumber:SS({matchPattern:jS,parsePattern:kS,valueCallback:a=>parseInt(a,10)}),era:Ro({matchPatterns:ES,defaultMatchWidth:"wide",parsePatterns:NS,defaultParseWidth:"any"}),quarter:Ro({matchPatterns:TS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Ro({matchPatterns:AS,defaultMatchWidth:"wide",parsePatterns:CS,defaultParseWidth:"any"}),day:Ro({matchPatterns:RS,defaultMatchWidth:"wide",parsePatterns:MS,defaultParseWidth:"any"}),dayPeriod:Ro({matchPatterns:DS,defaultMatchWidth:"any",parsePatterns:zS,defaultParseWidth:"any"})},LS={code:"en-US",formatDistance:sS,formatLong:cS,formatRelative:fS,localize:xS,match:US,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qS(a,n){const i=ba(a,n?.in);return Z1(i,rS(i))+1}function BS(a,n){const i=ba(a,n?.in),s=+Rc(i)-+eS(i);return Math.round(s/Dv)+1}function Lv(a,n){const i=ba(a,n?.in),s=i.getFullYear(),o=$c(),c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,p=Or(n?.in||a,0);p.setFullYear(s+1,0,c),p.setHours(0,0,0,0);const g=rs(p,n),v=Or(n?.in||a,0);v.setFullYear(s,0,c),v.setHours(0,0,0,0);const b=rs(v,n);return+i>=+g?s+1:+i>=+b?s:s-1}function PS(a,n){const i=$c(),s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=Lv(a,n),c=Or(n?.in||a,0);return c.setFullYear(o,0,s),c.setHours(0,0,0,0),rs(c,n)}function $S(a,n){const i=ba(a,n?.in),s=+rs(i,n)-+PS(i,n);return Math.round(s/Dv)+1}function bt(a,n){const i=a<0?"-":"",s=Math.abs(a).toString().padStart(n,"0");return i+s}const mi={y(a,n){const i=a.getFullYear(),s=i>0?i:1-i;return bt(n==="yy"?s%100:s,n.length)},M(a,n){const i=a.getMonth();return n==="M"?String(i+1):bt(i+1,2)},d(a,n){return bt(a.getDate(),n.length)},a(a,n){const i=a.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(a,n){return bt(a.getHours()%12||12,n.length)},H(a,n){return bt(a.getHours(),n.length)},m(a,n){return bt(a.getMinutes(),n.length)},s(a,n){return bt(a.getSeconds(),n.length)},S(a,n){const i=n.length,s=a.getMilliseconds(),o=Math.trunc(s*Math.pow(10,i-3));return bt(o,n.length)}},ll={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Uy={G:function(a,n,i){const s=a.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});default:return i.era(s,{width:"wide"})}},y:function(a,n,i){if(n==="yo"){const s=a.getFullYear(),o=s>0?s:1-s;return i.ordinalNumber(o,{unit:"year"})}return mi.y(a,n)},Y:function(a,n,i,s){const o=Lv(a,s),c=o>0?o:1-o;if(n==="YY"){const p=c%100;return bt(p,2)}return n==="Yo"?i.ordinalNumber(c,{unit:"year"}):bt(c,n.length)},R:function(a,n){const i=zv(a);return bt(i,n.length)},u:function(a,n){const i=a.getFullYear();return bt(i,n.length)},Q:function(a,n,i){const s=Math.ceil((a.getMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return bt(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(a,n,i){const s=Math.ceil((a.getMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return bt(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(a,n,i){const s=a.getMonth();switch(n){case"M":case"MM":return mi.M(a,n);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(a,n,i){const s=a.getMonth();switch(n){case"L":return String(s+1);case"LL":return bt(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(a,n,i,s){const o=$S(a,s);return n==="wo"?i.ordinalNumber(o,{unit:"week"}):bt(o,n.length)},I:function(a,n,i){const s=BS(a);return n==="Io"?i.ordinalNumber(s,{unit:"week"}):bt(s,n.length)},d:function(a,n,i){return n==="do"?i.ordinalNumber(a.getDate(),{unit:"date"}):mi.d(a,n)},D:function(a,n,i){const s=qS(a);return n==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):bt(s,n.length)},E:function(a,n,i){const s=a.getDay();switch(n){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(a,n,i,s){const o=a.getDay(),c=(o-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return bt(c,2);case"eo":return i.ordinalNumber(c,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(a,n,i,s){const o=a.getDay(),c=(o-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return bt(c,n.length);case"co":return i.ordinalNumber(c,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(a,n,i){const s=a.getDay(),o=s===0?7:s;switch(n){case"i":return String(o);case"ii":return bt(o,n.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(a,n,i){const o=a.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(a,n,i){const s=a.getHours();let o;switch(s===12?o=ll.noon:s===0?o=ll.midnight:o=s/12>=1?"pm":"am",n){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(a,n,i){const s=a.getHours();let o;switch(s>=17?o=ll.evening:s>=12?o=ll.afternoon:s>=4?o=ll.morning:o=ll.night,n){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(a,n,i){if(n==="ho"){let s=a.getHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return mi.h(a,n)},H:function(a,n,i){return n==="Ho"?i.ordinalNumber(a.getHours(),{unit:"hour"}):mi.H(a,n)},K:function(a,n,i){const s=a.getHours()%12;return n==="Ko"?i.ordinalNumber(s,{unit:"hour"}):bt(s,n.length)},k:function(a,n,i){let s=a.getHours();return s===0&&(s=24),n==="ko"?i.ordinalNumber(s,{unit:"hour"}):bt(s,n.length)},m:function(a,n,i){return n==="mo"?i.ordinalNumber(a.getMinutes(),{unit:"minute"}):mi.m(a,n)},s:function(a,n,i){return n==="so"?i.ordinalNumber(a.getSeconds(),{unit:"second"}):mi.s(a,n)},S:function(a,n){return mi.S(a,n)},X:function(a,n,i){const s=a.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return qy(s);case"XXXX":case"XX":return Ji(s);default:return Ji(s,":")}},x:function(a,n,i){const s=a.getTimezoneOffset();switch(n){case"x":return qy(s);case"xxxx":case"xx":return Ji(s);default:return Ji(s,":")}},O:function(a,n,i){const s=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Ly(s,":");default:return"GMT"+Ji(s,":")}},z:function(a,n,i){const s=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Ly(s,":");default:return"GMT"+Ji(s,":")}},t:function(a,n,i){const s=Math.trunc(+a/1e3);return bt(s,n.length)},T:function(a,n,i){return bt(+a,n.length)}};function Ly(a,n=""){const i=a>0?"-":"+",s=Math.abs(a),o=Math.trunc(s/60),c=s%60;return c===0?i+String(o):i+String(o)+n+bt(c,2)}function qy(a,n){return a%60===0?(a>0?"-":"+")+bt(Math.abs(a)/60,2):Ji(a,n)}function Ji(a,n=""){const i=a>0?"-":"+",s=Math.abs(a),o=bt(Math.trunc(s/60),2),c=bt(s%60,2);return i+o+n+c}const By=(a,n)=>{switch(a){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});default:return n.date({width:"full"})}},qv=(a,n)=>{switch(a){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});default:return n.time({width:"full"})}},HS=(a,n)=>{const i=a.match(/(P+)(p+)?/)||[],s=i[1],o=i[2];if(!o)return By(a,n);let c;switch(s){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",By(s,n)).replace("{{time}}",qv(o,n))},KS={p:qv,P:HS},IS=/^D+$/,GS=/^Y+$/,VS=["D","DD","YY","YYYY"];function YS(a){return IS.test(a)}function WS(a){return GS.test(a)}function QS(a,n,i){const s=XS(a,n,i);if(console.warn(s),VS.includes(a))throw new RangeError(s)}function XS(a,n,i){const s=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${n}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,JS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZS=/^'([^]*?)'?$/,e2=/''/g,t2=/[a-zA-Z]/;function bc(a,n,i){const s=$c(),o=s.locale??LS,c=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,p=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,g=ba(a,i?.in);if(!aS(g))throw new RangeError("Invalid time value");let v=n.match(JS).map(S=>{const j=S[0];if(j==="p"||j==="P"){const O=KS[j];return O(S,o.formatLong)}return S}).join("").match(FS).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const j=S[0];if(j==="'")return{isToken:!1,value:n2(S)};if(Uy[j])return{isToken:!0,value:S};if(j.match(t2))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(v=o.localize.preprocessor(g,v));const b={firstWeekContainsDate:c,weekStartsOn:p,locale:o};return v.map(S=>{if(!S.isToken)return S.value;const j=S.value;(WS(j)||YS(j))&&QS(j,n,String(a));const O=Uy[j[0]];return O(g,j,o.localize,b)}).join("")}function n2(a){const n=a.match(ZS);return n?n[1].replace(e2,"'"):a}const yl={async reconcile(){console.log(" SyncManager: Reconciling...");try{const a=await Tt.getPendingWorkouts(),n=await Tt.getPendingLogs();a.length>0&&(await Tt.pushWorkoutsToSupabase(a),console.log(` Synced ${a.length} workouts.`)),n.length>0&&(await Tt.pushLogsToSupabase(n),console.log(` Synced ${n.length} logs.`))}catch(a){console.error(" SyncManager Error:",a)}},watchConnection(){window.addEventListener("online",()=>this.reconcile())}};class ts{static getISTDate(n=new Date){return new Date(n.getTime()+198e5).toISOString().replace("Z","")}static formatToISTDisplay(n){return n?new Date(n).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0,hour:"2-digit",minute:"2-digit"}):""}}let xc=!1;const Tt={getActiveWorkoutQuery(){return ge.workouts.where("status").equals(1).sortBy("start_time").then(a=>a.length?a[a.length-1]:null)},getWorkoutLogsQuery(a){return ge.workout_logs.where("workout_id").equals(a).sortBy("exercise_order")},async getPendingWorkouts(){return await ge.workouts.where("is_synced").equals(0).and(a=>a.status===0).toArray()},async getPendingLogs(){return await ge.workout_logs.where("is_synced").equals(0).toArray()},async startNewWorkout(a,n,i=[]){const s=await ge.workouts.where("status").equals(1).first();if(s)return s.id;const o=crypto.randomUUID(),c=ts.getISTDate();if(await ge.workouts.put({id:o,user_id:a,routine_id:n||null,start_time:c,finish_time:"",status:1,rest_day:0,is_synced:0,created_at:c,updated_at:null}),i.length>0){const p=i.map((g,v)=>({...g,id:crypto.randomUUID(),workout_id:o,exercise_order:g.exercise_order??v,set_number:g.set_number||1,is_synced:0,completed:0}));await ge.workout_logs.bulkPut(p)}return o},async addExercisesToActive(a,n){const i=await ge.workout_logs.where("workout_id").equals(a).toArray(),s=i.length>0?Math.max(...i.map(c=>c.exercise_order||0)):-1,o=n.map((c,p)=>({id:crypto.randomUUID(),workout_id:a,exercise_id:c,set_number:1,reps:10,weight:0,exercise_order:s+1+p,is_synced:0,completed:0,created_at:ts.getISTDate(),updated_at:null}));return await ge.workout_logs.bulkPut(o)},async addSet(a,n,i){const s=await ge.workout_logs.where({workout_id:a,exercise_id:n}).reverse().first(),o=await ge.workout_logs.where({workout_id:a,exercise_id:n}).first();return await ge.workout_logs.add({id:crypto.randomUUID(),workout_id:a,exercise_id:n,set_number:i,exercise_order:o?.exercise_order||0,reps:s?.reps||10,weight:s?.weight||0,distance:s?.distance||0,duration:s?.duration||0,completed:0,is_synced:0,created_at:ts.getISTDate(),updated_at:null})},async updateLog(a){return await ge.workout_logs.put({...a,is_synced:0})},async deleteSet(a){return await ge.workout_logs.delete(a)},async deleteExercise(a,n){return await ge.workout_logs.where({workout_id:a,exercise_id:n}).delete()},async finishWorkout(a,n,i){const s={notes:n,status:0,is_synced:0};i?(s.start_time=i.start,s.finish_time=i.end):s.finish_time=ts.getISTDate(),await ge.workouts.update(a,s),yl.watchConnection(),yl.reconcile()},async discardWorkout(a){return await ge.transaction("rw",[ge.workouts,ge.workout_logs],async()=>{await ge.workout_logs.where("workout_id").equals(a).delete(),await ge.workouts.delete(a)})},async syncRecentWorkouts(a,n=!1){if(xc&&!n)return;const i=rs(new Date,{weekStartsOn:1}).toISOString();if(await ge.workouts.where("start_time").above(i).count()>0&&!n){xc=!0;return}const{data:o,error:c}=await tt.from("workouts").select("*").eq("user_id",a).gte("start_time",i);if(c)throw c;if(o){const p=o.map(g=>({...g,is_synced:1,status:g.status?1:0}));await ge.workouts.bulkPut(p)}xc=!0},async syncPRs(a){const{data:n,error:i}=await tt.from("v_latest_personal_records").select("*").eq("user_id",a);if(i){console.error("Error syncing latest PRs:",i);return}n&&await ge.transaction("rw",ge.latest_personal_record,async()=>{await ge.latest_personal_record.clear(),await ge.latest_personal_record.bulkPut(n)})},async checkPR(a,n,i){const s=await ge.latest_personal_record.get(n);if(!s||i>s.value){const o=ts.getISTDate();crypto.randomUUID();const c={user_id:a,exercise_id:n,value:i,record_date:o};return await ge.latest_personal_record.put(c),await tt.from("personal_record").insert(c),!0}return!1},resetLock(){xc=!1}};let rh=!1;const as={async syncRoutine(a,n=!1){if(rh&&!n)return;const[i,s]=await Promise.all([tt.from("routines").select("*").or(`created_by.eq.${a},is_public.eq.true`).eq("status",!0).order("name",{ascending:!0}),tt.from("routine_exercises").select("*")]);if(i.error||s.error){console.error("Sync Error:",i.error||s.error);return}await ge.transaction("rw",[ge.routines,ge.routine_exercises],async()=>{await ge.routines.clear(),await ge.routine_exercises.clear(),i.data&&await ge.routines.bulkPut(i.data),s.data&&await ge.routine_exercises.bulkPut(s.data)}),rh=!0},async getRoutinesWithMeta(){const[a,n,i,s]=await Promise.all([ge.routines.filter(o=>o.status!==!1).toArray(),ge.routine_exercises.toArray(),ge.exercise_muscles.toArray(),ge.muscles.toArray()]);return a.map(o=>{const c=n.filter(g=>g.routine_id===o.id).sort((g,v)=>(g.exercise_order??0)-(v.exercise_order??0)),p=new Set;return c.forEach(g=>{i.filter(v=>v.exercise_id===g.exercise_id&&v.role==="primary").forEach(v=>{const b=s.find(S=>S.id===v.muscle_id);b&&p.add(b.name)})}),{...o,exercise_count:c.length,muscles:Array.from(p).slice(0,3),exercises:c}})},async getRoutineDetail(a){const[n,i,s]=await Promise.all([ge.routines.get(a),ge.routine_exercises.where("routine_id").equals(a).sortBy("exercise_order"),ge.exercises.toArray()]);if(!n)return null;const o=i.map(c=>{const p=s.find(g=>g.id===c.exercise_id);return{...c,name:p?.name||"Unknown Exercise"}});return{...n,exercises:o}},async addRoutine(a,n){const{data:i,error:s}=await tt.from("routines").insert([a]).select().single();if(s)throw s;const o=n.map((c,p)=>({routine_id:i.id,exercise_id:c.id,target_sets:c.target_sets,target_reps:c.target_reps,exercise_order:p}));await tt.from("routine_exercises").insert(o),await ge.transaction("rw",[ge.routines,ge.routine_exercises],async()=>{await ge.routines.put(i),await ge.routine_exercises.bulkPut(o)})},async updateRoutine(a,n,i){const{data:s,error:o}=await tt.from("routines").update(n).eq("id",a).select().single();if(o)throw o;await tt.from("routine_exercises").delete().eq("routine_id",a);const c=i.map((p,g)=>({routine_id:a,exercise_id:p.exercise_id||p.id,target_sets:p.target_sets,target_reps:p.target_reps,exercise_order:g}));await tt.from("routine_exercises").insert(c),await ge.transaction("rw",[ge.routines,ge.routine_exercises],async()=>{await ge.routines.put(s),await ge.routine_exercises.where("routine_id").equals(a).delete(),await ge.routine_exercises.bulkPut(c)})},async archiveRoutine(a){const{data:n,error:i}=await tt.from("routines").update({status:!1}).eq("id",a).select().single();if(i)throw i;n&&await ge.routines.put(n)},resetLock(){rh=!1}};let wc=!1;const Uh={async syncMetadata(a=!1){if(wc&&!a)return;if(await ge.athlete_levels_lookup.count()>0&&!a){wc=!0;return}const{data:i,error:s}=await tt.from("athlete_levels_lookup").select("*").order("display_order");if(s){console.error("Metadata sync error:",s);return}i&&(await ge.athlete_levels_lookup.bulkPut(i),wc=!0)},async updateLevel(a){return await tt.from("athlete_level").upsert(a)},resetLock(){wc=!1}},Bv=R.createContext(void 0),a2=({children:a})=>{const[n,i]=R.useState(null),[s,o]=R.useState(null),[c,p]=R.useState(!0),[g,v]=R.useState(null),b=async(O,A=!1)=>{v(null),p(!0);try{if(!A){const F=await ge.athlete_summary.get(O);if(F){o(F),p(!1);return}}const B=await Q1.syncSummary(O);o(B)}catch(B){console.error("Fitnex Auth Error:",B),v(B.message||"Failed to sync athlete data"),o(null)}finally{p(!1)}};R.useEffect(()=>{const{data:{subscription:O}}=tt.auth.onAuthStateChange(async(A,B)=>{B?.user?(i(B.user.id),await b(B.user.id)):(i(null),o(null),p(!1))});return()=>O.unsubscribe()},[]);const S=async()=>{n&&await b(n,!0)},j=async()=>{try{yl.watchConnection(),await yl.reconcile();const O=await ge.workout_logs.where("is_synced").equals(0).count();return O>0?{success:!1,message:`Wait! ${O} sets are not synced.`}:(nn.resetLock(),Tt.resetLock(),as.resetLock(),Uh.resetLock(),await tt.auth.signOut(),await ge.delete(),i(null),o(null),window.location.href="/fitnex/login",{success:!0})}catch(O){return console.error("Sign-out error:",O),{success:!1,message:O.message}}};return f.jsx(Bv.Provider,{value:{user_id:n,athlete:s,loading:c,error:g,signOut:j,refreshAthlete:S},children:a})},Cn=()=>{const a=R.useContext(Bv);if(!a)throw new Error("useAuth must be used within AuthProvider");return a},hl=({label:a,...n})=>f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1 ml-1",children:a}),f.jsx("input",{...n,className:"w-full h-12 bg-slate-900 border border-slate-800 rounded-xl px-4 focus:outline-none focus:ring-2 focus:ring-brand transition-all"})]}),Py="/fitnex/logo.webp",r2=()=>{const a=an(),[n,i]=R.useState(""),[s,o]=R.useState(""),[c,p]=R.useState(!1),[g,v]=R.useState(null),b=async S=>{S.preventDefault(),p(!0),v(null);const{error:j}=await tt.auth.signInWithPassword({email:n,password:s});j?(v(j.message),p(!1)):a("/dashboard",{replace:!0})};return f.jsx("div",{className:"safe-ios-top h-screen w-full bg-black overflow-hidden animate-login",children:f.jsxs("div",{className:"h-full w-full flex flex-col lg:flex-row",children:[f.jsx("div",{className:"hidden lg:flex w-1/2 items-center justify-center bg-gradient-to-br from-brand to-brand/70",children:f.jsxs("div",{className:"flex flex-col items-center text-black space-y-3",children:[f.jsx("img",{src:Py,className:"w-[300px]"}),f.jsx("h1",{className:"text-4xl font-black tracking-tight",children:"TRACK-FIT"}),f.jsx("p",{className:"tracking-[0.35em] font-bold opacity-70",children:"PRO EDITION"})]})}),f.jsxs("div",{className:"flex lg:hidden h-full flex-col items-center justify-center px-6",children:[f.jsx("img",{src:Py,className:"w-56 mb-6"}),f.jsxs("div",{className:"w-full max-w-sm",children:[f.jsx("h1",{className:"text-2xl font-black text-center mb-2",children:"Welcome Back"}),f.jsx("p",{className:"text-center text-slate-400 text-sm mb-4",children:"Sign in to track your progress"}),f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"h-px flex-1 bg-white/10"}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-brand"}),f.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsx(hl,{label:"Email Address",type:"email",value:n,onChange:S=>i(S.target.value),placeholder:"name@example.com",required:!0}),f.jsx(hl,{label:"Password",type:"password",value:s,onChange:S=>o(S.target.value),placeholder:"",required:!0}),g&&f.jsx("p",{className:"text-red-500 text-[10px] font-black uppercase tracking-widest ml-1 bg-red-500/10 p-2 rounded-lg border border-red-500/20",children:g}),f.jsx("button",{disabled:c,className:"w-full h-14 bg-brand text-white font-black uppercase italic rounded-2xl mt-6 active:scale-[0.98] transition-all disabled:opacity-50 shadow-xl shadow-brand/20",children:c?"Authenticating...":"Sign In"})]})]})]}),f.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center px-6",children:f.jsxs("div",{className:"w-full max-w-sm",children:[f.jsx("h1",{className:"text-2xl font-black text-center mb-2",children:"Welcome Back"}),f.jsx("p",{className:"text-center text-slate-400 text-sm mb-4",children:"Sign in to track your progress"}),f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"h-px flex-1 bg-white/10"}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-brand"}),f.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsx(hl,{label:"Email Address",type:"email",value:n,onChange:S=>i(S.target.value),placeholder:"name@example.com",required:!0}),f.jsx(hl,{label:"Password",type:"password",value:s,onChange:S=>o(S.target.value),placeholder:"",required:!0}),g&&f.jsx("p",{className:"text-red-500 text-[10px] font-black uppercase tracking-widest ml-1 bg-red-500/10 p-2 rounded-lg border border-red-500/20",children:g}),f.jsx("button",{disabled:c,className:"w-full h-14 bg-brand text-white font-black uppercase italic rounded-2xl mt-6 active:scale-[0.98] transition-all disabled:opacity-50 shadow-xl shadow-brand/20",children:c?"Authenticating...":"Sign In"})]})]})})]})})},_h={async getLatestMetrics(){const{data:a,error:n}=await tt.from("v_latest_body_metrics").select("*").maybeSingle();if(n)throw console.error("Error fetching metrics:",n.message),n;return a},async updateMetrics(a){const{error:n}=await tt.from("body_metrics").upsert({...a,logdate:a.logdate||new Date().toISOString().split("T")[0]});if(n)throw console.error("Error updating metrics:",n.message),n;return!0}},Pv={async getProfile(a){const{data:n,error:i}=await tt.from("user_profile").select("*").eq("user_id",a).single();return i?(console.error("Error fetching profile:",i.message),null):n},async updateProfile(a){const{data:n,error:i}=await tt.from("user_profile").upsert({...a,updated_at:new Date().toISOString()}).select().single();if(i)throw new Error(`Profile update failed: ${i.message}`);return n}},i2=()=>{const{refreshAthlete:a}=Cn();return{saveOnboarding:async(i,s,o)=>{try{const p=(await Promise.all([Pv.updateProfile(i),_h.updateMetrics(s),Uh.updateLevel(o)])).find(g=>g.error)?.error;if(p)throw new Error(p.message);return await a(),{success:!0}}catch(c){return console.error("Onboarding Service Error:",c),{success:!1,error:c.message}}}}};const $v=(...a)=>a.filter((n,i,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===i).join(" ").trim();const s2=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const l2=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,s)=>s?s.toUpperCase():i.toLowerCase());const $y=a=>{const n=l2(a);return n.charAt(0).toUpperCase()+n.slice(1)};var o2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u2=a=>{for(const n in a)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const c2=R.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:p,...g},v)=>R.createElement("svg",{ref:v,...o2,width:n,height:n,stroke:a,strokeWidth:s?Number(i)*24/Number(n):i,className:$v("lucide",o),...!c&&!u2(g)&&{"aria-hidden":"true"},...g},[...p.map(([b,S])=>R.createElement(b,S)),...Array.isArray(c)?c:[c]]));const Ue=(a,n)=>{const i=R.forwardRef(({className:s,...o},c)=>R.createElement(c2,{ref:c,iconNode:n,className:$v(`lucide-${s2($y(a))}`,`lucide-${a}`,s),...o}));return i.displayName=$y(a),i};const d2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hv=Ue("activity",d2);const f2=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],h2=Ue("award",f2);const m2=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Kv=Ue("box",m2);const p2=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],g2=Ue("calendar-clock",p2);const y2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],v2=Ue("calendar",y2);const b2=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],x2=Ue("chart-no-axes-column",b2);const w2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_l=Ue("check",w2);const _2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sl=Ue("chevron-down",_2);const S2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Iv=Ue("chevron-left",S2);const j2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],is=Ue("chevron-right",j2);const k2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],E2=Ue("chevron-up",k2);const N2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lh=Ue("circle-alert",N2);const T2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],O2=Ue("circle-user",T2);const A2=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],qh=Ue("clipboard-list",A2);const C2=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],R2=Ue("coffee",C2);const M2=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Go=Ue("dumbbell",M2);const D2=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],z2=Ue("flame",D2);const U2=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],L2=Ue("git-commit-horizontal",U2);const q2=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],B2=Ue("git-compare",q2);const P2=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Gv=Ue("git-merge",P2);const $2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Hc=Ue("globe",$2);const H2=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Vv=Ue("hash",H2);const K2=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],I2=Ue("heart",K2);const G2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],V2=Ue("house",G2);const Y2=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Yv=Ue("library",Y2);const W2=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Q2=Ue("loader-circle",W2);const X2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Kc=Ue("lock",X2);const F2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Wv=Ue("log-out",F2);const J2=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ar=Ue("minus",J2);const Z2=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ej=Ue("moon",Z2);const tj=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]],Qv=Ue("move-vertical",tj);const nj=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Xv=Ue("move",nj);const aj=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],rj=Ue("paintbrush",aj);const ij=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],sj=Ue("palette",ij);const lj=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],oj=Ue("percent",lj);const uj=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12",key:"1y3wsu"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z",key:"110lr1"}],["path",{d:"m2 22 .414-.414",key:"jhxm08"}]],cj=Ue("pipette",uj);const dj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Dc=Ue("play",dj);const fj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yi=Ue("plus",fj);const hj=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Sh=Ue("refresh-ccw",hj);const mj=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Fv=Ue("repeat",mj);const pj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gj=Ue("rotate-ccw",pj);const yj=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Jv=Ue("ruler",yj);const vj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bh=Ue("save",vj);const bj=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Zv=Ue("scale",bj);const xj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jl=Ue("search",xj);const wj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_j=Ue("settings",wj);const Sj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ph=Ue("sparkles",Sj);const jj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],eb=Ue("star",jj);const kj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ej=Ue("sun",kj);const Nj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ls=Ue("target",Nj);const Tj=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Ic=Ue("timer",Tj);const Oj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qo=Ue("trash-2",Oj);const Aj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Cj=Ue("trending-up",Aj);const Rj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ss=Ue("trophy",Rj);const Mj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xo=Ue("user",Mj);const Dj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zj=Ue("users",Dj);const Uj=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],$h=Ue("weight",Uj);const Lj=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],qj=Ue("wind",Lj);const Bj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gc=Ue("x",Bj);const Pj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kl=Ue("zap",Pj),$j=({value:a,onChange:n})=>{const i=[{id:"male",label:"Male",icon:f.jsx(Xo,{size:32})},{id:"female",label:"Female",icon:f.jsx(O2,{size:32})},{id:"other",label:"Other",icon:f.jsx(zj,{size:32})}];return f.jsx("div",{className:"grid grid-cols-1 gap-4 w-full",children:i.map(s=>f.jsxs("button",{type:"button",onClick:()=>n(s.id),className:`flex items-center gap-6 p-6 rounded-3xl border-2 transition-all active:scale-95 ${a===s.id?"border-brand bg-brand/10 text-brand":"border-slate-800 bg-slate-900/50 text-slate-500"}`,children:[f.jsx("div",{className:`p-4 rounded-2xl ${a===s.id?"bg-brand text-white shadow-lg shadow-brand/30":"bg-slate-800"}`,children:s.icon}),f.jsx("span",{className:"text-xl font-bold uppercase tracking-tight",children:s.label})]},s.id))})},ih=({min:a,max:n,value:i,onChange:s,unit:o})=>{const c=R.useRef(null),p=20,g=()=>{if(!c.current)return;const{scrollLeft:v}=c.current,b=Math.round(v/p),S=a+b;S!==i&&S>=a&&S<=n&&s(S)};return R.useEffect(()=>{c.current&&(c.current.scrollLeft=(i-a)*p)},[]),f.jsxs("div",{className:"flex flex-col items-center w-full py-6 select-none overflow-hidden",children:[f.jsxs("div",{className:"text-7xl font-black mb-4 flex items-baseline gap-2 tabular-nums",children:[i," ",f.jsx("span",{className:"text-2xl text-brand font-bold uppercase",children:o})]}),f.jsxs("div",{className:"relative w-full h-32 flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 flex justify-center pointer-events-none z-20",children:f.jsx("div",{className:"w-1.5 h-24 bg-brand rounded-full shadow-[0_0_20px_rgba(14,165,233,0.8)]"})}),f.jsxs("div",{ref:c,onScroll:g,className:"w-full flex overflow-x-auto snap-x snap-mandatory no-scrollbar",children:[f.jsx("div",{className:"flex-shrink-0 w-[50%]",style:{marginLeft:`-${p/2}px`}}),Array.from({length:n-a+1},(v,b)=>a+b).map(v=>f.jsxs("div",{className:"flex flex-col items-center justify-end flex-shrink-0 snap-center z-10",style:{width:`${p}px`},children:[f.jsx("div",{className:`w-1 rounded-full mb-3 transition-all duration-150 ${v===i?"bg-brand h-20 opacity-100 scale-x-150":v%5===0?"h-10 bg-slate-500 opacity-60":"h-6 bg-slate-800 opacity-40"}`}),v%5===0&&f.jsx("span",{className:`text-[10px] font-black transition-colors ${v===i?"text-brand":"text-slate-600"}`,children:v})]},v)),f.jsx("div",{className:"flex-shrink-0 w-[50%]",style:{marginRight:`-${p/2}px`}})]})]})]})},Hj=({value:a,onChange:n})=>{const[i,s]=R.useState([]);R.useEffect(()=>{(async()=>{const{data:p}=await tt.from("athlete_levels_lookup").select("*").eq("status",!0).order("display_order",{ascending:!0});p&&s(p)})()},[]);const o=c=>{const p=Math.floor(c/2);if(p===0)return"Beginner";if(p<30)return`${p} Day${p>1?"s":""} Experience`;const g=Math.floor(p/30.44);if(g<12)return`${g} Month${g>1?"s":""} Experience`;const v=Math.floor(g/12),b=g%12;return b===0?`${v} Year${v>1?"s":""} Experience`:`${v}y ${b}m Experience`};return f.jsxs("div",{className:"relative w-full h-[380px]",children:[f.jsx("div",{className:"h-full overflow-y-auto pr-2 space-y-4 no-scrollbar pb-10",children:i.map(c=>f.jsxs("button",{onClick:()=>n(c.level_name,c.min_points),className:`w-full flex items-center gap-4 p-5 rounded-[2rem] border-2 transition-all active:scale-95 text-left ${a===c.level_name?"border-brand bg-brand/10 shadow-lg":"border-slate-800 bg-slate-900/40"}`,children:[f.jsx("div",{className:`p-3 rounded-2xl ${a===c.level_name?"bg-brand text-white":"bg-slate-800 text-slate-500"}`,children:c.multiplier>1.8?f.jsx(ss,{size:24}):c.multiplier>1.2?f.jsx(eb,{size:24}):f.jsx(kl,{size:24})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("span",{className:`text-lg font-black block uppercase tracking-tight ${a===c.level_name?"text-white":"text-slate-300"}`,children:c.level_name}),f.jsx("span",{className:"text-[11px] text-slate-500 font-bold uppercase tracking-wider",children:o(c.min_points)})]})]},c.id))}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black to-transparent pointer-events-none"})]})},Kj=()=>{const{user_id:a,refreshProfile:n}=Cn(),{saveOnboarding:i}=i2(),[s,o]=R.useState(1),[c,p]=R.useState(!1),[g,v]=R.useState({name:"",gender:"male",birthdate:"",height:175,current_weight:80,target_weight:75,target_workout_days:4,selected_level:"Novice",initial_points:0}),b=R.useMemo(()=>{const A=g.height/100,B=parseFloat((g.current_weight/(A*A)).toFixed(1));return B<18.5?{val:B,label:"Underweight",color:"text-yellow-500"}:B<25?{val:B,label:"Healthy",color:"text-brand"}:B<30?{val:B,label:"Overweight",color:"text-orange-500"}:{val:B,label:"Obese",color:"text-red-500"}},[g.height,g.current_weight]),S=g.current_weight-g.target_weight,j=R.useMemo(()=>S>0?`That's a ${S}kg loss plan!`:S<0?`Targeting a ${Math.abs(S)}kg gain!`:"Staying steady and strong!",[S]),O=async()=>{if(a){p(!0);try{await i({user_id:a,name:g.name,gender:g.gender,birthdate:g.birthdate,target_weight:g.target_weight,target_days_per_week:g.target_workout_days,role:"user",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},g.current_weight,g.height,g.selected_level,g.initial_points),await n()}catch(A){console.error("Onboarding Error:",A)}finally{p(!1)}}};return f.jsxs("div",{className:"flex flex-col h-screen bg-transparent text-white pt-safe overflow-hidden",children:[f.jsx("div",{className:"flex-none h-1 w-full bg-slate-900/30",children:f.jsx("div",{className:"h-full bg-brand transition-all duration-700 shadow-[0_0_15px_#0ea5e9]",style:{width:`${s/6*100}%`}})}),f.jsx("div",{className:"flex-1 overflow-y-auto touch-pan-y no-scrollbar px-8 pt-8",children:f.jsxs("div",{className:"min-h-full flex flex-col",children:[s===1&&f.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[f.jsxs("header",{className:"space-y-1",children:[f.jsxs("h1",{className:"text-4xl font-black uppercase leading-tight italic tracking-tighter",children:["First, ",f.jsx("br",{})," the ",f.jsx("span",{className:"text-brand",children:"Basics"})]}),f.jsx("p",{className:"text-slate-400 font-medium italic",children:"What should we call you?"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx(hl,{label:"FULL NAME",value:g.name,onChange:A=>v({...g,name:A.target.value}),placeholder:"John Doe"}),f.jsx("p",{className:"text-slate-500 font-black uppercase text-[10px] tracking-widest ml-1",children:"Gender"}),f.jsx($j,{value:g.gender,onChange:A=>v({...g,gender:A})}),f.jsx("p",{className:"text-slate-500 font-black uppercase text-[10px] tracking-widest ml-1",children:"Birthday"}),f.jsx(hl,{label:"BIRTH DATE",type:"date",value:g.birthdate,onChange:A=>v({...g,birthdate:A.target.value})})]})]}),s===2&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx(Ph,{className:"mx-auto mb-4 text-brand animate-pulse",size:32}),f.jsxs("h1",{className:"text-3xl font-black uppercase italic tracking-tight",children:["Nice to meet you, ",f.jsx("br",{}),f.jsxs("span",{className:"text-brand",children:[g.name.split(" ")[0]||"Athlete","!"]})]}),f.jsx("p",{className:"text-slate-400 font-medium mb-10 italic",children:"How tall are you?"}),f.jsx(ih,{min:100,max:250,value:g.height,unit:"cm",onChange:A=>v({...g,height:A})})]}),s===3&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx("h1",{className:"text-3xl font-black uppercase italic text-white tracking-tight",children:"Current Weight"}),f.jsx("p",{className:"text-slate-400 font-medium mb-10 italic",children:"Your starting point today"}),f.jsx(ih,{min:30,max:200,value:g.current_weight,unit:"kg",onChange:A=>v({...g,current_weight:A})}),f.jsxs("div",{className:"mt-8 bg-slate-900/40 border border-slate-800 p-6 rounded-[2rem] flex justify-between items-center backdrop-blur-md",children:[f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:"BMI Index"}),f.jsx("p",{className:`text-lg font-black italic ${b.color}`,children:b.label})]}),f.jsx("div",{className:"text-5xl font-black italic tabular-nums text-white",children:b.val})]})]}),s===4&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx(ls,{className:"mx-auto mb-4 text-brand",size:40}),f.jsx("h1",{className:"text-3xl font-black uppercase italic",children:"Target Weight"}),f.jsx("p",{className:"text-slate-400 font-medium mb-10 italic",children:"What is your dream goal?"}),f.jsx(ih,{min:30,max:200,value:g.target_weight,unit:"kg",onChange:A=>v({...g,target_weight:A})}),f.jsx("div",{className:"mt-8 py-3 px-8 bg-brand/10 border border-brand/20 rounded-full inline-block mx-auto animate-in zoom-in duration-500",children:f.jsx("span",{className:"text-brand font-black uppercase tracking-tighter text-xs italic",children:j})})]}),s===5&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center text-center py-6",children:[f.jsx("h1",{className:"text-4xl font-black uppercase mb-4 leading-tight italic",children:"Commitment"}),f.jsx("p",{className:"text-slate-400 font-medium mb-12 italic",children:"How many days a week will you train?"}),f.jsx("div",{className:"flex justify-between items-center bg-slate-900/40 p-6 rounded-[2.5rem] border border-slate-800",children:[1,2,3,4,5,6,7].map(A=>f.jsx("button",{onClick:()=>v({...g,target_workout_days:A}),className:`w-10 h-10 rounded-full font-black transition-all ${g.target_workout_days===A?"bg-brand text-white scale-125 shadow-lg shadow-brand/40":"text-slate-600"}`,children:A},A))})]}),s===6&&f.jsxs("div",{className:"flex-1 flex flex-col justify-center py-6",children:[f.jsxs("header",{className:"text-center mb-8",children:[f.jsx(ss,{className:"mx-auto mb-2 text-brand",size:32}),f.jsx("h1",{className:"text-3xl font-black uppercase italic",children:"Experience"}),f.jsx("p",{className:"text-slate-400 font-medium italic",children:"Where should we start you off?"})]}),f.jsx(Hj,{value:g.selected_level,onChange:(A,B)=>v({...g,selected_level:A,initial_points:B})})]}),f.jsx("div",{className:"h-6 flex-none"})]})}),f.jsxs("footer",{className:"flex-none px-8 pt-2 pb-10 flex gap-3 bg-transparent mt-auto",children:[s>1&&f.jsx("button",{onClick:()=>o(A=>A-1),className:"h-14 w-14 bg-slate-900/80 rounded-2xl border border-slate-800 flex items-center justify-center text-slate-400 active:scale-90 transition-all",children:f.jsx(Iv,{size:24})}),f.jsx("button",{onClick:s===6?O:()=>o(A=>A+1),disabled:c||s===1&&!g.name,className:"h-14 flex-1 bg-brand text-white rounded-2xl font-black uppercase tracking-widest italic shadow-lg shadow-brand/20 active:scale-[0.98] transition-all disabled:opacity-30",children:c?f.jsx(Q2,{className:"animate-spin"}):f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx("span",{children:s===6?"Finish":"Continue"}),s<6&&f.jsx(is,{size:18,strokeWidth:3})]})})]})]})},tb=R.createContext(void 0),Ij=({children:a})=>{const[n,i]=R.useState(!1),s=()=>i(!0),o=()=>i(!1);return f.jsx(tb.Provider,{value:{isSidebarOpen:n,openSidebar:s,closeSidebar:o},children:a})},nb=()=>{const a=R.useContext(tb);if(!a)throw new Error("useUI must be used within UIProvider");return a},Gj=()=>{const{athlete:a}=Cn(),{openSidebar:n}=nb(),i=()=>{const o=new Date().getHours();return o<12?"Good morning,":o<17?"Good afternoon,":"Good evening,"},s=a?.name?a.name.split(" ")[0].charAt(0).toUpperCase()+a.name.split(" ")[0].slice(1).toLowerCase():"Athlete";return f.jsx("header",{className:"pt-4 pb-4 space-y-6 ios-no-top",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"space-y-0.5",children:[f.jsxs("p",{className:"flex items-center gap-1.5 text-brand font-black italic text-[11px] uppercase tracking-widest",children:[f.jsx(Ph,{size:12,strokeWidth:3}),i()]}),f.jsxs("h1",{className:"text-2xl font-black text-white tracking-tight",children:[s,"!"]})]}),f.jsx("button",{className:"w-12 h-12 rounded-2xl bg-slate-900 border border-slate-800 flex items-center justify-center text-slate-400 active:scale-90 transition-all",children:f.jsx(v2,{size:22})})]})})};function Vj(a,n,i){var s,o;typeof a=="function"?(s=n||[],o=i):(s=[],o=n);var c=ol.useRef({hasResult:!1,result:o,error:null}),p=ol.useReducer(function(b){return b+1},0);p[0];var g=p[1],v=ol.useMemo(function(){var b=typeof a=="function"?a():a;if(!b||typeof b.subscribe!="function")throw a===b?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!c.current.hasResult&&typeof window<"u"&&(typeof b.hasValue!="function"||b.hasValue()))if(typeof b.getValue=="function")c.current.result=b.getValue(),c.current.hasResult=!0;else{var S=b.subscribe(function(j){c.current.result=j,c.current.hasResult=!0});typeof S=="function"?S():S.unsubscribe()}return b},s);if(ol.useDebugValue(c.current.result),ol.useEffect(function(){var b=v.subscribe(function(S){var j=c.current;(j.error!==null||j.result!==S)&&(j.error=null,j.result=S,j.hasResult=!0,g())},function(S){var j=c.current;j.error!==S&&(j.error=S,g())});return typeof b=="function"?b:b.unsubscribe.bind(b)},s),c.current.error)throw c.current.error;return c.current.result}function pl(a,n,i){return Vj(function(){return gl.liveQuery(a)},n||[],i)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(a){var n=gl.DexieYProvider;n&&n.release(a)});const ab=R.createContext(void 0),Yj=({children:a})=>{const n=an(),i=pl(()=>Tt.getActiveWorkoutQuery()),s=pl(()=>i?Tt.getWorkoutLogsQuery(i.id):[],[i]),o=(c="live")=>{n(`/workout/active?mode=${c}`)};return f.jsx(ab.Provider,{value:{activeWorkout:i||null,activeLogs:s||[],isOngoing:!!i,resumeSession:o},children:a})},Hh=()=>{const a=R.useContext(ab);if(!a)throw new Error("useWorkout must be used within WorkoutProvider");return a},Wj=()=>{const{user_id:a}=Cn(),n=an(),{isOngoing:i,resumeSession:s}=Hh(),o=new Date,[c,p]=R.useState(!1),g=R.useMemo(()=>{const b=rs(o,{weekStartsOn:1});return Array.from({length:7}).map((S,j)=>F1(b,j))},[]),v=async b=>{if(a){if(b==="REST"){p(!1),await Tt.logRestDay(a);return}if(b==="PAST"){p(!1),n("/workout/active?mode=past");return}p(!1);try{await Tt.startNewWorkout(a),n("/workout/active?mode=live")}catch(S){console.error("Failed to start live workout:",S)}}};return f.jsxs("section",{className:"mt-2 relative",children:[f.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-black border border-slate-800 p-6 rounded-[2.5rem] shadow-xl",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Weekly Activity"}),f.jsx("div",{className:"px-3 py-1 bg-slate-900 rounded-full border border-slate-800",children:f.jsxs("span",{className:"text-[10px] font-black uppercase text-[var(--brand-primary)] italic",children:[bc(g[0],"MMM d"),"  ",bc(g[6],"MMM d")]})})]}),f.jsx("div",{className:"flex justify-between items-center mb-8",children:g.map(b=>{const S=tS(b,o);return f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx("span",{className:`text-[10px] font-black uppercase tracking-tighter ${S?"text-[var(--brand-primary)]":"text-slate-600"}`,children:bc(b,"EEE")}),f.jsx("div",{className:`w-9 h-9 rounded-2xl border-2 flex items-center justify-center transition-all ${S?"border-[var(--brand-primary)] bg-[var(--brand-primary)]/10":"border-slate-800 bg-black/40"}`,children:f.jsx("span",{className:`text-[11px] font-black ${S?"text-white":"text-slate-700"}`,children:bc(b,"d")})})]},b.toString())})}),f.jsxs("button",{onClick:()=>i?s():p(!0),className:`w-full py-4.5 rounded-2xl flex items-center justify-center gap-3 font-black uppercase italic text-[11px] tracking-widest transition-all active:scale-[0.98] shadow-lg ${i?"bg-[var(--brand-primary)] text-black":"bg-white text-black"}`,children:[i?f.jsx(gj,{size:16}):f.jsx(Dc,{size:16,fill:"currentColor"}),i?"Resume Session":"Start Workout"]})]}),c&&f.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:f.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-[3rem] p-8 animate-in slide-in-from-bottom duration-300",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h2",{className:"text-xl font-black uppercase italic text-white tracking-tight",children:"Session Type"}),f.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center text-slate-500 active:scale-90 transition-all",children:f.jsx(Gc,{size:20})})]}),f.jsxs("div",{className:"grid gap-4",children:[f.jsx(sh,{icon:f.jsx(Dc,{size:20,fill:"currentColor"}),title:"Live Workout",sub:"Real-time Tracking",color:"bg-[var(--brand-primary)]",onClick:()=>v("LIVE")}),f.jsx(sh,{icon:f.jsx(g2,{size:20}),title:"Log Previous",sub:"Manual Entry",color:"bg-slate-700 text-white",onClick:()=>v("PAST")}),f.jsx(sh,{icon:f.jsx(R2,{size:20}),title:"Rest Day",sub:"Recovery Mode",color:"bg-slate-800 text-white",onClick:()=>v("REST")})]})]})})]})},sh=({icon:a,title:n,sub:i,color:s,onClick:o})=>f.jsxs("button",{onClick:o,className:"w-full flex items-center gap-5 p-5 bg-black border border-slate-800 rounded-3xl active:scale-[0.98] transition-all hover:border-slate-700",children:[f.jsx("div",{className:`w-12 h-12 rounded-2xl ${s} flex items-center justify-center shadow-lg`,children:a}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-[13px] font-black uppercase italic text-white leading-none",children:n}),f.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-1.5",children:i})]})]}),Qj=[{id:"strength",name:"Strength",icon:Go,color:"bg-orange-500",bg:"from-orange-500/20"},{id:"hiit",name:"HIIT",icon:kl,color:"bg-yellow-500",bg:"from-yellow-500/20"},{id:"cardio",name:"Cardio",icon:I2,color:"bg-red-500",bg:"from-red-500/20"},{id:"endurance",name:"Endurance",icon:Ic,color:"bg-blue-500",bg:"from-blue-500/20"},{id:"mobility",name:"Mobility",icon:qj,color:"bg-emerald-500",bg:"from-emerald-500/20"}],Xj=()=>f.jsxs("section",{className:"mt-8 space-y-4",children:[f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Training Focus"}),f.jsx("button",{className:"text-[10px] font-black uppercase text-brand",children:"Explore All"})]}),f.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2",children:Qj.map(a=>f.jsxs("button",{className:"flex-shrink-0 group relative w-32 h-40 bg-gradient-to-br to-slate-950 border border-slate-800 rounded-[2rem] overflow-hidden transition-all active:scale-95",children:[f.jsx("div",{className:`absolute inset-0 bg-gradient-to-b ${a.bg} to-transparent opacity-40 group-hover:opacity-60 transition-opacity`}),f.jsxs("div",{className:"relative h-full flex flex-col items-center justify-between py-6",children:[f.jsx("div",{className:`w-12 h-12 rounded-2xl ${a.color} flex items-center justify-center shadow-lg`,children:f.jsx(a.icon,{size:24,className:"text-black"})}),f.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-white group-hover:text-brand transition-colors",children:a.name})]})]},a.id))})]}),Fj=()=>f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] px-6 space-y-4 min-h-screen pb-32 pt-[env(safe-area-inset-top)] mt-4",children:[f.jsx(Gj,{}),f.jsx(Wj,{}),f.jsx(Xj,{}),f.jsxs("section",{className:"mt-6 space-y-4",children:[f.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Recommended Today"}),f.jsxs("div",{className:"group relative w-full h-44 border border-slate-800 rounded-[2.5rem] overflow-hidden transition-all active:scale-[0.98]",children:[f.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1000&auto=format&fit=crop')] bg-cover bg-center opacity-30 group-hover:scale-110 transition-transform duration-700"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"}),f.jsxs("div",{className:"absolute bottom-6 left-6 right-6 flex justify-between items-end",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("span",{className:"text-[10px] font-black uppercase text-brand tracking-widest",children:"Advanced  45 Min"}),f.jsx("h4",{className:"text-xl font-black uppercase italic leading-none text-white",children:"Full Body Power"})]}),f.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-black",children:f.jsx(kl,{size:20,fill:"currentColor"})})]})]})]}),f.jsx("div",{className:"flex-1"})]}),Jj=()=>{const a=an(),n=Aa(),i=[{icon:V2,label:"Home",path:"/dashboard"},{icon:Yv,label:"Library",path:"/library"},{icon:qh,label:"Logs",path:"/logs"},{icon:x2,label:"Stats",path:"/stats"},{icon:Xo,label:"Profile",path:"/profile"}],s=R.useMemo(()=>i.findIndex(o=>o.path===n.pathname),[n.pathname]);return f.jsx("nav",{className:"pointer-events-none w-full h-full flex items-end justify-center pb-2",children:f.jsxs("div",{className:"pointer-events-auto relative w-[90%] max-w-sm bg-[var(--bg-surface)] backdrop-blur-sm border border-[var(--border-color)] rounded-full shadow-md px-3 py-2",children:[f.jsx("div",{className:"absolute top-2 left-3 h-10 w-[calc((100%-24px)/5)] bg-[var(--brand-primary)] rounded-full transition-transform duration-300 ease-out",style:{transform:`translateX(${s*100}%)`}}),f.jsx("div",{className:"relative flex items-center justify-between",children:i.map(o=>{const c=n.pathname===o.path;return f.jsxs("button",{onClick:()=>a(o.path),className:"flex flex-col items-center justify-center flex-1 active:scale-95 transition",children:[f.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full ${c?"text-white":"text-[var(--text-muted)]"}`,children:f.jsx(o.icon,{size:20,strokeWidth:2})}),f.jsx("span",{className:`text-[10px] font-extrabold uppercase tracking-wide mt-1 ${c?"text-[var(--brand-primary)]":"text-[var(--text-muted)] opacity-60"}`,children:o.label})]},o.path)})})]})})},Hy=({isOpen:a,onClose:n,isStatic:i=!1})=>{const{athlete:s,signOut:o}=Cn(),c=i?"w-full h-full bg-[var(--bg-main)] border-r border-[var(--border-color)]":`fixed top-0 left-0 bottom-0 w-80 bg-[var(--bg-main)] z-[70] border-r border-[var(--border-color)] transition-transform duration-300 ease-out ${a?"translate-x-0":"-translate-x-full"}`;return f.jsxs(f.Fragment,{children:[!i&&f.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] transition-opacity duration-300 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:n}),f.jsx("aside",{className:c,children:f.jsxs("div",{className:"flex flex-col h-full p-8",children:[!i&&f.jsx("button",{onClick:n,className:"self-end p-2 text-[var(--text-muted)] mb-4 active:scale-90 transition-transform",children:f.jsx(Gc,{size:24})}),i&&f.jsx("div",{className:"mb-10 px-4",children:f.jsxs("h2",{className:"text-xl font-black italic tracking-tighter text-[var(--text-main)]",children:["TRACK",f.jsx("span",{className:"text-[var(--brand-primary)]",children:"FIT"})]})}),f.jsxs("div",{className:"flex items-center gap-4 mb-10 px-2",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--brand-primary)] bg-opacity-10 border border-[var(--brand-primary)] border-opacity-20 flex items-center justify-center text-[var(--brand-primary)] font-black text-xl italic",children:s?.name?.[0].toUpperCase()}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-black text-[var(--text-main)] text-md truncate w-32",children:s?.name}),f.jsx("p",{className:"text-[10px] text-[var(--text-muted)] font-bold uppercase tracking-wider",children:"Athlete Profile"})]})]}),f.jsxs("nav",{className:"flex-1 space-y-1",children:[f.jsx(Mo,{icon:Xo,label:"My Profile"}),f.jsx(Mo,{icon:ss,label:"Rank Progress"}),f.jsx(Mo,{icon:Jv,label:"Body Metrics"}),f.jsx(Mo,{icon:_j,label:"Settings"}),f.jsx(Mo,{icon:Yv,label:"Library"})]}),f.jsxs("button",{onClick:o,className:"flex items-center gap-3 p-4 w-full rounded-2xl bg-red-500/5 text-red-500 font-bold border border-red-500/10 active:scale-95 transition-all mt-auto",children:[f.jsx(Wv,{size:18}),f.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})})]})},Mo=({icon:a,label:n})=>f.jsxs("button",{className:"w-full flex items-center justify-between p-4 rounded-2xl hover:bg-[var(--bg-surface)] transition-colors group",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(a,{size:18,className:"text-[var(--text-muted)] group-hover:text-[var(--brand-primary)] transition-colors"}),f.jsx("span",{className:"text-sm font-bold text-[var(--text-muted)] group-hover:text-[var(--text-main)] transition-colors",children:n})]}),f.jsx(is,{size:14,className:"text-[var(--border-color)]"})]}),Zj=80,ek=()=>{const{isSidebarOpen:a,closeSidebar:n}=nb(),i=Aa();return R.useRef(null),R.useLayoutEffect(()=>{window.scrollTo(0,0)},[i.pathname]),f.jsxs("div",{className:"relative min-h-screen text-[var(--text-main)] bg-[var(--bg-main)]",children:[f.jsxs("div",{className:"flex min-h-screen",children:[f.jsx("div",{className:"hidden lg:block w-72 border-r border-[var(--border-color)]",children:f.jsx(Hy,{isOpen:!0,onClose:()=>{},isStatic:!0})}),f.jsx("div",{className:"lg:hidden",children:f.jsx(Hy,{isOpen:a,onClose:n})}),f.jsx("main",{className:"flex-1 flex flex-col w-full",children:f.jsx(fv,{})})]}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden pointer-events-none",style:{height:Zj},children:f.jsx(Jj,{})})]})},tk=()=>f.jsx(Ij,{children:f.jsx(ek,{})}),nk=()=>f.jsx("div",{className:"flex h-screen w-screen items-center justify-center bg-bg-main",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"text-brand-primary animate-pulse font-black italic text-4xl tracking-tighter",children:"FITNEX"}),f.jsx("div",{className:"h-1 w-12 bg-surface overflow-hidden rounded-full",children:f.jsx("div",{className:"h-full bg-brand-primary animate-progress-loading"})})]})}),ak=()=>{const{user_id:a}=Cn(),[n,i]=R.useState(!1);return R.useEffect(()=>{(async()=>{if(a)try{await Promise.all([nn.syncLibrary(),Tt.syncRecentWorkouts(a),Tt.syncPRs(a),as.syncRoutine(a),Uh.syncMetadata()]),i(!0)}catch(o){console.error("Sync Error:",o),i(!0)}})()},[a]),n?f.jsx(fv,{}):f.jsx(nk,{})},rk=()=>{const{athlete:a,signOut:n}=Cn(),i=an();return a?f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] min-h-screen px-6 pb-32 pt-[env(safe-area-inset-top)]",children:[f.jsx("header",{className:"flex justify-end pt-6 pb-2",children:f.jsx("button",{onClick:()=>n(),className:"p-3 bg-red-500/10 border border-red-500/15 rounded-2xl text-red-500 active:scale-90 transition-all",children:f.jsx(Wv,{size:18})})}),f.jsxs("section",{className:"flex flex-col items-center mb-10",children:[f.jsxs("div",{className:"relative mb-6",children:[f.jsx("div",{className:"absolute inset-0 bg-[var(--brand-primary)] opacity-10 blur-2xl rounded-full"}),f.jsx("div",{className:"relative w-28 h-28 rounded-full bg-gradient-to-tr from-[var(--brand-primary)] to-orange-500 p-[3px]",children:f.jsx("div",{className:"w-full h-full rounded-full bg-[var(--bg-main)] border-[4px] border-[var(--bg-main)] flex items-center justify-center overflow-hidden",children:f.jsx("span",{className:"text-4xl font-black text-[var(--text-main)] italic tracking-tighter",children:a.name?.charAt(0)})})})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-black tracking-tight uppercase italic text-[var(--text-main)] leading-none",children:a.name}),f.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2",children:[f.jsx("span",{className:"h-[1px] w-6 bg-slate-800"}),f.jsxs("p",{className:"text-[11px] font-black uppercase tracking-[0.4em] text-[var(--brand-primary)] italic",children:["Level  ",a.current_level]}),f.jsx("span",{className:"h-[1px] w-6 bg-slate-800"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2.5 mb-8",children:[f.jsx(_c,{label:"BMI",value:a.bmi||"0.0",icon:f.jsx(kl,{size:12})}),f.jsx(_c,{label:"Body Fat",value:`${a.body_fat_percent||"0"}%`,icon:f.jsx(oj,{size:12})}),f.jsx(_c,{label:"Lost",value:`${a.weight_lost||"0"}kg`,icon:f.jsx(z2,{size:12})}),f.jsx(_c,{label:"Goal",value:a.target_weight?`${a.target_weight}kg`:"",icon:f.jsx(ls,{size:12})})]}),f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 whitespace-nowrap",children:"Account Settings"}),f.jsx("div",{className:"h-[1px] w-full bg-slate-800/50"})]}),f.jsxs("nav",{className:"space-y-3",children:[f.jsx(Sc,{label:"User Profile",sub:"Personal Identity & Goals",icon:f.jsx(Xo,{size:18}),onClick:()=>i("/profile/details")}),f.jsx(Sc,{label:"Measurements",sub:"Vitals & Metrics Tracking",icon:f.jsx(Zv,{size:18}),onClick:()=>i("/profile/metrics")}),f.jsx(Sc,{label:"Level Details",sub:"Rank Progress & Milestone",icon:f.jsx(ss,{size:18}),onClick:()=>i("/profile/level")}),f.jsx(Sc,{label:"Themes & Appearance",sub:"Brand Color & Styles",icon:f.jsx(sj,{size:18}),onClick:()=>i("/profile/theme")})]}),f.jsx("div",{className:"flex-1"})]}):null},_c=({label:a,value:n,icon:i})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-3 rounded-[1.2rem] flex items-center gap-3",children:[f.jsx("div",{className:"w-7 h-7 rounded-lg bg-[var(--bg-main)] border border-slate-800 flex items-center justify-center text-[var(--brand-primary)]",children:i}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-black italic text-[var(--text-main)] leading-none",children:n}),f.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tight mt-0.5",children:a})]})]}),Sc=({label:a,sub:n,icon:i,onClick:s})=>f.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 bg-[var(--bg-surface)] border border-slate-800 rounded-[1.8rem] active:opacity-70 transition-all group",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-2xl bg-[var(--bg-main)] border border-slate-800 flex items-center justify-center text-slate-500 group-active:text-[var(--brand-primary)]",children:i}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-[11px] font-black uppercase italic tracking-wider text-[var(--text-main)]",children:a}),f.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-tighter",children:n})]})]}),f.jsx(is,{size:16,className:"text-slate-600 group-active:text-[var(--brand-primary)]"})]}),ta=({children:a,title:n,rightElement:i})=>{const s=an();return R.useLayoutEffect(()=>{window.scrollTo(0,0)},[]),f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] min-h-screen pt-[env(safe-area-inset-top)] pb-32",children:[f.jsxs("header",{className:"px-6 py-6 flex items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:()=>s(-1),className:"w-10 h-10 rounded-xl bg-[var(--bg-surface)] border border-slate-800 flex items-center justify-center text-[var(--text-main)] active:scale-90 transition-all",children:f.jsx(Iv,{size:20})}),f.jsx("h1",{className:"text-2xl font-black uppercase italic tracking-tighter text-[var(--text-main)]",children:n})]}),i&&f.jsx("div",{className:"flex items-center gap-3",children:i})]}),f.jsx("main",{className:"flex-1 flex flex-col px-6",children:a})]})},ik=()=>{const{user_id:a,athlete:n,refreshAthlete:i}=Cn(),[s,o]=R.useState(!1),[c,p]=R.useState({name:"",gender:"",birth_date:"",target_weight:"",target_days_per_week:"4"});R.useEffect(()=>{n&&p({name:n.name||"",gender:n.gender?n.gender.charAt(0).toUpperCase()+n.gender.slice(1).toLowerCase():"",birth_date:n.birthdate||"",target_weight:n.target_weight?.toString()||"",target_days_per_week:n.target_days_per_week?.toString()||"4"})},[n]);const g=async()=>{if(a){o(!0);try{await Pv.updateProfile({user_id:a,name:c.name,gender:c.gender.toLowerCase(),birthdate:c.birth_date,target_weight:parseFloat(c.target_weight)||0,target_days_per_week:parseInt(c.target_days_per_week)||4}),await i()}catch(v){console.error("Profile sync error:",v)}finally{o(!1)}}};return f.jsx(ta,{title:"User Profile",children:f.jsxs("div",{className:"flex-1 flex flex-col space-y-8 pb-32 bg-[var(--bg-main)]",children:[f.jsxs("section",{className:"space-y-4",children:[f.jsx(Ky,{icon:f.jsx(Xo,{size:14}),title:"Identity"}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem]",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Full Athlete Name"}),f.jsx("input",{type:"text",value:c.name,onChange:v=>p({...c,name:v.target.value}),className:"bg-transparent border-none outline-none text-2xl font-black italic text-[var(--text-main)] w-full placeholder:text-slate-700",placeholder:"Full Name"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx(Iy,{label:"Gender",value:c.gender,options:["Male","Female","Other"],onChange:v=>p({...c,gender:v})}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem]",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Birth Date"}),f.jsx("input",{type:"date",value:c.birth_date,onChange:v=>p({...c,birth_date:v.target.value}),className:"bg-transparent border-none outline-none text-sm font-black uppercase text-[var(--text-main)] w-full invert-[0.8]"})]})]})]}),f.jsxs("section",{className:"space-y-4",children:[f.jsx(Ky,{icon:f.jsx(ls,{size:14}),title:"Goals"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem]",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:"Target Weight"}),f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("input",{type:"text",inputMode:"decimal",value:c.target_weight,onChange:v=>p({...c,target_weight:v.target.value}),className:"bg-transparent border-none outline-none text-2xl font-black italic text-[var(--text-main)] w-16",placeholder:"00"}),f.jsx("span",{className:"text-[var(--brand-primary)] font-black italic text-xs uppercase",children:"kg"})]})]}),f.jsx(Iy,{label:"Days / Week",value:c.target_days_per_week,options:["1","2","3","4","5","6","7"],onChange:v=>p({...c,target_days_per_week:v})})]})]}),f.jsx("div",{className:"pt-4",children:f.jsxs("button",{disabled:s,onClick:g,className:"w-full py-4 bg-[var(--brand-primary)] text-black text-base font-black uppercase italic tracking-[0.1em] rounded-[1.5rem] flex items-center justify-center gap-2 active:scale-[0.97] transition-all disabled:opacity-50 shadow-lg shadow-[var(--brand-primary)]/20",children:[s?f.jsx(Sh,{size:18,className:"animate-spin"}):f.jsx(Bh,{size:18}),s?"Updating...":"Update Profile"]})}),f.jsx("div",{className:"flex-1"})]})})},Ky=({icon:a,title:n})=>f.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2 font-black uppercase tracking-[0.2em] text-[10px] text-slate-500",children:[f.jsx("div",{className:"text-[var(--brand-primary)]",children:a}),n]}),Iy=({label:a,value:n,options:i,onChange:s})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[1.5rem] relative",children:[f.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase mb-2 tracking-widest",children:a}),f.jsxs("select",{value:n,onChange:o=>s(o.target.value),className:"bg-transparent border-none outline-none text-xl font-black italic text-[var(--text-main)] w-full appearance-none pr-8 cursor-pointer relative z-10",children:[f.jsx("option",{value:"",disabled:!0,children:"Select"}),i.map(o=>f.jsx("option",{value:o,className:"bg-black text-white",children:o},o))]}),f.jsx(Sl,{size:14,className:"absolute right-5 bottom-6 text-slate-600 pointer-events-none"})]}),jc={weight:"",height:"",belly:"",waist:"",hips:"",chest:"",shoulder:"",neck:"",right_bicep:"",left_bicep:"",right_forearm:"",left_forearm:"",right_calf:"",left_calf:"",right_thigh:"",left_thigh:""},sk=()=>{const{user_id:a,refreshAthlete:n}=Cn(),[i,s]=R.useState(!0),[o,c]=R.useState(!1),[p,g]=R.useState(jc);R.useEffect(()=>{(async()=>{try{const j=await _h.getLatestMetrics();if(j){const O={...jc};Object.keys(jc).forEach(A=>{const B=j[A];O[A]=B!=null?B.toString():""}),g(O)}}catch(j){console.error(j)}finally{s(!1)}})()},[]);const v=(S,j)=>{(j===""||/^[0-9]*\.?[0-9]*$/.test(j))&&g(O=>({...O,[S]:j}))},b=async()=>{if(!a)return;c(!0);const S={user_id:a,logdate:new Date().toISOString().split("T")[0],weight:parseFloat(p.weight)||0,height:parseFloat(p.height)||0};Object.keys(jc).forEach(j=>{if(j==="weight"||j==="height")return;const O=p[j];S[j]=O===""?null:parseFloat(O)});try{await _h.updateMetrics(S),await n()}finally{c(!1)}};return i?f.jsx(ta,{title:"Measurements",children:f.jsx("div",{className:"flex h-60 items-center justify-center",children:f.jsx(Sh,{className:"animate-spin text-[var(--brand-primary)]",size:28})})}):f.jsx(ta,{title:"Measurements",children:f.jsxs("div",{className:"flex-1 flex flex-col space-y-10 bg-[var(--bg-main)]",children:[f.jsxs("section",{children:[f.jsx(lh,{icon:f.jsx(Hv,{size:16}),title:"Core Vitals"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Gy,{label:"Weight",value:p.weight,unit:"kg",icon:f.jsx(Zv,{size:16}),onChange:S=>v("weight",S)}),f.jsx(Gy,{label:"Height",value:p.height,unit:"cm",icon:f.jsx(Jv,{size:16}),onChange:S=>v("height",S)})]})]}),f.jsxs("section",{children:[f.jsx(lh,{icon:f.jsx(Go,{size:16}),title:"Torso"}),f.jsx("div",{className:"grid grid-cols-3 gap-3",children:["neck","shoulder","chest","belly","waist","hips"].map(S=>f.jsx(lk,{label:S,value:p[S],onChange:j=>v(S,j)},S))})]}),f.jsxs("section",{children:[f.jsx(lh,{icon:f.jsx(B2,{size:16}),title:"Limb Symmetry"}),f.jsx("div",{className:"space-y-4",children:[{label:"Bicep",l:"left_bicep",r:"right_bicep"},{label:"Forearm",l:"left_forearm",r:"right_forearm"},{label:"Thigh",l:"left_thigh",r:"right_thigh"},{label:"Calf",l:"left_calf",r:"right_calf"}].map(S=>f.jsx(ok,{label:S.label,leftKey:S.l,rightKey:S.r,metrics:p,onUpdate:(j,O)=>v(j,O)},S.label))})]}),f.jsx("div",{className:"pt-6",children:f.jsxs("button",{disabled:o,onClick:b,className:"w-full py-4 bg-[var(--brand-primary)] text-black text-base font-black uppercase italic tracking-[0.1em] rounded-[1.5rem] flex items-center justify-center gap-2 active:scale-[0.97] transition-all disabled:opacity-50 shadow-lg shadow-[var(--brand-primary)]/20",children:[o?f.jsx(Sh,{size:22,className:"animate-spin"}):f.jsx(Bh,{size:22}),o?"Updating...":"Update Athlete Data"]})}),f.jsx("div",{className:"flex-1"})]})})},lh=({icon:a,title:n})=>f.jsxs("div",{className:"flex items-center gap-3 mb-5 px-2 font-black uppercase tracking-[0.25em] text-[12px] text-slate-500",children:[f.jsx("div",{className:"text-[var(--brand-primary)]",children:a}),n]}),Gy=({label:a,value:n,unit:i,icon:s,onChange:o})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[2rem]",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3 text-[var(--brand-primary)]",children:[s,f.jsx("span",{className:"text-[10px] font-black text-slate-600",children:i})]}),f.jsx("input",{type:"text",inputMode:"decimal",value:n,onChange:c=>o(c.target.value),className:"bg-transparent border-none outline-none text-2xl font-black italic text-[var(--text-main)] w-full placeholder:text-slate-800",placeholder:"0.0"}),f.jsx("p",{className:"text-[11px] font-bold text-slate-500 uppercase mt-1.5",children:a})]}),lk=({label:a,value:n,onChange:i})=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-4 rounded-[1.5rem] text-center",children:[f.jsx("p",{className:"text-[9px] font-black text-slate-600 uppercase mb-2",children:a}),f.jsx("input",{type:"text",inputMode:"decimal",value:n,onChange:s=>i(s.target.value),className:"bg-transparent border-none outline-none text-base font-black italic text-[var(--text-main)] w-full text-center placeholder:text-slate-800",placeholder:""})]}),ok=({label:a,leftKey:n,rightKey:i,metrics:s,onUpdate:o})=>f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-20 text-[11px] font-black uppercase text-slate-500 italic",children:a}),f.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[f.jsx("input",{type:"text",inputMode:"decimal",value:s[n],onChange:c=>o(n,c.target.value),className:"w-full bg-[var(--bg-surface)] border border-slate-800 p-4 rounded-2xl text-sm font-black italic text-[var(--text-main)] text-center placeholder:text-slate-800",placeholder:"L"}),f.jsx("input",{type:"text",inputMode:"decimal",value:s[i],onChange:c=>o(i,c.target.value),className:"w-full bg-[var(--bg-surface)] border border-slate-800 p-4 rounded-2xl text-sm font-black italic text-[var(--text-main)] text-center placeholder:text-slate-800",placeholder:"R"})]})]}),uk=()=>{const{athlete:a}=Cn();if(!a)return null;const i=[{name:"Starter",points:"0-100",min:0},{name:"Novice",points:"101-500",min:101},{name:"Warrior",points:"501-2000",min:501},{name:"Elite",points:"2001+",min:2001}].find(s=>s.name===a.current_level);return f.jsx(ta,{title:"Level Details",children:f.jsxs("div",{className:"flex-1 flex flex-col space-y-8 pb-10",children:[f.jsxs("section",{className:"text-center pt-4",children:[f.jsxs("div",{className:"relative inline-block mb-6",children:[f.jsx("div",{className:"absolute inset-0 bg-[var(--brand-primary)] opacity-20 blur-3xl rounded-full"}),f.jsxs("div",{className:"relative w-32 h-32 rounded-[2.5rem] bg-[var(--bg-surface)] border border-slate-800 flex items-center justify-center",children:[f.jsx(ss,{size:48,className:"text-[var(--brand-primary)]",fill:"currentColor",fillOpacity:.1}),f.jsx("div",{className:"absolute -top-2 -right-2 bg-[var(--brand-primary)] text-black w-10 h-10 rounded-xl flex items-center justify-center font-black italic border-4 border-[var(--bg-main)]",children:a.current_level?.charAt(0)})]})]}),f.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tighter text-[var(--text-main)]",children:a.current_level}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-500 mt-2",children:"Current Athlete Status"})]}),f.jsxs("section",{className:"bg-[var(--bg-surface)] border border-slate-800 p-6 rounded-[2.5rem]",children:[f.jsxs("div",{className:"flex justify-between items-end mb-6",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1",children:"Total Points"}),f.jsx("p",{className:"text-3xl font-black italic text-[var(--text-main)]",children:a.level_points})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--brand-primary)] mb-1",children:"Next Rank"}),f.jsxs("p",{className:"text-xl font-black italic text-slate-500",children:[a.level_end," PTS"]})]})]}),f.jsx("div",{className:"h-3 w-full bg-[var(--bg-main)] rounded-full overflow-hidden border border-slate-800",children:f.jsx("div",{className:"h-full bg-[var(--brand-primary)] rounded-full transition-all duration-1000 shadow-[0_0_15px_var(--brand-primary)]",style:{width:`${a.level_completion_percent}%`}})}),f.jsxs("div",{className:"mt-4 flex justify-between items-center text-[10px] font-black italic uppercase text-slate-500",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(eb,{size:12,className:"text-[var(--brand-primary)]"}),f.jsxs("span",{children:[a.points_remaining," PTS Remaining"]})]}),f.jsxs("span",{className:"text-[var(--text-main)]",children:[a.level_completion_percent,"% Complete"]})]})]}),i&&f.jsx("section",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between p-5 rounded-2xl border border-[var(--brand-primary)] bg-[var(--brand-primary)]/5",children:[f.jsxs("div",{className:"flex items-center gap-4 text-[var(--text-main)]",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--brand-primary)] flex items-center justify-center text-black",children:f.jsx(h2,{size:20})}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs font-black uppercase italic tracking-wide",children:[i.name," Rank"]}),f.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase",children:["Active Milestone: ",i.points," PTS"]})]})]}),f.jsx("span",{className:"bg-[var(--brand-primary)] text-black text-[8px] font-black uppercase px-2 py-1 rounded-md",children:"Active"})]})}),a.projected_next_level_date&&f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-5 rounded-[2rem] flex items-center gap-4 mt-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 flex items-center justify-center text-[var(--brand-primary)] border border-slate-800",children:f.jsx(Cj,{size:20})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Estimated Rank Up"}),f.jsxs("p",{className:"text-sm font-bold text-[var(--text-main)] uppercase italic",children:["Around"," ",new Date(a.projected_next_level_date).toLocaleDateString("en-US",{month:"long",day:"numeric"})]})]})]}),f.jsx("div",{className:"flex-1"})]})})},ck=[{name:"Fitnex Orange",hex:"#ff7f50"},{name:"Electric Blue",hex:"#3b82f6"},{name:"Cyber Green",hex:"#22c55e"},{name:"Neon Purple",hex:"#a855f7"},{name:"Crimson Red",hex:"#ef4444"},{name:"Solar Yellow",hex:"#eab308"}],dk=()=>{const[a,n]=R.useState(()=>document.documentElement.classList.contains("light-theme")?"light":"dark"),[i,s]=R.useState(()=>localStorage.getItem("fitnex-color")||"#ff7f50"),[o,c]=R.useState(i),p=()=>{const g=document.documentElement;localStorage.setItem("fitnex-theme",a),localStorage.setItem("fitnex-color",i),a==="light"?g.classList.add("light-theme"):g.classList.remove("light-theme"),g.style.setProperty("--brand-primary",i)};return R.useEffect(()=>{c(i)},[i]),f.jsx(ta,{title:"Appearance",children:f.jsxs("div",{className:"space-y-10 pb-10 bg-[var(--bg-main)]",children:[f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-5 px-2 text-[var(--brand-primary)]",children:[f.jsx(Ph,{size:14}),f.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)]",children:"Visual Mode"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx(Vy,{active:a==="dark",onClick:()=>n("dark"),label:"Dark",icon:f.jsx(ej,{size:18}),desc:"OLED Saver"}),f.jsx(Vy,{active:a==="light",onClick:()=>n("light"),label:"Light",icon:f.jsx(Ej,{size:18}),desc:"High Contrast"})]})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-5 px-2 text-[var(--brand-primary)]",children:[f.jsx(rj,{size:14}),f.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)]",children:"Brand Accent"})]}),f.jsx("div",{className:"p-6 rounded-[2.5rem] mb-4 border border-[var(--border-color)] bg-[var(--bg-surface)]",children:f.jsx("div",{className:"grid grid-cols-3 gap-y-6 gap-x-4",children:ck.map(g=>f.jsx("button",{onClick:()=>s(g.hex),className:"flex flex-col items-center gap-2",children:f.jsx("div",{className:"w-12 h-12 rounded-2xl transition-all duration-300 flex items-center justify-center border-2",style:{backgroundColor:g.hex,borderColor:i.toLowerCase()===g.hex.toLowerCase()?"var(--text-main)":"transparent"},children:i.toLowerCase()===g.hex.toLowerCase()&&f.jsx(_l,{size:20,className:"text-white",strokeWidth:4})})},g.hex))})}),f.jsxs("div",{className:"grid grid-cols-12 gap-3 mt-4",children:[f.jsxs("div",{className:"col-span-8 relative",children:[f.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]",children:f.jsx(Vv,{size:14})}),f.jsx("input",{type:"text",value:o.replace("#",""),onChange:g=>{const v=`#${g.target.value}`;c(v),/^#[0-9A-F]{6}$/i.test(v)&&s(v)},className:"w-full border border-[var(--border-color)] rounded-2xl py-4 pl-10 pr-4 text-xs font-black uppercase bg-[var(--bg-surface)] text-[var(--text-main)] outline-none"})]}),f.jsxs("div",{className:"col-span-4 relative",children:[f.jsx("input",{type:"color",value:i,onChange:g=>s(g.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),f.jsx("div",{className:"w-full h-full border border-[var(--border-color)] rounded-2xl flex items-center justify-center text-[var(--text-muted)] bg-[var(--bg-surface)]",children:f.jsx(cj,{size:18})})]})]})]}),f.jsx("div",{className:"pt-4",children:f.jsx("button",{onClick:p,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic tracking-widest rounded-[2rem] active:scale-[0.95] transition-all",children:"Apply Changes"})})]})})},Vy=({active:a,onClick:n,label:i,icon:s,desc:o})=>f.jsxs("button",{onClick:n,className:"p-5 rounded-[2rem] border transition-all text-left",style:{backgroundColor:a?"rgba(var(--brand-rgb, 255,127,80), 0.1)":"var(--bg-surface)",borderColor:a?"var(--brand-primary)":"var(--border-color)",color:a?"var(--brand-primary)":"var(--text-muted)"},children:[f.jsx("div",{className:"mb-3",children:s}),f.jsx("p",{className:"text-xs font-black uppercase italic tracking-widest leading-none mb-1",children:i}),f.jsx("p",{className:"text-[8px] font-bold uppercase opacity-50",children:o})]}),fk=({search:a})=>{const n=an(),[i,s]=R.useState([]),[o,c]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const S=await nn.getActiveMuscles();s(S.sort((j,O)=>j.name.localeCompare(O.name)))}catch(S){console.error("Failed to load muscles:",S)}finally{c(!1)}})()},[]);const p=a.toLowerCase().trim(),g=b=>i.filter(S=>S.parent===b),v=i.filter(b=>{if(b.parent)return!1;const S=b.name.toLowerCase().includes(p),O=g(b.id).some(A=>A.name.toLowerCase().includes(p));return S||O});return o?null:f.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[f.jsxs("div",{className:"space-y-6",children:[v.map(b=>{const S=g(b.id).filter(j=>p===""||j.name.toLowerCase().includes(p)||b.name.toLowerCase().includes(p));return f.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[f.jsxs("button",{onClick:()=>n(`/library/muscles/${b.id}`),className:"w-full flex items-center justify-between p-5 bg-[var(--bg-surface)] border border-slate-800 rounded-[1.5rem] group active:scale-[0.98] transition-all",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black italic border transition-all ${b.name.toLowerCase().includes(p)&&p!==""?"bg-[var(--brand-primary)] border-[var(--brand-primary)] text-black":"bg-[var(--bg-main)] border-slate-800 text-[var(--brand-primary)]"}`,children:b.name.charAt(0)}),f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-sm font-black uppercase italic text-[var(--text-main)] group-hover:text-[var(--brand-primary)] transition-colors leading-none",children:b.name}),f.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mt-1",children:"Primary Group"})]})]}),f.jsx(is,{size:16,className:"text-slate-600 group-hover:text-[var(--brand-primary)] transition-colors"})]}),S.length>0&&f.jsx("div",{className:"ml-6 space-y-2 border-l-2 border-slate-800 pl-4",children:S.map(j=>f.jsxs("button",{onClick:()=>n(`/library/muscles/${j.id}`),className:"w-full flex items-center justify-between p-3.5 bg-[var(--bg-surface)] bg-opacity-40 border border-slate-800 rounded-xl group active:scale-[0.98] transition-all",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(L2,{size:14,className:j.name.toLowerCase().includes(p)&&p!==""?"text-[var(--brand-primary)]":"text-slate-600"}),f.jsx("p",{className:`text-[12px] font-bold uppercase italic transition-colors ${j.name.toLowerCase().includes(p)&&p!==""?"text-[var(--text-main)]":"text-slate-500"}`,children:j.name})]}),f.jsx(is,{size:12,className:"text-slate-600 group-hover:text-[var(--brand-primary)]"})]},j.id))})]},b.id)}),v.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center py-24 opacity-20",children:[f.jsx(ls,{size:48,strokeWidth:1,className:"mb-4"}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"No Muscles Found"})]})]}),f.jsx("div",{className:"flex-1"})]})},hk=({search:a})=>{const n=an(),[i,s]=R.useState([]),[o,c]=R.useState(!0);R.useEffect(()=>{nn.getExercisesWithMeta().then(v=>{s(v),c(!1)})},[]);const p=a.toLowerCase().trim(),g=i.filter(v=>{const b=v.name.toLowerCase().includes(p),S=v.all_muscles?.some(O=>O.name.toLowerCase().includes(p)||O.parent_name?.toLowerCase().includes(p)),j=v.equipment_name?.toLowerCase().includes(p);return b||S||j});return o?null:f.jsxs("div",{className:"flex-1 flex flex-col gap-3",children:[f.jsxs("div",{className:"space-y-3",children:[g.map(v=>f.jsxs("button",{onClick:()=>n(`/library/exercises/${v.id}`),className:"w-full flex items-center justify-between p-4 bg-[var(--bg-surface)] border border-slate-800 rounded-[2rem] active:scale-[0.98] transition-all group animate-in fade-in",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--bg-main)] border border-slate-800 flex items-center justify-center text-[var(--brand-primary)] group-hover:bg-[var(--brand-primary)] group-hover:text-black transition-all flex-shrink-0",children:f.jsx(Go,{size:20})}),f.jsxs("div",{className:"text-left flex-1",children:[f.jsx("p",{className:"text-[13px] font-black uppercase italic text-[var(--text-main)] tracking-tight leading-tight mb-2",children:v.name}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[f.jsx("span",{className:"text-[7px] font-black uppercase px-2 py-1 bg-[var(--bg-main)] border border-slate-800 text-slate-500 rounded-md",children:v.equipment_name}),v.all_muscles?.map((b,S)=>f.jsx("div",{className:`flex items-center gap-1 px-2 py-1 rounded-md border ${b.role==="primary"?"border-orange-500/20 bg-orange-500/5 text-orange-500":b.role==="secondary"?"border-blue-500/20 bg-blue-500/5 text-blue-500":"border-emerald-500/20 bg-emerald-500/5 text-emerald-500"}`,children:f.jsx("span",{className:"text-[7px] font-black uppercase italic",children:b.name})},S))]})]})]}),f.jsx(is,{size:16,className:"text-slate-600 opacity-30 ml-2"})]},v.id)),g.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-20",children:[f.jsx(Go,{size:48,strokeWidth:1,className:"mb-4"}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"No Results"})]})]}),f.jsx("div",{className:"flex-1"})]})},mk=({search:a})=>{const n=an(),{user_id:i}=Cn(),{isOngoing:s,resumeSession:o}=Hh(),[c,p]=R.useState([]);R.useEffect(()=>{i&&as.getRoutinesWithMeta().then(p)},[i]);const g=async b=>{if(!i)return;if(s){o();return}const S=b.exercises||[];if(S.length===0){console.warn("This routine has no exercises to start.");return}const j=S.map((O,A)=>({exercise_id:O.exercise_id,reps:O.target_reps||10,weight:0,set_number:1,exercise_order:O.exercise_order??A}));try{await Tt.startNewWorkout(i,b.id,j),o()}catch(O){console.error("Failed to start workout:",O)}},v=c.filter(b=>b.name.toLowerCase().includes(a.toLowerCase()));return f.jsx("div",{className:"flex-1 flex flex-col gap-4",children:v.map(b=>f.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.2rem] p-6 space-y-5 shadow-xl",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>n(`/library/routines/${b.id}`),children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-black flex items-center justify-center text-[var(--brand-primary)]",children:f.jsx(qh,{size:22})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-[13px] font-black uppercase italic text-white leading-none",children:b.name}),f.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-1.5",children:[b.exercise_count," Exercises"]})]})]}),f.jsx(is,{size:18,className:"opacity-20"})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:b.muscles.map(S=>f.jsx("span",{className:"px-2.5 py-1 bg-black border border-slate-800 rounded-lg text-[7px] font-black uppercase text-slate-500",children:S},S))}),f.jsxs("button",{onClick:()=>g(b),className:`w-full py-4 rounded-[1.4rem] flex items-center justify-center gap-2 transition-all font-black uppercase italic text-[11px] tracking-widest active:scale-95 ${s?"bg-slate-800 text-slate-500 cursor-not-allowed opacity-80":"bg-[var(--brand-primary)] text-black"}`,children:[f.jsx(Dc,{size:14,fill:"currentColor"}),s?"Ongoing session...":"Start Routine"]})]},b.id))})};let Yy="muscles";const pk=()=>{const a=an(),[n,i]=R.useState(Yy),[s,o]=R.useState(""),c=g=>{Yy=g,i(g),o("")},p=[{id:"muscles",label:"Muscles",icon:f.jsx(ls,{size:14})},{id:"exercises",label:"Exercises",icon:f.jsx(Go,{size:14})},{id:"routines",label:"Routines",icon:f.jsx(qh,{size:14})}];return f.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-main)] min-h-screen pt-[env(safe-area-inset-top)]",children:[f.jsx("div",{className:"sticky top-0 z-30 bg-[var(--bg-main)] px-4 pt-6 pb-2",children:f.jsx("div",{className:"flex bg-[var(--bg-surface)] p-1.5 rounded-[1.8rem] border border-slate-800",children:p.map(g=>f.jsxs("button",{onClick:()=>c(g.id),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-[1.4rem] transition-all duration-300 ${n===g.id?"bg-[var(--brand-primary)] text-black shadow-lg":"text-[var(--text-muted)] active:scale-95"}`,children:[g.icon,f.jsx("span",{className:"text-[11px] font-black uppercase italic tracking-tighter",children:g.label})]},g.id))})}),f.jsxs("div",{className:"px-4 flex-1 flex flex-col pb-32",children:[f.jsxs("div",{className:"flex items-center gap-3 mt-4 mb-6",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]",children:f.jsx(jl,{size:18})}),f.jsx("input",{type:"text",placeholder:`Search ${n}...`,value:s,onChange:g=>o(g.target.value),className:"w-full bg-[var(--bg-surface)] border border-slate-800 rounded-2xl py-4 pl-12 pr-4 text-sm font-bold text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)] transition-all"})]}),f.jsx("button",{onClick:()=>a(`/library/${n}/add`),className:"h-[58px] w-[58px] bg-[var(--brand-primary)] text-black rounded-2xl flex items-center justify-center active:scale-90 transition-all shadow-lg shadow-[var(--brand-primary)]/20 flex-shrink-0",children:f.jsx(yi,{size:24,strokeWidth:3})})]}),f.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-bottom-2 duration-500",children:[n==="muscles"&&f.jsx(fk,{search:s}),n==="exercises"&&f.jsx(hk,{search:s}),n==="routines"&&f.jsx(mk,{search:s}),f.jsx("div",{className:"flex-1"})]})]})]})},gk=()=>{const a=an(),[n,i]=R.useState([]),[s,o]=R.useState({name:"",parent_id:""}),[c,p]=R.useState(!1);R.useEffect(()=>{nn.getActiveMuscles().then(i)},[]);const g=async()=>{if(!(!s.name||c)){p(!0);try{await nn.addMuscle(s.name,s.parent_id),a(-1)}catch{alert("Error: Muscle name must be unique.")}finally{p(!1)}}};return f.jsx(ta,{title:"New Muscle",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2rem] space-y-6",children:[f.jsx("input",{autoFocus:!0,type:"text",value:s.name,onChange:v=>o({...s,name:v.target.value}),placeholder:"e.g. Upper Chest",className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xl font-black italic text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)]"}),f.jsxs("div",{className:"relative",children:[f.jsxs("label",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)] mb-3",children:[f.jsx(Gv,{size:12,className:"text-[var(--brand-primary)]"}),"Parent Group"]}),f.jsxs("select",{value:s.parent_id,onChange:v=>o({...s,parent_id:v.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xs font-bold uppercase text-[var(--text-main)] outline-none appearance-none",children:[f.jsx("option",{value:"",children:"No Parent (Primary)"}),n.map(v=>f.jsx("option",{value:v.id,children:v.name},v.id))]}),f.jsx(Sl,{size:16,className:"absolute right-4 bottom-4 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("button",{onClick:g,disabled:c,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic tracking-widest rounded-2xl flex items-center justify-center gap-2 active:scale-95 transition-all disabled:opacity-50",children:[f.jsx(yi,{size:22,strokeWidth:3}),c?"Adding...":"Add to Library"]})]})})},yk=({isOpen:a,onConfirm:n,onCancel:i})=>a?f.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[f.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:i}),f.jsxs("div",{className:"relative w-full max-w-sm bg-[var(--bg-surface)] border border-[var(--border-color)] rounded-[2.5rem] p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[f.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500 mb-6",children:f.jsx(Lh,{size:28})}),f.jsx("h3",{className:"text-xl font-black uppercase italic text-[var(--text-main)] mb-2 tracking-tight",children:"Archive Muscle?"}),f.jsx("p",{className:"text-sm font-bold text-[var(--text-muted)] leading-relaxed mb-8",children:"This muscle will be hidden from the library but preserved in your history."}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsx("button",{onClick:n,className:"w-full py-4 bg-red-500 text-white rounded-2xl font-black uppercase italic tracking-widest active:scale-95 shadow-lg shadow-red-500/20",children:"Archive"}),f.jsx("button",{onClick:i,className:"w-full py-4 bg-transparent text-[var(--text-muted)] font-black uppercase italic text-[10px]",children:"Cancel"})]})]})]}):null,vk=()=>{const{id:a}=Oh(),n=an(),[i,s]=R.useState(!0),[o,c]=R.useState(!1),[p,g]=R.useState([]),[v,b]=R.useState({name:"",parent_id:""});R.useEffect(()=>{(async()=>{if(!a)return;const[A,B]=await Promise.all([nn.getMuscleById(a),nn.getActiveMuscles()]);A&&b({name:A.name,parent_id:A.parent||""}),g(B.filter(F=>F.id!==a)),s(!1)})()},[a]);const S=async()=>{try{await nn.updateMuscle(a,v.name,v.parent_id),n(-1)}catch{alert("Update failed.")}},j=async()=>{try{await nn.archiveMuscle(a),n(-1)}catch{alert("Archive failed.")}};return i?null:f.jsxs(ta,{title:"Muscle Settings",children:[f.jsxs("div",{className:"flex flex-col gap-6 pb-20",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-8 shadow-sm",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)] mb-3 block",children:[f.jsx(ls,{size:12,className:"inline mr-1"})," Display Name"]}),f.jsx("input",{type:"text",value:v.name,onChange:O=>b({...v,name:O.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xl font-black italic text-[var(--text-main)] outline-none focus:border-[var(--brand-primary)]"})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("label",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)] mb-3 block",children:[f.jsx(Gv,{size:12,className:"inline mr-1"})," Parent Group"]}),f.jsxs("select",{value:v.parent_id,onChange:O=>b({...v,parent_id:O.target.value}),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-xl py-4 px-4 text-xs font-black uppercase italic text-[var(--text-main)] outline-none appearance-none",children:[f.jsx("option",{value:"",children:"No Parent (Primary)"}),p.map(O=>f.jsx("option",{value:O.id,children:O.name},O.id))]}),f.jsx(Sl,{size:16,className:"absolute right-4 bottom-4 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:S,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic rounded-2xl flex items-center justify-center gap-2 active:scale-95 shadow-xl shadow-[var(--brand-primary)]/10",children:[f.jsx(Bh,{size:20})," Save Changes"]}),f.jsxs("button",{onClick:()=>c(!0),className:"w-full py-5 bg-red-500/10 text-red-500 font-black uppercase italic rounded-2xl flex items-center justify-center gap-2 border border-red-500/20 active:scale-95",children:[f.jsx(Qo,{size:20})," Archive Muscle"]})]})]}),f.jsx(yk,{isOpen:o,onConfirm:j,onCancel:()=>c(!1)})]})},bk=()=>{const a=an(),{user_id:n}=Cn(),[i,s]=R.useState({muscles:[],equipment:[]}),[o,c]=R.useState(""),[p,g]=R.useState(""),[v,b]=R.useState(!1),[S,j]=R.useState(""),[O,A]=R.useState([]),[B,F]=R.useState({reps:!0,weight:!0,bodyweight:!1,distance:!1,duration:!1});R.useEffect(()=>{(async()=>{const[V,me]=await Promise.all([nn.getActiveMuscles(),nn.getAllEquipment()]);s({muscles:V,equipment:me})})()},[]);const G=(I,V)=>{A(me=>{const Ae=me.find(ce=>ce.id===I.id);return Ae&&Ae.role===V?me.filter(ce=>ce.id!==I.id):Ae?me.map(ce=>ce.id===I.id?{...ce,role:V}:ce):[...me,{id:I.id,name:I.name,role:V}]}),c("")},ie=async()=>{if(!(!p||!n))try{const I={name:p,...B,is_public:v,added_by:n};await nn.addExercise(I,O,S||null),a(-1)}catch{alert("Error saving exercise.")}};return f.jsx(ta,{title:"New Exercise",children:f.jsxs("div",{className:"flex flex-col gap-6 pb-24",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-6 shadow-sm",children:[f.jsx("input",{autoFocus:!0,type:"text",value:p,onChange:I=>g(I.target.value),placeholder:"EXERCISE NAME",className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter placeholder:opacity-10"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>b(!1),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${v?"text-[var(--text-muted)] border-[var(--border-color)]":"bg-[var(--text-main)] text-[var(--bg-main)]"}`,children:[f.jsx(Kc,{size:12})," Private"]}),f.jsxs("button",{onClick:()=>b(!0),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${v?"bg-[var(--brand-primary)] text-[var(--bg-main)] shadow-lg":"text-[var(--text-muted)] border-[var(--border-color)]"}`,children:[f.jsx(Hc,{size:12})," Public"]})]})]}),f.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{id:"reps",icon:f.jsx(Fv,{size:16})},{id:"weight",icon:f.jsx($h,{size:16})},{id:"bodyweight",icon:f.jsx(kl,{size:16})},{id:"distance",icon:f.jsx(Xv,{size:16})},{id:"duration",icon:f.jsx(Ic,{size:16})}].map(I=>f.jsxs("button",{onClick:()=>F({...B,[I.id]:!B[I.id]}),className:`flex flex-col items-center justify-center py-5 rounded-[1.4rem] border-2 transition-all gap-2 ${B[I.id]?"border-[var(--brand-primary)] bg-[var(--brand-primary)]/5 text-[var(--brand-primary)]":"border-[var(--border-color)] bg-[var(--bg-surface)] text-[var(--text-muted)]"}`,children:[I.icon,f.jsx("span",{className:"text-[7px] font-black uppercase",children:I.id})]},I.id))}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-4",children:[f.jsxs("label",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[var(--text-muted)] flex items-center gap-2",children:[f.jsx(Kv,{size:12})," Equipment"]}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:S,onChange:I=>j(I.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4.5 px-5 text-xs font-black uppercase italic text-[var(--text-main)] outline-none appearance-none",children:[f.jsx("option",{value:"",children:" NO EQUIPMENT "}),f.jsx("option",{value:"bodyweight_id",children:"BODYWEIGHT ONLY"}),i.equipment.map(I=>f.jsx("option",{value:I.id,children:I.name},I.id))]}),f.jsx(Sl,{size:16,className:"absolute right-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-5",children:[f.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[var(--text-muted)]",children:"Muscle Targets"}),f.jsxs("div",{className:"relative",children:[f.jsx(jl,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]"}),f.jsx("input",{type:"text",value:o,onChange:I=>c(I.target.value),placeholder:"SEARCH...",className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4 pl-12 text-xs font-bold outline-none focus:border-[var(--brand-primary)]"}),o&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-[var(--border-color)] rounded-[2rem] shadow-2xl z-50 overflow-hidden max-h-72 overflow-y-auto backdrop-blur-xl",children:i.muscles.filter(I=>I.name.toLowerCase().includes(o.toLowerCase())).map(I=>f.jsxs("div",{className:"p-5 border-b border-[var(--border-color)] last:border-0 hover:bg-[var(--bg-main)] space-y-4",children:[f.jsx("span",{className:"text-[12px] font-black uppercase italic text-[var(--text-main)] block",children:I.name}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>G(I,"primary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-orange-500/10 text-orange-500 border border-orange-500/20 active:scale-90 transition-all",children:"Primary"}),f.jsx("button",{onClick:()=>G(I,"secondary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-blue-500/10 text-blue-500 border border-blue-500/20 active:scale-90 transition-all",children:"Secondary"}),f.jsx("button",{onClick:()=>G(I,"stabilizer"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 active:scale-90 transition-all",children:"Stabilizer"})]})]},I.id))})]}),f.jsx("div",{className:"space-y-2",children:O.map(I=>f.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border transition-all ${I.role==="primary"?"border-orange-500/20 bg-orange-500/[0.03]":I.role==="secondary"?"border-blue-500/20 bg-blue-500/[0.03]":"border-emerald-500/20 bg-emerald-500/[0.03]"}`,children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[11px] font-black uppercase italic text-[var(--text-main)]",children:I.name}),f.jsx("span",{className:`text-[8px] font-black uppercase tracking-[0.2em] mt-0.5 opacity-60 ${I.role==="primary"?"text-orange-500":I.role==="secondary"?"text-blue-500":"text-emerald-500"}`,children:I.role})]}),f.jsx("button",{onClick:()=>A(V=>V.filter(me=>me.id!==I.id)),className:"w-8 h-8 rounded-full bg-[var(--bg-main)] border border-[var(--border-color)] flex items-center justify-center text-[var(--text-muted)]",children:f.jsx(Ar,{size:14})})]},I.id))})]}),f.jsxs("button",{onClick:ie,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic rounded-3xl shadow-xl shadow-[var(--brand-primary)]/20 active:scale-[0.97] transition-all flex items-center justify-center gap-3 tracking-widest",children:[f.jsx(_l,{size:20,strokeWidth:4})," CONFIRM EXERCISE"]})]})})},xk=({isOpen:a,onConfirm:n,onCancel:i})=>a?f.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[f.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",onClick:i}),f.jsxs("div",{className:"relative w-full max-w-sm bg-[var(--bg-surface)] border border-[var(--border-color)] rounded-[2.5rem] p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500 mb-6 mx-auto",children:f.jsx(Lh,{size:32})}),f.jsx("h3",{className:"text-xl font-black uppercase italic text-[var(--text-main)] mb-2 tracking-tight text-center",children:"Archive Exercise?"}),f.jsx("p",{className:"text-sm font-bold text-[var(--text-muted)] leading-relaxed mb-8 text-center px-4",children:"This will hide the exercise from your library. Past workout data will be preserved."}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsx("button",{onClick:n,className:"w-full py-5 bg-red-500 text-white rounded-2xl font-black uppercase italic tracking-widest active:scale-95 shadow-lg shadow-red-500/20 transition-all",children:"Archive Now"}),f.jsx("button",{onClick:i,className:"w-full py-3 text-[var(--text-muted)] font-black uppercase italic text-[10px] tracking-widest hover:text-[var(--text-main)] transition-colors",children:"Cancel Action"})]})]})]}):null,wk=()=>{const{id:a}=Oh(),n=an(),[i,s]=R.useState(!0),[o,c]=R.useState(!1),[p,g]=R.useState({muscles:[],equipment:[]}),[v,b]=R.useState(""),[S,j]=R.useState(""),[O,A]=R.useState(!1),[B,F]=R.useState(""),[G,ie]=R.useState([]),[I,V]=R.useState({reps:!0,weight:!0,bodyweight:!1,distance:!1,duration:!1});R.useEffect(()=>{(async()=>{if(!a)return;const[Me,He,mt]=await Promise.all([nn.getExerciseDetail(a),nn.getActiveMuscles(),nn.getAllEquipment()]);Me&&(j(Me.name),A(Me.is_public),F(Me.equipmentId),ie(Me.muscles),V({reps:Me.reps,weight:Me.weight,bodyweight:Me.bodyweight,distance:Me.distance,duration:Me.duration})),g({muscles:He,equipment:mt}),s(!1)})()},[a]);const me=(ae,Me)=>{ie(He=>{const mt=He.find(gt=>gt.id===ae.id);return mt&&mt.role===Me?He.filter(gt=>gt.id!==ae.id):mt?He.map(gt=>gt.id===ae.id?{...gt,role:Me}:gt):[...He,{id:ae.id,name:ae.name,role:Me}]}),b("")},Ae=async()=>{try{const ae={name:S,...I,is_public:O,updated_at:new Date().toISOString()};await nn.updateExercise(a,ae,G,B||null),n(-1)}catch{alert("Update failed.")}},ce=async()=>{try{await nn.archiveExercise(a),n(-1)}catch{alert("Archive failed.")}};return i?null:f.jsxs(ta,{title:"Edit Exercise",children:[f.jsxs("div",{className:"flex flex-col gap-6 pb-24",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-6 shadow-sm",children:[f.jsx("input",{type:"text",value:S,onChange:ae=>j(ae.target.value),className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>A(!1),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${O?"text-[var(--text-muted)] border-[var(--border-color)]":"bg-[var(--text-main)] text-[var(--bg-main)]"}`,children:[f.jsx(Kc,{size:12})," Private"]}),f.jsxs("button",{onClick:()=>A(!0),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${O?"bg-[var(--brand-primary)] text-[var(--bg-main)] shadow-lg shadow-[var(--brand-primary)]/20":"text-[var(--text-muted)] border-[var(--border-color)]"}`,children:[f.jsx(Hc,{size:12})," Public"]})]})]}),f.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{id:"reps",icon:f.jsx(Fv,{size:16})},{id:"weight",icon:f.jsx($h,{size:16})},{id:"bodyweight",icon:f.jsx(kl,{size:16})},{id:"distance",icon:f.jsx(Xv,{size:16})},{id:"duration",icon:f.jsx(Ic,{size:16})}].map(ae=>f.jsxs("button",{onClick:()=>V({...I,[ae.id]:!I[ae.id]}),className:`flex flex-col items-center justify-center py-5 rounded-[1.4rem] border-2 transition-all gap-2 ${I[ae.id]?"border-[var(--brand-primary)] bg-[var(--brand-primary)]/5 text-[var(--brand-primary)]":"border-[var(--border-color)] bg-[var(--bg-surface)] text-[var(--text-muted)]"}`,children:[ae.icon,f.jsx("span",{className:"text-[7px] font-black uppercase",children:ae.id})]},ae.id))}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-4",children:[f.jsxs("label",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[f.jsx(Kv,{size:12})," Equipment"]}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:B,onChange:ae=>F(ae.target.value),className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4.5 px-5 text-xs font-black uppercase italic text-[var(--text-main)] outline-none appearance-none transition-all focus:border-[var(--brand-primary)]",children:[f.jsx("option",{value:"",children:" NO EQUIPMENT "}),f.jsx("option",{value:"bodyweight_id",children:"BODYWEIGHT ONLY"}),p.equipment.map(ae=>f.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),f.jsx(Sl,{size:16,className:"absolute right-5 top-1/2 -translate-y-1/2 text-[var(--text-muted)] pointer-events-none"})]})]}),f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-[var(--border-color)] p-6 rounded-[2.2rem] space-y-5",children:[f.jsxs("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-[var(--text-muted)] flex items-center gap-2",children:[f.jsx(ls,{size:12})," Target Muscles"]}),f.jsxs("div",{className:"relative",children:[f.jsx(jl,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-muted)]"}),f.jsx("input",{type:"text",value:v,onChange:ae=>b(ae.target.value),placeholder:"SEARCH...",className:"w-full bg-[var(--bg-main)] border border-[var(--border-color)] rounded-2xl py-4 pl-12 text-xs font-bold outline-none focus:border-[var(--brand-primary)] transition-all"}),v&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-[var(--border-color)] rounded-[2rem] shadow-2xl z-50 overflow-hidden max-h-72 overflow-y-auto backdrop-blur-xl",children:p.muscles.filter(ae=>ae.name.toLowerCase().includes(v.toLowerCase())).map(ae=>f.jsxs("div",{className:"p-5 border-b border-[var(--border-color)] last:border-0 hover:bg-[var(--bg-main)] space-y-4",children:[f.jsx("span",{className:"text-[12px] font-black uppercase italic text-[var(--text-main)] block tracking-tight",children:ae.name}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsx("button",{onClick:()=>me(ae,"primary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-orange-500/10 text-orange-500 border border-orange-500/20 active:scale-90 transition-all",children:"Primary"}),f.jsx("button",{onClick:()=>me(ae,"secondary"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-blue-500/10 text-blue-500 border border-blue-500/20 active:scale-90 transition-all",children:"Secondary"}),f.jsx("button",{onClick:()=>me(ae,"stabilizer"),className:"py-3 rounded-xl text-[8px] font-black uppercase bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 active:scale-90 transition-all",children:"Stabilizer"})]})]},ae.id))})]}),f.jsx("div",{className:"space-y-2",children:G.map(ae=>f.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl border transition-all ${ae.role==="primary"?"border-orange-500/20 bg-orange-500/[0.03]":ae.role==="secondary"?"border-blue-500/20 bg-blue-500/[0.03]":"border-emerald-500/20 bg-emerald-500/[0.03]"}`,children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[11px] font-black uppercase italic text-[var(--text-main)]",children:ae.name}),f.jsx("span",{className:`text-[8px] font-black uppercase tracking-[0.2em] mt-0.5 opacity-60 ${ae.role==="primary"?"text-orange-500":ae.role==="secondary"?"text-blue-500":"text-emerald-500"}`,children:ae.role})]}),f.jsx("button",{onClick:()=>ie(Me=>Me.filter(He=>He.id!==ae.id)),className:"w-8 h-8 rounded-full bg-[var(--bg-main)] border border-[var(--border-color)] flex items-center justify-center text-[var(--text-muted)] hover:text-red-500 active:scale-90 transition-all",children:f.jsx(Ar,{size:14})})]},ae.id))})]}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:Ae,className:"w-full py-5 bg-[var(--brand-primary)] text-[var(--bg-main)] font-black uppercase italic rounded-3xl shadow-lg flex items-center justify-center gap-3 tracking-widest active:scale-95 transition-all shadow-xl shadow-[var(--brand-primary)]/20",children:[f.jsx(_l,{size:20,strokeWidth:4})," UPDATE EXERCISE"]}),f.jsxs("button",{onClick:()=>c(!0),className:"w-full py-5 bg-red-500/10 text-red-500 font-black uppercase italic rounded-3xl flex items-center justify-center gap-3 tracking-widest active:scale-95 transition-all border border-red-500/20",children:[f.jsx(Qo,{size:20})," ARCHIVE"]})]})]}),f.jsx(xk,{isOpen:o,onConfirm:ce,onCancel:()=>c(!1)})]})},_k=()=>{const a=an(),{user_id:n}=Cn(),[i,s]=R.useState(""),[o,c]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState(""),[S,j]=R.useState([]),[O,A]=R.useState([]);R.useEffect(()=>{nn.getExercisesWithMeta().then(j)},[]);const B=R.useMemo(()=>{const V={};return O.forEach(me=>{me.all_muscles?.filter(Ae=>Ae.role==="primary").forEach(Ae=>{V[Ae.name]=(V[Ae.name]||0)+1})}),Object.entries(V).sort((me,Ae)=>Ae[1]-me[1]).slice(0,3)},[O]),F=V=>{A([...O,{...V,target_sets:3,target_reps:10}]),b("")},G=V=>{A(me=>me.filter((Ae,ce)=>ce!==V))},ie=(V,me,Ae)=>{A(ce=>ce.map((ae,Me)=>Me===V?{...ae,[me]:Ae}:ae))},I=async()=>{if(!(!i||!n||O.length===0))try{const V={name:i,description:o,is_public:p,user_id:n};await as.addRoutine(V,O),a(-1)}catch(V){console.error(V),alert("Error saving routine.")}};return f.jsx(ta,{title:"New Routine",children:f.jsxs("div",{className:"flex-1 flex flex-col gap-6 pb-32",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-6 rounded-[2.2rem] space-y-6",children:[f.jsx("input",{autoFocus:!0,type:"text",value:i,onChange:V=>s(V.target.value),placeholder:"ROUTINE NAME",className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter"}),f.jsx("textarea",{value:o,onChange:V=>c(V.target.value),placeholder:"DESCRIPTION (OPTIONAL)",className:"w-full bg-[var(--bg-main)] border border-slate-800 rounded-2xl p-4 text-xs font-bold text-[var(--text-main)] outline-none resize-none h-24 placeholder:text-slate-700"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Wy,{active:!p,label:"Private",icon:f.jsx(Kc,{size:12}),onClick:()=>g(!1)}),f.jsx(Wy,{active:p,label:"Public",icon:f.jsx(Hc,{size:12}),primary:!0,onClick:()=>g(!0)})]}),B.length>0&&f.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:B.map(([V])=>f.jsx("span",{className:"text-[8px] font-black uppercase px-3 py-1.5 bg-[var(--brand-primary)]/10 text-[var(--brand-primary)] rounded-full border border-[var(--brand-primary)]/20",children:V},V))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(jl,{size:16,className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500"}),f.jsx("input",{type:"text",value:v,onChange:V=>b(V.target.value),placeholder:"ADD EXERCISE...",className:"w-full bg-[var(--bg-surface)] border border-slate-800 rounded-2xl py-5 pl-14 pr-6 text-xs font-black uppercase italic outline-none focus:border-[var(--brand-primary)]"}),v&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-slate-800 rounded-[2rem] shadow-2xl z-50 max-h-64 overflow-y-auto",children:S.filter(V=>V.name.toLowerCase().includes(v.toLowerCase())).map(V=>f.jsx("button",{onClick:()=>F(V),className:"w-full p-5 text-left border-b border-slate-800 last:border-0 hover:bg-slate-900 font-black uppercase italic text-xs text-[var(--text-main)]",children:V.name},V.id))})]}),f.jsx("div",{className:"space-y-3",children:O.map((V,me)=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 rounded-[1.8rem] p-5 flex flex-col gap-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Qv,{size:16,className:"text-slate-700"}),f.jsx("span",{className:"text-xs font-black uppercase italic text-[var(--text-main)]",children:V.name})]}),f.jsx("button",{onClick:()=>G(me),className:"w-8 h-8 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center text-slate-500 hover:text-red-500 transition-all",children:f.jsx(Ar,{size:14,strokeWidth:3})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Qy,{label:"Sets",value:V.target_sets,onDec:()=>ie(me,"target_sets",Math.max(1,V.target_sets-1)),onInc:()=>ie(me,"target_sets",V.target_sets+1)}),f.jsx(Qy,{label:"Reps",value:V.target_reps,onDec:()=>ie(me,"target_reps",Math.max(1,V.target_reps-1)),onInc:()=>ie(me,"target_reps",V.target_reps+1)})]})]},`${V.id}-${me}`))}),f.jsxs("button",{onClick:I,className:"w-full py-5 bg-[var(--brand-primary)] text-black font-black uppercase italic rounded-3xl shadow-xl shadow-[var(--brand-primary)]/20 active:scale-[0.97] transition-all flex items-center justify-center gap-3 tracking-widest mt-4",children:[f.jsx(_l,{size:20,strokeWidth:4})," CREATE TEMPLATE"]}),f.jsx("div",{className:"flex-1"})]})})},Wy=({active:a,label:n,icon:i,onClick:s,primary:o})=>f.jsxs("button",{onClick:s,className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${a?o?"bg-[var(--brand-primary)] text-black border-[var(--brand-primary)]":"bg-white text-black border-white":"border-slate-800 text-slate-500"}`,children:[i," ",n]}),Qy=({label:a,value:n,onDec:i,onInc:s})=>f.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-3 flex items-center justify-between",children:[f.jsx("span",{className:"text-[8px] font-black uppercase text-slate-500",children:a}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:i,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(Ar,{size:10})}),f.jsx("span",{className:"text-xs font-black text-[var(--text-main)]",children:n}),f.jsx("button",{onClick:s,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(yi,{size:10})})]})]}),Sk=()=>{const{id:a}=Oh(),n=an(),[i,s]=R.useState(!0),[o,c]=R.useState(!1),[p,g]=R.useState(""),[v,b]=R.useState(""),[S,j]=R.useState(!1),[O,A]=R.useState(""),[B,F]=R.useState([]),[G,ie]=R.useState([]);R.useEffect(()=>{(async()=>{if(!a)return;const[ae,Me]=await Promise.all([as.getRoutineDetail(a),nn.getExercisesWithMeta()]);ae&&(g(ae.name),b(ae.description||""),j(ae.is_public),ie(ae.exercises)),F(Me),s(!1)})()},[a]);const I=R.useMemo(()=>{const ce={};return G.forEach(ae=>{B.find(He=>He.id===(ae.exercise_id||ae.id))?.all_muscles?.filter(He=>He.role==="primary").forEach(He=>{ce[He.name]=(ce[He.name]||0)+1})}),Object.entries(ce).sort((ae,Me)=>Me[1]-ae[1]).slice(0,3)},[G,B]),V=ce=>{ie([...G,{...ce,exercise_id:ce.id,target_sets:3,target_reps:10}]),A("")},me=(ce,ae,Me)=>{ie(He=>He.map((mt,gt)=>gt===ce?{...mt,[ae]:Me}:mt))},Ae=async()=>{try{await as.updateRoutine(a,{name:p,description:v,is_public:S,updated_at:new Date().toISOString()},G.map(ce=>({exercise_id:ce.exercise_id||ce.id,target_sets:ce.target_sets,target_reps:ce.target_reps}))),n(-1)}catch{alert("Update failed.")}};return i?null:f.jsxs(ta,{title:"Edit Routine",children:[f.jsxs("div",{className:"flex-1 flex flex-col gap-6 pb-32",children:[f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 p-6 rounded-[2.2rem] space-y-6",children:[f.jsx("input",{type:"text",value:p,onChange:ce=>g(ce.target.value),className:"w-full bg-transparent text-2xl font-black italic text-[var(--text-main)] outline-none uppercase tracking-tighter"}),f.jsx("textarea",{value:v,onChange:ce=>b(ce.target.value),placeholder:"ROUTINE DESCRIPTION",className:"w-full bg-[var(--bg-main)] border border-slate-800 rounded-2xl p-4 text-xs font-bold text-[var(--text-main)] outline-none resize-none h-24 placeholder:text-slate-700"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>j(!1),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${S?"border-slate-800 text-slate-500":"bg-white text-black border-white"}`,children:[f.jsx(Kc,{size:12})," Private"]}),f.jsxs("button",{onClick:()=>j(!0),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 ${S?"bg-[var(--brand-primary)] text-black border-[var(--brand-primary)] shadow-lg shadow-[var(--brand-primary)]/20":"border-slate-800 text-slate-500"}`,children:[f.jsx(Hc,{size:12})," Public"]})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(([ce])=>f.jsx("span",{className:"text-[8px] font-black uppercase px-3 py-1.5 bg-[var(--brand-primary)]/10 text-[var(--brand-primary)] rounded-full border border-[var(--brand-primary)]/20",children:ce},ce))})]}),f.jsxs("div",{className:"relative",children:[f.jsx(jl,{size:16,className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-500"}),f.jsx("input",{type:"text",value:O,onChange:ce=>A(ce.target.value),placeholder:"ADD TO ROUTINE...",className:"w-full bg-[var(--bg-surface)] border border-slate-800 rounded-2xl py-5 pl-14 text-xs font-black uppercase italic outline-none focus:border-[var(--brand-primary)]"}),O&&f.jsx("div",{className:"absolute top-[110%] left-0 w-full bg-[var(--bg-surface)] border-2 border-slate-800 rounded-[2rem] shadow-2xl z-50 max-h-64 overflow-y-auto",children:B.filter(ce=>ce.name.toLowerCase().includes(O.toLowerCase())).map(ce=>f.jsx("button",{onClick:()=>V(ce),className:"w-full p-5 text-left border-b border-slate-800 last:border-0 hover:bg-slate-900 font-black uppercase italic text-xs text-[var(--text-main)]",children:ce.name},ce.id))})]}),f.jsx("div",{className:"space-y-3",children:G.map((ce,ae)=>f.jsxs("div",{className:"bg-[var(--bg-surface)] border border-slate-800 rounded-[1.8rem] p-5 flex flex-col gap-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Qv,{size:16,className:"text-slate-700"}),f.jsx("span",{className:"text-xs font-black uppercase italic text-[var(--text-main)]",children:ce.name||B.find(Me=>Me.id===ce.exercise_id)?.name})]}),f.jsx("button",{onClick:()=>ie(Me=>Me.filter((He,mt)=>mt!==ae)),className:"w-8 h-8 rounded-full bg-slate-900 border border-slate-800 flex items-center justify-center text-slate-500 hover:text-red-500",children:f.jsx(Ar,{size:14,strokeWidth:3})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Xy,{label:"Sets",value:ce.target_sets,onDec:()=>me(ae,"target_sets",Math.max(1,ce.target_sets-1)),onInc:()=>me(ae,"target_sets",ce.target_sets+1)}),f.jsx(Xy,{label:"Reps",value:ce.target_reps,onDec:()=>me(ae,"target_reps",Math.max(1,ce.target_reps-1)),onInc:()=>me(ae,"target_reps",ce.target_reps+1)})]})]},`${ce.exercise_id||ce.id}-${ae}`))}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsxs("button",{onClick:Ae,className:"w-full py-5 bg-[var(--brand-primary)] text-black font-black uppercase italic rounded-3xl shadow-xl shadow-[var(--brand-primary)]/20 active:scale-[0.97] transition-all flex items-center justify-center gap-3 tracking-widest",children:[f.jsx(_l,{size:20,strokeWidth:4})," UPDATE TEMPLATE"]}),f.jsxs("button",{onClick:()=>c(!0),className:"w-full py-5 bg-red-500/10 text-red-500 font-black uppercase italic rounded-3xl flex items-center justify-center gap-3 border border-red-500/20 active:scale-95",children:[f.jsx(Qo,{size:20})," ARCHIVE ROUTINE"]})]}),f.jsx("div",{className:"flex-1"})]}),f.jsx(jk,{isOpen:o,onConfirm:()=>as.archiveRoutine(a).then(()=>n(-1)),onCancel:()=>c(!1)})]})},Xy=({label:a,value:n,onDec:i,onInc:s})=>f.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-3 flex items-center justify-between",children:[f.jsx("span",{className:"text-[8px] font-black uppercase text-slate-500",children:a}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:i,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(Ar,{size:10})}),f.jsx("span",{className:"text-xs font-black text-[var(--text-main)]",children:n}),f.jsx("button",{onClick:s,className:"w-6 h-6 bg-[var(--bg-surface)] rounded-md flex items-center justify-center border border-slate-800 text-[var(--text-main)]",children:f.jsx(yi,{size:10})})]})]}),jk=({isOpen:a,onConfirm:n,onCancel:i})=>a?f.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[f.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:i}),f.jsxs("div",{className:"relative w-full max-w-sm bg-[var(--bg-surface)] border border-slate-800 rounded-[2.5rem] p-8 text-center animate-in zoom-in",children:[f.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500 mb-6 mx-auto",children:f.jsx(Lh,{size:32})}),f.jsx("h3",{className:"text-xl font-black uppercase italic text-[var(--text-main)] mb-2",children:"Archive Routine?"}),f.jsx("p",{className:"text-xs font-bold text-slate-500 leading-relaxed mb-8",children:"This will hide the template from your library."}),f.jsxs("div",{className:"flex flex-col gap-3",children:[f.jsx("button",{onClick:n,className:"w-full py-5 bg-red-500 text-white rounded-2xl font-black uppercase italic tracking-widest active:scale-95 shadow-lg shadow-red-500/20",children:"Archive Now"}),f.jsx("button",{onClick:i,className:"w-full py-3 text-slate-500 font-black uppercase italic text-[10px]",children:"Cancel"})]})]})]}):null;var Kh={};(function a(n,i,s,o){var c=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),p=typeof Path2D=="function"&&typeof DOMMatrix=="function",g=(function(){if(!n.OffscreenCanvas)return!1;try{var K=new OffscreenCanvas(1,1),k=K.getContext("2d");k.fillRect(0,0,1,1);var W=K.transferToImageBitmap();k.createPattern(W,"no-repeat")}catch{return!1}return!0})();function v(){}function b(K){var k=i.exports.Promise,W=k!==void 0?k:n.Promise;return typeof W=="function"?new W(K):(K(v,v),null)}var S=(function(K,k){return{transform:function(W){if(K)return W;if(k.has(W))return k.get(W);var ue=new OffscreenCanvas(W.width,W.height),pe=ue.getContext("2d");return pe.drawImage(W,0,0),k.set(W,ue),ue},clear:function(){k.clear()}}})(g,new Map),j=(function(){var K=Math.floor(16.666666666666668),k,W,ue={},pe=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(k=function(we){var ke=Math.random();return ue[ke]=requestAnimationFrame(function xe(qe){pe===qe||pe+K-1<qe?(pe=qe,delete ue[ke],we()):ue[ke]=requestAnimationFrame(xe)}),ke},W=function(we){ue[we]&&cancelAnimationFrame(ue[we])}):(k=function(we){return setTimeout(we,K)},W=function(we){return clearTimeout(we)}),{frame:k,cancel:W}})(),O=(function(){var K,k,W={};function ue(pe){function we(ke,xe){pe.postMessage({options:ke||{},callback:xe})}pe.init=function(xe){var qe=xe.transferControlToOffscreen();pe.postMessage({canvas:qe},[qe])},pe.fire=function(xe,qe,Ge){if(k)return we(xe,null),k;var je=Math.random().toString(36).slice(2);return k=b(function(ut){function Pe(Ot){Ot.data.callback===je&&(delete W[je],pe.removeEventListener("message",Pe),k=null,S.clear(),Ge(),ut())}pe.addEventListener("message",Pe),we(xe,je),W[je]=Pe.bind(null,{data:{callback:je}})}),k},pe.reset=function(){pe.postMessage({reset:!0});for(var xe in W)W[xe](),delete W[xe]}}return function(){if(K)return K;if(!s&&c){var pe=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{K=new Worker(URL.createObjectURL(new Blob([pe])))}catch(we){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",we),null}ue(K)}return K}})(),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function B(K,k){return k?k(K):K}function F(K){return K!=null}function G(K,k,W){return B(K&&F(K[k])?K[k]:A[k],W)}function ie(K){return K<0?0:Math.floor(K)}function I(K,k){return Math.floor(Math.random()*(k-K))+K}function V(K){return parseInt(K,16)}function me(K){return K.map(Ae)}function Ae(K){var k=String(K).replace(/[^0-9a-f]/gi,"");return k.length<6&&(k=k[0]+k[0]+k[1]+k[1]+k[2]+k[2]),{r:V(k.substring(0,2)),g:V(k.substring(2,4)),b:V(k.substring(4,6))}}function ce(K){var k=G(K,"origin",Object);return k.x=G(k,"x",Number),k.y=G(k,"y",Number),k}function ae(K){K.width=document.documentElement.clientWidth,K.height=document.documentElement.clientHeight}function Me(K){var k=K.getBoundingClientRect();K.width=k.width,K.height=k.height}function He(K){var k=document.createElement("canvas");return k.style.position="fixed",k.style.top="0px",k.style.left="0px",k.style.pointerEvents="none",k.style.zIndex=K,k}function mt(K,k,W,ue,pe,we,ke,xe,qe){K.save(),K.translate(k,W),K.rotate(we),K.scale(ue,pe),K.arc(0,0,1,ke,xe,qe),K.restore()}function gt(K){var k=K.angle*(Math.PI/180),W=K.spread*(Math.PI/180);return{x:K.x,y:K.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:K.startVelocity*.5+Math.random()*K.startVelocity,angle2D:-k+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:K.color,shape:K.shape,tick:0,totalTicks:K.ticks,decay:K.decay,drift:K.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:K.gravity*3,ovalScalar:.6,scalar:K.scalar,flat:K.flat}}function xt(K,k){k.x+=Math.cos(k.angle2D)*k.velocity+k.drift,k.y+=Math.sin(k.angle2D)*k.velocity+k.gravity,k.velocity*=k.decay,k.flat?(k.wobble=0,k.wobbleX=k.x+10*k.scalar,k.wobbleY=k.y+10*k.scalar,k.tiltSin=0,k.tiltCos=0,k.random=1):(k.wobble+=k.wobbleSpeed,k.wobbleX=k.x+10*k.scalar*Math.cos(k.wobble),k.wobbleY=k.y+10*k.scalar*Math.sin(k.wobble),k.tiltAngle+=.1,k.tiltSin=Math.sin(k.tiltAngle),k.tiltCos=Math.cos(k.tiltAngle),k.random=Math.random()+2);var W=k.tick++/k.totalTicks,ue=k.x+k.random*k.tiltCos,pe=k.y+k.random*k.tiltSin,we=k.wobbleX+k.random*k.tiltCos,ke=k.wobbleY+k.random*k.tiltSin;if(K.fillStyle="rgba("+k.color.r+", "+k.color.g+", "+k.color.b+", "+(1-W)+")",K.beginPath(),p&&k.shape.type==="path"&&typeof k.shape.path=="string"&&Array.isArray(k.shape.matrix))K.fill(de(k.shape.path,k.shape.matrix,k.x,k.y,Math.abs(we-ue)*.1,Math.abs(ke-pe)*.1,Math.PI/10*k.wobble));else if(k.shape.type==="bitmap"){var xe=Math.PI/10*k.wobble,qe=Math.abs(we-ue)*.1,Ge=Math.abs(ke-pe)*.1,je=k.shape.bitmap.width*k.scalar,ut=k.shape.bitmap.height*k.scalar,Pe=new DOMMatrix([Math.cos(xe)*qe,Math.sin(xe)*qe,-Math.sin(xe)*Ge,Math.cos(xe)*Ge,k.x,k.y]);Pe.multiplySelf(new DOMMatrix(k.shape.matrix));var Ot=K.createPattern(S.transform(k.shape.bitmap),"no-repeat");Ot.setTransform(Pe),K.globalAlpha=1-W,K.fillStyle=Ot,K.fillRect(k.x-je/2,k.y-ut/2,je,ut),K.globalAlpha=1}else if(k.shape==="circle")K.ellipse?K.ellipse(k.x,k.y,Math.abs(we-ue)*k.ovalScalar,Math.abs(ke-pe)*k.ovalScalar,Math.PI/10*k.wobble,0,2*Math.PI):mt(K,k.x,k.y,Math.abs(we-ue)*k.ovalScalar,Math.abs(ke-pe)*k.ovalScalar,Math.PI/10*k.wobble,0,2*Math.PI);else if(k.shape==="star")for(var Fe=Math.PI/2*3,At=4*k.scalar,mn=8*k.scalar,Rn=k.x,Un=k.y,Kn=5,un=Math.PI/Kn;Kn--;)Rn=k.x+Math.cos(Fe)*mn,Un=k.y+Math.sin(Fe)*mn,K.lineTo(Rn,Un),Fe+=un,Rn=k.x+Math.cos(Fe)*At,Un=k.y+Math.sin(Fe)*At,K.lineTo(Rn,Un),Fe+=un;else K.moveTo(Math.floor(k.x),Math.floor(k.y)),K.lineTo(Math.floor(k.wobbleX),Math.floor(pe)),K.lineTo(Math.floor(we),Math.floor(ke)),K.lineTo(Math.floor(ue),Math.floor(k.wobbleY));return K.closePath(),K.fill(),k.tick<k.totalTicks}function Qt(K,k,W,ue,pe){var we=k.slice(),ke=K.getContext("2d"),xe,qe,Ge=b(function(je){function ut(){xe=qe=null,ke.clearRect(0,0,ue.width,ue.height),S.clear(),pe(),je()}function Pe(){s&&!(ue.width===o.width&&ue.height===o.height)&&(ue.width=K.width=o.width,ue.height=K.height=o.height),!ue.width&&!ue.height&&(W(K),ue.width=K.width,ue.height=K.height),ke.clearRect(0,0,ue.width,ue.height),we=we.filter(function(Ot){return xt(ke,Ot)}),we.length?xe=j.frame(Pe):ut()}xe=j.frame(Pe),qe=ut});return{addFettis:function(je){return we=we.concat(je),Ge},canvas:K,promise:Ge,reset:function(){xe&&j.cancel(xe),qe&&qe()}}}function jn(K,k){var W=!K,ue=!!G(k||{},"resize"),pe=!1,we=G(k,"disableForReducedMotion",Boolean),ke=c&&!!G(k||{},"useWorker"),xe=ke?O():null,qe=W?ae:Me,Ge=K&&xe?!!K.__confetti_initialized:!1,je=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ut;function Pe(Fe,At,mn){for(var Rn=G(Fe,"particleCount",ie),Un=G(Fe,"angle",Number),Kn=G(Fe,"spread",Number),un=G(Fe,"startVelocity",Number),kn=G(Fe,"decay",Number),os=G(Fe,"gravity",Number),Wa=G(Fe,"drift",Number),rn=G(Fe,"colors",me),Qa=G(Fe,"ticks",Number),sn=G(Fe,"shapes"),aa=G(Fe,"scalar"),Ca=!!G(Fe,"flat"),Ra=ce(Fe),Xa=Rn,Ma=[],xa=K.width*Ra.x,ra=K.height*Ra.y;Xa--;)Ma.push(gt({x:xa,y:ra,angle:Un,spread:Kn,startVelocity:un,color:rn[Xa%rn.length],shape:sn[I(0,sn.length)],ticks:Qa,decay:kn,gravity:os,drift:Wa,scalar:aa,flat:Ca}));return ut?ut.addFettis(Ma):(ut=Qt(K,Ma,qe,At,mn),ut.promise)}function Ot(Fe){var At=we||G(Fe,"disableForReducedMotion",Boolean),mn=G(Fe,"zIndex",Number);if(At&&je)return b(function(un){un()});W&&ut?K=ut.canvas:W&&!K&&(K=He(mn),document.body.appendChild(K)),ue&&!Ge&&qe(K);var Rn={width:K.width,height:K.height};xe&&!Ge&&xe.init(K),Ge=!0,xe&&(K.__confetti_initialized=!0);function Un(){if(xe){var un={getBoundingClientRect:function(){if(!W)return K.getBoundingClientRect()}};qe(un),xe.postMessage({resize:{width:un.width,height:un.height}});return}Rn.width=Rn.height=null}function Kn(){ut=null,ue&&(pe=!1,n.removeEventListener("resize",Un)),W&&K&&(document.body.contains(K)&&document.body.removeChild(K),K=null,Ge=!1)}return ue&&!pe&&(pe=!0,n.addEventListener("resize",Un,!1)),xe?xe.fire(Fe,Rn,Kn):Pe(Fe,Rn,Kn)}return Ot.reset=function(){xe&&xe.reset(),ut&&ut.reset()},Ot}var Kt;function se(){return Kt||(Kt=jn(null,{useWorker:!0,resize:!0})),Kt}function de(K,k,W,ue,pe,we,ke){var xe=new Path2D(K),qe=new Path2D;qe.addPath(xe,new DOMMatrix(k));var Ge=new Path2D;return Ge.addPath(qe,new DOMMatrix([Math.cos(ke)*pe,Math.sin(ke)*pe,-Math.sin(ke)*we,Math.cos(ke)*we,W,ue])),Ge}function Ne(K){if(!p)throw new Error("path confetti are not supported in this browser");var k,W;typeof K=="string"?k=K:(k=K.path,W=K.matrix);var ue=new Path2D(k),pe=document.createElement("canvas"),we=pe.getContext("2d");if(!W){for(var ke=1e3,xe=ke,qe=ke,Ge=0,je=0,ut,Pe,Ot=0;Ot<ke;Ot+=2)for(var Fe=0;Fe<ke;Fe+=2)we.isPointInPath(ue,Ot,Fe,"nonzero")&&(xe=Math.min(xe,Ot),qe=Math.min(qe,Fe),Ge=Math.max(Ge,Ot),je=Math.max(je,Fe));ut=Ge-xe,Pe=je-qe;var At=10,mn=Math.min(At/ut,At/Pe);W=[mn,0,0,mn,-Math.round(ut/2+xe)*mn,-Math.round(Pe/2+qe)*mn]}return{type:"path",path:k,matrix:W}}function Ke(K){var k,W=1,ue="#000000",pe='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof K=="string"?k=K:(k=K.text,W="scalar"in K?K.scalar:W,pe="fontFamily"in K?K.fontFamily:pe,ue="color"in K?K.color:ue);var we=10*W,ke=""+we+"px "+pe,xe=new OffscreenCanvas(we,we),qe=xe.getContext("2d");qe.font=ke;var Ge=qe.measureText(k),je=Math.ceil(Ge.actualBoundingBoxRight+Ge.actualBoundingBoxLeft),ut=Math.ceil(Ge.actualBoundingBoxAscent+Ge.actualBoundingBoxDescent),Pe=2,Ot=Ge.actualBoundingBoxLeft+Pe,Fe=Ge.actualBoundingBoxAscent+Pe;je+=Pe+Pe,ut+=Pe+Pe,xe=new OffscreenCanvas(je,ut),qe=xe.getContext("2d"),qe.font=ke,qe.fillStyle=ue,qe.fillText(k,Ot,Fe);var At=1/W;return{type:"bitmap",bitmap:xe.transferToImageBitmap(),matrix:[At,0,0,At,-je*At/2,-ut*At/2]}}i.exports=function(){return se().apply(this,arguments)},i.exports.reset=function(){se().reset()},i.exports.create=jn,i.exports.shapeFromPath=Ne,i.exports.shapeFromText=Ke})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Kh,!1);const Fy=Kh.exports;Kh.exports.create;const kk=({onClose:a,onAdd:n})=>{const[i,s]=R.useState(""),[o,c]=R.useState([]),p=pl(()=>ge.exercises.toArray())||[],g=pl(()=>ge.exercise_muscles.toArray())||[],v=pl(()=>ge.muscles.toArray())||[],b=R.useMemo(()=>{const j={};return p.forEach(O=>{const A=g.find(G=>G.exercise_id===O.id),F=v.find(G=>G.id===A?.muscle_id)?.parent||"Other";j[F]||(j[F]=[]),j[F].push(O)}),j},[p,g,v]),S=j=>{c(O=>O.includes(j)?O.filter(A=>A!==j):[...O,j])};return f.jsxs("div",{className:"fixed inset-0 z-[150] bg-black flex flex-col animate-in slide-in-from-bottom duration-300",children:[f.jsxs("header",{className:"p-6 flex items-center justify-between border-b border-slate-800 bg-black",children:[f.jsx("h2",{className:"text-lg font-black uppercase italic text-white",children:"Add Exercises"}),f.jsx("button",{onClick:a,className:"p-2 text-slate-500",children:f.jsx(Gc,{size:24})})]}),f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(jl,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"}),f.jsx("input",{autoFocus:!0,type:"text",value:i,onChange:j=>s(j.target.value),placeholder:"Search movements...",className:"w-full bg-slate-900 border border-slate-800 rounded-xl py-4 pl-12 text-xs font-black uppercase italic text-white outline-none"})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-40",children:Object.entries(b).map(([j,O])=>f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"h-[2px] w-4 bg-[var(--brand-primary)]"}),f.jsx("h3",{className:"text-[10px] font-black text-[var(--brand-primary)] uppercase tracking-[0.3em]",children:j})]}),f.jsx("div",{className:"space-y-2",children:O.filter(A=>A.name.toLowerCase().includes(i.toLowerCase())).map(A=>f.jsxs("button",{onClick:()=>S(A.id),className:`w-full p-4 rounded-xl border flex items-center justify-between transition-all ${o.includes(A.id)?"bg-[var(--brand-primary)] border-[var(--brand-primary)] text-black":"bg-slate-900 border-slate-800 text-slate-400"}`,children:[f.jsx("span",{className:"text-xs font-black uppercase italic",children:A.name}),o.includes(A.id)&&f.jsx("div",{className:"w-5 h-5 bg-black rounded-full flex items-center justify-center text-[var(--brand-primary)] text-[10px] font-black",children:o.indexOf(A.id)+1})]},A.id))})]},j))}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black to-transparent",children:f.jsxs("button",{onClick:()=>n(o),disabled:o.length===0,className:"w-full py-5 bg-white text-black rounded-3xl font-black uppercase italic tracking-widest shadow-2xl active:scale-95 disabled:opacity-20 transition-all",children:["Add ",o.length," Exercises"]})})]})},Ek=()=>{const a=an(),[n]=lw(),i=n.get("mode")||"live",{user_id:s}=Cn(),{activeWorkout:o,activeLogs:c}=Hh(),[p,g]=R.useState(0),[v,b]=R.useState(null),[S,j]=R.useState(!1),[O,A]=R.useState(!1),[B,F]=R.useState(""),[G,ie]=R.useState(null),I=ts.getISTDate(),[V]=I.split("T"),me=I.split("T")[1].substring(0,5),[Ae,ce]=R.useState(V),[ae,Me]=R.useState(me),[He,mt]=R.useState(me),gt=R.useMemo(()=>{const de=c.filter(K=>K.completed===1),Ne=de.reduce((K,k)=>K+(k.weight||0)*(k.reps||0),0),Ke=de.reduce((K,k)=>K+(k.reps||0),0);return{volume:Ne,sets:de.length,reps:Ke}},[c]),xt=de=>{"vibrate"in navigator&&navigator.vibrate(de)},Qt=de=>{const Ne=de==="heavy"?3e3:0,Ke=Date.now()+Ne,K={startVelocity:30,spread:360,ticks:60,zIndex:600};if(de==="light")Fy({...K,particleCount:80,origin:{y:.6}});else{const k=setInterval(()=>{if(Ke-Date.now()<=0)return clearInterval(k);Fy({...K,particleCount:40,origin:{x:Math.random(),y:Math.random()-.2}})},250)}},jn=()=>{const de=new(window.AudioContext||window.webkitAudioContext),Ne=de.createOscillator();Ne.type="sine",Ne.frequency.setValueAtTime(880,de.currentTime),Ne.connect(de.destination),Ne.start(),Ne.stop(de.currentTime+.2),xt([150,50,150])};R.useEffect(()=>{if(o&&i==="live"){const de=new Date(o.start_time).getTime(),Ne=setInterval(()=>{const Ke=new Date(ts.getISTDate()).getTime();g(Math.floor((Ke-de)/1e3))},1e3);return()=>clearInterval(Ne)}},[o,i]),R.useEffect(()=>{let de;return v!==null&&v>0?de=setInterval(()=>{b(Ne=>Ne!==null&&Ne>0?Ne-1:null)},1e3):v===0&&(jn(),b(null)),()=>clearInterval(de)},[v]);const Kt=R.useMemo(()=>{const de={};return[...c].sort((Ke,K)=>Ke.exercise_order!==K.exercise_order?Ke.exercise_order-K.exercise_order:Ke.set_number-K.set_number).forEach(Ke=>{de[Ke.exercise_id]||(de[Ke.exercise_id]=[]),de[Ke.exercise_id].push(Ke)}),de},[c]),se=async()=>{let de;i==="past"&&(de={start:`${Ae}T${ae}:00`,end:`${Ae}T${He}:00`}),await Tt.finishWorkout(o.id,B,de),a("/dashboard")};return!o&&i==="past"?f.jsx(ta,{title:"Log Previous",children:f.jsx("div",{className:"flex-1 flex flex-col justify-center items-center py-10 px-6",children:f.jsxs("div",{className:"w-full max-w-sm bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] space-y-6 shadow-2xl",children:[f.jsx("h2",{className:"text-xl font-black uppercase italic text-white text-center tracking-tight",children:"Manual Log"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("input",{type:"date",value:Ae,onChange:de=>ce(de.target.value),className:"w-full bg-black border border-slate-800 p-4 rounded-2xl text-white font-black outline-none"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[7px] text-slate-500 uppercase font-black ml-2",children:"Start Time"}),f.jsx("input",{type:"time",value:ae,onChange:de=>Me(de.target.value),className:"w-full bg-black border border-slate-800 p-4 rounded-2xl text-white font-black outline-none"})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[7px] text-slate-500 uppercase font-black ml-2",children:"End Time"}),f.jsx("input",{type:"time",value:He,onChange:de=>mt(de.target.value),className:"w-full bg-black border border-slate-800 p-4 rounded-2xl text-white font-black outline-none"})]})]})]}),f.jsxs("button",{onClick:()=>s&&Tt.startNewWorkout(s),className:"w-full py-5 bg-[var(--brand-primary)] text-black rounded-3xl font-black uppercase italic tracking-widest flex items-center justify-center gap-2 active:scale-95 shadow-xl transition-all",children:[f.jsx(Dc,{size:18,fill:"currentColor"})," Start Entry"]})]})})}):o?f.jsxs(ta,{title:i==="live"?"Live session":"Past session",rightElement:f.jsxs("div",{className:"flex gap-4 items-center",children:[f.jsx("button",{onClick:()=>Tt.discardWorkout(o.id).then(()=>a("/dashboard")),className:"text-red-500/50 active:scale-90 transition-all",children:f.jsx(Qo,{size:18})}),f.jsx("button",{onClick:()=>{A(!0),Qt("heavy"),xt([100,50,100,50,400])},className:"bg-[var(--brand-primary)] text-black px-4 py-1.5 rounded-lg text-[10px] font-black uppercase italic active:scale-95 shadow-lg",children:"Finish"})]}),children:[f.jsxs("div",{className:"flex flex-col gap-6 pb-48",children:[f.jsx("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-[2.2rem]",children:f.jsxs("div",{className:"flex justify-between items-center px-2",children:[f.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase italic tracking-widest",children:i==="live"?"Duration":"Status"}),f.jsx("div",{className:"text-2xl font-black italic text-[var(--brand-primary)] tabular-nums flex items-center gap-2",children:i==="live"?f.jsxs(f.Fragment,{children:[f.jsx(Ic,{size:18,className:"animate-pulse"}),Math.floor(p/60),"m ",p%60,"s"]}):f.jsx("span",{className:"text-sm uppercase tracking-widest",children:"Manual Entry"})})]})}),f.jsx("div",{className:"space-y-10",children:Object.entries(Kt).map(([de,Ne])=>f.jsx(Nk,{exerciseId:de,sets:Ne,user_id:s,onRest:()=>i==="live"&&b(60),activeWorkoutId:o.id,onPR:ie,fireConfetti:()=>Qt("light"),triggerHaptic:xt,onRemove:()=>Tt.deleteExercise(o.id,de)},de))})]}),S&&f.jsx(kk,{onClose:()=>j(!1),onAdd:de=>{Tt.addExercisesToActive(o.id,de),j(!1),xt(50)}}),G&&f.jsx("div",{className:"fixed inset-0 z-[500] flex items-center justify-center p-6 bg-black/60 backdrop-blur-md",children:f.jsxs("div",{className:"bg-slate-900 border-2 border-[var(--brand-primary)] rounded-[3rem] p-10 flex flex-col items-center text-center shadow-2xl animate-in zoom-in duration-300",children:[f.jsx("div",{className:"w-20 h-20 bg-[var(--brand-primary)] rounded-full flex items-center justify-center mb-6 animate-bounce shadow-xl",children:f.jsx(ss,{size:40,className:"text-black"})}),f.jsx("h2",{className:"text-2xl font-black uppercase italic text-white mb-2",children:"New Record!"}),f.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase mb-4",children:G.name}),f.jsxs("div",{className:"text-5xl font-black italic text-[var(--brand-primary)] mb-8",children:[G.weight," KG"]}),f.jsx("button",{onClick:()=>ie(null),className:"px-8 py-3 bg-white text-black rounded-2xl font-black uppercase italic text-xs",children:"Awesome"})]})}),O&&f.jsx("div",{className:"fixed inset-0 z-[400] bg-black/95 flex items-end justify-center p-4",children:f.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-slate-800 rounded-[3.5rem] p-8 animate-in slide-in-from-bottom duration-500 shadow-2xl",children:[f.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[f.jsx("div",{className:"w-20 h-20 bg-[var(--brand-primary)] rounded-full flex items-center justify-center mb-4",children:f.jsx(ss,{size:36,className:"text-black"})}),f.jsx("h2",{className:"text-2xl font-black uppercase italic text-white tracking-tight",children:"Workout Complete!"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-8",children:[f.jsxs("div",{className:"bg-black/40 p-4 rounded-3xl border border-slate-800/50 flex flex-col items-center",children:[f.jsx($h,{size:14,className:"text-[var(--brand-primary)] mb-2"}),f.jsx("span",{className:"text-lg font-black text-white italic leading-none",children:gt.volume}),f.jsx("span",{className:"text-[7px] text-slate-500 uppercase font-black mt-2",children:"Volume"})]}),f.jsxs("div",{className:"bg-black/40 p-4 rounded-3xl border border-slate-800/50 flex flex-col items-center",children:[f.jsx(Vv,{size:14,className:"text-[var(--brand-primary)] mb-2"}),f.jsx("span",{className:"text-lg font-black text-white italic leading-none",children:gt.sets}),f.jsx("span",{className:"text-[7px] text-slate-500 uppercase font-black mt-2",children:"Sets"})]}),f.jsxs("div",{className:"bg-black/40 p-4 rounded-3xl border border-slate-800/50 flex flex-col items-center",children:[f.jsx(Hv,{size:14,className:"text-[var(--brand-primary)] mb-2"}),f.jsx("span",{className:"text-lg font-black text-white italic leading-none",children:gt.reps}),f.jsx("span",{className:"text-[7px] text-slate-500 uppercase font-black mt-2",children:"Reps"})]})]}),f.jsx("textarea",{value:B,onChange:de=>F(de.target.value),placeholder:"How did it feel?",className:"w-full bg-black border border-slate-800 rounded-3xl p-5 text-xs text-white h-24 mb-8 outline-none focus:border-[var(--brand-primary)] transition-all"}),f.jsx("button",{onClick:se,className:"w-full py-5 bg-[var(--brand-primary)] text-black rounded-[2rem] font-black uppercase italic shadow-2xl active:scale-95 transition-all",children:"Save and Exit"})]})}),v!==null&&f.jsxs("div",{className:"fixed bottom-28 left-4 right-4 bg-[var(--brand-primary)] rounded-2xl p-4 flex justify-between items-center shadow-2xl z-50 animate-in slide-in-from-bottom",children:[f.jsxs("div",{className:"flex items-center gap-4 text-black font-black italic",children:[f.jsxs("div",{className:"flex items-center bg-black/20 rounded-xl overflow-hidden",children:[f.jsx("button",{onClick:()=>b(Math.max(0,v-15)),className:"px-3 py-2",children:f.jsx(Ar,{size:16})}),f.jsxs("div",{className:"w-14 h-10 bg-black rounded-xl flex items-center justify-center text-[var(--brand-primary)] text-lg font-black tabular-nums",children:[v,"s"]}),f.jsx("button",{onClick:()=>b(v+15),className:"px-3 py-2",children:f.jsx(yi,{size:16})})]}),f.jsx("span",{className:"text-[10px] uppercase tracking-tighter",children:"Resting"})]}),f.jsx("button",{onClick:()=>b(null),className:"p-2 bg-black/10 rounded-full text-black",children:f.jsx(Gc,{size:16})})]}),f.jsx("div",{className:"fixed bottom-10 right-6 z-40",children:f.jsx("button",{onClick:()=>{j(!0),xt(30)},className:"w-14 h-14 bg-white text-black rounded-full flex items-center justify-center shadow-2xl active:scale-90 transition-all",children:f.jsx(yi,{size:28})})})]}):null},Nk=({exerciseId:a,sets:n,user_id:i,onRest:s,activeWorkoutId:o,onPR:c,fireConfetti:p,triggerHaptic:g,onRemove:v})=>{const[b,S]=R.useState(!1),j=pl(()=>ge.exercises.get(a));return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsxs("div",{className:"flex justify-between items-center group",children:[f.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>S(!b),children:[f.jsx("h3",{className:"text-sm font-black uppercase italic text-[var(--brand-primary)]",children:j?.name||"Loading..."}),b?f.jsx(Sl,{size:14,className:"text-slate-600"}):f.jsx(E2,{size:14,className:"text-slate-600"})]}),f.jsx("button",{onClick:v,className:"text-slate-700 hover:text-red-500 active:scale-90 transition-all p-1",children:f.jsx(Qo,{size:16})})]}),!b&&f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"grid grid-cols-[30px_1fr_1fr_55px] gap-2 px-1 mb-2 text-center text-[7px] font-black text-slate-600 uppercase tracking-widest",children:[f.jsx("span",{children:"Set"}),f.jsx("span",{children:"Weight"}),f.jsx("span",{children:"Reps"}),f.jsx("span",{className:"text-right mr-1",children:"Done"})]}),n.map((O,A)=>f.jsx(Tk,{set:O,index:A,exercise:j,user_id:i,onRest:s,onPR:c,fireConfetti:p,triggerHaptic:g},O.id)),f.jsx("button",{onClick:()=>Tt.addSet(o,a,n.length+1),className:"w-full py-4 bg-slate-900/40 border border-dashed border-slate-800 rounded-2xl text-[9px] font-black uppercase text-slate-500 mt-2 hover:bg-slate-900 transition-all",children:"+ Add Set"})]})]})},Tk=({set:a,index:n,exercise:i,user_id:s,onRest:o,onPR:c,fireConfetti:p,triggerHaptic:g})=>{const[v,b]=R.useState(!1),[S,j]=R.useState(null),O=async()=>{const A=a.completed===1?0:1;g(30),await Tt.updateLog({...a,completed:A}),A===1&&(o(),i?.weight&&a.weight>0&&await Tt.checkPR(s,i.id,a.weight)&&(p(),g([100,50,100,50,300]),c({name:i.name,weight:a.weight})))};return f.jsxs("div",{onTouchStart:A=>j(A.targetTouches[0].clientX),onTouchEnd:A=>{S&&S-A.changedTouches[0].clientX>70&&(b(!0),g(50),setTimeout(()=>Tt.deleteSet(a.id),300))},className:`grid grid-cols-[30px_1fr_1fr_55px] gap-2 items-center py-2.5 rounded-2xl transition-all duration-300 ${v?"opacity-0 -translate-x-full scale-95":"scale-100 opacity-100"} ${a.completed===1?"bg-green-500/10":"bg-transparent"}`,children:[f.jsx("span",{className:"text-[11px] font-black text-slate-500 text-center italic",children:n+1}),f.jsxs("div",{className:"flex items-center bg-slate-900 rounded-xl border border-slate-800 min-h-[52px]",children:[f.jsx("button",{onClick:()=>Tt.updateLog({...a,weight:Math.max(0,(a.weight||0)-2.5)}),className:"px-3 h-full text-slate-500",children:f.jsx(Ar,{size:14})}),f.jsx("input",{type:"number",step:"any",inputMode:"decimal",value:a.weight||"",onChange:A=>Tt.updateLog({...a,weight:parseFloat(A.target.value)||0}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none"}),f.jsx("button",{onClick:()=>Tt.updateLog({...a,weight:(a.weight||0)+5}),className:"px-3 h-full text-slate-500",children:f.jsx(yi,{size:14})})]}),f.jsxs("div",{className:"flex items-center bg-slate-900 rounded-xl border border-slate-800 min-h-[52px]",children:[f.jsx("button",{onClick:()=>Tt.updateLog({...a,reps:Math.max(0,(a.reps||0)-1)}),className:"px-3 h-full text-slate-500",children:f.jsx(Ar,{size:14})}),f.jsx("input",{type:"number",step:"any",inputMode:"decimal",value:a.reps||"",onChange:A=>Tt.updateLog({...a,reps:parseInt(A.target.value)||0}),className:"w-full bg-transparent text-center text-[13px] font-black text-white outline-none"}),f.jsx("button",{onClick:()=>Tt.updateLog({...a,reps:(a.reps||0)+1}),className:"px-3 h-full text-slate-500",children:f.jsx(yi,{size:14})})]}),f.jsx("button",{onClick:O,className:`w-11 h-11 rounded-2xl flex items-center justify-center mx-auto transition-all active:scale-90 ${a.completed===1?"bg-green-500 text-black shadow-[0_0_20px_rgba(34,197,94,0.4)]":"bg-slate-800 text-slate-700"}`,children:f.jsx(_l,{size:20,strokeWidth:4})})]})},Ok=()=>{const{user_id:a,athlete:n,loading:i}=Cn();return i?f.jsx("div",{className:"h-screen w-full bg-[var(--bg-main)] flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 border-4 border-[var(--brand-primary)] border-t-transparent rounded-full animate-spin"}),f.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-muted)] animate-pulse",children:"Establishing Link..."})]})}):f.jsxs(Cx,{children:[!a&&f.jsxs(f.Fragment,{children:[f.jsx($t,{path:"/login",element:f.jsx(r2,{})}),f.jsx($t,{path:"*",element:f.jsx(Wf,{to:"/login",replace:!0})})]}),a&&!n&&f.jsxs(f.Fragment,{children:[f.jsx($t,{path:"/onboarding",element:f.jsx(Kj,{})}),f.jsx($t,{path:"*",element:f.jsx(Wf,{to:"/onboarding",replace:!0})})]}),a&&n&&f.jsxs($t,{element:f.jsx(ak,{}),children:[f.jsxs($t,{element:f.jsx(tk,{}),children:[f.jsx($t,{path:"/dashboard",element:f.jsx(Fj,{})}),f.jsx($t,{path:"/profile",element:f.jsx(rk,{})}),f.jsx($t,{path:"/library",element:f.jsx(pk,{})})]}),f.jsx($t,{path:"/profile/details",element:f.jsx(ik,{})}),f.jsx($t,{path:"/profile/metrics",element:f.jsx(sk,{})}),f.jsx($t,{path:"/profile/level",element:f.jsx(uk,{})}),f.jsx($t,{path:"/profile/theme",element:f.jsx(dk,{})}),f.jsx($t,{path:"/library/muscles/add",element:f.jsx(gk,{})}),f.jsx($t,{path:"/library/muscles/:id",element:f.jsx(vk,{})}),f.jsx($t,{path:"/library/exercises/add",element:f.jsx(bk,{})}),f.jsx($t,{path:"/library/exercises/:id",element:f.jsx(wk,{})}),f.jsx($t,{path:"/library/routines/add",element:f.jsx(_k,{})}),f.jsx($t,{path:"/library/routines/:id",element:f.jsx(Sk,{})}),f.jsx($t,{path:"/workout/active",element:f.jsx(Ek,{})}),f.jsx($t,{path:"*",element:f.jsx(Wf,{to:"/dashboard",replace:!0})})]})]})};function Ak(){const{user_id:a}=Cn();R.useEffect(()=>{a&&(yl.watchConnection(),yl.reconcile())},[a]);function n(){R.useEffect(()=>{let i=0,s=0;const o=p=>{i=p.touches[0].clientX,s=p.touches[0].clientY},c=p=>{const g=Math.abs(p.touches[0].clientX-i),v=Math.abs(p.touches[0].clientY-s);g>v&&g>10&&(i<30||i>window.innerWidth-30)&&p.cancelable&&p.preventDefault()};return document.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),()=>{document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",c)}},[])}return n(),f.jsx("div",{className:"app-root min-h-screen bg-[var(--bg-main)] text-[var(--text-main)] overflow-x-hidden selection:bg-[var(--brand-primary)] selection:text-[var(--bg-main)]",children:f.jsx(Ok,{})})}const Ck="modulepreload",Rk=function(a){return"/fitnex/"+a},Jy={},Mk=function(n,i,s){let o=Promise.resolve();if(i&&i.length>0){let b=function(S){return Promise.all(S.map(j=>Promise.resolve(j).then(O=>({status:"fulfilled",value:O}),O=>({status:"rejected",reason:O}))))};var p=b;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=g?.nonce||g?.getAttribute("nonce");o=b(i.map(S=>{if(S=Rk(S),S in Jy)return;Jy[S]=!0;const j=S.endsWith(".css"),O=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${O}`))return;const A=document.createElement("link");if(A.rel=j?"stylesheet":Ck,j||(A.as="script"),A.crossOrigin="",A.href=S,v&&A.setAttribute("nonce",v),document.head.appendChild(A),j)return new Promise((B,F)=>{A.addEventListener("load",B),A.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${S}`)))})}))}function c(g){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g}return o.then(g=>{for(const v of g||[])v.status==="rejected"&&c(v.reason);return n().catch(c)})};function Dk(a={}){const{immediate:n=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:o,onRegisteredSW:c,onRegisterError:p}=a;let g,v;const b=async(j=!0)=>{await v};async function S(){if("serviceWorker"in navigator){if(g=await Mk(async()=>{const{Workbox:j}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:j}},[]).then(({Workbox:j})=>new j("/fitnex/sw.js",{scope:"/fitnex/",type:"classic"})).catch(j=>{p?.(j)}),!g)return;g.addEventListener("activated",j=>{(j.isUpdate||j.isExternal)&&window.location.reload()}),g.addEventListener("installed",j=>{j.isUpdate||s?.()}),g.register({immediate:n}).then(j=>{c?c("/fitnex/sw.js",j):o?.(j)}).catch(j=>{p?.(j)})}}return v=S(),b}const zk=R.createContext(void 0),Uk=({children:a})=>{const[n,i]=R.useState("dark"),[s,o]=R.useState("#ff7f50");R.useEffect(()=>{(async()=>{const S=await ge.app_settings.get("global");S?(c(S.theme),p(S.brandColor),i(S.theme),o(S.brandColor)):(c("dark"),p("#ff7f50"))})()},[]);const c=b=>{const S=window.document.documentElement;b==="light"?S.classList.add("light-theme"):S.classList.remove("light-theme")},p=b=>{document.documentElement.style.setProperty("--brand-primary",b)},g=async b=>{i(b),c(b),await ge.app_settings.put({id:"global",theme:b,brandColor:s,unitSystem:"metric"})},v=async b=>{o(b),p(b),await ge.app_settings.put({id:"global",theme:n,brandColor:b,unitSystem:"metric"})};return f.jsx(zk.Provider,{value:{theme:n,brandColor:s,setTheme:g,setBrandColor:v},children:a})};function Ih(){const a=window.visualViewport?.height||window.innerHeight;document.documentElement.style.setProperty("--app-height",`${a}px`)}Ih();window.visualViewport?.addEventListener("resize",Ih);window.addEventListener("orientationchange",Ih);const Lk=Dk({immediate:!0,onNeedRefresh(){Lk(!0)},onOfflineReady(){console.log("App ready offline")}});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});R0.createRoot(document.getElementById("root")).render(f.jsx(ol.StrictMode,{children:f.jsx(nw,{basename:"/fitnex",children:f.jsx(a2,{children:f.jsx(Uk,{children:f.jsx(Yj,{children:f.jsx(Ak,{})})})})})}));
